/*!
* 2018 FORESIGHT
*/
(function(){var n=window.PP||{},u,t,i,f,r;(function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Id="",this._Name="",this._Key=0,this._Class=0,this._ParentKey=0,this._IsShortcut=!1,this._IsLink=!1,this._Visible=!1,this._HasChildren=!1,this._Metadata=null,this._TimeStamp=null},i.prototype._cBM=function(n){this._Class=n.c,this._Id=n.i,this._Name=n.n,this._Key=n.k,this._ParentKey=n.p,this._HasChildren=!!n.h,this._IsLink=n["@isLink"],this._IsShortcut=n["@isShortcut"],this._TimeStamp=n["@ts"]},i.prototype._bNi=function(t){t.cls&&(this._Class=t.cls.k),n.Object.prototype.setId.call(this,t.id),this._Name=t.n,this._Visible=t.vis,this._Key=t.k},i.prototype._iO=function(n){n.cls||n.id?this._bNi(n):this._cBM(n)},i.prototype.fillDesc=function(){return this._iO.apply(this,arguments)},i.prototype.getState=function(){var n={i:this._Id,n:this._Name,k:this._Key,c:this._Class,p:this._ParentKey,h:this._HasChildren};return n["@isLink"]=this._IsLink,n["@isShortcut"]=this._IsShortcut,n["@ts"]=this._TimeStamp,n},i.prototype.getName=function(){return this._Name},i.prototype.getKey=function(){return this._Key},i.prototype.getParentKey=function(){return this._ParentKey},i.prototype.getClass=function(){return this._Class},i.prototype.getIsShortcut=function(){return this._IsShortcut},i.prototype.getHasChildren=function(){return this._HasChildren},i.prototype.getVisible=function(){return this._Visible},i.prototype.getIsLink=function(){return this._IsLink},i.prototype.getMetadata=function(){return this._Metadata},i.prototype.getTimeStamp=function(){return this._TimeStamp},i.prototype.setMetadata=function(n){this._Metadata=n},i.prototype.setName=function(n){this._Name=n},i.prototype.setKey=function(n){this._Key=n},i.prototype.setTimeStamp=function(n){this._TimeStamp=n},i.prototype.setClass=function(n){this._Class=n},i}(n.Object);t.Descriptor=i})(t=n.Mb||(n.Mb={}))})(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i,r;(function(n){n[n.All=1]="All",n[n.Read=2]="Read",n[n.Write=4]="Write",n[n.Access=8]="Access",n[n.Delete=16]="Delete",n[n.ReadDescr=256]="ReadDescr",n[n.WriteDescr=512]="WriteDescr",n[n.ReadPars=1024]="ReadPars",n[n.WritePars=2048]="WritePars",n[n.ReadBody=4096]="ReadBody",n[n.WriteBody=8192]="WriteBody",n[n.Print=16384]="Print",n[n.ExportData=32768]="ExportData",n[n.ImportData=65536]="ImportData",n[n.Create=131072]="Create",n[n.OpenConnection=1048576]="OpenConnection",n[n.SelectRows=1048576]="SelectRows",n[n.InsertRows=2097152]="InsertRows",n[n.UpdateRows=4194304]="UpdateRows",n[n.DeleteRows=8388608]="DeleteRows",n[n.Grant=16777216]="Grant",n[n.Alter=33554432]="Alter",n[n.CubeReadData=1048576]="CubeReadData",n[n.CubeSaveData=2097152]="CubeSaveData",n[n.CCubeReadFormulas=4194304]="CCubeReadFormulas",n[n.CCubeSaveFormulas=8388608]="CCubeSaveFormulas",n[n.UserClsOperation0=1048576]="UserClsOperation0",n[n.UserClsOperation1=2097152]="UserClsOperation1",n[n.UserClsOperation2=4194304]="UserClsOperation2",n[n.UserClsOperation3=8388608]="UserClsOperation3",n[n.UserClsOperation4=16777216]="UserClsOperation4",n[n.UserClsOperation5=33554432]="UserClsOperation5",n[n.UserClsOperation6=67108864]="UserClsOperation6",n[n.UserClsOperation7=134217728]="UserClsOperation7",n[n.UserClsOperation8=268435456]="UserClsOperation8",n[n.UserClsOperation9=536870912]="UserClsOperation9",n[n.UserClsOperation10=1073741824]="UserClsOperation10",n[n.UserClsOperation11=-2147483648]="UserClsOperation11",n[n.ReadElements=1048576]="ReadElements",n[n.UpdateElements=2097152]="UpdateElements",n[n.InsertElements=4194304]="InsertElements",n[n.DeleteElements=8388608]="DeleteElements",n[n.AccessElements=16777216]="AccessElements",n[n.MExecute=1048576]="MExecute",n[n.Execute=1048576]="Execute"})(i=t.MBOPredefinedRights||(t.MBOPredefinedRights={})),t.AGGREGATED_RIGHTS=[{right:i.All,consistOf:[i.Read,i.Write,i.Access,i.Delete,i.ReadDescr,i.WriteDescr,i.ReadPars,i.WritePars,i.ReadBody,i.WriteBody,i.Print,i.ExportData,i.ImportData,i.Create,i.OpenConnection,i.SelectRows,i.InsertRows,i.UpdateRows,i.DeleteRows,i.Grant,i.Alter,i.CubeReadData,i.CubeSaveData,i.ReadElements,i.UpdateElements,i.InsertElements,i.DeleteElements,i.AccessElements,i.MExecute,i.Execute]},{right:i.Read,consistOf:[i.ReadBody,i.ReadDescr,i.ReadElements,i.ReadPars,i.Print,i.ExportData]},{right:i.Write,consistOf:[i.WriteBody,i.WriteDescr,i.WritePars,i.ImportData,i.Create]}],r=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype._e=function(){t.prototype._e.call(this),this._EffectiveMask=0,this._AllowRead=!1,this._AllowWrite=!1},r.prototype._initFields=function(i){var u=n.extend({},i),r,f;for(r in i)n.isFunction(r)||(f=r[0].toUpperCase()+r.substr(1),n.Mb.Security.OdRights.prototype["get"+f]&&(u[f]=i[r],delete u[r]));t.prototype._initFields.call(this,u)},r.prototype.getEffectiveMask=function(){return this._EffectiveMask},r.prototype.getAllowReadDescr=function(){return this.getAllowOperation(i.ReadDescr)},r.prototype.getAllowWriteDescr=function(){return this.getAllowOperation(i.WriteDescr)},r.prototype.getAllowRead=function(){return this._AllowRead},r.prototype.getAllowWrite=function(){return this._AllowWrite},r.prototype.getAllowExport=function(){return this.getAllowOperation(i.ExportData)},r.prototype.getAllowImport=function(){return this.getAllowOperation(i.ImportData)},r.prototype.getAllowPrint=function(){return this.getAllowOperation(i.Print)},r.prototype.getAllowDelete=function(){return this.getAllowOperation(i.Delete)},r.prototype.getAllowCreate=function(){return this.getAllowOperation(i.Create)},r.prototype.getSettings=function(){return{effectiveMask:this._EffectiveMask}},r.prototype.getAllowOperation=function(n){return(this._EffectiveMask&n)>0},r.appendDescRights=function(t){t&&t.effectiveRights&&(n.Mb.Security.OdRights._beD[t.k]=new n.Mb.Security.OdRights(t.effectiveRights))},r.appendEffectiveRights=function(t,i){n.Mb.Security.OdRights._beD[t]=new n.Mb.Security.OdRights(i)},r.getEffectiveRights=function(t){return n.Mb.Security.OdRights._beD[t]},r}(n.Object),r._beD={},t.OdRights=r})(i=t.Security||(t.Security={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(n){var t,i,r,u,f,e,o,s,h,c,l,a,v,y;n.NULL={"@nil":!0},function(n){n[n.KE_CLASS_FOLDER=0]="KE_CLASS_FOLDER",n[n.KE_CLASS_SPECIALOBJECTS=1]="KE_CLASS_SPECIALOBJECTS",n[n.KE_CLASS_METABASEUPDATEOBJECT=2]="KE_CLASS_METABASEUPDATEOBJECT",n[n.KE_CLASS_SHORTCUT_AUDIT=16]="KE_CLASS_SHORTCUT_AUDIT",n[n.KE_CLASS_DATABASE=513]="KE_CLASS_DATABASE",n[n.KE_CLASS_TABLE=769]="KE_CLASS_TABLE",n[n.KE_CLASS_QUERY=770]="KE_CLASS_QUERY",n[n.KE_CLASS_VIEW=771]="KE_CLASS_VIEW",n[n.KE_CLASS_EXCEL_DS=772]="KE_CLASS_EXCEL_DS",n[n.KE_CLASS_DBF_DS=773]="KE_CLASS_DBF_DS",n[n.KE_CLASS_ACCESS_DS=774]="KE_CLASS_ACCESS_DS",n[n.KE_CLASS_TXT_DS=775]="KE_CLASS_TXT_DS",n[n.KE_CLASS_ODBC_DS=776]="KE_CLASS_ODBC_DS",n[n.KE_CLASS_LOG=777]="KE_CLASS_LOG",n[n.KE_CLASS_EXTERNTABLE=778]="KE_CLASS_EXTERNTABLE",n[n.KE_CLASS_EXTERNVIEW=779]="KE_CLASS_EXTERNVIEW",n[n.KE_CLASS_SEQUENCE=780]="KE_CLASS_SEQUENCE",n[n.KE_CLASS_ATTRIBUTESDIM=1024]="KE_CLASS_ATTRIBUTESDIM",n[n.KE_CLASS_STDDIM=1025]="KE_CLASS_STDDIM",n[n.KE_CLASS_CLNDIM=1026]="KE_CLASS_CLNDIM",n[n.KE_CLASS_USERDIM=1027]="KE_CLASS_USERDIM",n[n.KE_CLASS_CUSTOMDIM=1028]="KE_CLASS_CUSTOMDIM",n[n.KE_CLASS_DIMELEMENTGROUP=1029]="KE_CLASS_DIMELEMENTGROUP",n[n.KE_CLASS_DIMSELECTIONSCHEMA=1030]="KE_CLASS_DIMSELECTIONSCHEMA",n[n.KE_CLASS_ADOMDDIM=1031]="KE_CLASS_ADOMDDIM",n[n.KE_CLASS_MSSCENARIODIM=1032]="KE_CLASS_MSSCENARIODIM",n[n.KE_CLASS_AUTOCUBEUNITSDIM=1033]="KE_CLASS_AUTOCUBEUNITSDIM",n[n.KE_CLASS_RUBRICATORREVISIONSDIM=1034]="KE_CLASS_RUBRICATORREVISIONSDIM",n[n.KE_CLASS_COMPOUNDDIM=1035]="KE_CLASS_COMPOUNDDIM",n[n.KE_CLASS_COMPOUNDCLNDIM=1036]="KE_CLASS_COMPOUNDCLNDIM",n[n.KE_CLASS_VALIDATIONDIM=1037]="KE_CLASS_VALIDATIONDIM",n[n.KE_CLASS_RUBRICATORCALENDARLEVELSDIM=1038]="KE_CLASS_RUBRICATORCALENDARLEVELSDIM",n[n.KE_CLASS_COMPOUNDSIDEDIM=1044]="KE_CLASS_COMPOUNDSIDEDIM",n[n.KE_CLASS_STDCUBE=1281]="KE_CLASS_STDCUBE",n[n.KE_CLASS_CALCCUBE=1282]="KE_CLASS_CALCCUBE",n[n.KE_CLASS_CUBEVIEW=1283]="KE_CLASS_CUBEVIEW",n[n.KE_CLASS_VIRTUALCUBE=1284]="KE_CLASS_VIRTUALCUBE",n[n.KE_CLASS_CUBELINK=1285]="KE_CLASS_CUBELINK",n[n.KE_CLASS_ADOMDCUBE=1286]="KE_CLASS_ADOMDCUBE",n[n.KE_CLASS_AUTOCUBE=1287]="KE_CLASS_AUTOCUBE",n[n.KE_CLASS_CUBELOADER=1289]="KE_CLASS_CUBELOADER",n[n.KE_CLASS_CUBEMETALOADER=1290]="KE_CLASS_CUBEMETALOADER",n[n.KE_CLASS_SUBJECTAREA=1291]="KE_CLASS_SUBJECTAREA",n[n.KE_CLASS_INFOCUBE=1292]="KE_CLASS_INFOCUBE",n[n.KE_CLASS_MODULE=1537]="KE_CLASS_MODULE",n[n.KE_CLASS_FORM=1538]="KE_CLASS_FORM",n[n.KE_CLASS_ASSEMBLY=1539]="KE_CLASS_ASSEMBLY",n[n.KE_CLASS_WORKSPACE=1793]="KE_CLASS_WORKSPACE",n[n.KE_CLASS_PIVOT=2049]="KE_CLASS_PIVOT",n[n.KE_CLASS_EXPRESSREPORT=2561]="KE_CLASS_EXPRESSREPORT",n[n.KE_CLASS_PROCEDURALREPORT=2562]="KE_CLASS_PROCEDURALREPORT",n[n.KE_CLASS_BUSRUB=2817]="KE_CLASS_BUSRUB",n[n.KE_CLASS_BUSRUBCON=2818]="KE_CLASS_BUSRUBCON",n[n.KE_CLASS_BUSRUBFACT=2819]="KE_CLASS_BUSRUBFACT",n[n.KE_CLASS_BUSRUBCOMPOSITEFACT=2820]="KE_CLASS_BUSRUBCOMPOSITEFACT",n[n.KE_CLASS_BUSNOTE=2821]="KE_CLASS_BUSNOTE",n[n.KE_CLASS_RUBRICATOR=2822]="KE_CLASS_RUBRICATOR",n[n.KE_CLASS_RUBRICATORFACTOR=2823]="KE_CLASS_RUBRICATORFACTOR",n[n.KE_CLASS_IMPORTREQUEST=2824]="KE_CLASS_IMPORTREQUEST",n[n.KE_CLASS_EXPORTREQUEST=2825]="KE_CLASS_EXPORTREQUEST",n[n.KE_CLASS_RUBRICATORSEGMENT=2826]="KE_CLASS_RUBRICATORSEGMENT",n[n.KE_CLASS_WORKBOOK=2827]="KE_CLASS_WORKBOOK",n[n.KE_CLASS_CUBEMETAUPDATE=2828]="KE_CLASS_CUBEMETAUPDATE",n[n.KE_CLASS_APPSERVER=3073]="KE_CLASS_APPSERVER",n[n.KE_CLASS_METADICTIONARY=3074]="KE_CLASS_METADICTIONARY",n[n.KE_CLASS_METARECORD=3075]="KE_CLASS_METARECORD",n[n.KE_CLASS_METADICTIONARYRDS=3076]="KE_CLASS_METADICTIONARYRDS",n[n.KE_CLASS_METADICTIONARYCOMPRDS=3077]="KE_CLASS_METADICTIONARYCOMPRDS",n[n.KE_CLASS_DOCUMENT=3329]="KE_CLASS_DOCUMENT",n[n.KE_CLASS_TOPOBASE=3330]="KE_CLASS_TOPOBASE",n[n.KE_CLASS_RESOURCEOBJECT=3331]="KE_CLASS_RESOURCEOBJECT",n[n.KE_CLASS_STYLESHEET=3332]="KE_CLASS_STYLESHEET",n[n.KE_CLASS_WEBAPPLICATION=3585]="KE_CLASS_WEBAPPLICATION",n[n.KE_CLASS_WEBHYPERLINK=3586]="KE_CLASS_WEBHYPERLINK",n[n.KE_CLASS_WEBTHIRDMETABASE=3587]="KE_CLASS_WEBTHIRDMETABASE",n[n.KE_CLASS_WEBTHIRDREPORT=3588]="KE_CLASS_WEBTHIRDREPORT",n[n.KE_CLASS_WEBPAGE=3589]="KE_CLASS_WEBPAGE",n[n.KE_CLASS_WEBFORM=3590]="KE_CLASS_WEBFORM",n[n.KE_CLASS_MOBILEAPPLICATION=3591]="KE_CLASS_MOBILEAPPLICATION",n[n.KE_CLASS_SQLCOMMAND=3841]="KE_CLASS_SQLCOMMAND",n[n.KE_CLASS_PROCEDURE=3842]="KE_CLASS_PROCEDURE",n[n.KE_CLASS_MDCALCULATION=3843]="KE_CLASS_MDCALCULATION",n[n.KE_CLASS_ETLTASK=4097]="KE_CLASS_ETLTASK",n[n.KE_CLASS_RDS_DATABASE=4353]="KE_CLASS_RDS_DATABASE",n[n.KE_CLASS_RDS_DICTIONARY=4354]="KE_CLASS_RDS_DICTIONARY",n[n.KE_CLASS_RDS_COMPDICTIONARY=4355]="KE_CLASS_RDS_COMPDICTIONARY",n[n.KE_CLASS_RDS_QUERY=4356]="KE_CLASS_RDS_QUERY",n[n.KE_CLASS_RDS_IMPORTREQUEST=4357]="KE_CLASS_RDS_IMPORTREQUEST",n[n.KE_CLASS_RDS_EXPORTREQUEST=4358]="KE_CLASS_RDS_EXPORTREQUEST",n[n.KE_CLASS_DW_DATABASE=4609]="KE_CLASS_DW_DATABASE",n[n.KE_CLASS_DW_FACT=4610]="KE_CLASS_DW_FACT",n[n.KE_CLASS_DW_FACTCUBE=4611]="KE_CLASS_DW_FACTCUBE",n[n.KE_CLASS_DW_REPOSITORYDB=4624]="KE_CLASS_DW_REPOSITORYDB",n[n.KE_CLASS_ADOMD_CATALOG=4865]="KE_CLASS_ADOMD_CATALOG",n[n.KE_CLASS_MODELSPACE=5121]="KE_CLASS_MODELSPACE",n[n.KE_CLASS_MSVARIABLE=5122]="KE_CLASS_MSVARIABLE",n[n.KE_CLASS_MSPROBLEM=5123]="KE_CLASS_MSPROBLEM",n[n.KE_CLASS_MSSCENARIO=5124]="KE_CLASS_MSSCENARIO",n[n.KE_CLASS_MSMODEL=5125]="KE_CLASS_MSMODEL",n[n.KE_CLASS_MSMETAMODEL=5126]="KE_CLASS_MSMETAMODEL",n[n.KE_CLASS_MSMETAMODELCHART=5127]="KE_CLASS_MSMETAMODELCHART",n[n.KE_CLASS_CALCULATIONHISTORY=5128]="KE_CLASS_CALCULATIONHISTORY",n[n.KE_CLASS_VALIDATION=5129]="KE_CLASS_VALIDATION",n[n.KE_CLASS_VALIDATIONFILTER=5130]="KE_CLASS_VALIDATIONFILTER",n[n.KE_CLASS_VALIDATIONGROUP=5131]="KE_CLASS_VALIDATIONGROUP",n[n.KE_CLASS_TASK_EXECUTESUB=5377]="KE_CLASS_TASK_EXECUTESUB",n[n.KE_CLASS_TASK_CONTAINTER=5378]="KE_CLASS_TASK_CONTAINTER",n[n.KE_CLASS_TASK_CALCULATECUBE=5379]="KE_CLASS_TASK_CALCULATECUBE",n[n.KE_CLASS_TASK_CALCULATEREPORT=5380]="KE_CLASS_TASK_CALCULATEREPORT",n[n.KE_CLASS_TASK_EXECUTEETL=5381]="KE_CLASS_TASK_EXECUTEETL",n[n.KE_CLASS_TASK_CALCULATEMODEL=5382]="KE_CLASS_TASK_CALCULATEMODEL",n[n.KE_CLASS_TASK_EXECUTENETMETHOD=5383]="KE_CLASS_TASK_EXECUTENETMETHOD",n[n.KE_CLASS_TASK_CALCULATEMDCALCULATION=5384]="KE_CLASS_TASK_CALCULATEMDCALCULATION",n[n.KE_CLASS_TASK_PUBLISHMOBILEAPP=5385]="KE_CLASS_TASK_PUBLISHMOBILEAPP",n[n.KE_CLASS_TASK_SEARCHENGINE_IMPORT=5388]="KE_CLASS_TASK_SEARCHENGINE_IMPORT",n[n.KE_CLASS_NETMODULE=5633]="KE_CLASS_NETMODULE",n[n.KE_CLASS_NETFORM=5634]="KE_CLASS_NETFORM",n[n.KE_CLASS_NETASSEMBLY=5635]="KE_CLASS_NETASSEMBLY",n[n.KE_CLASS_CUSTOM=5888]="KE_CLASS_CUSTOM",n[n.KE_CLASS_CUSTOM_EXTENDER=5889]="KE_CLASS_CUSTOM_EXTENDER",n[n.KE_CLASS_CUSTOM_CLASS=5890]="KE_CLASS_CUSTOM_CLASS",n[n.KE_CLASS_CUSTOM_OBJECT=5891]="KE_CLASS_CUSTOM_OBJECT",n[n.KE_CLASS_SECURITY=7937]="KE_CLASS_SECURITY",n[n.KE_CLASS_SHAREDPARAMS=3333]="KE_CLASS_SHAREDPARAMS",n[n.KE_CLASS_AUDITLOG=7938]="KE_CLASS_AUDITLOG",n[n.KE_CLASS_METABASELINK=8193]="KE_CLASS_METABASELINK",n[n.KE_ADHOC_REPORT=8448]="KE_ADHOC_REPORT",n[n.KE_ADHOC_DATASOURCES=8449]="KE_ADHOC_DATASOURCES",n[n.KE_ADHOC_THEME=8450]="KE_ADHOC_THEME",n[n.KE_CLASS_SCORECARD=8704]="KE_CLASS_SCORECARD",n[n.KE_CLASS_METRIC=1293]="KE_CLASS_METRIC",n[n.KE_CLASS_TASK_UPDATE_CUBE_CACHE=5386]="KE_CLASS_TASK_UPDATE_CUBE_CACHE",n[n.KE_CLASS_TASK_UPDATE_DIMENSION=5387]="KE_CLASS_TASK_UPDATE_DIMENSION",n[n.KE_CLASS_NAMESPACE_FOLDER=4]="KE_CLASS_NAMESPACE_FOLDER"}(t=n.MetabaseObjectClass||(n.MetabaseObjectClass={})),n.DrillMethod={Down:"Down",Up:"Up",ToFixed:"ToFixed",IntoFixed:"IntoFixed",OutOfFixed:"OutOfFixed",DownThrough:"DownThrough",UpThrough:"UpThrough"},function(n){n[n.Restrict=0]="Restrict",n[n.Down=1]="Down",n[n.Up=2]="Up",n[n.IntoFixed=4]="IntoFixed",n[n.OutOfFixed=8]="OutOfFixed",n[n.DownThrough=16]="DownThrough",n[n.UpThrough=32]="UpThrough"}(i=n.DrillMethodNumber||(n.DrillMethodNumber={})),function(n){n[n.Normal=0]="Normal",n[n.Background=1]="Background",n[n.Delay=2]="Delay"}(r=n.PPServiceMarker||(n.PPServiceMarker={})),n.OrderBy={Asc:"Asc",Desc:"Desc",Default:"Default"},function(n){n[n.NoData=0]="NoData",n[n.String=1]="String",n[n.Integer=2]="Integer",n[n.Float=3]="Float",n[n.DateTime=4]="DateTime",n[n.Blob=5]="Blob",n[n.Boolean=6]="Boolean",n[n.Date=7]="Date",n[n.Decimal=8]="Decimal"}(u=n.DbDataType||(n.DbDataType={})),function(n){n[n.None=0]="None",n[n.Memo=1]="Memo",n[n.Raw=2]="Raw",n[n.RefCur=3]="RefCur"}(f=n.DbDataDomain||(n.DbDataDomain={})),n.ListOperation={None:"None",Get:"Get",Set:"Set",Add:"Add",Remove:"Remove",Change:"Change"},n.BindingUIType={EditBox:"EditBox",IntegerEdit:"IntegerEdit",FloatEdit:"FloatEdit",DecimalEdit:"DecimalEdit",DateTimePicker:"DateTimePicker",TimePicker:"TimePicker",DatePicker:"DatePicker",CheckBox:"CheckBox",TreeCombo:"TreeCombo",ComboBox:"ComboBox",DimCombo:"DimCombo",IdentEdit:"IdentEdit",BooleanCombo:"BooleanCombo",MaskEdit:"MaskEdit",IntegerSlider:"IntegerSlider",FloatSlider:"FloatSlider",DecimalSlider:"DecimalSlider",ListBox:"ListBox"},n.ObjectCopyOperation={CreateNew:"CreateNew",MoveToParent:"MoveToParent",OverwriteExisting:"OverwriteExisting",ChangeCurrent:"ChangeCurrent",NameOrIndent:"NameOrIdent",SharePointShare:"SharePointShare",ShareMobile:"ShareMobile"},n.FindInfoAttribute={None:"None",Name:"Name",Ident:"Ident",Key:"Key",NameOrIndent:"NameOrIdent"},n.ObjectAttribute={Unknown:"Unknown",Name:"Name",Id:"Id",Key:"Key",Timestamp:"Timestamp",ClassId:"ClassId",Descr:"Descr"},n.ExportFormat={MHT:"mht",HTML:"html",XLS:"xls",XLSX:"xlsx",RTF:"rtf",EMF:"emf",PPCube:"ppcube",PDF:"pdf",PPExpress:"ppexpress",PNG:"png",PPTX:"pptx",PPMobile:"ppmobile",PPDashboard:"ppdash",BMP:"bmp",JPG:"jpg",GIF:"gif"},n.OAuthService={Twitter:"Twitter",Google:"Google",Facebook:"Facebook"},n.ResultType={Cube:"Cube",Rubricator:"Rubricator"},n.SourceType={Unknown:"Unknown",Excel:"Excel",ExcelEx:"ExcelEx",OleDb:"OleDb",Access:"Access",Xml:"Xml",Text:"Text",Metabase:"Mb",Unpivot:"Unpivot",Rest:"Rest",Json:"Json"},n.CrossHeaderAction={None:"None",Include:"Include",Exclude:"Exclude"},n.TreeRelation={Unknown:"Unknown",FirstChild:"FirstChild",LastChild:"LastChild",NextSibling:"NextSibling",PrevSibling:"PrevSibling",FirstSibling:"FirstSibling",LastSibling:"LastSibling"},n.DtAuthMethodRest={None:"None",Basic:"Basic",Digest:"Digest",Negotiate:"Negotiate"},n.DtExcelImexMode={Export:"Export",Import:"Import",Linked:"Linked"},n.DtExcelExAutoFillMode={Strings:"Strings",DataRow:"DataRow",Default:"Default"},n.DtXmlFormat={FieldsAsNodes:"FieldsAsNodes",FieldsAsAttributes:"FieldsAsAttributes"},n.DtTextFmtType={Fixed:"Fixed",Delimited:"Delimited"},function(n){n[n.OffOption=0]="OffOption",n[n.OnOption=1]="OnOption",n[n.Undefined=2]="Undefined"}(e=n.TriState||(n.TriState={})),n.GxStringAlignment={Near:"Near",Far:"Far",Center:"Center"},n.GxStringVerticalAlignment={Bottom:"Bottom",Top:"Top",Center:"Center"},function(n){n[n.SelectedCount=0]="SelectedCount",n[n.SelectedNames=1]="SelectedNames"}(o=n.BreadcrumbItemCaptionType||(n.BreadcrumbItemCaptionType={})),function(n){n[n.Data=0]="Data",n[n.Naming=1]="Naming"}(s=n.BISearchMode||(n.BISearchMode={})),n.EtlTaskExecuteCommand={None:"None",Run:"Run",RunAsync:"RunAsync"},n.EtlTaskExecuteState={None:"None",Running:"Running",Finished:"Finished",FinishedWithError:"FinishedWithError"},n.SpecialObjectIndex={None:"None",DefaultTopobase:"DefaultTopobase",DimensionImageList:"DimensionImageList",SharedParams:"SharedParams",CustomExtender:"CustomExtender",Printers:"Printers",RdsDatabase:"RdsDatabase",DefaultDatabase:"DefaultDatabase",DefaultModelSpace:"DefaultModelSpace",DefaultMobileApplication:"DefaultMobileApplication",MetabaseCustomEvents:"MetabaseCustomEvents"},function(n){n[n.MetabaseObject=0]="MetabaseObject",n[n.InternalObject=1]="InternalObject",n[n.Predefined=2]="Predefined"}(h=n.StyleSheetType||(n.StyleSheetType={})),function(n){n[n.NotStarted=0]="NotStarted",n[n.InProgress=1]="InProgress",n[n.Finished=2]="Finished",n[n.Canceled=3]="Canceled"}(c=n.StyleSheetExportStatus||(n.StyleSheetExportStatus={})),n.StyleSheetConflictResolutionType={Replace:"Replace",Skip:"Skip",Add:"Add"},n.TimeUnits={Seconds:"Seconds",Minutes:"Minutes",Hours:"Hours"},n.HieBreadcrumbPropertyType={SelectedItemsChanged:"SelectedItemsChanged",DimSelectionChanged:"DimSelectionChanged",TreeNameAttrChanged:"TreeNameAttrChanged",DimReloaded:"DimReloaded",DimContentRefreshed:"DimContentRefreshed"},n.MetabaseDisplayMode={Names:"Names",Idents:"Idents",Both:"Both"},n.StyleOperation={Create:"StyleOperationCreate",Export:"StyleOperationExport",Set:"StyleOperationSet"},function(n){n[n.Translations=0]="Translations",n[n.Languages=1]="Languages",n[n.Both=2]="Both"}(l=n.TranslateMode||(n.TranslateMode={})),function(n){n[n.None=0]="None",n[n.Local=1]="Local",n[n.Service=2]="Service"}(a=n.ModelUpdate||(n.ModelUpdate={})),n.HieFilterMode={None:"None",LightWeight:"LightWeight",All:"All"},function(n){n[n.Custom=-1]="Custom",n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right",n[n.Justify=4]="Justify"}(v=n.TextAlignment||(n.TextAlignment={})),function(n){n[n.Small=16]="Small",n[n.Large=32]="Large"}(y=n.MetabaseIconSize||(n.MetabaseIconSize={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){t.UINT32MAXVALUE=4294967295,t.DOUBLEMAXVALUE=17976931348623157e292,t.DOUBLEMINVALUE=-17976931348623157e292,t.INT32MAXVALUE=2147483647;var i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["Executed","Error","StartRequest","EndRequest"]),this._DefaultMarker=n.Mb.PPServiceMarker.Normal,this._Queue=[],this._ava={}},r.prototype._bNj=function(){this._CurrentRequest&&(this._CurrentRequest.Ajax.dispose(),this._CurrentRequest=null)},r.prototype._ano=function(t,i){var u=i.Args,r;delete i.Args,r=t.getXHR(),r.status===0&&r.responseText===""?i.ResponseText=JSON.stringify({Fault:{detail:{Error:{Code:0}}}}):this._bNk(i,r);var f=n.App&&n.App.isUnload,e=i.Status===0,o=f&&e;o||(this._beE(u.ErrCallback,t,i),this.Error.fire(this,i)),this._mX(i)},r.prototype._aUy=function(n,t){var r=t.Args,i=r.Callback,u=!1;delete t.Args,u=!this._bNk(t,n.getXHR()),u?(i=r.ErrCallback,this._beE(i,n,t),this.Error.fire(this,t)):this._beE(i,n,t),this._mX(t)},r.prototype._beE=function(t,i,r){if(t)try{n.Delegate.fire(t,i,r)}catch(f){var u=!1;n.Debug.assert(!u,"User callback error. "+f.message)}},r.prototype._cBN=function(n){return/text\/xml/i.exec(n.getResponseHeader("Content-Type"))?n.responseXML:JSON.parse(n.responseText)},r.prototype._bNk=function(n,t){try{return n.Response=this._cBN(t),!0}catch(r){var i={Fault:{faultstring:r.message,detail:{Error:{Code:13,Message:r.message}}}};return n.Response=i,!1}},r.prototype._s5=function(i,r,u,f,e){var c=this,o={Ajax:i instanceof n.Ajax?i:this._aUz(i),Marker:n.isDefined(this._ahh)?this._ahh.value:this._DefaultMarker},s,h;o.Ajax.setRequestHeader("Content-Type",f?f:"application/json;charset=utf-8"),s=e?e:n.getCurrentCulture().CultureName,o.Ajax.setRequestHeader("Accept-Language",s),o.Ajax.setRequestHeader("get-ppbi-time",1),o.Ajax.setRequestHeader("SOAPAction",""),h=t.Object.keys(this._ava),h.forEach(function(n){o.Ajax.setRequestHeader(n,c._ava[n])}),o.Ajax.Fail.insert(0,this._ano,this,{ErrCallback:u}),o.Ajax.Success.insert(0,this._aUy,this,{Callback:r,ErrCallback:u}),o.Ajax.getAsync()?this._CurrentRequest?this._Queue.push(o):this._avb(o):this._avb(o)},r.prototype._aUz=function(t,i){i=i?i:this._PPServiceUrl,window.navigator.userAgent.indexOf("OS 6_0")>-1&&(i+=(i.indexOf("?")!==-1?"&":"?")+"ios6bug="+n.Date.now.toString());return new n.Ajax({Url:i,Type:n.AjaxType.POST,Body:t,Async:!this._DoSync})},r.prototype._avb=function(t){this._CurrentRequest=t,this.StartRequest.fire(this,{Request:t});var i=t.Ajax.getBody();n.isString(i)?t.Ajax.send(i):(i=JSON.stringify(i),n.IsIE&&(i=window.unescape(i.replace(/\\u/g,"%u"))),t.Ajax.send(i))},r.prototype._cBO=function(){this._bNj(),this._Queue.length>0&&(this.Executed.fire(this,{Queue:this._Queue}),this._avb(this._Queue.shift()))},r.prototype._mX=function(n){this.EndRequest.fire(this,n),this._ahh&&!this._ahh.keepMarker&&delete this._ahh,this._cBO()},r.prototype._s=function(t,i){if(!t)return new n.Delegate(i,this);if(t instanceof n.Delegate){var r=new n.Delegate(t);return i&&r.insert(0,i,this),r}if(n.isFunction(t))return i=new n.Delegate(i),i.add(t),i;throw new n.ArgumentException(this);},r.prototype.getDefaultMarker=function(){return this._DefaultMarker},r.prototype.setDefaultMarker=function(n){this._DefaultMarker=n},r.prototype.getPPServiceUrl=function(){return this._PPServiceUrl},r.prototype.getCurrentRequest=function(){return this._CurrentRequest?this._CurrentRequest.Ajax:null},r.prototype.clearRequests=function(){for(var n=0;n<this._Queue.length;n++)this._ati(this._Queue[n].Ajax);this._Queue=[],this._bNj()},r.prototype.addCallbackToLastRqt=function(n){var t=this._Queue.length,i=t>0?this._Queue[t-1]:this._CurrentRequest;return n&&i?(i.Ajax.Success.add(n),!0):!1},r.prototype.beginSyncXHR=function(){this._DoSync=!0},r.prototype.endSyncXHR=function(){this._DoSync=!1},r.prototype.sendRequest=function(n,t,i,r,u){this._s5(n,t,i,r,u)},r.prototype.setMarker=function(t,i){delete this._ahh,n.isDefined(t)&&t!==null&&(this._ahh={value:t,keepMarker:!!i})},r.prototype.getMarker=function(){return this._CurrentRequest?this._CurrentRequest.Marker:n.isDefined(this._ahh)?this._ahh.value:this._DefaultMarker},r.prototype.getQueueCount=function(){return this._Queue.length},r.prototype.setCustomHeader=function(n,t){this._ava[n]=t},r.prototype.getCustomHeaders=function(){return t.Object.keys(this._ava)},r.prototype.removeCustomHeader=function(n){this._ava[n]&&delete this._ava[n]},r}(n.Object);t.PPService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this,n)||this;return t._OdId||(t._OdId={id:undefined}),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["MetadataChanged"]),this._ShareUrl="",this._ReadOnly=!1},r.prototype._iO=function(t){i.prototype._iO.apply(this,arguments),t.obId&&this.setOdId(t.obId),this._Names=t.names?t.names.it:null,t.effectiveRights&&n.Mb.Security.OdRights.appendDescRights(t)},r.prototype.getShareUrl=function(){return this._ShareUrl},r.prototype.getPPService=function(){return this._PPService},r.prototype.getOdId=function(){return this._OdId},r.prototype.getReadOnly=function(){return this._ReadOnly},r.prototype.getNames=function(){return this._Names},r.prototype.getParams=function(){return this._Params},r.prototype.setShareUrl=function(n){this._ShareUrl=n},r.prototype.setPPService=function(n){this._PPService=n},r.prototype.setReadOnly=function(n){this._ReadOnly=n},r.prototype.setNames=function(n){this._Names=n},r.prototype.setParams=function(n){this._Params=n},r.prototype.setMetadata=function(n){i.prototype.setMetadata.call(this,n),this.MetadataChanged.fire(this)},r.prototype.setOdId=function(t){this._OdId&&t||(this._OdId={id:undefined}),t&&(this._OdId.id=n.isString(t)?t:t.id)},r.prototype.getIsOpened=function(){return!!(this._OdId&&this._OdId.id)},r.prototype.getRights=function(){return n.Mb.Security.OdRights.getEffectiveRights(this.getKey())},r.prototype.getState=function(){var n=i.prototype.getState.apply(this,arguments);return this._OdId&&(n.obId=this._OdId),this._Names&&(n.names={it:this._Names}),n},r.prototype.getMetabase=function(){var n=this.getPPService(),i;return n&&n.isLive()&&n instanceof t.BiService&&(i=n.getMetabase()),i||this._Metabase||null},r.prototype.dispose=function(){delete this._PPService,delete this._Metabase,i.prototype.dispose.apply(this,arguments)},r}(t.Descriptor);t.Object=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Metabase=null,this._UseMbQueueRqts=!0},i.prototype._beF=function(){this._BatchMode=0,this._BatchRequests=[],delete this._acK,delete this._anp},i.prototype._beG=function(t,i){for(var s=i.Response,c=s.BatchExecResult.bSucceeded,e=n.getProperty(s,"BatchExecResult.its.it")||[],l=i.Args.Elems,h=i.Args.FireElemsCallback,u,r=0;r<e.length;r++){if(u=l[r],!u)break;var f=e[r],o=JSON.stringify(e[r]),a=!!f.Error||!!n.getProperty(f,"detail.Error")||!!f.Fault;a?(h&&u.ErrorCallback&&u.ErrorCallback.fire(t,{Response:f,ResponseText:o}),c||this.Error.fire(this,{Response:f,ResponseText:o,bElementError:!0,BatchElementIndex:r},0)):h&&u.Callback&&u.Callback.fire(t,{Response:f,ResponseText:o})}},i.prototype._h=function(n,t,i,r){if(this._UseMbQueueRqts)return this._Metabase.send(n,t,i,r);if(this._BatchMode){this._BatchRequests||(this._BatchRequests=[]);var u={Body:n,Callback:t,ErrorCallback:i,ContentType:r};this._BatchRequests.push(u)}else this._s5(n,t,i,r)},i.prototype.getObjectOdId=function(t){if(!t&&t!==0)throw new n.ArgumentNullException(this);var i=t;return(i.getOdId&&(i=i.getOdId()),i&&i.id)?i:this._Metabase?this._Metabase.getObjectOdId(t):{id:undefined}},i.prototype.getMetabase=function(){return this._Metabase},i.prototype.getUseMbQueueRqts=function(){return this._UseMbQueueRqts},i.prototype.send=function(n,t,i,r){this._h(n,t,i,r)},i.prototype.beginBatch=function(t){if(this._UseMbQueueRqts)return this._Metabase.beginBatch(t);this._beH=t,this._BatchMode||(this._BatchMode=0,this._acK=new n.Delegate(null,this),this._anp=new n.Delegate(null,this)),this._BatchMode++},i.prototype.endBatch=function(t,i,r){var o,e,u,c,l;if(t=t==undefined?!0:t,this._UseMbQueueRqts)return this._Metabase.endBatch(t,i,r);if(i&&this._acK.addOne(i),r&&this._anp.addOne(r),this._BatchMode=Math.max(this._BatchMode-1,0),!!this._BatchMode)return!1;if(o=!1,this._BatchRequests&&this._BatchRequests.length>0){var s={BatchExec:{tArg:{bIgnoreError:this._beH,its:{it:[]}}}},h=s.BatchExec.tArg.its.it,f=null;for(e=0;e<this._BatchRequests.length;e++){if(u=this._BatchRequests[e],u.ContentType&&f&&f!=u.ContentType)throw new n.Exception(this,"Batch elements has different content-type");h.push(u.Body),u.ContentType&&(f=u.ContentType)}this._acK.insert(0,this._beG,this,{Elems:this._BatchRequests,FireElemsCallback:t}),c=this._acK,l=this._anp,(o=h.length>0)&&this._s5(s,c,l,f)}return this._beF(),o},i.prototype.getIsBatchMode=function(){return this._UseMbQueueRqts?this._Metabase.getIsBatchMode():!!this._BatchMode},i.prototype.setMarker=function(){return this._UseMbQueueRqts?t.prototype.setMarker.apply(this._Metabase,arguments):t.prototype.setMarker.apply(this,arguments)},i.prototype.getMarker=function(){return this._UseMbQueueRqts?t.prototype.getMarker.apply(this._Metabase,arguments):t.prototype.getMarker.apply(this,arguments)},i.prototype.setDefaultMarker=function(){return this._UseMbQueueRqts?t.prototype.setDefaultMarker.apply(this._Metabase,arguments):t.prototype.setDefaultMarker.apply(this,arguments)},i.prototype.getDefaultMarker=function(){return this._UseMbQueueRqts?t.prototype.getDefaultMarker.apply(this._Metabase,arguments):t.prototype.getDefaultMarker.apply(this,arguments)},i.prototype.dispose=function(){delete this._Metabase,t.prototype.dispose.apply(this,arguments)},i}(t.PPService);t.BiService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var u=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._UserName=null,this._Password="",this._OAuth=null,this._SAML2=null,this._Domain=!1,this._UseGuestCreds=!1},i.prototype.getUserName=function(){return this._UserName},i.prototype.setUserName=function(n){this._UserName=n},i.prototype.getPassword=function(){return this._Password},i.prototype.setPassword=function(n){this._Password=n},i.prototype.getSettings=function(){var t={},i;return this._OAuth?(t=this._OAuth.getSettings(),t.pass=this._Password):this._SAML2?(t=this._SAML2.getSettings(),t.pass=this._Password):(i=n.isObject(this._UserName)?this._UserName:{id:this._UserName},this._Domain&&(i.domain=this._Domain),t={user:i,pass:this._Password},this._UseGuestCreds&&(t.useGuestCreds=!0)),t},i}(n.Object),i,r;t.UserCreds=u,i=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getSettings=function(){return{oauth:{oauthService:this._OAuthService,oauth_token:this._OAuthToken,oauth_verifier:this._OAuthVerifier}}},t}(n.Object),t.OAuthLogonData=i,r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getSettings=function(){return{saml2:{responseUrl:this._ResponseUrl,remoteAddr:this._RemoteAddr,samlResponse:this._SamlResponse}}},t}(n.Object),t.SAML2LogonData=r})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(i){var r=t.call(this,i)||this,u=r._ConnectionOdId;return n.isString(u)&&(r._ConnectionOdId={id:u}),r._UserCreds?r._UserCreds instanceof n.Mb.UserCreds||(r._UserCreds=new n.Mb.UserCreds(r._UserCreds)):r._UserCreds=new n.Mb.UserCreds,r._ai={},r._y3={},r}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["Opened","Refreshed","Closed"]),this._defineEvents(["ObjectsObtained","CacheFlushed","ObjectCreated","ObjectMoved","ObjectsDeleted","ObjectSavedAs","ShortcutCreated","SessionChecked","PathToRootLoaded","SharePointShared","FindObjectsLoaded"]),this._ConnectionOdId={id:undefined},this._Id="",this._PPServiceUrl="PPService.axd",this._EnableCaching=!0,this._NewPassword=this._Driver=this._UserCreds=this._Server=this._Database=this._Schema=null,this._SessionCookie="",this._UseMbQueueRqts=!1,this._UseGuestCreds=!1},i.prototype._bL=function(n){n.Handler.call(n.Object,n.Sender,n.Args)},i.prototype._qN=function(t){var u,i,r;if(this._EnableCaching&&n.isDefined(t)){t+="",t.indexOf("!")>=0&&(t=new RegExp("\\d+$","").exec(t)),u=['!{key}"'.replace("{key}",t),'"k": {key},'.replace("{key}",t),'"k": {key} '.replace("{key}",t)];for(i in this._ai)for(r=0;r<u.length;r++){if(!this._ai[i])break;if(this._ai[i].indexOf(u[r])>=0){this._ai[i]=null;break}}}else this._ai={}},i.prototype._aFg=function(t,i,r,u){var f=this._cBP(t);return f&&!i?(r&&(u===!0?r.fire.call(r,this,{ResponseText:f,Response:JSON.parse(f)}):n.setTimeout(this._bL,0,{Handler:r.fire,Object:r,Sender:this,Args:{ResponseText:f,Response:JSON.parse(f)}})),!0):(this._cBQ(t),this._cBR(t))?(this._cBS(t,r),!0):(this._cBT(t),!1)},i.prototype._beI=function(n,t){this._EnableCaching&&(this._ai=this._ai||{},this._ai[n]=t)},i.prototype._cBQ=function(n){this._ai[n]=null},i.prototype._cBP=function(n){return this._EnableCaching&&this._ai&&this._ai[n]?this._ai[n]:null},i.prototype._cBT=function(n){this._y3[n]=this._y3[n]||[]},i.prototype._cBS=function(n,t){this._y3[n]=this._y3[n]||[],this._y3[n].push(t)},i.prototype._beJ=function(n,t,i){var u,r;if(this._y3[n]){for(u=this._y3[n],r=0;r<u.length;r++)u[r].fire(t,i,0);delete this._y3[n]}},i.prototype._cBR=function(n){return this._y3&&this._y3[n]},i.prototype._eS=function(t){var i,u,r;if(!t&&t!==0)throw new n.ArgumentNullException(this);return(i=t,t.getOdId&&(i=t.getOdId()),i&&i.id)?i:(u=t.getKey?t.getKey():t,r={id:undefined},this.getConnectionId()?r.id=this.getConnectionId()+"!"+u:this.Opened.insert(0,this._bNl,this,{OdId:r,Key:u}),r)},i.prototype._bNl=function(n,t){var i=t.Args.OdId;i.id=this.getConnectionId()+"!"+t.Args.Key,this.Opened.remove(this._bNl,this)},i.prototype._ae=function(n,t){var i=t.Response;this._ConnectionOdId=this._ConnectionOdId||{id:undefined},this._ConnectionOdId.id=i.OpenMetabaseResult.id,this._SessionCookie=i.OpenMetabaseResult.sessCookie,this.Opened.fire(this,{PasswordChanged:i.OpenMetabaseResult.passwordChanged})},i.prototype._beK=function(){this.Refreshed.fire(this,{})},i.prototype._cBU=function(){this.CacheFlushed.fire(this,{})},i.prototype._bNm=function(n,t){var i=t.Response;this.FindObjectsLoaded.fire(this,{Objects:i})},i.prototype._bNn=function(n,t){t&&t.Args&&t.Args.Hash&&(this._beI(t.Args.Hash,t.ResponseText),this._beJ(t.Args.Hash,n,t))},i.prototype._anq=function(t,i){var u,f,r,e;for(i&&i.Args&&i.Args.Hash&&(this._beI(i.Args.Hash,i.ResponseText),this._beJ(i.Args.Hash,t,i)),u=i.Response,f=n.getProperty(u,"GetObjectsResult.objects.its.d")||[],r=0,e=f.length;r<e;r++)n.Mb.Security.OdRights.appendDescRights(f[r]);this.ObjectsObtained.fire(this,{Objects:u})},i.prototype._abV=function(n,t){t&&t.Args&&t.Args.Hash&&(this._beI(t.Args.Hash,t.ResponseText),this._beJ(t.Args.Hash,n,t));var i=t.Response;this.PathToRootLoaded.fire(this,{Objects:i})},i.prototype._aFh=function(n,t){var i=t.Response;this.ObjectCreated.fire(this,{Object:i.object,Objects:i.objects})},i.prototype._cBV=function(n,t){var i=t.Response;this.ShortcutCreated.fire(this,{Objects:i})},i.prototype._cBW=function(n,t){var i=t.Response;this.ObjectMoved.fire(this,{Objects:i})},i.prototype._cBX=function(n,t){var i=t.Response;this.ObjectsDeleted.fire(this,{Objects:i})},i.prototype._cBY=function(t,i){var f=i.Response,o=f.SaveObjectAsResult.object,e=i.Args.Obj,u,r,s;if(e){for(u=n.getProperty(f,"SaveObjectAsResult.objects.objects.its.d")||[],r=0,s=u.length;r<s;r++)u[r].k=o.k,n.Mb.Security.OdRights.appendDescRights(u[r]);i.Args.UpdateMon&&e.setOdId&&e.setOdId(o.obId)}this.ObjectSavedAs.fire(this,{Objects:f})},i.prototype._cBZ=function(n,t){for(var f=t.Response,r=f.SaveObjectAsResult.object,u=f.SaveObjectAsResult.objects.objects.its.d,i=0,e=u.length;i<e;i++)if(u[i].k===r.k){r=u[i];break}this.SharePointShared.fire(this,{ShareObject:r})},i.prototype._cB0=function(n,t){var i=t.Response;this.SessionChecked.fire(this,{Status:i})},i.prototype._bej=function(t,i){var r=i.Args.Object;r&&r instanceof n.Mb.Object&&r.setOdId("")},i.prototype._kO=function(){this._ConnectionOdId.id=null,this.Closed.fire(this,{})},i.prototype._cB1=function(){},i.prototype._bNo=function(t,i,r,u){var e,s="Root",f=n.extend({cache:{all:!0}},i),o;t&&(delete f.cache.all,f.cache.object=t instanceof n.Mb.Object?t.getState():t,e=f.cache.object.k),o={GetObjects:{tParent:this._eS(s),tFilter:{levels:1},tArg:{range:{count:0},refresh:f,pattern:{}}}},this._qN(e),r=this._s(r,new n.Delegate(this._cBU,this)),this._h(o,r,u)},i.prototype._aUA=function(n){var i=[],t;if(n&&n.it)for(t=0;t<n.it.length;t++)i.push(n.it[t].k);return i},i.prototype._aFi=function(n){var i={it:[]},t;if(n&&n.length>0)for(t=0;t<n.length;t++)i.it.push({k:n[t]});return i},i.prototype.getConnectionOdId=function(){return this._ConnectionOdId},i.prototype.getEnableCaching=function(){return this._EnableCaching},i.prototype.getSessionCookie=function(){return this._SessionCookie},i.prototype.setEnableCaching=function(n){n!=this._EnableCaching&&(this._EnableCaching=n,this._EnableCaching||this._qN())},i.prototype.open=function(t){var e;this._qN();var u={id:this._Id},f=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];!t||t instanceof n.Delegate||t instanceof Function?(f=this._UserCreds,i=n.isDefined(this._NewPassword)&&this._NewPassword!==null?{newPassword:this._NewPassword}:{},i.sessCookie=this._SessionCookie||"",r=t):(i=i||{},i.sessCookie=i.sessCookie||this._SessionCookie||"",n.isDefined(this._NewPassword)&&this._NewPassword!==null&&(i.newPassword=this._NewPassword)),r=this._s(r,new n.Delegate(this._ae,this)),n.getCurrentCulture().LCID&&(u.locale=n.getCurrentCulture().LCID),this._Driver&&this._Server&&this._Database&&(u.logonData={driver:this._Driver,server:this._Server,database:this._Database,schema:this._Schema}),e=f&&f.getSettings(),this._UseGuestCreds=!!e.useGuestCreds,this._NewPassword=null,this._h({OpenMetabase:{tDef:u,tCreds:e,tArg:i}},r,o)},i.prototype.getObjectOdId=function(n){return this._eS(n)},i.prototype.getConnectionId=function(){return this._ConnectionOdId?this._ConnectionOdId.id:null},i.prototype.refresh=function(t,i){var r={GetStatus:{tArg:{metabase:this._ConnectionOdId},allowMetabaseNotFound:"true"}};t=this._s(t,new n.Delegate(this._beK,this)),this._h(r,t,i)},i.prototype.clearCacheForObject=function(n){this._qN(n)},i.prototype.flushObjectCache=function(n,t,i,r){n&&this._bNo(n,t,i,r)},i.prototype.flushCache=function(n,t){this._bNo(null,{all:!0},n,t)},i.prototype.closeObject=function(t,i){var r=this._eS(t),u={CloseObject:{tObject:r}};i=this._s(i,new n.Delegate(this._bej,this,{Object:t})),this._h(u,i)},i.prototype.close=function(t){if(this._qN(),this._ConnectionOdId){var i={CloseMetabase:{tMb:this._ConnectionOdId}};t=this._s(t,new n.Delegate(this._kO,this)),this._h(i,t)}},i.prototype.saveObject=function(n,t){var i=this._eS(n),r={SaveObject:{tObject:i}};this._qN(i.id),this._h(r,t)},i.prototype.openCube=function(n,t,i,r){var u={OpenCube:{tOb:this._eS(n),tArg:{args:t||{}}}};i&&(u.OpenCube.tArg.metaGet=i),this._h(u,r)},i.prototype.closeCube=function(n,t){this._h({CloseCube:{tCube:{id:n}}},t)},i.prototype.getCube=function(n,t,i){var r={GetCube:{tCube:{id:n},tArg:{pattern:t.pattern,data:t.data,matrix:t.matrix}}};this._h(r,i)},i.prototype.openRub=function(n,t,i,r){var u={OpenRub:{tObject:this._eS(n),tArg:{args:t||{}}}};i&&(u.OpenRub.tArg.metaGet=i),this._h(u,r)},i.prototype.closeRub=function(n,t){this._h({CloseRub:{tRub:{id:n}}},t)},i.prototype.getDependentObjects=function(t,i,r,u){var f=n.getCurrentCulture().LCID,e={GetObjects:{tParent:this._eS(t),tFilter:{hideAllFolders:!0,findInfo:{active:!0,text:i,attribute:"None",caseSensitive:!1,wholeWordsOnly:!0,scanNestedNamespaces:!0,scanHiddenFolders:!1,attributes:{it:["Key"]}}},tArg:{orderBy:{attribute:"Name"},pattern:{fullUrl:!1,locale:f,sd:!0,n:!0,i:!0,ts:!0,ds:!0,isShortcut:!0,"@ext":!0,refs:{refsBy:!0,consistOf:!0,consistOfRecursive:!0,refsByRecursive:!0}},md:{pars:!0},mds:!0}}};r=this._s(r,new n.Delegate(this._bNm,this)),this._h(e,r,u)},i.prototype.findObjects=function(t,i,r,u){var f=i.FindInfo||{},a=n.getCurrentCulture().LCID,o=i.Classes||{it:[]},s=i.Containers||{it:[]},h=i.HiddenContainers||{it:[]},l=f.Attributes||{it:[]},e,c;i.Classes&&i.Classes.length>0&&(o=this._aFi(o)),i.Containers&&i.Containers.length>0&&(s=this._aFi(s)),i.HiddenContainers&&i.HiddenContainers.length>0&&(h=this._aFi(h)),f.Attributes&&f.Attributes.length>0&&(l={it:f.Attributes}),e={GetObjects:{tParent:this._eS(t),tFilter:{levels:n.isDefined(i.Levels)?i.Levels:undefined,includeRoot:n.isDefined(i.IncludeRoot)?i.IncludeRoot:undefined,hideEmptyFolders:n.isDefined(i.HideEmptyFolders)?i.HideEmptyFolders:undefined,hideAllFolders:n.isDefined(i.HideAllFolders)?i.HideAllFolders:undefined,limit:n.isDefined(i.Limit)?i.Limit:undefined,hiddenContainers:n.isDefined(i.HiddenContainers)?h:undefined,includeRootPath:n.isDefined(i.IncludeRootPath)?i.IncludeRootPath:undefined,hideFoundEmptyFolders:n.isDefined(i.HideFoundEmptyFolders)?i.HideFoundEmptyFolders:undefined,findTextInFoldersOnly:n.isDefined(i.FindTextInFoldersOnly)?i.FindTextInFoldersOnly:undefined,findInfo:{active:f.Active||!1,text:f.Text||"",attribute:f.Attribute||n.Mb.FindInfoAttribute.None,caseSensitive:f.CaseSensitive||!1,wholeWordsOnly:f.WholeWordsOnly||!1,scanNestedNamespaces:f.ScanNestedNamespaces||!1,scanHiddenFolders:f.ScanHiddenFolders||!1,classId:n.isDefined(f.ClassId)?f.ClassId:undefined},classes:o,containers:s},tArg:{orderBy:{attribute:"Name"},pattern:{fullUrl:!1,locale:a,sd:!0,n:!0,i:!0,ts:!0,ds:!0,isShortcut:!0},md:{pars:!0},mds:!0,expandResult:n.isDefined(i.ExpandResult)?i.ExpandResult:undefined}}},c=i,c.md&&n.extend(e.GetObjects.tArg.md,c.md,!0,!0,!0),i.ResultPattern&&n.extend(e.GetObjects.tArg.pattern,i.ResultPattern,!0,!0,!0),f.Attributes&&(e.GetObjects.tFilter.findInfo.attributes=l),r=this._s(r,new n.Delegate(this._bNm,this)),this._h(e,r,u)},i.prototype.getSearch=function(n,t,i,r){var u={GetSearch:{tMb:{id:this.getConnectionId()},tArg:{GetMbObjectsArg:n||undefined,GetSourceDataArg:t||undefined}}};this._h(u,i,r)},i.prototype.getPathToRoot=function(t,i,r,u,f,e,o,s,h){var c;i=n.toArray(i);var a=this._eS(t),v=n.getCurrentCulture().LCID,l="GPTR|"+a.id+"|"+i.join("_")+"|"+!r+"|"+e+"|"+v,y=this._s(u,new n.Delegate(this._abV,this));this._aFg(l,f,y)||(c=this._aUB(t,i,r,!!i),c.GetObjects.tFilter.includeRootPath=!0,s&&(c.GetObjects.tFilter.hideLinkObjects=!0),c.GetObjects.tArg.expandResult=!0,c.GetObjects.tArg.md={pars:!0},c.GetObjects.tArg.mds=!0,e!=null&&e!==0&&e!=="Root"&&(c.GetObjects.tFilter.rootParent=e),h=h||{},c.GetObjects.tArg=n.extend(c.GetObjects.tArg,h,!0,!0),u=this._s(u,new n.Delegate(this._abV,this,{Hash:l})),this._h(c,u,o))},i.prototype.getPathToRootOp=function(t,i,r,u,f,e,o,s){var h;i=i||{};var c=i.classes||[],l=i.containers||[],v=!i.hideEmptyFolders,y=!!i.includeInternals;c&&c.it&&(c=this._aUA(c)),l&&l.it&&(l=this._aUA(l));var p=this._eS(t),w=n.getCurrentCulture().LCID,a="GPTR|"+p.id+"|"+c.join("_")+"|"+!v+"|"+y+"|"+f+"|"+w,b=this._s(r,new n.Delegate(this._abV,this,{Hash:a}));this._aFg(a,u,b,!0)||(h=this._aUB(t,c,v,!!c,l,!1,y),h.GetObjects.tFilter.includeRootPath=!0,o&&(h.GetObjects.tFilter.hideLinkObjects=!0),h.GetObjects.tArg.expandResult=!0,h.GetObjects.tArg.md={pars:!0},h.GetObjects.tArg.mds=!0,f!=null&&f!==0&&f!=="Root"&&(h.GetObjects.tFilter.rootParent=f),s=s||{},h.GetObjects.tArg=n.extend(h.GetObjects.tArg,s,!0,!0),r=this._s(r,new n.Delegate(this._abV,this,{Hash:a})),this._h(h,r,e))},i.prototype.getObjects=function(t,i,r,u,f,e,o,s,h){var l;i=n.toArray(i),o=o||[],h=!!h;var a=this._eS(t),v=n.getCurrentCulture().LCID,c="GO|"+a.id+"|"+i.join("_")+"|"+!r+"|"+(u===!0)+"|"+o.join("_")+"|"+v+"|"+h,y=this._s(f,new n.Delegate(this._anq,this));this._aFg(c,e,y)||(l=this._aUB(t,i,r,u,o,h),f=this._s(f,new n.Delegate(this._anq,this,{Hash:c})),this._h(l,f,s))},i.prototype.getObjectsOp=function(t,i,r,u,f,e){var v,o;i=i||{};var s=i.classes||[],h=i.containers||[],l=!i.hideEmptyFolders,a=i.includeRoot,y=!!i.includeInternals,p=!!i.showAllNonSystemObjects;s&&s.it&&(s=this._aUA(s)),h&&h.it&&(h=this._aUA(h)),t==1&&(t=0),t===0&&(t="Root");var w=this._eS(t),b=n.getCurrentCulture().LCID,c="GO|"+w.id+"|"+s.join("_")+"|"+l+"|"+(a===!0)+"|"+h.join("_")+"|"+b;(r&&r.pattern&&r.pattern.effectiveRights&&(c+="|"+r.pattern.effectiveRights.toString()+"|"+(r.pattern.effectiveRightsSubj?r.pattern.effectiveRightsSubj.id:"current")),v=this._s(f,new n.Delegate(this._anq,this)),this._aFg(c,u,v))||(o=this._aUB(t,s,l,a,h,!1,y),delete i.classes,delete i.containers,delete i.showAllNonSystemObjects,o.GetObjects.tFilter=n.extend(o.GetObjects.tFilter,i,!0,!0),r=r||{},o.GetObjects.tArg=n.extend(o.GetObjects.tArg,r,!0,!0),p&&(o.GetObjects.tArg.pattern["@ext"]=!0,delete o.GetObjects.tFilter.classes),f=this._s(f,new n.Delegate(this._anq,this,{Hash:c})),this._h(o,f,e))},i.prototype._aUB=function(t,i,r,u,f,e,o){var h,c;i=i||[],f=f||[],e=!!e,t==1&&(t=0),t===0&&(t="Root");var l=this._eS(t),a=n.getCurrentCulture().LCID,s={GetObjects:{tParent:l,tFilter:{levels:1,includeRoot:u===!0,hideEmptyFolders:!r,includeInternals:o===!0},tArg:{orderBy:{attribute:"Name"},pattern:{fullUrl:!1,locale:a,sd:!0,n:!0,i:!0,ts:!0,ds:!0,isShortcut:!0}}}};return e&&(s.GetObjects.tArg.pattern.refs={all:!0}),h=this._aFi(i),h.it.length>0&&(s.GetObjects.tFilter.classes=h),c=this._aFi(f),c.it.length>0&&(s.GetObjects.tFilter.containers=c),s},i.prototype.createObject=function(t,i,r,u,f,e,o){t===0&&(t="Root");var s={CreateObject:{tParent:this._eS(t),tArg:{info:{name:i,id:r,parent:n.Mb.NULL,classId:u,shortcut:n.Mb.NULL,permanent:f?f:!1},getObjects:n.Mb.NULL}}};e=this._s(e,new n.Delegate(this._aFh,this)),this._qN(t),this._h(s,e,o)},i.prototype.createShortcut=function(t,i,r,u,f,e){t===0&&(t="Root");var o={CreateObject:{tParent:this._eS(t),tArg:{info:{name:r?r:"",id:u?u:"",parent:n.Mb.NULL,classId:f||0,shortcut:{k:i,i:"",p:0,n:"",h:!1,c:f||0},permanent:!0},getObjects:n.Mb.NULL}}};e=this._s(e,new n.Delegate(this._cBV,this)),this._qN(t),this._h(o,e)},i.prototype.moveObject=function(t,i,r){t===0&&(t="Root");var u={MoveObject:{tParent:this._eS(t),tArg:{info:{parent:{i:"",n:"",k:i,c:0,p:0,h:!1}}}}};r=this._s(r,new n.Delegate(this._cBW,this)),this._qN(t),this._qN(i),this._h(u,r)},i.prototype.deleteObjects=function(t,i){var u,r,f;if(!t)throw new n.ArgumentException(this);for(t=n.toArray(t),u=[],r=0;r<t.length;r++)u.push({i:"",n:"",k:t[r],c:0,p:0,h:!1}),this._qN(t[r]);f={DeleteObjects:{tMb:this._ConnectionOdId,tArg:{objectKey:n.Mb.NULL,objects:{its:{d:u}},getObjects:n.Mb.NULL}}},i=this._s(i,new n.Delegate(this._cBX,this)),this._h(f,i)},i.prototype.saveObjectAs=function(t,i,r,u,f,e,o,s,h,c){var p,a,v,l,w,b;if(!t)throw new n.ArgumentNullException(this);if(p=n.getCurrentCulture().LCID,a=null,typeof r!="string")for(a=r,r=a.length?a[0].name:null,v=0;v<a.length;v++)if(a[v].locale==p){r=a[v].name;break}var y={SaveObjectAs:{tObject:this._eS(t),tArg:{destination:{operation:f,withData:e,keepMoniker:!!s,copyExternal:!0},getObjects:{parent:{id:this._eS(t)},arg:{rootOnly:!0,pattern:{fullUrl:!1,ts:!0,sd:!0,effectiveRights:!0}}}}}},k=u||n.Mb.NULL,d=r||n.Mb.NULL;o=o===!0,s=s===!0,l={i:"",n:"",k:0,c:0,p:0,h:!1},i||i===0||(l=n.Mb.NULL),n.isNumber(i)&&(l.k=i),i instanceof n.Mb.Descriptor&&(i=i.getState()),n.isObject(i)&&(l=n.extend(l,i,!0)),l&&l!==n.Mb.NULL&&(w=new n.Mb.Descriptor,w.fillDesc(l),l=w.getState()),b=!0;switch(f){case n.Mb.ObjectCopyOperation.CreateNew:case n.Mb.ObjectCopyOperation.ChangeCurrent:y.SaveObjectAs.tArg.destination.create={id:k,name:d,permanent:o,locale:p,names:a?{it:a}:undefined,parent:l},b=!s;break;case n.Mb.ObjectCopyOperation.MoveToParent:y.SaveObjectAs.tArg.destination.move={parent:l};break;case n.Mb.ObjectCopyOperation.OverwriteExisting:l.i=k,l.n=d,l["@isShortcut"]=!1,y.SaveObjectAs.tArg.destination.overwrite={object:l};break;case n.Mb.ObjectCopyOperation.NameOrIndent:break;default:throw new n.ArgumentException(this);}h=this._s(h,new n.Delegate(this._cBY,this,{Obj:t,UpdateMon:b})),this._qN(y.SaveObjectAs.tObject.id),this._h(y,h,c)},i.prototype.getCustomClasses=function(t,i,r,u){var f,e,o;(t||(t="Root"),i||(i={effectiveRights:!1,classes:!0,data:!1,fullUrl:!1}),f="GCC|"+t+"|"+JSON.stringify(i),e=this._s(r,new n.Delegate(this._bNn,this)),this._aFg(f,u,e))||(o={OpenCustomOb:{tOb:this._eS(t),tArg:{openAsDescriptor:!0,metaGet:i}}},r=this._s(r,new n.Delegate(this._bNn,this,{Hash:f})),this._h(o,r))},i.prototype.sharePointShare=function(t,i,r,u,f){if(!t||!i)throw new n.ArgumentNullException(this);var o="Root",e=t.getKey?t.getKey():t,s=this._eS(e),h={SaveObjectAs:{tObject:s,tArg:{destination:{operation:n.Mb.ObjectCopyOperation.SharePointShare,sharePointShare:{title:i,body:r,reply:f}},getObjects:{parent:this._eS(o),filter:{classes:{it:[{k:t.getClass()}]},findInfo:{active:!0,caseSensitive:!0,wholeWordsOnly:!0,attribute:"Key",scanNestedNamespaces:!0,scanHiddenFolders:!0,text:e+""}},arg:{pattern:{sd:!0,n:!0,i:!0,ts:!0,ds:!0,isShortcut:!0,fullUrl:!0}}}}}};u=this._s(u,new n.Delegate(this._cBZ,this)),this._h(h,u)},i.prototype.shareMobile=function(t,i,r){if(!t)throw new n.ArgumentNullException(this);var u=this._eS(t),f={SaveObjectAs:{tObject:u,tArg:{destination:{operation:n.Mb.ObjectCopyOperation.ShareMobile,shareMobile:{url:i}}}}};this._h(f,r)},i.prototype.getMbSec=function(n,t){var i={GetMbSec:{tMbSec:this._ConnectionOdId,tArg:{pattern:n}}};this._h(i,t)},i.prototype.changePassword=function(t,i,r,u){r||(r=this._UserCreds.getUserName());var f={k:-1,id:r,vis:!0,type:"User",sid:{sid:""},data:{user:{tag:"",desc:"",isNT:!1,credentials:{pass:t},oldCredentials:{pass:i}}}},e={SetMbSec:{tMbSec:this._ConnectionOdId,tArg:{pattern:{users:n.Mb.ListOperation.Change,user:{data:!0}},meta:{users:{its:{it:[f]}}},metaGet:{pattern:{users:n.Mb.ListOperation.Get,user:{data:!0},groups:n.Mb.ListOperation.Get}}}}};this._h(e,u)},i.prototype.getStatus=function(t,i){var r={GetStatus:{tArg:{metabase:this._ConnectionOdId},allowMetabaseNotFound:!0}};t=this._s(t,new n.Delegate(this._cB0,this)),this._h(r,t,i)},i.prototype.getFullPath=function(t,i,r){var f=n.getCurrentCulture().LCID,u={GetObjects:{tParent:this._eS(t),tFilter:{levels:1,includeRoot:!0,includeRootPath:!0},tArg:{pattern:{fullUrl:!1,locale:f,sd:!0,n:!0,i:!0,ts:!0,ds:!0,isShortcut:!0},md:{pars:!0},mds:!0}}};r=r||{},u.GetObjects.tArg=n.extend(u.GetObjects.tArg,r,!0,!0),i=this._s(i,new n.Delegate(this._cB1,this)),this._h(u,i)},i.prototype.clearCache=function(){this._qN()},i.prototype.getExportUrl=function(n){return this._bNp("/GetBin",n)},i.prototype.getImportUrl=function(n){return this._bNp("/PutBin",n)},i.prototype.getUseGuestCreds=function(){return this._UseGuestCreds},i.prototype._bNp=function(t,i){var e,r=n.Url.parse(this._PPServiceUrl),u,f;for(r.setPath(r.getPath()+t),i=n.Array.isArray(i)?i:[i],u=0;u<i.length;u++)f=i[u],f&&(e=n.Url.joinQueryParam(f.Key,f.Value,r.getQuery(),"?"));return e&&r.setQuery(e),r.toString()},i}(t.BiService);t.Metabase=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){function i(t,i,r,u){for(var e=n.Array.isArray(r)?r:[r],f=0;f<e.length;f++)n.Mb.proxyMember(t,i,"get"+e[f],u),n.Mb.proxyMember(t,i,"set"+e[f],u)}function r(t,i,r,u){for(var e=n.Array.isArray(r)?r:[r],f=0;f<e.length;f++)n.Mb.proxyMember(t,i,e[f],u)}function u(t,i,r,u){if(n.isFunction(i[r])){var f=n.isObject(t)?t:t.prototype;f[r]=function(n,t,i){return function(){return i?i.apply(this,[{MemberName:n,Args:arguments}]):t[n].apply(this,arguments)}}(r,i,u)}}function f(n){return/^[a-zA-Z\_][a-zA-Z0-9\_]*$/.test(n)}function e(n){var i,t,u,f,r,e;if(!n||n.charAt(0)!=="<"||(i=(new DOMParser).parseFromString(n,"text/xml"),t=i.parseError,t||(t=i.querySelector("parsererror")),!(!t||t.errorCode===0)))return null;for(u=i.firstChild,f=[],r=0,e=u.childNodes.length;r<e;r++)f.push(u.childNodes[r].getAttribute("V"));return f}function o(t){var r,i,u;if(!t)return"";for(t=n.toArray(t),r='<A T="A" V="'+t.length+'">',i=0;i<t.length;i++)u=n.isBoolean(t[i])?"B":n.isNumber(t[i],!0)&&!isNaN(+t[i])?t[i].toString().indexOf(".")===-1?"I":"F":"S",r+='<A T="'+u+'" V="'+t[i]+'"/>';return r+"<\/A>"}function s(t,i,r){var e,f,u;if(!r)return!1;for(t=t||0,i=i||0,e=n.getProperty(r,"parts.it")||[r],f=0;f<e.length;f++)if(u=e[f],u.top<=t&&u.top+u.height>t&&u.left<=i&&u.left+u.width>i)return!0;return!1}function h(t,i,r){var u=(i||n.ImagePath)+"metabase/GlbClsImg{0}.png";return new n.ImageList({Source:u.replace("{0}",t+""),IsRetinaAvailable:r,IconHeight:t,IconWidth:t})}t.proxyProperties=i,t.proxyMethods=r,t.proxyMember=u,t.isValidIdent=f,t.getValuesFromXML=e,t.getXMLForArrValues=o,t.isInRange=s,t.getDefaultMetabaseIconList=h;var c;(function(t){function i(t){switch(t){case n.Mb.MetabaseObjectClass.KE_CLASS_FOLDER:case n.Mb.MetabaseObjectClass.KE_CLASS_WEBAPPLICATION:case n.Mb.MetabaseObjectClass.KE_CLASS_MOBILEAPPLICATION:case n.Mb.MetabaseObjectClass.KE_CLASS_RDS_DATABASE:case n.Mb.MetabaseObjectClass.KE_CLASS_DW_DATABASE:case n.Mb.MetabaseObjectClass.KE_CLASS_DW_FACT:case n.Mb.MetabaseObjectClass.KE_CLASS_ADOMD_CATALOG:case n.Mb.MetabaseObjectClass.KE_CLASS_MODELSPACE:case n.Mb.MetabaseObjectClass.KE_CLASS_RUBRICATOR:case n.Mb.MetabaseObjectClass.KE_CLASS_ASSEMBLY:case n.Mb.MetabaseObjectClass.KE_CLASS_NETASSEMBLY:case n.Mb.MetabaseObjectClass.KE_CLASS_SCORECARD:case n.Mb.MetabaseObjectClass.KE_CLASS_SUBJECTAREA:return!0;default:return!1}}function r(t,i){var r=n.Mb.MetabaseObjectClass[t];return!i||!r?r:n.resourceManager.getString("navClassDesc")[r.replace(/_/g,"")]}function u(n,i){switch(n){case t.MetabaseDisplayMode.Idents:return i.i;case t.MetabaseDisplayMode.Both:return(i.n?i.n:i.i)+" ("+i.i+")";case t.MetabaseDisplayMode.Names:default:return i.n?i.n:i.i}}function f(t){switch(t){case n.Mb.MetabaseObjectClass.KE_CLASS_FOLDER:return 0;case n.Mb.MetabaseObjectClass.KE_CLASS_METABASEUPDATEOBJECT:return 66;case n.Mb.MetabaseObjectClass.KE_CLASS_DATABASE:return 4;case n.Mb.MetabaseObjectClass.KE_CLASS_METABASELINK:return 41;case n.Mb.MetabaseObjectClass.KE_CLASS_TABLE:return 5;case n.Mb.MetabaseObjectClass.KE_CLASS_EXTERNTABLE:return 6;case n.Mb.MetabaseObjectClass.KE_CLASS_VIEW:case n.Mb.MetabaseObjectClass.KE_CLASS_EXTERNVIEW:return 7;case n.Mb.MetabaseObjectClass.KE_CLASS_QUERY:return 12;case n.Mb.MetabaseObjectClass.KE_CLASS_SQLCOMMAND:return 32;case n.Mb.MetabaseObjectClass.KE_CLASS_PROCEDURE:return 64;case n.Mb.MetabaseObjectClass.KE_CLASS_LOG:return 38;case n.Mb.MetabaseObjectClass.KE_CLASS_STDDIM:case n.Mb.MetabaseObjectClass.KE_CLASS_CUSTOMDIM:return 8;case n.Mb.MetabaseObjectClass.KE_CLASS_CLNDIM:return 102;case n.Mb.MetabaseObjectClass.KE_CLASS_USERDIM:return 10;case n.Mb.MetabaseObjectClass.KE_CLASS_COMPOUNDDIM:return 8;case n.Mb.MetabaseObjectClass.KE_CLASS_COMPOUNDCLNDIM:return 9;case n.Mb.MetabaseObjectClass.KE_CLASS_STDCUBE:return 11;case n.Mb.MetabaseObjectClass.KE_CLASS_MODULE:return 1;case n.Mb.MetabaseObjectClass.KE_CLASS_FORM:return 13;case n.Mb.MetabaseObjectClass.KE_CLASS_ASSEMBLY:return 40;case n.Mb.MetabaseObjectClass.KE_CLASS_NETMODULE:return 73;case n.Mb.MetabaseObjectClass.KE_CLASS_NETFORM:return 74;case n.Mb.MetabaseObjectClass.KE_CLASS_NETASSEMBLY:return 75;case n.Mb.MetabaseObjectClass.KE_CLASS_WORKSPACE:return 2;case n.Mb.MetabaseObjectClass.KE_CLASS_ETLTASK:return 52;case n.Mb.MetabaseObjectClass.KE_CLASS_MODELSPACE:return 14;case n.Mb.MetabaseObjectClass.KE_CLASS_MSVARIABLE:return 25;case n.Mb.MetabaseObjectClass.KE_CLASS_MSMODEL:return 29;case n.Mb.MetabaseObjectClass.KE_CLASS_MSMETAMODEL:return 30;case n.Mb.MetabaseObjectClass.KE_CLASS_MSPROBLEM:return 31;case n.Mb.MetabaseObjectClass.KE_CLASS_EXPRESSREPORT:return 16;case n.Mb.MetabaseObjectClass.KE_ADHOC_REPORT:return 83;case n.Mb.MetabaseObjectClass.KE_ADHOC_DATASOURCES:return 85;case n.Mb.MetabaseObjectClass.KE_ADHOC_THEME:return 86;case n.Mb.MetabaseObjectClass.KE_CLASS_PROCEDURALREPORT:case n.Mb.MetabaseObjectClass.KE_CLASS_WEBTHIRDREPORT:return 17;case n.Mb.MetabaseObjectClass.KE_CLASS_VIRTUALCUBE:return 18;case n.Mb.MetabaseObjectClass.KE_CLASS_CUBEVIEW:return 53;case n.Mb.MetabaseObjectClass.KE_CLASS_BUSRUB:return 35;case n.Mb.MetabaseObjectClass.KE_CLASS_BUSRUBFACT:return 36;case n.Mb.MetabaseObjectClass.KE_CLASS_BUSRUBCOMPOSITEFACT:return 37;case n.Mb.MetabaseObjectClass.KE_CLASS_CALCCUBE:return 15;case n.Mb.MetabaseObjectClass.KE_CLASS_ODBC_DS:return 21;case n.Mb.MetabaseObjectClass.KE_CLASS_DOCUMENT:case n.Mb.MetabaseObjectClass.KE_CLASS_WEBPAGE:return 24;case n.Mb.MetabaseObjectClass.KE_CLASS_TOPOBASE:return 42;case n.Mb.MetabaseObjectClass.KE_CLASS_RDS_DATABASE:return 43;case n.Mb.MetabaseObjectClass.KE_CLASS_RDS_DICTIONARY:return 44;case n.Mb.MetabaseObjectClass.KE_CLASS_RDS_COMPDICTIONARY:return 45;case n.Mb.MetabaseObjectClass.KE_CLASS_RDS_QUERY:return 46;case n.Mb.MetabaseObjectClass.KE_CLASS_DW_DATABASE:return 47;case n.Mb.MetabaseObjectClass.KE_CLASS_DW_FACT:return 48;case n.Mb.MetabaseObjectClass.KE_CLASS_DW_FACTCUBE:return 50;case n.Mb.MetabaseObjectClass.KE_CLASS_ADOMD_CATALOG:return 51;case n.Mb.MetabaseObjectClass.KE_CLASS_ADOMDCUBE:return 105;case n.Mb.MetabaseObjectClass.KE_CLASS_ADOMDDIM:return 8;case n.Mb.MetabaseObjectClass.KE_CLASS_AUTOCUBEUNITSDIM:return 8;case n.Mb.MetabaseObjectClass.KE_CLASS_MSSCENARIODIM:return 8;case n.Mb.MetabaseObjectClass.KE_CLASS_MSSCENARIO:return 60;case n.Mb.MetabaseObjectClass.KE_CLASS_BUSNOTE:return 54;case n.Mb.MetabaseObjectClass.KE_CLASS_RESOURCEOBJECT:return 58;case n.Mb.MetabaseObjectClass.KE_CLASS_STYLESHEET:return 56;case n.Mb.MetabaseObjectClass.KE_CLASS_SECURITY:return 78;case n.Mb.MetabaseObjectClass.KE_CLASS_AUDITLOG:return 79;case n.Mb.MetabaseObjectClass.KE_CLASS_DIMSELECTIONSCHEMA:return 80;case n.Mb.MetabaseObjectClass.KE_CLASS_DIMELEMENTGROUP:return 81;case n.Mb.MetabaseObjectClass.KE_CLASS_MSMETAMODELCHART:return 52;case n.Mb.MetabaseObjectClass.KE_CLASS_CALCULATIONHISTORY:return 37;case n.Mb.MetabaseObjectClass.KE_CLASS_WEBAPPLICATION:return 33;case n.Mb.MetabaseObjectClass.KE_CLASS_WEBHYPERLINK:return 34;case n.Mb.MetabaseObjectClass.KE_CLASS_CUBELINK:return 37;case n.Mb.MetabaseObjectClass.KE_CLASS_AUTOCUBE:return 68;case n.Mb.MetabaseObjectClass.KE_CLASS_CUBELOADER:return 69;case n.Mb.MetabaseObjectClass.KE_CLASS_RUBRICATOR:return 101;case n.Mb.MetabaseObjectClass.KE_CLASS_RUBRICATORFACTOR:return 36;case n.Mb.MetabaseObjectClass.KE_CLASS_RUBRICATORSEGMENT:return 71;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_EXECUTESUB:return 1;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_CONTAINTER:return 59;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_CALCULATECUBE:return 15;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_CALCULATEREPORT:return 17;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_EXECUTEETL:return 52;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_CALCULATEMODEL:return 31;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_EXECUTENETMETHOD:return 75;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_CALCULATEMDCALCULATION:return 70;case n.Mb.MetabaseObjectClass.KE_CLASS_MDCALCULATION:return 70;case n.Mb.MetabaseObjectClass.KE_CLASS_VALIDATION:return 67;case n.Mb.MetabaseObjectClass.KE_CLASS_VALIDATIONFILTER:return 67;case n.Mb.MetabaseObjectClass.KE_CLASS_VALIDATIONGROUP:return 82;case n.Mb.MetabaseObjectClass.KE_CLASS_IMPORTREQUEST:return 76;case n.Mb.MetabaseObjectClass.KE_CLASS_EXPORTREQUEST:return 77;case n.Mb.MetabaseObjectClass.KE_CLASS_CUBEMETAUPDATE:return 76;case n.Mb.MetabaseObjectClass.KE_CLASS_WORKBOOK:return 71;case n.Mb.MetabaseObjectClass.KE_CLASS_SECURITY:return 72;case n.Mb.MetabaseObjectClass.KE_CLASS_SPECIALOBJECTS:return 88;case n.Mb.MetabaseObjectClass.KE_CLASS_RUBRICATORREVISIONSDIM:return 89;case n.Mb.MetabaseObjectClass.KE_CLASS_VALIDATIONDIM:return 90;case n.Mb.MetabaseObjectClass.KE_CLASS_RUBRICATORCALENDARLEVELSDIM:return 91;case n.Mb.MetabaseObjectClass.KE_CLASS_SHAREDPARAMS:return 92;case n.Mb.MetabaseObjectClass.KE_CLASS_CUSTOM_EXTENDER:return 93;case n.Mb.MetabaseObjectClass.KE_CLASS_DW_REPOSITORYDB:return 95;case n.Mb.MetabaseObjectClass.KE_CLASS_METADICTIONARYRDS:return 96;case n.Mb.MetabaseObjectClass.KE_CLASS_RDS_IMPORTREQUEST:return 76;case n.Mb.MetabaseObjectClass.KE_CLASS_SHORTCUT_AUDIT:return 97;case n.Mb.MetabaseObjectClass.KE_CLASS_MOBILEAPPLICATION:return 98;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_PUBLISHMOBILEAPP:return 98;case n.Mb.MetabaseObjectClass.KE_CLASS_SCORECARD:return 99;case n.Mb.MetabaseObjectClass.KE_CLASS_SEQUENCE:return 5;case n.Mb.MetabaseObjectClass.KE_CLASS_SUBJECTAREA:return 100;case n.Mb.MetabaseObjectClass.KE_CLASS_INFOCUBE:return 111;case n.Mb.MetabaseObjectClass.KE_CLASS_METADICTIONARYCOMPRDS:return 109;case n.Mb.MetabaseObjectClass.KE_CLASS_METRIC:return 110;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_UPDATE_CUBE_CACHE:case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_UPDATE_DIMENSION:return 112;case n.Mb.MetabaseObjectClass.KE_CLASS_TASK_SEARCHENGINE_IMPORT:return 113;case n.Mb.MetabaseObjectClass.KE_CLASS_NAMESPACE_FOLDER:return 108;default:return 87}}function e(n,t,i){var r=n?n.length:null,u=null,f;if(r){for(r--;r>=0;){if(n[r].c==t)break;r--}if(r!=-1&&(f=n[r],u=i?f.largeImage:f.smallImage,u))return"data:image/png;base64,"+u}return u}function o(t,i){if(!i||!i.binding)return t;var r=n.Ui.BindingManager.getManager();return t=r.getSettings(i.binding,i.value)}function s(t,i){var u,o,s,c,h,e,r,f;if(t){for(u={},o=t.substring(t.indexOf("{")+1,t.length-1).split(","),i=i?i:[],e=0;e<o.length;e++){for(r=null,s=o[e].split("*"),c=s[1],h=s[0],f=0;f<i.length;f++)if(c==n.getProperty(i[f],"k")){r=i[f].id;break}r&&(u[r]?u[r].push(parseInt(h)):u[r]=[parseInt(h)])}return u}}function h(t,i,r){var e=[],u,f;if(r=n.isDefined(r)?r:{},!t||!t.length)return e;for(u=0;u<t.length;u++)n.isDefined(t[u])&&(f={Content:t[u].n,Data:t[u]},f=n.extend(f,i,!0,!1,!0),n.isDefined(t[u].id)&&r[t[u].id]&&(f=n.extend(f,r[t[u].id],!0,!1,!0)),e.push(new n.Ui.MenuItem(f)));return e}function c(t){switch(t){case n.HorizontalAlignment.Left:return n.Mb.TextAlignment.Left;case n.HorizontalAlignment.Center:return n.Mb.TextAlignment.Center;case n.HorizontalAlignment.Right:return n.Mb.TextAlignment.Right;case n.HorizontalAlignment.Justify:return n.Mb.TextAlignment.Justify;case n.HorizontalAlignment.Custom:default:return n.Mb.TextAlignment.Custom}}function l(t){switch(t){case n.Mb.TextAlignment.Left:return n.HorizontalAlignment.Left;case n.Mb.TextAlignment.Center:return n.HorizontalAlignment.Center;case n.Mb.TextAlignment.Right:return n.HorizontalAlignment.Right;case n.Mb.TextAlignment.Justify:return n.HorizontalAlignment.Justify;case n.Mb.TextAlignment.Custom:default:return n.HorizontalAlignment.Custom}}t.HieBreadcrumbPropertyType=n.Mb.HieBreadcrumbPropertyType,t.MetabaseDisplayMode=n.Mb.MetabaseDisplayMode,t.StyleOperation=n.Mb.StyleOperation,t.isContainerableClass=i,t.getClassNameById=r,t.getObjectNameByDisplayMode=u,t.getClassIconIndex=f,t.getCustomIcon=e,t.parseControlByBinding=o,t.parseLevelAttributes=s,t.getMenuItemsByItMd=h,t.horizontalAlignment2Alignment=c,t.alignment2HorizontalAlignment=l})(c=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(n){var t,i;(function(n){n[n.KE_SOM_USERMUSTCHANGEPASSWORD=5248]="KE_SOM_USERMUSTCHANGEPASSWORD",n[n.IDS_KE_SOM_USERMUSTCHANGEPASSWORD_REQUIRED_BY_POLICY=5053]="IDS_KE_SOM_USERMUSTCHANGEPASSWORD_REQUIRED_BY_POLICY",n[n.KE_SOM_PWD_LESSMINLENGTH=5265]="KE_SOM_PWD_LESSMINLENGTH",n[n.KE_SOM_USERLOGON_BLOCKED=5313]="KE_SOM_USERLOGON_BLOCKED",n[n.KE_SOM_PWD_EQUSERNAME=5249]="KE_SOM_PWD_EQUSERNAME",n[n.KE_SOM_PWD_EQFULLUSERNAME=5262]="KE_SOM_PWD_EQFULLUSERNAME",n[n.KE_SOM_PWD_CHARSDIF=5263]="KE_SOM_PWD_CHARSDIF",n[n.KE_SOM_PWD_LETTERCASE=5309]="KE_SOM_PWD_LETTERCASE",n[n.KE_SOM_SECCMNT_PASSREQUIREDIGITSANDCHARS_ON=5959]="KE_SOM_SECCMNT_PASSREQUIREDIGITSANDCHARS_ON",n[n.KE_SOM_PWD_UNIQDEGREE=5264]="KE_SOM_PWD_UNIQDEGREE",n[n.KE_SOM_PWD_CHARSINVALID=5250]="KE_SOM_PWD_CHARSINVALID",n[n.KE_SOM_PWD_CHARSDIGSSYMS=5251]="KE_SOM_PWD_CHARSDIGSSYMS",n[n.KE_SOM_PWD_MAX_REPEATED_CHARS=5821]="KE_SOM_PWD_MAX_REPEATED_CHARS",n[n.KE_SOM_PWD_EQUSPWD=26893]="KE_SOM_PWD_EQUSPWD",n[n.KE_SOM_SECCMNT_PASSREQUIRENONALPHABETICCHARS_ON=5961]="KE_SOM_SECCMNT_PASSREQUIRENONALPHABETICCHARS_ON",n[n.KE_SOM_PWD_STRINGFORBIDDEN=5535]="KE_SOM_PWD_STRINGFORBIDDEN",n[n.KE_CMN_INVALIDID=5272]="KE_CMN_INVALIDID",n[n.KE_SOM_DBNAME_FAILED=5985]="KE_SOM_DBNAME_FAILED",n[n.KE_CMN_INVALID_OBJID=6157]="KE_CMN_INVALID_OBJID",n[n.WSF_INVALID_SESSION_MONIKER=6195]="WSF_INVALID_SESSION_MONIKER",n[n.ID_PILIB_LICEXCEPTION=3086]="ID_PILIB_LICEXCEPTION"})(t=n.FaultCodes||(n.FaultCodes={})),function(n){n[n.None=0]="None",n[n.Verifier=1]="Verifier",n[n.Denied=2]="Denied"}(i=n.OAuthServiceStatus||(n.OAuthServiceStatus={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(){function t(){}return t.parse=function(t){var i,c,e,o,r,s,u,f,h;if(n.isString(i)||!i)try{i=JSON.parse(t)}catch(l){if(t.toLowerCase().indexOf("<error>")<0)return{Code:500,Message:t};t=this._bNq("faultstring",t),t=this._bNq("message",t),c=(new DOMParser).parseFromString(t,"text/xml"),i=this._bNr(c.documentElement),i.Body&&(i=i.Body)}if(e=i.Fault,o="",e)o=e.faultstring,r=n.getProperty(e,"detail.Error")||{};else{for(s=n.getProperty(i,"BatchExecResult.its.it")||[i],f=0;f<s.length;f++)r=n.getProperty(s[f],"detail.Error")||n.getProperty(s[f],"Error"),r&&(u?u.Message+="<br>"+r.Message:u={Message:r.Message,Code:r.Code});u&&(r=u,o=u.Message)}return h=parseInt(r.Code+""),{Code:isNaN(h)?0:h,Message:o,Detail:r}},t.getResult=function(t){var i=n.getProperty(t,"detail.Error.Code");return i=parseInt(i),{Code:isNaN(i)?0:i,Message:n.getProperty(t,"detail.Exception"),Detail:n.getProperty(t,"detail.Error")}},t.parseErrorInfo=function(t){if(!t)return null;var i=t,r;return n.isString(i)&&(i=JSON.parse(i)),i.nested&&(r=this.parseErrorInfo(i.nested)),{Code:i.id,Message:i.message,Detail:r}},t._bNr=function(n){var u={},f=n.childNodes.length,i,r,t;for(f===1&&n.firstChild.nodeType===3&&(u=n.textContent),i=0;i<f;i++)r=n.childNodes[i],t=r.nodeName,r.nodeType===1&&(t.indexOf(":")>-1&&(t=t.substr(t.indexOf(":")+1)),u[t]=this._bNr(r));return u},t._bNq=function(t,i){var u=new RegExp("(?:<"+t+">)(.*)(?:<\/"+t+">)"),r;return u.test(i)?(r=u.exec(i)[1],i.replace(r,n.String.escapeHTML(r))):i},t}();t.FaultParser=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var r=function(n){function i(t){return n.call(this,t)||this}return __extends(i,n),i.prototype._e=function(){n.prototype._e.call(this),this._UserName=null,this._Password=null,this._Domain=!1,this._LoginUrl=null},i.prototype.getCredentials=function(n){if(this._LoginUrl)return window.location.href=this._LoginUrl,new Promise(function(){});var i;return i=this._Domain?new t.UserCreds({UserName:this._UserName,Password:this._Password,Domain:this._Domain}):new t.UserCreds({UserName:this._UserName,Password:this._Password}),n&&n(i),new Promise(function(n){n(i)})},i}(n.Object),i;t.CredentialsLogonProvider=r,i=function(){function n(){}return n.prototype.getCredentials=function(n){return n&&n(new t.UserCreds({UseGuestCreds:!0})),new Promise(function(n){n(new t.UserCreds({UseGuestCreds:!0}))})},n}(),t.GuestLogonProvider=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._Service=null,this._ApplicationUrl=null},r.prototype._cB2=function(i,r){var u=r.Response;switch(this._Service){case n.Mb.OAuthService.Twitter:window.location.href="http://twitter.com/oauth/authorize?oauth_token="+u.GetOAuthTokenResult.oauth_token;break;default:this._qO&&this._qO(null,{Code:t.OAuthServiceStatus.None,Message:""}),this._lF({Code:t.OAuthServiceStatus.None,Message:""})}},r.prototype._cB3=function(n,i){this._qO&&this._qO(null,t.FaultParser.parse(i.ResponseText))},r.prototype._cB4=function(n,i){return n?t.OAuthServiceStatus.Denied:i?t.OAuthServiceStatus.Verifier:t.OAuthServiceStatus.None},r.prototype.getCredentials=function(i){var f=this,s=new Promise(function(n,t){f._jf=n,f._lF=t}),u,o;this._qO=i;var h=n.Url.getQueryParam("denied"),e=n.Url.getQueryParam("oauth_verifier"),c=n.Url.getQueryParam("oauth_token"),r=this._cB4(!!h,!!e);switch(r){case t.OAuthServiceStatus.Denied:this._qO&&this._qO(null,{Code:r,Message:""}),this._lF({Code:r,Message:""});break;case t.OAuthServiceStatus.Verifier:u=new n.Mb.OAuthLogonData({OAuthService:this._Service,OAuthToken:c,OAuthVerifier:e}),this._qO&&this._qO(new t.UserCreds({OAuth:u})),this._jf(new t.UserCreds({OAuth:u}));break;case t.OAuthServiceStatus.None:o={GetOAuthToken:{tArg:{oauthService:this._Service,applicationUrl:this._ApplicationUrl}}},this._h(o,new n.Delegate(this._cB2,this),new n.Delegate(this._cB3,this))}return s},r}(t.BiService);t.OAuthLogonProvider=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._SAMLUrl=null},r.prototype._aUy=function(r,u){var o=JSON.parse(u.ResponseText),s=n.getProperty(o,"GetSAMLRequestResult.samlRequest"),f,e;if(s){window.location.href=s;return}i.prototype._aUy.call(this,r,u),f=o.GetSAMLResponseResult||{},e=new t.SAML2LogonData({ResponseUrl:f.responseUrl,RemoteAddr:f.remoteAddr,SamlResponse:n.IsIE?n.escapeHTML(f.samlResponse):f.samlResponse}),this._qO&&this._qO(new t.UserCreds({SAML2:e})),this._jf(new t.UserCreds({SAML2:e}))},r.prototype._ano=function(n,r){i.prototype._ano.call(this,n,r);var u=t.FaultParser.parse(r.ResponseText);this._qO&&this._qO(null,u),this._lF(u)},r.prototype._aUz=function(t){var r=new window.Date,u=n.Url.joinQueryParam("d",r.getTime()+"",this._SAMLUrl,"?");return new n.Ajax({Url:u,Type:n.Ajax.Type.GET,Body:t,Async:!this._DoSync})},r.prototype._s5=function(t,i,r){var e={Ajax:t instanceof n.Ajax?t:this._aUz(t),Marker:this.getMarker()};e.Ajax.Fail.insert(0,this._ano,this,{ErrCallback:r}),e.Ajax.Success.insert(0,this._aUy,this,{Callback:i,ErrCallback:r}),e.Ajax.getAsync()?this._CurrentRequest?this._Queue.push(e):this._avb(e):this._avb(e)},r.prototype.getCredentials=function(n){var t=this,i=new Promise(function(n,i){t._jf=n,t._lF=i});return this._qO=n,this._s5({}),i},r}(t.PPService);t.SAML2LogonProvider=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._bindEvents(),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["Executed","Error","StartRequest","EndRequest"]),this._Service=null,this._StartRequestTimeout=0,this._EndRequestTimeout=100,this._BackgroundRequestTimeout=3e3},i.prototype._bindEvents=function(){this._Service&&(this._Service.StartRequest.insert(0,this._bNs,this),this._Service.EndRequest.insert(0,this._beL,this),this._Service.Executed.insert(0,this._bNt,this),this._Service.Error.insert(0,this._bNu,this))},i.prototype._unBindEvents=function(){this._Service&&(this._Service.StartRequest.remove(this._bNs,this),this._Service.EndRequest.remove(this._beL,this),this._Service.Executed.remove(this._bNt,this),this._Service.Error.remove(this._bNu,this))},i.prototype._bNs=function(t){this._beM(),this._beN();var r=t.getMarker(),u=r!==n.Mb.PPServiceMarker.Background?this._StartRequestTimeout:this._BackgroundRequestTimeout,f={marker:r};this._beO=n.setTimeout(this._beP,u,f,this)},i.prototype._bNt=function(n,t){this.Executed.fire(this,t)},i.prototype._beL=function(){this.endRequestTimeout()},i.prototype._bNu=function(n,t){this.Error.fire(this,t),this._beL(n,t)},i.prototype._beP=function(n){this.StartRequest.fire(this,n)},i.prototype._beQ=function(n){this._beM(),this.EndRequest.fire(this,n)},i.prototype._beM=function(){this._beO&&(n.clearTimeout(this._beO),delete this._beO)},i.prototype._beN=function(){this._beR&&(n.clearTimeout(this._beR),delete this._beR)},i.prototype.setService=function(n){this._Service!==n&&(this._unBindEvents(),this._Service=n,this._bindEvents())},i.prototype.getService=function(){return this._Service},i.prototype.endRequestTimeout=function(){this._beN(),this._beR=n.setTimeout(this._beQ,this._EndRequestTimeout,{},this)},i.prototype.clearRequests=function(){this._beM(),this._beN(),this._Service&&this._Service.clearRequests()},i.prototype.dispose=function(){this.clearRequests(),this._unBindEvents(),delete this._Service,t.prototype.dispose.call(this)},i}(n.Object);t.ServiceRequest=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype._initFields=function(t){t.Waiter||(this._Waiter=new n.Ui.Waiter),n.isDefined(t.ShowWaiter)||(t.ShowWaiter=!0),i.prototype._initFields.call(this,t)},r.prototype._aUC=function(t){if(this._Waiter){var i=this._Waiter,r=document.activeElement;t&&r instanceof HTMLElement?(this._aUD=r,r.blur()):this._aUD&&(this._aUD.focus(),this._aUD=undefined),i.show&&i.hide?t?i.show():i.hide():n.isDOMNode(this._Waiter)&&(t?n.show(this._Waiter):n.hide(this._Waiter))}},r.prototype._beP=function(n){i.prototype._beP.call(this,n),this._beS!==this._ShowWaiter&&(this._bNv(n.marker),this._aUC(this._ShowWaiter)),this._beS=this._ShowWaiter},r.prototype._beQ=function(n){i.prototype._beQ.call(this,n),this._beS&&(this._bNv(),this._aUC(!1)),this._beS=!1},r.prototype._bNv=function(i){this._Waiter instanceof n.Ui.Waiter&&(i===t.PPServiceMarker.Delay?(this._Waiter.setIndicationVisibility(!1),n.clearTimeout(this._beT),this._beT=n.setTimeout(this._bNw,1e3,null,this)):this._bNw())},r.prototype._bNw=function(){n.clearTimeout(this._beT),this._beT=-1,this._Waiter instanceof n.Ui.Waiter&&this._Waiter.setIndicationVisibility(!0)},r.prototype.hideWaiter=function(){this._aUC(!1)},r.prototype.showWaiter=function(){this._aUC(!0)},r}(t.ServiceRequest);t.WaiterRequest=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.setMetabase(i._Metabase),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["BeforeCheckStatus","CheckStatusSuccess","CheckStatusFailed"]),this._PingTimeout=12e4,this._Metabase=null,this._UseMbQueueRqts=!1},i.prototype._cB5=function(){this.BeforeCheckStatus.fire(this),this.check()},i.prototype._cB6=function(n,t){this._cB7=t.Response&&t.Response.GetStatusResult,this.CheckStatusSuccess.fire(this,t)},i.prototype._cB8=function(n,t){this.CheckStatusFailed.fire(this,t)},i.prototype._mX=function(i){t.prototype._mX.call(this,i),this._PingTimeout>0&&this._beU&&(this._bNx=n.setTimeout(this._cB5,this._PingTimeout,{},this))},i.prototype.getMetabase=function(){return this._Metabase},i.prototype.setMetabase=function(n){this._Metabase=n,this._Metabase&&!this._PPServiceUrl&&(this._PPServiceUrl=this._Metabase.getPPServiceUrl())},i.prototype.getCurrentStatus=function(){return this._cB7},i.prototype.getIsStarted=function(){return!!this._beU},i.prototype.start=function(){this._beU=!0,this.check()},i.prototype.stop=function(){n.clearTimeout(this._bNx),delete this._bNx,this._beU=!1},i.prototype.check=function(){var t=new n.Delegate(this._cB6,this),i=new n.Delegate(this._cB8,this),r;this._UseMbQueueRqts?this._Metabase.getStatus(t,i):(r={GetStatus:{tArg:{metabase:this._Metabase.getConnectionOdId()},allowMetabaseNotFound:!0}},this._s5(r,t,i))},i.prototype.dispose=function(){delete this._Metabase,this.stop(),t.prototype.dispose.call(this)},i}(t.PPService);t.StatusService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.setEnableExpand(!1),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Message="",this._MessageEscapeHtml=!0,this._Detail="",this._Width=400,this._Height=135,this._Caption="",this._ResourceKey="ErrorMessage",this._ImagePath=n.ImagePath,this._defineEvents(["CloseButtonClicked"]),this._Buttons=n.Ui.MessageButtons.Ok,this._Type=n.Ui.MessageType.Error,this._aUE=0},i.prototype._initFields=function(n){n&&(this._cB9=n.OkButton,delete n.OkButton),t.prototype._initFields.call(this,n)},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("PPErrorDialog"),this._DetailContentDomNode=n.htmlToDOM("<div class='PPErrorDialog__DetailContainer'><\/div>"),this._DialogContentDomNode.appendChild(this._DetailContentDomNode),n.hide(this._DetailContentDomNode);var i=this._yc(this._Message||this._Content,"",this.getMessageEscapeHtml());i.Class="PPErrorDialogMessage",this._beV=new n.Ui.Label(i),this.setContent(this._beV),this._Detail&&this.setDetail(this._Detail)},i.prototype._qm=function(){return this._DetailButton=new n.Ui.Button({Class:"PPErrorDialog__DetailButton",Height:this._ButtonsHeight,Width:105,ResourceKey:"detailButton",ParentNode:this._DialogButtonsDomNode,IsVisible:!!this._Detail,Click:new n.Delegate(this._beW,this)}),this._SendEmailButton=new n.Ui.Button({Class:"PPErrorDialog__SendEmailButton",Height:this._ButtonsHeight,ResourceKey:"ErrorDialogSendEmail",ParentNode:this._DialogButtonsDomNode,IsVisible:!!this._Detail,Click:new n.Delegate(this._cCa,this)}),this._OkButton=new n.Ui.Button(n.extend({Height:this._ButtonsHeight,Width:this._ButtonsWidth,ResourceKey:"okButton",ParentNode:this._DialogButtonsDomNode,IsFocused:!0,Click:new n.Delegate(this._aN,this)},this._cB9,!0)),[this._DetailButton,this._SendEmailButton,this._OkButton]},i.prototype._yc=function(t,i,r){var e=n.isObject(t)?t:{},u=n.isObject(t)?t.Content:t||i,f;return r&&u&&(f=document.createElement("span"),f.textContent!=null?f.textContent=u:f.innerText=u,u=f.innerHTML),n.isDefined(u)&&(e.Content=u),e},i.prototype._beW=function(){if(this._aFj=!this._aFj,this._aFj){n.show(this._DetailContentDomNode);var r=n.Ui.getMarginsHeight(this._DialogContentDomNode),u=this._DialogContentDomNode.offsetHeight+this._DetailContentDomNode.offsetHeight-r;this._aUE=this._DetailContentDomNode.offsetHeight,this.setHeight(this._g(this._Height)+this._aUE),this._DialogContentDomNode.style.height=u+"px",this._beX.setWidth(this._DialogContentDomNode.offsetWidth-n.Ui.getMarginsWidth(this._DialogContentDomNode)),this._DetailButton.setResourceKey("detailButtonHide")}else this.setHeight(this._g(this._Height)-this._aUE),n.hide(this._DetailContentDomNode),this._DetailButton.setResourceKey("detailButton"),this._aUE=0},i.prototype._cCa=function(){var e="mailto:support@fsight.ru",f=new window.Date,o=f.toLocaleDateString(),s=f.toLocaleTimeString(),h=this._Caption,u=o+"/"+s+" Foresight Analytics Platform "+n.Version+" - "+h,c=this._Message+"%0A%0A"+this._Detail,r;u=u.replace(" ","%20"),r=e+"?subject="+u+"&body="+c,255<r.length&&(r=r.substring(0,440)+"..."),this._aFk||(this._aFk=n.createElement(document.body,"","iframe")),this._aFk.src=r},i.prototype._gr=function(n,i){t.prototype._gr.call(this,n,i),this.CloseButtonClicked.fire(this,i)},i.prototype.getContentHeight=function(){var i=t.prototype.getContentHeight.call(this);return this._aFj&&(i-=this._DetailContentDomNode.offsetHeight+n.Ui.getMarginsHeight(this._DetailContentDomNode)),i},i.prototype.close=function(){this._aFk&&(document.body.removeChild(this._aFk),delete this._aFk),t.prototype.close.call(this)},i.prototype.setButtons=function(){},i.prototype.getMessageEscapeHtml=function(){return this._MessageEscapeHtml},i.prototype.setMessage=function(n){this._Message=n;var t=this._yc(n,"",this.getMessageEscapeHtml());this._beV.setSettings(t)},i.prototype.getMessage=function(){return this._beV.getContent()},i.prototype.setDetail=function(t){var i=this._yc(t,"");this._Detail=i.Content,this._beX?this._beX.setContent(i.Content):this._beX=new n.Ui.RichTextArea({Class:"PPErrorDialog__Detail",Content:i.Content,ParentNode:this._DetailContentDomNode,ReadOnly:!0,Height:150}),this._Detail&&this._Detail!==this._Message?(this._SendEmailButton.show(),this._DetailButton.show()):(this._aFj=!0,this._DetailButton.hide(),this._SendEmailButton.hide(),this._beW(this,null))},i.prototype.getDetail=function(){return this._Detail},i.prototype.show=function(n,i,r,u){this._aFj&&this._beW(this,null),t.prototype.show.call(this,n,i,r,u)},i}(t.Message);t.ErrorDialog=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(t){var f=function(){function i(){}return i.prototype.getCodes=function(){return[t.FaultCodes.ID_PILIB_LICEXCEPTION]},i.prototype.show=function(n){this.getDialog(n).show()},i.prototype.hide=function(){this._l2&&this._l2.hide()},i.prototype.getDialog=function(t){if(!this._l2){var r=t.Message+"<br>"+n.resourceManager.getString("LicenseWarningMessage"),i=new n.Ui.Message({Type:n.Ui.MessageType.Exclamation,ImagePath:n.ImagePath,ResourceKey:"LicenseWarningDialog",Height:125,Width:400,Content:r});i.getOkButton().setResourceKey("AboutBoxOkButton"),this._l2=i}return this._l2},i}(),i,r,u;t.LicExceptionInfoAction=f,i=function(){function t(n){this._Code=n.Code,this._Message=n.Message,this.OkButtonClicked=n.OkButtonClicked,this.CancelButtonClicked=n.CancelButtonClicked,this.CloseButtonClicked=n.CloseButtonClicked}return t.prototype._aN=function(n,t){this.OkButtonClicked&&this.OkButtonClicked.fire(this,t)},t.prototype._ie=function(n,t){this.CancelButtonClicked&&this.CancelButtonClicked.fire(this,t)},t.prototype._cCb=function(n,t){this.CloseButtonClicked&&this.CloseButtonClicked.fire(this,t)},t.prototype._aUF=function(t){var i={ImagePath:n.ImagePath,Width:400,Height:150,ResourceKey:"ErrorMessage",ButtonsWidth:105,EnableMove:!0,EnableEscapeClose:!0,IsRTL:n.getCurrentCulture().IsRTL,OkButtonClicked:new n.Delegate(this._aN,this),CancelButtonClicked:new n.Delegate(this._ie,this),CloseButtonClicked:new n.Delegate(this._cCb,this),MessageEscapeHtml:!0};return n.extend(i,t,!0)},t.prototype.getCodes=function(){return[this._Code]},t.prototype.show=function(n){this.getDialog(n).show()},t.prototype.hide=function(){this._l2&&this._l2.hide()},t.prototype.getDialog=function(t){var i=this._l2,r,u;return i||(i=new n.Ui.ErrorDialog(this._aUF()),this._l2=i),t&&t.Message&&!this._Message?i.setMessage(t.Message):i.setMessage(this._Message||n.resourceManager.getString("AppMessageInfoServerError","Content")),r=t&&t.Detail,r&&n.isObject(r)&&(u=r.Message),n.isString(r)&&(u=r+""),i.setDetail(u),i},t.prototype.setMessage=function(n){this.getDialog(null).setMessage(n)},t.prototype.setDetail=function(n){this.getDialog(null).setDetail(n)},t}(),t.ErrorDialogInfoAction=i,r=function(i){function r(r){return i.call(this,n.extend(r,{Code:t.FaultCodes.WSF_INVALID_SESSION_MONIKER},!0))||this}return __extends(r,i),r.prototype._aUF=function(){return i.prototype._aUF.call(this,{ButtonsWidth:115,Message:{ResourceKey:"AppMessageSessionExpired"},OkButton:{ResourceKey:"AppButtonAuthorization"}})},r.prototype.getDialog=function(){return this._bNy||(this._bNy=new n.Ui.ErrorDialog(this._aUF())),this._bNy},r}(i),t.InvalidSessionInfoAction=r,u=function(){function i(n){this.OkButtonClicked=n.OkButtonClicked,this.CancelButtonClicked=n.CancelButtonClicked}return i.prototype._aN=function(n,t){this.OkButtonClicked&&this.OkButtonClicked.fire(this,t)},i.prototype._ie=function(n,t){this.CancelButtonClicked&&this.CancelButtonClicked.fire(this,t)},i.prototype.getCodes=function(){return[t.FaultCodes.KE_SOM_USERMUSTCHANGEPASSWORD,t.FaultCodes.IDS_KE_SOM_USERMUSTCHANGEPASSWORD_REQUIRED_BY_POLICY]},i.prototype.show=function(n){this.getDialog(n).show()},i.prototype.hide=function(){this._l2&&this._l2.hide()},i.prototype.getDialog=function(t){if(!this._l2){var i=new n.Ui.ChangePasswordDialog({ShowOldPass:!1,AutoClose:!1,ImagePath:n.ImagePath});i.OkButtonClicked.add(this._aN,this,{Message:t}),i.CancelButtonClicked.add(this._ie,this,{Message:t}),this._l2=i}return this._l2},i}(),t.ChangePasswordInfoAction=u})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype._initFields=function(t){var u,r;if(this._Items=[],this._aFl=[],t&&t.Items){for(u=n.toArray(t.Items),r=0;r<u.length;r++)this.add(u[r]);delete t.Items}i.prototype._initFields.call(this,t)},r.prototype._bNz=function(n){for(var r=n.getCodes(),u=r.length,i=-1,f=0,t=0;t<u;t++)i=this._aUG(r[t]),i>-1&&f++;return f===u-1?i:-1},r.prototype._aUG=function(n){for(var i,t=0;t<this._Items.length;t++)if(i=this._Items[t],i.getCodes().indexOf(n)>-1)return t;return-1},r.prototype.add=function(n){if(n){var t=this._bNz(n);t>=0?this._Items[t]=n:this._Items.push(n)}},r.prototype.remove=function(t){var r=this._bNz(t),u;r>=0&&(u=this._Items[r],u instanceof n.Object&&u.dispose(),this._Items.splice(r,1))},r.prototype.clear=function(n){while(this._Items.length)this.remove(this._Items[this._Items.length-1],n)},r.prototype.getMessageInfo=function(n){var t=this._aUG(n);return t>-1?this._Items[t]:null},r.prototype.showMessage=function(n){var t=this._aUG(n&&n.Code),i;return t>-1?(this._aFl[t]=n,this._Items[t].show(n),i=this._Items[t]):(i=this.getDefaultInfoAction(),i.show(n)),i},r.prototype.hideMessage=function(t){var i=-1,r;if(n.isDefined(t)&&(i=this._aUG(t)),this._aFl[i])this._Items[i].hide(),this._aFl[i]=undefined;else{for(r in this._aFl)this._Items[r].hide();this._aFl=[]}this._aUH&&this._aUH.hide()},r.prototype.getDefaultInfoAction=function(){return this._aUH||(this._aUH=new t.ErrorDialogInfoAction({Code:0})),this._aUH},r}(n.Object);t.MessageService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this,n)||this;return t._bindEvents(),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._Metabase=null,this._ServiceRequest=null,this._StatusService=null,this._MessageService=null,this._ShowMessage=!0},r.prototype._initFields=function(r){r=r||{Metabase:undefined},r.Metabase&&r.Metabase instanceof n.Mb.Metabase||(r.Metabase=new n.Mb.Metabase(r.Metabase));var u=r.Metabase;r.ServiceRequest&&r.ServiceRequest instanceof t.ServiceRequest||(r.ServiceRequest=n.extend({Service:u},r.ServiceRequest,!0),this._ServiceRequest=new t.WaiterRequest(r.ServiceRequest),delete r.ServiceRequest),r.StatusService&&r.StatusService instanceof t.StatusService||(r.StatusService=n.extend({Metabase:u},r.StatusService,!0),this._StatusService=new t.StatusService(r.StatusService),delete r.StatusService),r.MessageInfo&&(r.MessageService=r.MessageInfo,delete r.MessageInfo),r.MessageService&&r.MessageService instanceof t.MessageService||(this._MessageService=new t.MessageService(r.MessageService),delete r.MessageService),i.prototype._initFields.call(this,r),this._StatusService&&!this._StatusService.getMetabase()&&this._StatusService.setMetabase(this._Metabase),this._ServiceRequest&&!this._ServiceRequest.getService()&&this._ServiceRequest.setService(this._Metabase),this._Metabase&&!!this._Metabase.getConnectionId()&&this._StatusService&&this._StatusService.start()},r.prototype._bindEvents=function(){this._Metabase&&(this._Metabase.Opened.add(this._cCc,this),this._Metabase.Closed.add(this._aUl,this),this._Metabase.Error.add(this._cCd,this))},r.prototype._cCc=function(n,t){this._StatusService&&this._StatusService.start(),this._jf&&this._jf(t),delete this._jf,delete this._lF},r.prototype._aUl=function(){this._StatusService&&this._StatusService.stop()},r.prototype._cCd=function(n,i){var r;i.ErrorInfo&&(r=t.FaultParser.parseErrorInfo(i.ErrorInfo)),i.ResponseText&&(r=t.FaultParser.parse(i.ResponseText)),this._lF&&this._lF(r),delete this._lF,delete this._jf,r.Args=i.Args,this._ShowMessage&&this._MessageService&&this._MessageService.showMessage(r)},r.prototype._cCe=function(t){t&&this._Metabase&&this._Metabase.isLive()?this._Metabase.open(t):n.Debug.assert(!1,"need set credentials and metabase")},r.prototype._cCf=function(n){n&&this._MessageService&&this._ShowMessage&&this._MessageService.showMessage(n)},r.prototype.openMetabase=function(n){var t=this,i=new Promise(function(n,i){t._jf=n,t._lF=i});return n.getCredentials().then(this._cCe.bind(this),this._cCf.bind(this)),i},r.prototype.getServiceRequest=function(){return this._ServiceRequest},r.prototype.getStatusService=function(){return this._StatusService},r.prototype.getMessageService=function(){return this._MessageService},r.prototype.getMetabase=function(){return this._Metabase},r.prototype.dispose=function(){delete this._Metabase,i.prototype.dispose.call(this)},r}(n.Object);t.MetabaseController=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(i){var r=t.call(this,i)||this;return isNaN(r._Control.getTabIndex())&&r._Control.setTabIndex(0),r._ShowAttributes&&(r._Control.setCaptionVisible(!0),r._Control.setShowColumns(!0)),r._Control.setShowToolTips(r._ShowToolTip),r._Control.setMultiSelect(r._MultiSelect),r._Control.setEmptySelection(r._EmptySelection),r._Control.ContextMenu.insert(0,r._a7,r),r._Filter=n.toArray(r._Filter),r._LoadOnCreate&&r.refreshAll(),n.cultureChanged.add(r._aW,r),r}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["NodesLoaded","NodeClick","NodeDblClick","SelectionChanging","SelectionChanged","AllNodesLoaded"]),this._DisplayMode="Names",this._ShowEmptyFolder=!0,this._ShowInternalObjects=!1,this._HideLinkObjects=!1,this._ShowShortCuts=!0,this._CanSelectFolder=!0,this._Filter=[],this._FolderTreeFilter=[],this._ShowOnlyContainers=!1,this._EmptySelection=!0,this._Metabase=null,this._RootKey=0,this._ShowAttributes=!1,this._LoadOnCreate=!0,this._MultiSelect=!1,this._ShowRootFolder=!1,this._SortSettings={FolderInTop:!0},this._ImagePath=n.ImagePath+"metabase/",this._ShowToolTip=!0,this._EditOnLoad=null,this._UnselectableClasses=[],this._EffectiveRights=!1,this._EffectiveRightsSubj=null,this._RequestObjectParams=!1,this._qP=0,this._beY=[],this._bL=!0,this._StateSelectedKeys=[],this._StateExpandedKeys=[],this._StateFocusedKey=null,this._CustomClasses=[],this._ShowAllNonSystemObjects=!1},i.prototype._initFields=function(i){var f,u,r;for(i=i||{},n.isDefined(i.ShowToolTips)&&(i.ShowToolTip=i.ShowToolTips),n.isDefined(i.FolderInTop)&&!i.SortSettings&&(i.SortSettings={}),n.isDefined(i.FolderInTop)&&(i.SortSettings.FolderInTop=i.FolderInTop),i.ImagePath&&!n.String.endsWith(i.ImagePath,"metabase/")&&(this._ImagePath=i.ImagePath+"metabase/"),i.Control&&!i.Control.ImageList&&delete i.Control.ImageList,delete i.ImagePath,f={Width:300,Height:500,ImageList:new n.ImageList({Source:this._ImagePath+"GlbClsImg16.png",IconHeight:16,IconWidth:16,IsRetinaAvailable:!0}),EnableSearch:!1,EnableResizeColumn:!0,CaptionVisible:!1,RowSelect:!1,ShowColumns:!1,MultiSelect:!1,ShowLines:!1,UseShiftSelect:!1,UseCtrlSelect:!1,SelectionChanged:new n.Delegate(this._cS,this),NodeClick:new n.Delegate(this._aun,this),NodeDblClick:new n.Delegate(this._abB,this),Expand:new n.Delegate(this._bNA,this),ToolTipShowing:new n.Delegate(this._cCg,this),ImageHeight:16,Columns:[{ResourceKey:"MBTreeListNameCol",Visible:!0,Editable:!0},{ResourceKey:"MBTreeListIdCol",Visible:!0,Editable:!1},{ResourceKey:"MBTreeListTsCol",Visible:!0,Editable:!1},{ResourceKey:"MBTreeListDescCol",Visible:!0,Editable:!1}],Class:"PPMetabaseTreeList"},i.Control=n.extend(f,i.Control,!0,!0),u=i.Control.Columns||[],r=0;r<u.length;r++)u[r]&&(u[r].SortMethod=u[r].SortMethod||this._u3.bind(this));delete i.FolderInTop,delete i.ShowToolTips,t.prototype._initFields.call(this,i)},i.prototype._fT=function(){return n.getTypeByName("PP.Ui.TreeList")},i.prototype._abW=function(){this._qP++},i.prototype._mX=function(){this._qP--,this._qP===0&&(this._beY.length?this.refreshAll.apply(this,this._beY.shift()):this.AllNodesLoaded.fire(this,{}))},i.prototype._ahi=function(t,i,r,u){var e,f;this._abW(),e={hideEmptyFolders:!this._ShowEmptyFolder,includeRoot:i,hideLinkObjects:this._HideLinkObjects,includeInternals:this._ShowInternalObjects,showAllNonSystemObjects:this._ShowAllNonSystemObjects},e.classes=this._Filter||[],e.containers=this._FolderTreeFilter||[],f=this._EffectiveRights?{pattern:{effectiveRights:!0}}:null,f&&this._EffectiveRightsSubj&&(f.pattern.effectiveRightsSubj={k:-1,sid:{sid:""},id:this._EffectiveRightsSubj.id,type:this._EffectiveRightsSubj.type}),this._RequestObjectParams&&(f||(f={}),f.md={pars:!0},f.mds=!0),this._Metabase.getObjectsOp(t,e,f,r!==!1,u,new n.Delegate(this._mY,this))},i.prototype._mY=function(t,i){n.getProperty(i,"Args.IsSilent")&&this._Metabase.Error.insert(0,this._bNB,this,{ResponseText:i.ResponseText}),this._mX()},i.prototype._bNB=function(n,t){t.Args.ResponseText===t.ResponseText&&(t.Break=!0,this._Metabase.Error.remove(this._bNB,this))},i.prototype._aW=function(){(this._IsRefreshed||this._LoadOnCreate)&&this.refreshAll(!1,!0)},i.prototype._a7=function(n,t){var i=this._anr(t.TreeNode);t.Objects=i?[i]:[],delete t.TreeNode},i.prototype._ahj=function(n,t){if(this._bL&&t.Node&&t.Node.isLive()){var r=this._anr(t.Node),i={ChangedNodes:[t.Node],Key:t.Node.getKey(),Selected:t.Node.getSelected(),Descriptor:r,Cancel:!1};this.SelectionChanging.fire(this,i),t.Cancel=i.Cancel}},i.prototype._cS=function(n,t){if(this._bL&&t.Node&&t.Node.isLive()){var i=this._anr(t.Node);this.SelectionChanged.fire(this,{ChangedNodes:t.ChangedNodes,Key:t.Node.getKey(),Selected:t.Node.getSelected(),Descriptor:i})}this._bL=!0},i.prototype._aun=function(n,t){this.NodeClick.fire(this,t)},i.prototype._abB=function(n,t){this.NodeDblClick.fire(this,t)},i.prototype._cCg=function(t,i){var r,f;if(this.getShowToolTip()){if(r=i.Node.getValue(),!r)return;f=n.Mb.Ui.getClassNameById(r.c,!0),f||(f="UNKNOWN");var e=this._mW(r),s=n.getCurrentCulture(),o=e.TimeStamp?s.dateToStr(e.TimeStamp):"",u="";u+=n.resourceManager.getString("MBTreeListNameCol","Caption")+": "+n.String.escapeHTML(r.n)+"<br />",u+=n.resourceManager.getString("MBTreeListIdCol","Caption")+": "+n.String.escapeHTML(r.i)+"<br />",o&&(u+=n.resourceManager.getString("MBTreeListTsCol","Caption")+": "+o+"<br />"),u+=n.resourceManager.getString("MBTreeListTypeCol","Caption")+": "+f,i.ToolTip.setContent(u)}},i.prototype._bNA=function(t,i){var r=i.Node;r.isLive()&&r.getNodes().getCount()==0&&this._ahi(r.getKey(),!1,!1,new n.Delegate(this._ht,this,{Key:r.getKey()}))},i.prototype._beZ=function(t,i){if(!t||!n.isObject(t))return null;var r=new n.Mb.Object;return r.fillDesc(t),i&&i[t.k]&&r.setParams(i[t.k]),r},i.prototype._mW=function(t,i){var o=n.Date.parse(t["@ts"]),s=t["@ds"]?t["@ds"]:"",f=!1,u,e;return this._FolderTreeFilter.length>0&&(f=!!t["@hf"]),this._Filter.length>0&&!f&&(f=t.h),u={Key:t.k,Text:n.String.escapeHTML(n.Mb.Ui.getObjectNameByDisplayMode(this._DisplayMode,t)),ImageIndex:n.Mb.Ui.getClassIconIndex(t.c),Selected:!1,CanSelect:!this._CanSelectFolder&&t.c===n.Mb.MetabaseObjectClass.KE_CLASS_FOLDER||this._UnselectableClasses.indexOf(t.c)>-1?!1:!0,Value:t,Expanded:!!i,Checked:!1,HasChild:f,Columns:[t.i,o,s],Data:t.c,TimeStamp:o},u.ImageIndex==87&&(e=n.Mb.Ui.getCustomIcon(this._CustomClasses,t.c),e&&(delete u.ImageIndex,u.ImageUrl=e)),u},i.prototype._sj=function(t){var r=!1,i;return r=t["@isShortcut"]?!1:this._FolderTreeFilter&&this._FolderTreeFilter.length?this._FolderTreeFilter.indexOf(t.c)>=0:this._Filter&&this._Filter.length?this._Filter.indexOf(t.c)<0:n.Mb.Ui.isContainerableClass(t.c),i=!0,r?this._ShowEmptyFolder||(i=i&&t.h,!i&&this._Filter&&(i=this._Filter.indexOf(t.c)>=0),this._ShowOnlyContainers&&(t.h=t.h&&t["@hf"])):i=!this._ShowOnlyContainers&&(this._Filter&&this._Filter.length?this._Filter.indexOf(t.c)>=0:this._ShowInternalObjects),!this._ShowShortCuts&&t["@isShortcut"]&&(i=!1),i},i.prototype._aCw=function(n,t,i,r){var o=[],c=o,e,l,y,s,u,h,f,a,v;if(n=n||[],this._ShowRootFolder&&this._Control.getNodes().getCount()==0&&n.length&&(e=this._mW(n[0]),e.Nodes=o,e.Expanded=!0,e.Key===0&&(e.Editable=!1),c=[e],r&&r.push(this._beZ(n[0],i))),t)for(l={},y=!0,s=c.length;s<n.length;s++)this._sj(n[s])&&(u=n[s],u["@hf"]=!1,u.h=!1,h=this._mW(u),r&&r.push(this._beZ(u,i)),y?(o.push(h),l[u.k]=h,y=!1):(f=l[u.p],f&&(f.Expanded=f.HasChild=!0,l[u.k]=h,f.Nodes||(f.Nodes=[]),f.Nodes.push(h))));else{for(a=c.length;a<n.length;a++)v=n[a],this._sj(v)&&(o.push(this._mW(v)),r&&r.push(this._beZ(v,i)));this._SortSettings&&this._SortSettings.FolderInTop&&o.sort(this._u3.bind(this))}return c},i.prototype._u3=function(t,i,r){if(r=r||{},this._SortSettings&&this._SortSettings.FolderInTop){if(t.Data===n.Mb.MetabaseObjectClass.KE_CLASS_FOLDER&&i.Data!==n.Mb.MetabaseObjectClass.KE_CLASS_FOLDER)return r&&r.direction===n.SortDirection.Desc?1:-1;if(t.Data!==n.Mb.MetabaseObjectClass.KE_CLASS_FOLDER&&i.Data===n.Mb.MetabaseObjectClass.KE_CLASS_FOLDER)return r&&r.direction===n.SortDirection.Desc?-1:1}var u=t.Text,f=i.Text;return(r.column=r.column||0,r.column>0&&(u=t.Columns[r.column-1],f=i.Columns[r.column-1]),(n.isString(u)||n.isString(f))&&(u=u!=null?(u+"").toLowerCase():"",f=f!=null?(f+"").toLowerCase():""),u>f)?1:u<f?-1:(t._bP-i._bP)*(r.direction==n.SortDirection.Desc?-1:1)},i.prototype._anr=function(t){if(!t)return null;var r=t.getParentNode(),i=t.getValue()||{},u=t.getData()||{};return new n.Mb.Object({Key:t.getKey(),Class:i.c,Name:i.n,Id:i.i,Params:u.Params,IsShortcut:i["@isShortcut"],IsLink:i["@isLink"],OdId:this._Metabase.getObjectOdId(t.getKey()),ParentKey:r?r.getKey():this.getRootKey()})},i.prototype._be0=function(){switch(this.getDisplayMode()){case n.Mb.Ui.MetabaseDisplayMode.Names:return n.Mb.FindInfoAttribute.Name;case n.Mb.Ui.MetabaseDisplayMode.Idents:return n.Mb.FindInfoAttribute.Ident;case n.Mb.Ui.MetabaseDisplayMode.Both:return n.Mb.FindInfoAttribute.NameOrIndent}},i.prototype._lY=function(t,i){var r={Levels:-1,IncludeRoot:!1,HideEmptyFolders:!0,HideAllFolders:!0,Limit:-1,ExpandResult:!0,HideFoundEmptyFolders:!1,IncludeRootPath:!1,FindTextInFoldersOnly:!1};n.extend(r,t,!0,!0),this._abW(),this._Metabase.findObjects(this._RootKey,r,i)},i.prototype._cCh=function(t,i){var e=JSON.parse(i.ResponseText),r=n.getProperty(e,"GetObjectsResult.objects.its.d")||[],u,f;r.length&&(this._ans=this._ans||0,u=this._ans%r.length,f=r[u].k,this.expandNodesTo(f,!0))},i.prototype._ht=function(t,i){var w,u,r,c,p,o,l,a,s;this._Control.beginUpdate();var h=i.Args||{},v=h.Key||this._RootKey,y=i.Response,f=n.getProperty(y,"GetObjectsResult.objects.its.d")||[];this._ShowAllNonSystemObjects&&(w=f.filter(function(n){return!n["@itl"]}),f=w),u=this.getControl(),r=u.getNodeByKey(v),r||delete this._IsRefreshed;var e=f.length,b={},k=[];if(h.Find)while(e--)f[e].p===n.Mb.UINT32MAXVALUE&&(f[e].p=-1);if(this._RequestObjectParams)for(c=n.getProperty(y,"GetObjectsResult.mds.its.it")||[],e=c.length;e--;)p=n.getProperty(c[e],"obInst.obDesc.k"),p&&(b[p]=n.getProperty(c[e],"pars.it")||[]);for(o=this._aCw(f,h.ExpandRecursive,b,k),l=r?r.getNodes():u.getNodes(),o.length>0?(this._ShowRootFolder&&!r&&(v=o[0].Key),h.UpdateFrom?l.updateFrom(o):l.loadFrom(o)):(l.clear(),r&&r.setHasChild(!1)),u.endUpdate(),a=!0,this._StateSelectedKeys.length>0&&(this.setSelectedKeys(this._StateSelectedKeys,this._bL),this._StateSelectedKeys=[]),s=this._StateExpandedKeys.length-1;s>=0;s--)(r=u.getNodeByKey(this._StateExpandedKeys[s]))&&(r.getExpanded()||(a=!1),r.setExpanded(!0),this._StateExpandedKeys.splice(s,1));this._EditOnLoad!=null&&(r=u.getNodeByKey(this._EditOnLoad))&&(r.setSelected(!0,undefined,!0),r.setFocus(),u.scrollToNode(r),u.startEditing(r,0),this._EditOnLoad=null),a&&this._StateFocusedKey!=null&&this.setSelectedKeys([this._StateFocusedKey],!1,!1,this._StateFocusedKey),a&&(this._StateExpandedKeys=[],this._StateFocusedKey=null,this._EditOnLoad=null),this.NodesLoaded.fire(this,{Objects:f,Descriptors:k,RootKey:v,Error:y.errorInfo}),this._mX()},i.prototype._dEv=function(t,i){var o=i.Args||{},f=this.getExpandedKeys(),h=i.Response,s=n.getProperty(h,"GetObjectsResult.objects.its.d"),c=this._aCw(s),r=this._Control.getNodeByKey(o.Key),e,u;for(r&&r.getNodes().updateFrom(c),this._StateExpandedKeys=[].concat(f),e=[],u=0;u<f.length;u++)r=this._Control.getNodeByKey(f[u]),r&&r.getExpanded()&&this._StateExpandedKeys.splice(0,1),r&&e.push(this._anr(r));this._StateExpandedKeys.length>0&&this._Control.getNodeByKey(this._StateExpandedKeys[0]).setExpanded(!0),this.NodesLoaded.fire(this,{Objects:s,Descriptors:e,RootKey:o.Key}),this._mX()},i.prototype._abV=function(t,i){for(var v=i.Args.Key,d=i.Args.ExpandToNode,g=i.Args.Expand,nt=i.Args.FireEvent,rt=i.Args.Select,ut=i.Args.Focus,tt=JSON.parse(i.ResponseText),u=n.getProperty(tt,"GetObjectsResult.objects.its.d"),s=n.getProperty(tt,"GetObjectsResult.mds.its.it")||[],it={},y,ft=this._SortSettings&&this._SortSettings.FolderInTop,c,h,l,a,b,e,k,r=s.length;r--;)y=n.getProperty(s[r],"obInst.obDesc.i"),y&&(it[y]=s[r]&&s[r].pars&&s[r].pars.it||"");if(u){var o={},p=[],f,w={};for(this._Control.beginUpdate(),r=0;r<u.length;r++)if(u[r].pars=it[u[r].i]||"",this._sj(u[r])){if(u[r].k==0||this._Control.getNodeByKey(u[r].k)){w[u[r].p]=!0;continue}o[u[r].p]||(o[u[r].p]=[],u[r].p!=v&&p.push(u[r].p)),u[r].k==v&&(f=u[r].p),o[u[r].p].push(this._mW(u[r]))}for(w[f]=!1,c=0;c<p.length;c++)if(f=p[c],d&&!w[f]&&(h=this._Control.getNodeByKey(f),h)){for(b=h.getNodes().getCount(),l=0;l<b;l++)(a=h.getNodes().getItem(l))&&a.isLive()&&o[f].indexOf(a.getKey())<0&&o[f].push(a._JSON);ft&&o[f].sort(this._u3.bind(this)),h.getNodes().loadFrom(o[f]),this._Control.endUpdate(),o[f].length<b&&this.refresh(f,!1)}this._Control.endUpdate(),e=this._Control.getNodeByKey(v),e&&(rt&&(e.setSelected(!0,!1,nt),k=this._StateSelectedKeys.indexOf(e.getKey()),k!=-1&&this._StateSelectedKeys.splice(k),nt||(this._bL=!0)),ut&&(e.setFocus(),e.isVisible()===!1&&this._Control.getHeight()>0&&this._Control.scrollToNode(e)),(d||g)&&this._Control.expandToNode(e),g&&e.setExpanded(!0))}this._mX()},i.prototype.getFilter=function(){return this._Filter},i.prototype.getMetabase=function(){return this._Metabase},i.prototype.getRootKey=function(){return this._RootKey},i.prototype.getUnselectableClasses=function(){return this._UnselectableClasses},i.prototype.getDisplayMode=function(){return this._DisplayMode},i.prototype.getShowRootFolder=function(){return this._ShowRootFolder},i.prototype.getEmptySelection=function(){return this._EmptySelection},i.prototype.getMultiSelect=function(){return this._MultiSelect},i.prototype.getShowAttributes=function(){return this._ShowAttributes},i.prototype.getShowEmptyFolder=function(){return this._ShowEmptyFolder},i.prototype.getShowInternalObjects=function(){return this._ShowInternalObjects},i.prototype.getShowShortCuts=function(){return this._ShowShortCuts},i.prototype.getShowOnlyContainer=function(){return this._ShowOnlyContainers},i.prototype.getEditOnLoad=function(){return this._EditOnLoad},i.prototype.getFolderTreeFilter=function(){return this._FolderTreeFilter},i.prototype.getRequestObjectParams=function(){return this._RequestObjectParams},i.prototype.getEffectiveRights=function(){return this._EffectiveRights},i.prototype.getEffectiveRightsSubj=function(){return this._EffectiveRightsSubj},i.prototype.getAllNodesLoaded=function(){return this._qP===0},i.prototype.setEditOnLoad=function(n){this._EditOnLoad=n},i.prototype.setFolderTreeFilter=function(){this._FolderTreeFilter},i.prototype.setRequestObjectParams=function(n){this._RequestObjectParams=n},i.prototype.setEffectiveRights=function(n){this._EffectiveRights=n},i.prototype.setEffectiveRightsSubj=function(n){this._EffectiveRightsSubj=n},i.prototype.setEmptySelection=function(n){this._EmptySelection!=n&&(this._EmptySelection=n,this._Control.setEmptySelection(n))},i.prototype.setMultiSelect=function(n){this._MultiSelect!==n&&(this._MultiSelect=n,this._Control.setMultiSelect(n))},i.prototype.setDisplayMode=function(n,t){this._DisplayMode=n,t||this.refreshAll(!0,!0)},i.prototype.setShowAttributes=function(n){this._ShowAttributes!==n&&(this._ShowAttributes=n,this._Control.setCaptionVisible(n),this._Control.setShowColumns(n))},i.prototype.setShowToolTip=function(n){this._Control.setShowToolTips(n)},i.prototype.getShowToolTip=function(){return this._Control.getShowToolTips()},i.prototype.setShowEmptyFolder=function(n,t){this._ShowEmptyFolder!==n&&(this._ShowEmptyFolder=n,t||this.refreshAll(!0,!0))},i.prototype.setShowRootFolder=function(n,t){this._ShowRootFolder!=n&&(this._ShowRootFolder=n,t||this.refreshAll())},i.prototype.setShowInternalObjects=function(n,t){this._ShowInternalObjects!=n&&(this._ShowInternalObjects=n,this.setSelectedKeys([this._RootKey]),t||this.refreshAll())},i.prototype.setShowShortCuts=function(n,t){this._ShowShortCuts!=n&&(this._ShowShortCuts=n,this.setSelectedKeys([this._RootKey]),t||this.refreshAll())},i.prototype.setShowOnlyContainers=function(n,t){this._ShowOnlyContainers!==n&&(this._ShowOnlyContainers=n,t||this.refreshAll())},i.prototype.refreshAll=function(t,i){if(this.getAllNodesLoaded()){if(this._StateSelectedKeys=[],i){var r=this.getControl().getFocusedNode();this._StateFocusedKey=r?this._g(r.getKey()):null,this._StateSelectedKeys=this.getSelectedKeys()||[],this._StateExpandedKeys=this.getExpandedKeys()||[]}else this.getSelectedKeys().length&&this.setSelectedKeys([this._RootKey],!0,!0);this.getControl().deSelectAll(!1),this.getControl().getNodes().clear(),this._Metabase&&!this._IsRefreshed&&(this._ahi(this._RootKey,this._ShowRootFolder,t,new n.Delegate(this._ht,this)),this._IsRefreshed=!0)}else this._beY.push(arguments)},i.prototype.refresh=function(t,i){var u=this._Control.getNodeByKey(t),r;this._Metabase&&!this._IsRefreshed&&(u?this._ahi(t,!1,i,new n.Delegate(this._ht,this,{Key:u?u.getKey():t,UpdateFrom:!0})):(this._abW(),r=this._EffectiveRights?{pattern:{effectiveRights:!0}}:null,r&&this._EffectiveRightsSubj&&this._EffectiveRightsSubj.id&&this._EffectiveRightsSubj.type&&(r.pattern.effectiveRightsSubj={k:-1,sid:{sid:""},id:this._EffectiveRightsSubj.id,type:this._EffectiveRightsSubj.type}),this._Metabase.getPathToRootOp(t,{classes:this._Filter,hideEmptyFolders:!this._ShowEmptyFolder,includeInternals:this._ShowInternalObjects},new n.Delegate(this._abV,this,{Key:t,FireEvent:this._bL,Select:!0,Focus:t,ExpandToNode:!0}),!1,this._RootKey,new n.Delegate(this._mY,this,{IsSilent:!1}),this._HideLinkObjects,r)))},i.prototype.expandNodesTo=function(n,t){var i=this._Control.getNodeByKey(n);i?(this.getControl().expandToKeyNode(n),t&&(i.setFocus(),i.isVisible()===!1&&this._Control.getHeight()>0&&this._Control.scrollToNode(i))):this.setExpandedKeys([n],!1,t&&n)},i.prototype.clearFilter=function(n){this._Filter=[],n||this.refreshAll(!0,!0)},i.prototype.addFilter=function(t,i){t&&(t=n.toArray(t),this._Filter=this._Filter.concat(t),i||this.refreshAll(!0,!0))},i.prototype.setFilter=function(t,i){t&&(this._Filter=n.toArray(t),i||this.refreshAll(!0,!0))},i.prototype.setMetabase=function(n){this._Metabase!==n&&(this._Metabase=n,this.refreshAll())},i.prototype.setRootKey=function(t,i){if(t==="Root"&&(t=0),!n.isNumber(t))throw new n.ArgumentException(this);this._RootKey!==t&&(this._RootKey=t,i||this.refreshAll())},i.prototype.getSelectedKeys=function(){for(var t=this.getControl().getSelectedNodes(),i=[],n=0;n<t.length;n++)t[n].isLive()&&i.push(t[n].getKey());return i},i.prototype.getSelectedObjects=function(){for(var t=this.getControl().getSelectedNodes(),i=[],n=0;n<t.length;n++)t[n].getKey()!==0&&i.push(this._anr(t[n]));return i},i.prototype.setSelectedKeys=function(n,t,i,r,u){var e=this.getControl(),c,h,s,o,f;if(t=t!==!1,u=u!==!1,i=i!==!1,c=arguments[5],h=!1,e.beginUpdate(),i&&(h=e.getEmptySelection(),this._bL=!1,this.setEmptySelection(!0),e.deSelectAll(!1),this._bL=!0),n)for(s=0;s<n.length;s++)o=n[s],f=e.getNodeByKey(o),f?(f.setSelected(!0,undefined,t),o===r&&(f.setFocus(),f.isVisible()===!1&&e.getHeight()>0&&e.scrollToNode(f)),u&&this._Control.expandToNode(f)):(this._bL=t,this._StateSelectedKeys.indexOf(o)===-1&&this._StateSelectedKeys.push(o),this._StateSelectedKeys.indexOf(r)===-1&&(this._StateFocusedKey=r),this.refresh(o,!0));this._Control.endUpdate()},i.prototype.getExpandedKeys=function(){return this._Control.getAllExpandedKeys()},i.prototype.setExpandedKeys=function(t,i,r){if(this._Metabase){i=i!==!1;for(var u=0;u<t.length;u++)this._abW(),this._Metabase.getPathToRootOp(t[u],{classes:this._Filter,hideEmptyFolders:!this._ShowEmptyFolder,includeInternals:this._ShowInternalObjects},new n.Delegate(this._abV,this,{Key:t[u],FireEvent:!1,Expand:i,Focus:t[u]===r,ExpandToNode:!0}),!1,this._RootKey,new n.Delegate(this._mY,this))}},i.prototype.deSelectAll=function(){return this.getControl().deSelectAll.apply(this.getControl(),arguments)},i.prototype.selectAll=function(){return this.getControl().selectAll.apply(this.getControl(),arguments)},i.prototype.invertSelection=function(){var r,i,n,u,t;if(this._MultiSelect){for(r=this.getSelectedKeys(),i=this.getControl().getAllNodes(!0),this.getControl().beginUpdate(),n=0,u=i.length;n<u;n++)t=i[n],r.indexOf(t.getKey())<0?t.setSelected(!0,undefined,!1):t.setSelected(!1,undefined,!1);this.getControl().endUpdate()}},i.prototype.getPathToRoot=function(n){var t=this._Control.getNodeByKey(n),i=[];if(t){while(t!=null)i.push(this._anr(t)),t=t.getParentNode();i.reverse()}return i},i.prototype.getMbObjectByKey=function(n){var t=this._Control.getNodeByKey(n);return this._anr(t)},i.prototype.adjustColumnsWidthByContent=function(){var u=this.getControl().getColumns(),i=u.getItems()||[],n,r,t;for(this.getControl().beginUpdate(),n=0,r=i.length;n<r;n++)t=this.getControl().getOptimalWidthForColumn(n),t>0&&i[n].setWidth(t);this.getControl().endUpdate()},i.prototype.updateScrolls=function(){this.getControl().getHorizontalScroll().updateSize(),this.getControl().getVerticalScroll().updateSize()},i.prototype.clearSelection=function(){this.getControl().clearSelection.apply(this.getControl(),arguments)},i.prototype.find=function(t,i){i=i||{};var r={Find:!0,ExpandRecursive:!1};i.ExpandRecursive&&(r.ExpandRecursive=i.ExpandRecursive,delete i.ExpandRecursive),t&&(t.Active=!0,i.FindInfo=t),this._lY(i,new n.Delegate(this._ht,this,r))},i.prototype.findAndExpand=function(t){this._cCi!=t?(this._cCi=t,this._ans=0):(this._ans=this._ans||0,this._ans++),this._lY({Limit:this._ans+1,FindInfo:{Active:!0,Text:t,Attribute:this._be0()}},new n.Delegate(this._cCh,this))},i.prototype.setCustomClasses=function(n){this._CustomClasses=n},i.prototype.getCustomClasses=function(){return this._CustomClasses},i.prototype.dispose=function(){delete this._Metabase,n.cultureChanged.remove(this._aW,this),t.prototype.dispose.call(this)},i}(n.Ui.ProxyControl);t.MetabaseTreeList=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(n){n.Translations={1025:{Id:"ar_SA",FlagIndex:190,LangResourceKey:"RdsLangarSA",CountryName:""},1026:{Id:"bg_BG",FlagIndex:21,LangResourceKey:"RdsLangbgBG",CountryName:""},1027:{Id:"ca_ES",FlagIndex:67,LangResourceKey:"RdsLangcaES",CountryName:""},1028:{Id:"zh_TW",FlagIndex:224,LangResourceKey:"RdsLangzhTW",CountryName:""},1029:{Id:"cs_CZ",FlagIndex:54,LangResourceKey:"RdsLangcsCZ",CountryName:""},1030:{Id:"da_DK",FlagIndex:57,LangResourceKey:"RdsLangdaDK",CountryName:""},1031:{Id:"de_DE",FlagIndex:55,LangResourceKey:"RdsLangdeDE",CountryName:""},1032:{Id:"el_GR",FlagIndex:89,LangResourceKey:"RdsLangelGR",CountryName:""},1033:{Id:"en_US",FlagIndex:229,LangResourceKey:"RdsLangenUS",CountryName:""},1034:{Id:"es_ES",FlagIndex:67,LangResourceKey:"RdsLangesES",CountryName:""},1035:{Id:"fi_FI",FlagIndex:71,LangResourceKey:"RdsLangfiFI",CountryName:""},1036:{Id:"fr_FR",FlagIndex:76,LangResourceKey:"RdsLangfrFR",CountryName:""},1037:{Id:"he_IL",FlagIndex:103,LangResourceKey:"RdsLangheIL",CountryName:""},1038:{Id:"hu_HU",FlagIndex:100,LangResourceKey:"RdsLanghuHU",CountryName:""},1039:{Id:"is_IS",FlagIndex:108,LangResourceKey:"RdsLangisIS",CountryName:""},1040:{Id:"it_IT",FlagIndex:109,LangResourceKey:"RdsLangitIT",CountryName:""},1041:{Id:"ja_JP",FlagIndex:112,LangResourceKey:"RdsLangjaJP",CountryName:""},1042:{Id:"ko_KR",FlagIndex:120,LangResourceKey:"RdsLangkoKR",CountryName:""},1043:{Id:"nl_NL",FlagIndex:163,LangResourceKey:"RdsLangnlNL",CountryName:""},1044:{Id:"nb_NO",FlagIndex:164,LangResourceKey:"RdsLangnbNO",CountryName:""},1045:{Id:"pl_PL",FlagIndex:176,LangResourceKey:"RdsLangplPL",CountryName:""},1046:{Id:"pt_BR",FlagIndex:28,LangResourceKey:"RdsLangptBR",CountryName:""},1047:{Id:"rm_CH",FlagIndex:41,LangResourceKey:"RdsLangrmCH",CountryName:""},1048:{Id:"ro_RO",FlagIndex:186,LangResourceKey:"RdsLangroRO",CountryName:""},1049:{Id:"ru_RU",FlagIndex:188,LangResourceKey:"RdsLangruRU",CountryName:""},1050:{Id:"hr_HR",FlagIndex:98,LangResourceKey:"RdsLanghrHR",CountryName:""},1051:{Id:"sk_SK",FlagIndex:200,LangResourceKey:"RdsLangskSK",CountryName:""},1052:{Id:"sq_AL",FlagIndex:5,LangResourceKey:"RdsLangsqAL",CountryName:""},1053:{Id:"sv_SE",FlagIndex:195,LangResourceKey:"RdsLangsvSE",CountryName:""},1054:{Id:"th_TH",FlagIndex:214,LangResourceKey:"RdsLangthTH",CountryName:""},1055:{Id:"tr_TR",FlagIndex:221,LangResourceKey:"RdsLangtrTR",CountryName:""},1056:{Id:"ur_PK",FlagIndex:175,LangResourceKey:"RdsLangurPK",CountryName:""},1057:{Id:"id_ID",FlagIndex:101,LangResourceKey:"RdsLangidID",CountryName:""},1058:{Id:"uk_UA",FlagIndex:226,LangResourceKey:"RdsLangukUA",CountryName:""},1059:{Id:"be_BY",FlagIndex:33,LangResourceKey:"RdsLangbeBY",CountryName:""},1060:{Id:"sl_SI",FlagIndex:198,LangResourceKey:"RdsLangslSI",CountryName:""},1061:{Id:"et_EE",FlagIndex:62,LangResourceKey:"RdsLangetEE",CountryName:""},1062:{Id:"lv_LV",FlagIndex:133,LangResourceKey:"RdsLanglvLV",CountryName:""},1063:{Id:"lt_LT",FlagIndex:131,LangResourceKey:"RdsLangltLT",CountryName:""},1064:{Id:"tg_TJ",FlagIndex:215,LangResourceKey:"RdsLangtgTJ",CountryName:""},1065:{Id:"fa_IR",FlagIndex:107,LangResourceKey:"RdsLangfaIR",CountryName:""},1066:{Id:"vi_VN",FlagIndex:237,LangResourceKey:"RdsLangviVN",CountryName:""},1067:{Id:"hy_AM",FlagIndex:6,LangResourceKey:"RdsLanghyAM",CountryName:""},1068:{Id:"az_AZ",FlagIndex:15,LangResourceKey:"RdsLangazAZ",CountryName:""},1069:{Id:"eu_ES",FlagIndex:67,LangResourceKey:"RdsLangeuES",CountryName:""},1070:{Id:"hsb_DE",FlagIndex:55,LangResourceKey:"RdsLanghsbDE",CountryName:""},1071:{Id:"mk_MK",FlagIndex:141,LangResourceKey:"RdsLangmkMK",CountryName:""},1074:{Id:"tn_ZA",FlagIndex:244,LangResourceKey:"RdsLangtnZA",CountryName:""},1076:{Id:"xh_ZA",FlagIndex:244,LangResourceKey:"RdsLangxhZA",CountryName:""},1077:{Id:"zu_ZA",FlagIndex:244,LangResourceKey:"RdsLangzuZA",CountryName:""},1078:{Id:"af_ZA",FlagIndex:244,LangResourceKey:"RdsLangafZA",CountryName:""},1079:{Id:"ka_GE",FlagIndex:80,LangResourceKey:"RdsLangkaGE",CountryName:""},1080:{Id:"fo_FO",FlagIndex:75,LangResourceKey:"RdsLangfoFO",CountryName:""},1081:{Id:"hi_IN",FlagIndex:104,LangResourceKey:"RdsLanghiIN",CountryName:""},1082:{Id:"mt_MT",FlagIndex:150,LangResourceKey:"RdsLangmtMT",CountryName:""},1086:{Id:"ms_MY",FlagIndex:155,LangResourceKey:"RdsLangmsMY",CountryName:""},1087:{Id:"kk_KZ",FlagIndex:123,LangResourceKey:"RdsLangkkKZ",CountryName:""},1088:{Id:"ky_KG",FlagIndex:114,LangResourceKey:"RdsLangkyKG",CountryName:""},1089:{Id:"sw_KE",FlagIndex:113,LangResourceKey:"RdsLangswKE",CountryName:""},1090:{Id:"tk_TM",FlagIndex:218,LangResourceKey:"RdsLangtkTM",CountryName:""},1091:{Id:"uz_UZ",FlagIndex:231,LangResourceKey:"RdsLanguzUZ",CountryName:""},1092:{Id:"tt_RU",FlagIndex:188,LangResourceKey:"RdsLangttRU",CountryName:""},1093:{Id:"bn_IN",FlagIndex:104,LangResourceKey:"RdsLangbnIN",CountryName:""},1094:{Id:"pa_IN",FlagIndex:104,LangResourceKey:"RdsLangpaIN",CountryName:""},1095:{Id:"gu_IN",FlagIndex:104,LangResourceKey:"RdsLangguIN",CountryName:""},1096:{Id:"or_IN",FlagIndex:104,LangResourceKey:"RdsLangorIN",CountryName:""},1097:{Id:"ta_IN",FlagIndex:104,LangResourceKey:"RdsLangtaIN",CountryName:""},1098:{Id:"te_IN",FlagIndex:104,LangResourceKey:"RdsLangteIN",CountryName:""},1099:{Id:"kn_IN",FlagIndex:104,LangResourceKey:"RdsLangknIN",CountryName:""},1100:{Id:"ml_IN",FlagIndex:104,LangResourceKey:"RdsLangmlIN",CountryName:""},1101:{Id:"as_IN",FlagIndex:104,LangResourceKey:"RdsLangasIN",CountryName:""},1102:{Id:"mr_IN",FlagIndex:104,LangResourceKey:"RdsLangmrIN",CountryName:""},1103:{Id:"sa_IN",FlagIndex:104,LangResourceKey:"RdsLangsaIN",CountryName:""},1104:{Id:"mn_MN",FlagIndex:144,LangResourceKey:"RdsLangmnMN",CountryName:""},1105:{Id:"bo_CN",FlagIndex:46,LangResourceKey:"RdsLangboCN",CountryName:""},1106:{Id:"cy_GB",FlagIndex:78,LangResourceKey:"RdsLangcyGB",CountryName:""},1107:{Id:"km_KH",FlagIndex:115,LangResourceKey:"RdsLangkmKH",CountryName:""},1108:{Id:"lo_LA",FlagIndex:124,LangResourceKey:"RdsLangloLA",CountryName:""},1110:{Id:"gl_ES",FlagIndex:67,LangResourceKey:"RdsLangglES",CountryName:""},1111:{Id:"kok_IN",FlagIndex:104,LangResourceKey:"RdsLangkokIN",CountryName:""},1114:{Id:"syr_SY",FlagIndex:208,LangResourceKey:"RdsLangsyrSY",CountryName:""},1115:{Id:"si_LK",FlagIndex:128,LangResourceKey:"RdsLangsiLK",CountryName:""},1117:{Id:"iu_CA",FlagIndex:35,LangResourceKey:"RdsLangiuCAN",CountryName:""},1118:{Id:"am_ET",FlagIndex:68,LangResourceKey:"RdsLangamET",CountryName:""},1121:{Id:"ne_NP",FlagIndex:165,LangResourceKey:"RdsLangneNP",CountryName:""},1122:{Id:"fy_NL",FlagIndex:163,LangResourceKey:"RdsLangfyNL",CountryName:""},1123:{Id:"ps_AF",FlagIndex:2,LangResourceKey:"RdsLangpsAF",CountryName:""},1124:{Id:"fil_PH",FlagIndex:174,LangResourceKey:"RdsLangfilPH",CountryName:""},1125:{Id:"dv_MV",FlagIndex:152,LangResourceKey:"RdsLangdvMV",CountryName:""},1128:{Id:"ha_NG",FlagIndex:161,LangResourceKey:"RdsLanghaNG",CountryName:""},1130:{Id:"yo_NG",FlagIndex:161,LangResourceKey:"RdsLangyoNG",CountryName:""},1131:{Id:"quz_BO",FlagIndex:27,LangResourceKey:"RdsLangquzBO",CountryName:""},1132:{Id:"nso_ZA",FlagIndex:244,LangResourceKey:"RdsLangnsoZA",CountryName:""},1133:{Id:"ba_RU",FlagIndex:188,LangResourceKey:"RdsLangbaRU",CountryName:""},1134:{Id:"lb_LU",FlagIndex:132,LangResourceKey:"RdsLanglbLU",CountryName:""},1135:{Id:"kl_GL",FlagIndex:84,LangResourceKey:"RdsLangklGL",CountryName:""},1136:{Id:"ig_NG",FlagIndex:161,LangResourceKey:"RdsLangigNG",CountryName:""},1144:{Id:"ii_CN",FlagIndex:46,LangResourceKey:"RdsLangiiCN",CountryName:""},1146:{Id:"arn_CL",FlagIndex:44,LangResourceKey:"RdsLangarnCL",CountryName:""},1148:{Id:"moh_CA",FlagIndex:35,LangResourceKey:"RdsLangmohCA",CountryName:""},1150:{Id:"br_FR",FlagIndex:76,LangResourceKey:"RdsLangbrFR",CountryName:""},1152:{Id:"ug_CN",FlagIndex:46,LangResourceKey:"RdsLangugCN",CountryName:""},1153:{Id:"mi_NZ",FlagIndex:168,LangResourceKey:"RdsLangmiNZ",CountryName:""},1154:{Id:"oc_FR",FlagIndex:76,LangResourceKey:"RdsLangocFR",CountryName:""},1155:{Id:"co_FR",FlagIndex:76,LangResourceKey:"RdsLangcoFR",CountryName:""},1156:{Id:"gsw_FR",FlagIndex:76,LangResourceKey:"RdsLanggswFR",CountryName:""},1157:{Id:"sah_RU",FlagIndex:188,LangResourceKey:"RdsLangsahRU",CountryName:""},1158:{Id:"qut_GT",FlagIndex:91,LangResourceKey:"RdsLangqutGT",CountryName:""},1159:{Id:"rw_RW",FlagIndex:189,LangResourceKey:"RdsLangrwRW",CountryName:""},1160:{Id:"wo_SN",FlagIndex:203,LangResourceKey:"RdsLangwoSN",CountryName:""},1164:{Id:"prs_AF",FlagIndex:2,LangResourceKey:"RdsLangprsAF",CountryName:""},1169:{Id:"gd_GB",FlagIndex:78,LangResourceKey:"RdsLanggdGB",CountryName:""},2049:{Id:"ar_IQ",FlagIndex:106,LangResourceKey:"RdsLangarIQ",CountryName:""},2052:{Id:"zh_CN",FlagIndex:46,LangResourceKey:"RdsLangzhCN",CountryName:""},2055:{Id:"de_CH",FlagIndex:41,LangResourceKey:"RdsLangdeCH",CountryName:""},2057:{Id:"en_GB",FlagIndex:78,LangResourceKey:"RdsLangenGB",CountryName:""},2058:{Id:"es_MX",FlagIndex:154,LangResourceKey:"RdsLangesMX",CountryName:""},2060:{Id:"fr_BE",FlagIndex:19,LangResourceKey:"RdsLangfrBE",CountryName:""},2064:{Id:"it_CH",FlagIndex:41,LangResourceKey:"RdsLangitCH",CountryName:""},2067:{Id:"nl_BE",FlagIndex:19,LangResourceKey:"RdsLangnlBE",CountryName:""},2068:{Id:"nn_NO",FlagIndex:164,LangResourceKey:"RdsLangnnNO",CountryName:""},2070:{Id:"pt_PT",FlagIndex:181,LangResourceKey:"RdsLangptPT",CountryName:""},2077:{Id:"sv_FI",FlagIndex:71,LangResourceKey:"RdsLangsvFI",CountryName:""},2092:{Id:"az_AZ",FlagIndex:15,LangResourceKey:"RdsLangazAZCyr",CountryName:""},2094:{Id:"dsb_DE",FlagIndex:55,LangResourceKey:"RdsLangdsbDE",CountryName:""},2108:{Id:"ga_IE",FlagIndex:102,LangResourceKey:"RdsLanggaIE",CountryName:""},2110:{Id:"ms_BN",FlagIndex:26,LangResourceKey:"RdsLangmsBN",CountryName:""},2115:{Id:"uz_UZ",FlagIndex:231,LangResourceKey:"RdsLanguzUZCyr",CountryName:""},2117:{Id:"bn_BD",FlagIndex:18,LangResourceKey:"RdsLangbnBD",CountryName:""},2128:{Id:"mn_CN",FlagIndex:46,LangResourceKey:"RdsLangmnCN",CountryName:""},2141:{Id:"iu_CA",FlagIndex:35,LangResourceKey:"RdsLangiuCA",CountryName:""},2143:{Id:"tzm_DZ",FlagIndex:60,LangResourceKey:"RdsLangtzmDZ",CountryName:""},2155:{Id:"quz_EC",FlagIndex:61,LangResourceKey:"RdsLangquzEC",CountryName:""},3073:{Id:"ar_EG",FlagIndex:63,LangResourceKey:"RdsLangarEG",CountryName:""},3076:{Id:"zh_HK",FlagIndex:95,LangResourceKey:"RdsLangzhHK",CountryName:""},3079:{Id:"de_AT",FlagIndex:11,LangResourceKey:"RdsLangdeAT",CountryName:""},3081:{Id:"en_AU",FlagIndex:12,LangResourceKey:"RdsLangenAU",CountryName:""},3082:{Id:"es_EM",FlagIndex:67,LangResourceKey:"RdsLangesEM",CountryName:""},3084:{Id:"fr_CA",FlagIndex:35,LangResourceKey:"RdsLangfrCA",CountryName:""},3179:{Id:"quz_PE",FlagIndex:171,LangResourceKey:"RdsLangquzPE",CountryName:""},4097:{Id:"ar_LY",FlagIndex:134,LangResourceKey:"RdsLangarLY",CountryName:""},4100:{Id:"zh_SG",FlagIndex:196,LangResourceKey:"RdsLangzhSG",CountryName:""},4103:{Id:"de_LU",FlagIndex:132,LangResourceKey:"RdsLangdeLU",CountryName:""},4105:{Id:"en_CA",FlagIndex:35,LangResourceKey:"RdsLangenCA",CountryName:""},4106:{Id:"es_GT",FlagIndex:91,LangResourceKey:"RdsLangesGT",CountryName:""},4108:{Id:"fr_CH",FlagIndex:41,LangResourceKey:"RdsLangfrCH",CountryName:""},4122:{Id:"hr_BA",FlagIndex:16,LangResourceKey:"RdsLanghrBA",CountryName:""},4155:{Id:"smj_NO",FlagIndex:164,LangResourceKey:"RdsLangsmjNO",CountryName:""},5121:{Id:"ar_DZ",FlagIndex:60,LangResourceKey:"RdsLangarDZ",CountryName:""},5124:{Id:"zh_MO",FlagIndex:145,LangResourceKey:"RdsLangzhMO",CountryName:""},5127:{Id:"de_LI",FlagIndex:127,LangResourceKey:"RdsLangdeLI",CountryName:""},5129:{Id:"en_NZ",FlagIndex:168,LangResourceKey:"RdsLangenNZ",CountryName:""},5130:{Id:"es_CR",FlagIndex:48,LangResourceKey:"RdsLangesCR",CountryName:""},5132:{Id:"fr_LU",FlagIndex:132,LangResourceKey:"RdsLangfrLU",CountryName:""},5146:{Id:"bs_BA",FlagIndex:16,LangResourceKey:"RdsLangbsBA",CountryName:""},6145:{Id:"ar_MA",FlagIndex:135,LangResourceKey:"RdsLangarMA",CountryName:""},6153:{Id:"en_IE",FlagIndex:102,LangResourceKey:"RdsLangenIE",CountryName:""},6154:{Id:"es_PA",FlagIndex:170,LangResourceKey:"RdsLangesPA",CountryName:""},6156:{Id:"fr_MC",FlagIndex:136,LangResourceKey:"RdsLangfrMC",CountryName:""},7169:{Id:"ar_TN",FlagIndex:219,LangResourceKey:"RdsLangarTN",CountryName:""},7177:{Id:"en_ZA",FlagIndex:244,LangResourceKey:"RdsLangenZA",CountryName:""},7178:{Id:"es_DO",FlagIndex:59,LangResourceKey:"RdsLangesDO",CountryName:""},8193:{Id:"ar_OM",FlagIndex:169,LangResourceKey:"RdsLangarOM",CountryName:""},8201:{Id:"en_JM",FlagIndex:110,LangResourceKey:"RdsLangenJM",CountryName:""},8202:{Id:"es_VE",FlagIndex:234,LangResourceKey:"RdsLangesVE",CountryName:""},8218:{Id:"bs_BA",FlagIndex:16,LangResourceKey:"RdsLangbsBACyr",CountryName:""},9217:{Id:"ar_YE",FlagIndex:242,LangResourceKey:"RdsLangarYE",CountryName:""},9226:{Id:"es_CO",FlagIndex:47,LangResourceKey:"RdsLangesCO",CountryName:""},9275:{Id:"smn_FI",FlagIndex:71,LangResourceKey:"RdsLangsmnFI",CountryName:""},10241:{Id:"ar_SY",FlagIndex:208,LangResourceKey:"RdsLangarSY",CountryName:""},10249:{Id:"en_BZ",FlagIndex:34,LangResourceKey:"RdsLangenBZ",CountryName:""},10250:{Id:"es_PE",FlagIndex:171,LangResourceKey:"RdsLangesPE",CountryName:""},10266:{Id:"sr_RS",FlagIndex:187,LangResourceKey:"RdsLangsrRS",CountryName:""},11265:{Id:"ar_JO",FlagIndex:111,LangResourceKey:"RdsLangarJO",CountryName:""},11273:{Id:"en_TT",FlagIndex:222,LangResourceKey:"RdsLangenTT",CountryName:""},11274:{Id:"es_AR",FlagIndex:9,LangResourceKey:"RdsLangesAR",CountryName:""},12289:{Id:"ar_LB",FlagIndex:125,LangResourceKey:"RdsLangarLB",CountryName:""},12297:{Id:"en_ZW",FlagIndex:246,LangResourceKey:"RdsLangenZW",CountryName:""},12298:{Id:"es_EC",FlagIndex:61,LangResourceKey:"RdsLangesEC",CountryName:""},13313:{Id:"ar_KW",FlagIndex:121,LangResourceKey:"RdsLangarKW",CountryName:""},13321:{Id:"en_PH",FlagIndex:174,LangResourceKey:"RdsLangenPH",CountryName:""},13322:{Id:"es_CL",FlagIndex:44,LangResourceKey:"RdsLangesCL",CountryName:""},14337:{Id:"ar_AE",FlagIndex:1,LangResourceKey:"RdsLangarAE",CountryName:""},14346:{Id:"es_UY",FlagIndex:230,LangResourceKey:"RdsLangesUY",CountryName:""},15361:{Id:"ar_BH",FlagIndex:22,LangResourceKey:"RdsLangarBH",CountryName:""},15370:{Id:"es_PY",FlagIndex:183,LangResourceKey:"RdsLangesPY",CountryName:""},16385:{Id:"ar_QA",FlagIndex:184,LangResourceKey:"RdsLangarQA",CountryName:""},16393:{Id:"en_IN",FlagIndex:104,LangResourceKey:"RdsLangenIN",CountryName:""},16394:{Id:"es_BO",FlagIndex:27,LangResourceKey:"RdsLangesBO",CountryName:""},17417:{Id:"en_MY",FlagIndex:155,LangResourceKey:"RdsLangenMY",CountryName:""},17418:{Id:"es_SV",FlagIndex:207,LangResourceKey:"RdsLangesSV",CountryName:""},18441:{Id:"en_SG",FlagIndex:196,LangResourceKey:"RdsLangenSG",CountryName:""},18442:{Id:"es_HN",FlagIndex:97,LangResourceKey:"RdsLangesHN",CountryName:""},19466:{Id:"es_NI",FlagIndex:162,LangResourceKey:"RdsLangesNI",CountryName:""},20490:{Id:"es_PR",FlagIndex:179,LangResourceKey:"RdsLangesPR",CountryName:""},21514:{Id:"es_US",FlagIndex:229,LangResourceKey:"RdsLangesUS",CountryName:""},9225:{Id:"en_029",FlagIndex:247,LangResourceKey:"RdsLangen029",CountryName:""}}})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(i){var r=t.call(this,i)||this;return n.cultureChanged.add(r._aW,r),r}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._MinWidth=300,this._MinHeight=200,this._Width=400,this._Height=320,this._EnableResizeTop=!0,this._EnableResizeLeft=!0,this._EnableResizeRight=!0,this._EnableResizeBottom=!0,this._ImagePath=n.ImagePath,this._ResourceKey="TranslateDialog",this._Translations=null,this._DisplayLanguages=null,this._AdditionalLanguages=null,this._Mode=n.Mb.TranslateMode.Languages,this._CurrentLanguage=null,this._DefaultLanguage=null,this._ShowLanguagesButton=!1},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("PPTranslateDialog"),this._aFm=0,this._j8=[],this._bNC=!1,this._bND=this._DisplayLanguages,this._be1=n.createElement(null,"PPTranslateSeparator"),this._oL=new n.ImageList({Source:this._ImagePath+"flags.png",IconHeight:16,IconWidth:16}),this._vH=new n.Ui.ScrollBox({IsRTL:this._IsRTL,Class:"PPTranslateList",Content:this._aFn=n.createElement(null,"PPTranslateListContent")}),this._vH.addToNode(this._DialogContentDomNode),this._lG(),this.update(),this._ShowLanguagesButton&&this._bNE()},i.prototype._lG=function(){this._vH&&t.prototype._lG.call(this)},i.prototype._be2=function(t,i){var r=n.resourceManager.getString("Content",n.getProperty(n.Mb.Translations[t*1],"LangResourceKey")),u=n.resourceManager.getString("Content",n.getProperty(n.Mb.Translations[i*1],"LangResourceKey"));return r>u?1:r<u?-1:0},i.prototype._bNF=function(t,i,r){t*=1,this._j8=this._j8||[],r&&(this._j8.push(this._be1),this._aFn.appendChild(this._be1)),t===this._DefaultLanguage?this._j8.push(new n.Ui.Label({ResourceKey:"TranslateItemDefault",ParentNode:this._aFn,IsRTL:this._IsRTL,Data:t})):t===this._CurrentLanguage&&this._j8.push(new n.Ui.Label({ResourceKey:"TranslateItemCurrent",ParentNode:this._aFn,IsRTL:this._IsRTL,Data:t})),this._j8.push(new n.Ui.Label({ResourceKey:n.getProperty(n.Mb.Translations[t],"LangResourceKey"),ParentNode:this._aFn,IsRTL:this._IsRTL,Data:t,Class:t===this._DefaultLanguage?"PPLangResourceDefaultLabel":"PPLangResourceLabel"}));var u=this._Translations[this._DefaultLanguage],f=i||this._Translations[t]||"";(i===u||this._Translations[t]===u)&&t!==this._DefaultLanguage&&(f=""),this._j8.push(new n.Ui.TextBox({Content:f,Class:"TranslateText",ParentNode:this._aFn,IsRTL:t==1025?!0:this._IsRTL,Data:t,IsWatermark:t!==this._DefaultLanguage,WatermarkText:u||""})),t==this._DefaultLanguage&&this._j8[this._j8.length-1].AfterChange.add(this._cCj,this),this._DisplayLanguages.indexOf(t)<0&&this._DisplayLanguages.push(t),this._vH.updateSize()},i.prototype._bNE=function(){this._ahk||(this._s6=new n.Ui.ListBox({IsRTL:this._IsRTL,EmptySelection:!0,Height:200,ImageList:this._oL,Class:"PPLanguagesList",ItemSelected:new n.Delegate(this._cCk,this)}),this._ahk=new n.Ui.Button({Class:"PPLanguagesButton",ResourceKey:"LanguagesButton",MenuArrowPosition:n.AnchorStyles.Right,IsRTL:this._IsRTL,ParentNode:this._DialogButtonsDomNode,Menu:this._dEw=new n.Ui.Menu({IsRTL:this._IsRTL,Opened:new n.Delegate(this._cCl,this),Items:[new n.Ui.ContentMenuItem({Content:this._s6})]})}))},i.prototype._bNG=function(){var i,t;if(this._s6){for(this._s6.beginUpdate(),this._s6.clear(),this._AdditionalLanguages.sort(this._be2),this._s6.hide(),i=0;i<this._AdditionalLanguages.length;i++)t=this._AdditionalLanguages[i]*1,this._DisplayLanguages.indexOf(t)<0&&this._s6.addItem({IsRTL:this._IsRTL,ResourceKey:n.getProperty(n.Mb.Translations[t],"LangResourceKey"),RowIndex:0,ColumnIndex:n.getProperty(n.Mb.Translations[t],"FlagIndex"),Data:t});this._s6.show(),this._s6.endUpdate(),this._ahk.setEnabled(this._s6.getItems().length>0),this._bNC=!0}},i.prototype._aFo=function(){var u=1,t,i,r;for(this._DisplayLanguages.sort(this._be2),n.Array.removeItem(this._DisplayLanguages,this._CurrentLanguage),this._DefaultLanguage&&this._CurrentLanguage!=this._DefaultLanguage&&(n.Array.removeItem(this._DisplayLanguages,this._DefaultLanguage),this._DisplayLanguages.unshift(this._DefaultLanguage),u=2),this._DisplayLanguages.unshift(this._CurrentLanguage);this._j8.length;)t=this._j8.pop(),t instanceof n.Ui.Control?t.dispose():t===this._be1&&t.parentNode.removeChild(t);for(this._vH.beginUpdate(),i=0;i<this._DisplayLanguages.length;i++)r=this._DisplayLanguages[i]*1,this._Translations[r]||(this._Translations[r]=""),this._bNF(r,this._Translations[r],u==i);this._vH.endUpdate()},i.prototype._be3=function(){this._vH.beginUpdate(),this._vH.setWidth(this.getWidth()-20),this._vH.setHeight(this.getHeight()-90),this._vH.endUpdate()},i.prototype._aW=function(){this._CurrentLanguage=n.getCurrentCulture().LCID*1,this._bNG(),this._aFo()},i.prototype._cCl=function(){this._bNC||this._bNG(),this._s6.clearSelection(!1),this._s6.updateSize()},i.prototype._cCk=function(n,t){this._bNF(t.ListItem.getData()),this._aFo(),t.ListItem.hide(),this._ahk.setEnabled(this._s6.getItems().length>0)},i.prototype._cCj=function(t,i){var o,u,f,r,e;if(t.getData()===this._DefaultLanguage)for(o=this._Translations[this._DefaultLanguage],u=i.NewValue||"",this._Translations[this._DefaultLanguage]=u,f=0;f<this._j8.length;f++)r=this._j8[f],r!=t&&r instanceof n.Ui.TextBox&&(r.setWatermarkText(u),e=r.getData(),this._Translations[e]&&this._Translations[e]!==o||(this._Translations[e]=u))},i.prototype.getDefaultLanguage=function(){return this._DefaultLanguage},i.prototype.getCurrentLanguage=function(){return this._CurrentLanguage},i.prototype.getShowLanguagesButton=function(){return this._ShowLanguagesButton},i.prototype.getMode=function(){return this._Mode},i.prototype.getTranslations=function(){for(var u={},t,f,e,r,i=0;i<this._j8.length;i++)t=this._j8[i],t instanceof n.Ui.TextBox&&(f=t.getValue()>""?t.getValue():t.getWatermarkText(),u[t.getData()]=f);for(e in this._Translations)r=parseInt(e),this._DisplayLanguages.indexOf(r)<0&&(u[r]=this._Translations[r]);return u},i.prototype.setTranslations=function(t){this._Translations=n.extend({},t),this.update()},i.prototype.setMode=function(n){this._Mode=n,this.update()},i.prototype.setWidth=function(){t.prototype.setWidth.apply(this,arguments),this._be3()},i.prototype.setHeight=function(){t.prototype.setHeight.apply(this,arguments),this._be3()},i.prototype.show=function(){t.prototype.show.apply(this,arguments),this._be3()},i.prototype.setIsRTL=function(n){if(t.prototype.setIsRTL.call(this,n),this._ahk&&this._ahk.setIsRTL(this._IsRTL),this._vH&&this._vH.setIsRTL(this._IsRTL),this._j8)for(var i=0;i<this._j8.length;i++)this._j8[i].setIsRTL(this._IsRTL)},i.prototype.getDisplayLanguages=function(){return[].concat(this._DisplayLanguages)},i.prototype.setDisplayLanguages=function(n){this._bND=n,this.update()},i.prototype.getAdditionalLanguages=function(){return[].concat(this._AdditionalLanguages)},i.prototype.setAdditionalLanguages=function(n){this._AdditionalLanguages=n,this.update()},i.prototype.getAllLanguages=function(){for(var t=this.getAdditionalLanguages(),n,r,i=0;i<this._DisplayLanguages.length;i++)n=this._DisplayLanguages[i]*1,t.indexOf(n)<0&&t.push(n);r=this.getTranslations();for(n in r)n*=1,t.indexOf(n)<0&&t.push(n);return t.sort(this._be2)},i.prototype.setShowLanguagesButton=function(n){this._ShowLanguagesButton=n,this._ShowLanguagesButton?(this._bNE(),this._ahk.show()):this._ahk&&this._ahk.hide()},i.prototype.setDefaultLanguage=function(n){this._DefaultLanguage=n,this._aFo()},i.prototype.setCurrentLanguage=function(n){this._CurrentLanguage=n,this._aFo()},i.prototype.getDialogResult=function(){return{Translations:this.getTranslations(),DisplayLanguages:this.getDisplayLanguages()}},i.prototype.update=function(){var t,r;if(this._aFm===0){if(this._CurrentLanguage=this._CurrentLanguage!=null?this._CurrentLanguage:n.getCurrentCulture().LCID*1,this._Translations=n.extend({},this._Translations),this._AdditionalLanguages==null){this._AdditionalLanguages=[];for(t in n.Mb.Translations)this._AdditionalLanguages.push(t*1)}this._DisplayLanguages=this._bND;switch(this._Mode){case n.Mb.TranslateMode.Translations:this._DisplayLanguages=[];for(t in this._Translations)this._DisplayLanguages.push(t*1);break;case n.Mb.TranslateMode.Languages:this._DisplayLanguages=[].concat(this._DisplayLanguages||[]);break;case n.Mb.TranslateMode.Both:this._DisplayLanguages=this._DisplayLanguages||[];for(var i=[],u=window.Object.keys(this._Translations),f=u.length;f--;)r=parseInt(u[f]),this._DisplayLanguages.indexOf(r)<0&&i.push(r);i.length>0&&(this._DisplayLanguages=this._DisplayLanguages.concat(i))}this._aFo()}},i.prototype.beginUpdate=function(){this._aFm=this._aFm||0,this._aFm++},i.prototype.endUpdate=function(){this._aFm--,this.update()},i}(n.Ui.Dialog);t.TranslateDialog=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._be4(i._Metadata),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Value=null,this._Type=null,this._Key=-1,this._Id="",this._Name="",this._Binding="",this._Visible=!0,this._Metadata=null,this._TargetOdId=null,this._OdIdSuffix=null},i.prototype._be4=function(t){t&&(n.Object.prototype.setId.call(this,t.id),this._Name=t.n,this._Visible=t.vis,this._Key=t.k,this._Type=t.dt,this._Value=t.value||"",this._Binding=t.binding)},i.prototype.setMetadata=function(n){this._Metadata=n,this._be4(n)},i.prototype.isEmpty=function(){return this._Value!=undefined},i.prototype.setState=function(n){this._be4(n)},i.prototype.getState=function(){return{value:this._Value,dt:this._Type,k:this._Key,n:this._Name,id:this._Id,vis:this._Visible,binding:this._Binding}},i.prototype.bindingToJSON=function(){var r={UI:undefined},t,n,i;if(this._Binding)for(t=this._Binding.match(/\S+="[^"]*"/g),n=0;n<t.length;n++)i=t[n].split("="),r[i[0]]=i[1].replace(/"(.*)"/,"$1");return r},i.prototype.getType=function(){return this._Type?this._Type:n.Mb.DbDataType.String},i}(n.Object);t.Param=i,n.Object.defineProps(n.Mb.Param,["Key","Id","Binding","Value","Type","Name","Visible","TargetOdId","OdIdSuffix"],!0)})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["SettingsChanged"]),this._TextValue=null,this._TextAttributes=null,this._TextCaseSensitive=!1,this._TextWholeWordsOnly=!1,this._CustomHash=null,this._IncludeParents=!1,this._IncludeParentsWithSiblings=!1,this._MbJSONDelegate=null},i.prototype._aFp=function(t,i){var r={},u,f;return n.Array.isArray(this._TextAttributes)&&(u=this._TextAttributes.join(";"),f=this._TextValue?this._TextValue:"",r.text={text:f},r.text.wholeWordsOnly=this._TextWholeWordsOnly,r.text.caseSensitive=this._TextCaseSensitive,r.text.attributes=u),r.levels=n.isNumber(t)?t:-1,r.includeRoot=n.isDefined(i)?!!i:!1,r.includeParents=!!this._IncludeParents,r.includeParentsWithSiblings=!!this._IncludeParentsWithSiblings,r},i.prototype._be5=function(){return["TextValue","TextAttributes","TextCaseSensitive","TextWholeWordsOnly","IncludeParents","IncludeParentsWithSiblings"]},i.prototype.getTextAttributes=function(){return this._TextAttributes},i.prototype.getTextCaseSensitive=function(){return this._TextCaseSensitive},i.prototype.getTextWholeWordsOnly=function(){return this._TextWholeWordsOnly},i.prototype.getTextValue=function(){return this._TextValue},i.prototype.getIncludeParents=function(){return this._IncludeParents},i.prototype.getIncludeParentsWithSiblings=function(){return this._IncludeParentsWithSiblings},i.prototype.getMbJSONDelegate=function(){return this._MbJSONDelegate},i.prototype.setSettings=function(t){for(var r=this._be5(),e={},o=!1,f,u,i=0;i<r.length;i++)n.isDefined(t[r[i]])&&(f=this["_"+r[i]],u=t[r[i]],JSON.stringify(u)!==JSON.stringify(f)&&(e[r[i]]={NewValue:u,OldValue:f},this["_"+r[i]]=u,o=!0));o&&this.SettingsChanged.fire(this,e)},i.prototype.getFilterJSON=function(t,i){var r=this._aFp(t,i);return this._MbJSONDelegate instanceof n.Delegate&&(r=n.Delegate.fire(this._MbJSONDelegate,this,{DefaultResult:r})),r},i.prototype.getHash=function(){return this._CustomHash||JSON.stringify(this._aFp())},i.prototype.setCustomHash=function(n){this._CustomHash=!n?null:n.toString()},i.prototype.isCustomHash=function(){return!!this._CustomHash},i}(n.Object);t.ElsFilter=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.setMetadata(i._Metadata),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Class=n.Mb.MetabaseObjectClass.KE_CLASS_STDDIM,this._AllowHasData=!0,this._AllowCalculation=!0,this._AllowSelection=!0,this._AllowSchemaCreation=!0,this._AllowElementsGroupCreation=!0,this._AllowSchemaApply=!0,this._AllowChangeElementGroup=!0,this._UseExtendedAttributeValues=!0,this._LoadAttributeValuesPartial=!1,this._ChildrenReqCount=n.getProperty(n.Ui.getConfig().getSettings(),"Dimension.ChildrenReqCount")||100,this._y4={},this._cz={},this._aK=0,this._ant={},this._aUI={selectedCount:null,firstSelected:"",lastSelected:""},this._l3={},this._s7={},this._vI={},this._qQ={},this._be6={s:null,"@hs":null,"@hasData":null,state:-1},this._g6=0,this._aFq=0,this._fH=new n.Mb.DimensionFilter({})},i.prototype._be7=function(t,i,r){var f,u,e,o;if(!i||!t.a&&!t.ea)return t.n;for(f=[],i=n.toArray(i),u=0;u<i.length;u++)e=n.isString(i[u])?this.getAttributeIndex(i[u]):i[u],n.isNumber(e)&&(o=t.ea&&t.ea.it[e]["@v"]||t.a&&t.a.it[e],f.push(o));return f.length?f.join(r):t.n},i.prototype._aFr=function(t){var i=JSON.parse(JSON.stringify(t)),r,u;if(!n.Array.isArray(n.getProperty(i,"a.it"))&&(r=n.getProperty(i,"ea.it"),i.a={it:[]},n.Array.isArray(r)))for(u=0;u<r.length;u++)i.a.it.push(n.isDefined(r[u]["@v"])?r[u]["@v"]:"");return i},i.prototype.getChildrenReqCount=function(){return this._ChildrenReqCount},i.prototype.getAllowHasData=function(){return this._AllowHasData},i.prototype.getAllowSelection=function(){return this._AllowSelection},i.prototype.getAllowCalculation=function(){return this._AllowCalculation},i.prototype.getAllowAltHierarchyCreation=function(){return this._AllowAltHierarchyCreation},i.prototype.getAllowSchemaApply=function(){return this._AllowSchemaApply},i.prototype.getUseExtendedAttributeValues=function(){return this._UseExtendedAttributeValues},i.prototype.getLoadAttributeValuesPartial=function(){return this._LoadAttributeValuesPartial},i.prototype.setChildrenReqCount=function(n){this._ChildrenReqCount=n},i.prototype.setAllowHasData=function(n){this._AllowHasData=n},i.prototype.setAllowSelection=function(n){this._AllowSelection=n},i.prototype.setAllowCalculation=function(n){this._AllowCalculation=n},i.prototype.setAllowSchemaCreation=function(n){this._AllowSchemaCreation=n},i.prototype.setAllowElementsGroupCreation=function(n){this._AllowElementsGroupCreation=n},i.prototype.setAllowAltHierarchyCreation=function(n){this._AllowAltHierarchyCreation=n},i.prototype.setAllowSchemaApply=function(n){this._AllowSchemaApply=n},i.prototype.setAllowChangeElementGroup=function(n){this._AllowChangeElementGroup=n},i.prototype.setUseExtendedAttributeValues=function(n){this._UseExtendedAttributeValues=n},i.prototype.setLoadAttributeValuesPartial=function(n){this._LoadAttributeValuesPartial=n},i.prototype.getPPService=function(){return this._PPService},i.prototype.setMetadata=function(i,r){var u=null;if(i){var f=n.getProperty(i,"els.totalCount"),e=n.getProperty(i,"els.selectionInfo"),o=n.getProperty(i,"data.descr"),s=n.getProperty(i,"data.selection"),h=n.getProperty(i,"data.blocks"),c=n.getProperty(i,"data.attrs"),l=n.getProperty(i,"data.attrHiers"),a=n.getProperty(i,"data.levs"),v=n.getProperty(i,"data.indexes"),y=n.getProperty(i,"data.hiers"),p=n.getProperty(i,"data.groups"),w=n.getProperty(i,"data.schemas"),b=n.getProperty(i,"data.errorInfo"),k=n.getProperty(i,"data.calendarLevs");n.isDefined(e)&&this.setSelectionInfo(e,r),n.isDefined(o)&&this._iO(o),n.isDefined(s)&&this._cCm(s,r),n.isNumber(f)&&this.setTotalCount(f),n.isDefined(h)&&(this._aUJ=h),n.isDefined(c)&&(this._y5=c),n.isDefined(l)&&(this._bNH=l),n.isDefined(a)&&(this._anu=a),n.isDefined(v)&&(this._avc=v),n.isDefined(y)&&(this._be8=y),n.isDefined(p)&&(this._be9=p),n.isDefined(w)&&(this._bfa=w),n.isDefined(k)&&(this._aUK=k),n.isDefined(b)&&(this._bfb=b),u={data:{descr:this.getState(),blocks:this._aUJ,attrs:this._y5,attrHiers:this._bNH,indexes:this._avc,levs:this._anu,hiers:this._be8,groups:this._be9,schemas:this._bfa,selection:this.getSelectionInfo(r),calendarLevs:this._aUK,errorInfo:this._bfb}}}else this._aUJ=this._y5=this._bNH=this._anu=this._avc=this._be8=this._be9=this._bfa=this._aUK=this._bfb=null;this._aUL(),t.prototype.setMetadata.call(this,u)},i.prototype.setAllElements=function(t,i,r){var l,a;i=i instanceof n.Mb.ElsFilter?i:this._fH;var e=[],o={},u=null,f=0,s=i.getHash(),h=n.getProperty(r,"id"),c=n.isDefined(this._l3[h])?this._l3[h]:this._aK,v=this._s7[h]||this._ant;for(this._bfc(t,e,o),f=0;f<e.length;f++)u=e[f],u["@i"]=f,u.state=c;this._avd(i),this.setTotalCount(t.length,i),this._cz[s].RootElement.children=this._cz[s].ChildEls[""]=e,this._cz[s].ElsIndex=o,this._aUL();for(l in o)if(u=o[l],this._aUM(u),v[u.k]={s:u.s,"@hs":u["@hs"],"@hasData":u["@hasData"],state:c},u.children)for(this._cz[s].ChildEls[u.k]=u.children,f=0;f<u.children.length;f++)a=u.children[f],a["@i"]=f},i.prototype.setChildEls=function(t,i,r,u,f,e){var v,c,y,b,h,o;i=n.toArray(i),f=f instanceof n.Mb.ElsFilter?f:this._fH;var s=f.getHash(),p=n.getProperty(e,"id"),k=n.isDefined(this._l3[p])?this._l3[p]:this._aK,d=this._s7[p]||this._ant,l,w,a;for(this._cz[s]||this._avd(f),l=this._cz[s].ChildEls,w=this._cz[s].ElsIndex,a=this._cz[s].RootElement,t===null?(v=a.children,c=a):(l[t]||(l[t]=[]),v=l[t],c=w[t]),y=r?r.start:0,b=y+i.length,this._aUL(),h=y;h<b;h++){if(o=this._aFr(i[h-y]),o["@i"]=h,o.p=t,o.h&&(o.childrenCount=!0),!this._ahl(o)){a.childrenCount=0,this._cz[s].ChildEls={},this._cz[s].ElsIndex={};return}d[o.k]={s:o.s,"@hs":o["@hs"],"@hasData":o["@hasData"],state:k},v[h]=o,w[o.k]=o,this._aUM(o)}c&&(c.children=v,n.isNumber(u)&&(c.childrenCount=u))},i.prototype.updateEls=function(t,i,r){var o,u,f;if(n.Array.isArray(t)&&t.length){var s=n.getProperty(i,"id"),l=n.isDefined(this._l3[s])?this._l3[s]:this._aK,h=this._s7[s]||this._ant,c=r&&r.getHash(),a,e,v=[],y={};for(this._cz[c]||this._avd(r),e=this._cz[c].ElsIndex,o=0;o<t.length;o++)u=this._aFr(t[o]),f=h[u.k]||{},this.getAllowSelection()&&(f["@hs"]=u["@hs"],f.s=u.s),this.getAllowHasData()&&(f["@hasData"]=u["@hasData"]),this.getAllowCalculation()&&(f["@hasCalc"]=u["@hasCalc"]),f.state=l,h[u.k]=f,t[o]=u,e[u.k].a&&(e[u.k].a=u.a),e[u.k].ea&&(e[u.k].ea=u.ea)}},i.prototype.getChildEls=function(t,i,r,u){var e;r=r instanceof n.Mb.ElsFilter?r:this._fH;var s=n.getProperty(u,"id"),h=this._s7[s]||this._ant,f,o=this._cz[r.getHash()];if(f=o?t===null?o.RootElement.children:o.ChildEls[t]:undefined,!f)return f;for(i&&(f=f.slice(i.start,i.start+i.count)),e=0;e<f.length;e++)f[e]&&(f[e]=n.extend(f[e],h[f[e].k]||this._be6,!0,!1));return f.length?f:null},i.prototype.getElem=function(t,i,r){t===void 0&&(t=null),i=i instanceof n.Mb.ElsFilter?i:this._fH;var f=n.getProperty(r,"id"),e=this._s7[f]||this._ant,u=this._cz[i.getHash()];return u?t===null?u.RootElement:u.ElsIndex[t]?n.extend(u.ElsIndex[t],e[t]||this._be6,!0,!1):undefined:undefined},i.prototype.clearDimItems=function(){this._cz={},this._y4={},this._ant={},this._aK=0,this.setSelectionInfo({selectedCount:null,firstSelected:null,lastSelected:null}),this._qQ={},this._anu=null;for(var n in this._s7)this._s7[n]={},this._l3[n]=0,this.setSelectionInfo({selectedCount:null,firstSelected:null,lastSelected:null},{id:n})},i.prototype.getGroups=function(){return this._Metadata&&this._Metadata.data&&this._Metadata.data.groups?JSON.parse(JSON.stringify(this._Metadata.data.groups.it)):null},i.prototype.getHierarchies=function(){return this._Metadata&&this._Metadata.data&&this._Metadata.data.hiers?JSON.parse(JSON.stringify(this._Metadata.data.hiers.it)):null},i.prototype.getSchemas=function(){return this._Metadata&&this._Metadata.data&&this._Metadata.data.schemas?JSON.parse(JSON.stringify(this._Metadata.data.schemas.it)):null},i.prototype.getAttributes=function(n){var t,i,u,r;if(!this._y5)return null;if(t=JSON.parse(JSON.stringify(this._y5.it))||[],n){i=[];for(u in t)r=t[u],r.vis&&i.push(r);t=i}return t},i.prototype.getIndexes=function(){return this._avc?JSON.parse(JSON.stringify(this._avc.it))||[]:null},i.prototype.getLevels=function(){return this._Metadata&&this._Metadata.data&&this._Metadata.data.levs?JSON.parse(JSON.stringify(this._Metadata.data.levs.it)):null},i.prototype.getActiveHierarchy=function(t){var i=this.getSelectionInfo(t);return n.getProperty(i,"hierarchy")},i.prototype.getActiveGroup=function(t){var i=this.getSelectionInfo(t);return n.getProperty(i,"elementsGroup")},i.prototype.getActiveSchema=function(t){var i=this.getSelectionInfo(t);return n.getProperty(i,"schema")},i.prototype.getSelectedGroup=function(t){var i=this.getSelectionInfo(t);return n.getProperty(i,"group")},i.prototype.getPredefinedAttributeId=function(t){t===void 0&&(t="Name");var i=this._y5||{},u=n.getProperty(i,"it")||[],r=i[t[0].toLowerCase()+t.substr(1)];return n.isDefined(r)?u[r].id:null},i.prototype.getAttributeIndex=function(t){var r=n.getProperty(this._y5,"it"),i;if(r)for(i=0;i<r.length;i++)if(r[i].id.toUpperCase()===t)return i;return null},i.prototype.getFirstSelectedText=function(n,t,i){var r=this.getSelectionInfo(i);return r&&r.firstSelected?this._be7(r.firstSelected,n,t):""},i.prototype.getLastSelectedText=function(n,t,i){var r=this.getSelectionInfo(i);return r&&r.lastSelected?this._be7(r.lastSelected,n,t):""},i.prototype.getSelectedCount=function(n){var t=this.getSelectionInfo(n)||{selectedCount:0};return t.selectedCount||0},i.prototype.getSelectionInfo=function(t){var i=n.getProperty(t,"id");return this._vI[i]||this._aUI},i.prototype.setSelectionInfo=function(t,i){var u=n.getProperty(i,"id"),r=null;u&&this._vI[u]?r=this._vI[u]=n.extend(this._vI[u]||{},t,!0,!1,!0):u||(r=this._aUI=n.extend(this._aUI||{},t,!0,!1,!0)),r&&(r.firstSelected&&(r.firstSelected=this._bNI(r.firstSelected)),r.lastSelected&&(r.lastSelected=this._bNI(r.lastSelected)))},i.prototype._bNI=function(t){var r=JSON.parse(JSON.stringify(t)),o=this.getLoadAttributeValuesPartial(),s=this.getUseExtendedAttributeValues(),u;this._aUL();var i=this.getAttributes(),f=o===!1?i&&i.map(function(n){return n.id}):this.getLoadedAttributes(),e=i&&i.map(function(n){return f.indexOf(n.id)!==-1?n.id:""}),u=n.getProperty(r,"ea.it");return u&&i&&(r.ea={it:[]},r.ea.it=i.map(function(n){var t=f.length===u.length?f.indexOf(n.id):e.indexOf(n.id);return t!==-1?u[t]:{"@v":""}})),u=n.getProperty(r,"a.it"),u&&i&&(r.a={it:[]},r.a.it=i.map(function(n){var t=f.length===u.length?f.indexOf(n.id):e.indexOf(n.id);return t!==-1?u[t]:""})),r},i.prototype._aUL=function(){if(!this.getAttributes())return["*"];var t=this.getAttributes().map(function(n){return n.id}),n=this.getLoadAttributeValuesPartial(),i=this.getPredefinedAttributes().map(function(n){return n.id});this._cCn=n===!1?["*"]:n===!0?i:i.concat(n).sort(function(n,i){return t.indexOf(n)-t.indexOf(i)})},i.prototype._cCm=function(t,i){var r=n.extend({schema:null,group:null,hierarchy:null,compound:null,elementsGroup:null,allowToChangeElementGroup:null},t,!0,!1,!0);this.setSelectionInfo(r,i)},i.prototype._bfc=function(n,t,i){var f,u,r,e,o;if(n&&n.length)for(f=[],f[n[0].o]=t,u=0;u<n.length;u++){if(r=this._aFr(n[u]),e=u>0?n[u-1]:null,!this._ahl(r)){for(o in i)delete i[o];return}i[r.k]=r,e&&e.o<r.o&&(f[r.o]=i[e.k].children=[]),f[r.o].push(r)}},i.prototype._ahl=function(t){var i=n.isDefined(t.k)&&t.k!==null,r=t.k!=t.p||i&&t.p=="";return i&&r},i.prototype._aUM=function(n){var t=n.k;this._y4[t]?this._y4[t][0]=n:(this._y4[t]=[],this._y4[t].push(n))},i.prototype._avd=function(n){var t=n.getHash();return this._cz[t]={ChildEls:{},RootElement:{k:null,children:[],childrenCount:!0},ElsIndex:{}}},i.prototype.getChildrenCount=function(t,i){i=i instanceof n.Mb.ElsFilter?i:this._fH;var r=this._cz[i.getHash()],f=r?r.ElsIndex:{},e=r?r.RootElement:null,u=t!==null?f[t]:e;return u?u.childrenCount:undefined},i.prototype.increaseState=function(t,i,r){var f,u;if(i){this.increaseState();for(f in this._l3)this.increaseState({id:f},!1,r);return}u=n.getProperty(t,"id"),n.isDefined(this._l3[u])?++this._l3[u]:++this._aK,r!==!1&&this.setSelectionInfo({selectedCount:null,firstSelected:null,lastSelected:null},t)},i.prototype.getIsElUpdated=function(t,i,r){if(!this.getAllowSelection()&&!this.getAllowHasData())return!0;var u=n.getProperty(r,"id"),f=this.getElem(t,i,r),e=n.isDefined(this._l3[u])?this._l3[u]:this._aK;return f?f.state===e:undefined},i.prototype.getIsSelInfoUpdated=function(t){var i=n.getProperty(t,"id"),r=n.isDefined(this._l3[i])?this._vI[i]:this._aUI;return n.isNumber(r.selectedCount)},i.prototype.getIsEmpty=function(t){t=t instanceof n.Mb.ElsFilter?t:this._fH;var i=this._cz[t.getHash()],r=i?i.RootElement:null;return r?r.childrenCount===0:undefined},i.prototype.getIsAllElsLoaded=function(t){t=t instanceof n.Mb.ElsFilter?t:this._fH;var i=this._cz[t.getHash()],r=i?i.ElsIndex:null,u=this._qQ[t.getHash()];return r?window.Object.keys(r).length===u:!1},i.prototype.getElems=function(t,i){var u;t=t instanceof n.Mb.ElsFilter?t:this._fH;var e=n.getProperty(i,"id"),f=this._cz[t.getHash()],r=f?f.ElsIndex:null,o=this._s7[e]||this._ant;for(u in r)r[u]&&(r[u]=n.extend(r[u],o[u]||this._be6,!0,!1));return r},i.prototype.getLoadedAttributes=function(){return this._cCn},i.prototype.getPredefinedAttributes=function(){return(this.getAttributes()||[]).filter(function(n){return!!n.predefined})},i.prototype.isNameAttributesLoaded=function(){var n=this._LoadAttributeValuesPartial,t,i;return typeof n=="boolean"&&(n=n=[]),t=this.getLoadedAttributes(),i=n.some(function(n){return t.indexOf(n)<0}),!i},i.prototype.isElemsExist=function(t){t=n.toArray(t);for(var i=0;i<t.length;i++)if(!this._y4[t[i]])return!1;return!0},i.prototype.setIsDataLoading=function(n,t){return t?this._g6=0:!n?this._g6=Math.max(--this._g6,0):++this._g6},i.prototype.getIsDataLoading=function(){return!!this._g6},i.prototype.setIsStateLoading=function(n,t){return t?this._aFq=0:!n?this._aFq=Math.max(--this._aFq,0):++this._aFq},i.prototype.getIsStateLoading=function(){return!!this._aFq},i.prototype.getIsPlain=function(t){var i,r;if(t=t instanceof n.Mb.ElsFilter?t:this._fH,i=this.getChildEls(null,null,t),!i)return undefined;for(r=0;r<i.length;r++)if(i[r]&&i[r].childrenCount)return!1;return!0},i.prototype.getDefaultFilter=function(){return this._fH},i.prototype.setTotalCount=function(t,i){i=i instanceof n.Mb.ElsFilter?i:this._fH,this._qQ[i.getHash()]=parseInt(t+"",10)},i.prototype.getTotalCount=function(t){return t=t instanceof n.Mb.ElsFilter?t:this._fH,this._qQ[t.getHash()]},i.prototype.addSelection=function(t){var i=n.getProperty(t,"id");return n.isPrimitive(i)&&!this._vI[i]?(this._vI[i]={selectedCount:null,firstSelected:"",lastSelected:""},this._l3[i]=0,this._s7[i]={},!0):!1},i.prototype.removeSelection=function(t,i){if(i){this._vI={},this._l3={},this._s7={};return}var r=n.getProperty(t,"id");return n.isPrimitive(r)&&this._vI[r]?(delete this._vI[r],delete this._l3[r],delete this._s7[r],!0):!1},i.prototype.isSelectionExist=function(t){var i=n.getProperty(t,"id");return!!this._vI[i]},i.prototype.getAllSelections=function(){for(var t=window.Object.keys(this._s7),i=[],n=0;n<t.length;n++)i.push({id:t[n]});return i},i.prototype.isMdLoaded=function(){return!!this._y5&&n.isDefined(this._anu)&&this._anu!==null&&n.isPrimitive(this.getName())&&n.isPrimitive(this.getKey())&&n.isPrimitive(this.getId())},i.prototype.isCompoundSelection=function(){var i=this.getSelectionInfo(),t=n.getProperty(i,"compound.k");return!!t&&t!==n.Mb.UINT32MAXVALUE},i.prototype.getAllowSchemaCreation=function(){return this._AllowSchemaCreation&&!this.isCompoundSelection()},i.prototype.getAllowElementsGroupCreation=function(){return this._AllowElementsGroupCreation&&!this.isCompoundSelection()},i.prototype.getErrorInfo=function(){return this._bfb||null},i.prototype.isCalendar=function(){return!!this._aUK},i.prototype.getCalendarLevels=function(){var t=n.getProperty(this._aUK,"it");return t?JSON.parse(JSON.stringify(t)):null},i.prototype.getAllowChangeElementGroup=function(t){var i=this.getSelectionInfo(t);return this._AllowChangeElementGroup&&n.getProperty(i,"allowToChangeElementGroup")!==!1},i}(t.Object);t.DimSource=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._OnlySelected=!1,this._OnlyWithData=!1,this._OrderBy=[]},i.prototype._be5=function(){var n=t.prototype._be5.call(this);return n.concat(["OnlySelected","OnlyWithData","OrderBy"])},i.prototype._aFp=function(n,i){var r=t.prototype._aFp.call(this,n,i);return r.elementsGroup=!0,r.onlySelected=this._OnlySelected,r.onlyWithData=this._OnlyWithData,r},i.prototype._bNJ=function(){var i,t,r;if(!this._OrderBy||!n.Array.isArray(this._OrderBy)||!this._OrderBy.length)return undefined;for(i={its:{it:[]}},t=0;t<this._OrderBy.length;t++)r=window.Object.keys(this._OrderBy[t])[0],i.its.it.push({att:{id:r},asc:this._OrderBy[t][r]===n.Mb.OrderBy.Asc});return i},i.prototype.getOnlySelected=function(){return this._OnlySelected},i.prototype.getOnlyWithData=function(){return this._OnlyWithData},i.prototype.getOrderBy=function(){return this._OrderBy},i.prototype.getOrderByJSON=function(){return this._bNJ()},i.prototype.getHash=function(){return this._CustomHash||JSON.stringify(this._aFp())+(JSON.stringify(this._bNJ())||"")},i.prototype.setSettings=function(n){t.prototype.setSettings.call(this,n)},i}(t.ElsFilter);t.DimensionFilter=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this,n)||this,r=t._Metabase;return t._Metabase=null,t.setMetabase(r),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["DimOpened","ChildLoaded","DimGetMetadataComplete","SelectionChanged","DimClosed","DimCleared"])},r.prototype._oM=function(t){var r,i;if(!t||t.length==0)return undefined;for(r={it:[]},i=0;i<t.length;i++)if(t[i]instanceof n.Mb.Param)r.it.push(t[i].getState());else throw new n.ArgumentException(this);return r},r.prototype._cCo=function(n,t){var i=t.Args;i&&i.isLive()&&this.DimOpened.fire(this,{Dim:i,Source:i},0)},r.prototype._ae=function(t,i){var e=this,u=i.Response,r=i.Args.Dim,f=i.Args.Callback;r&&r.isLive()&&(r._iO(u.OpenDimResult.meta.data.descr),r.setMetadata(u.OpenDimResult.meta),r.setOdId(u.OpenDimResult.id),f=this._s(f,new n.Delegate(function(){e.DimOpened.fire(e,{Dim:r,Source:r},0)})),this.getMetadata(r,null,f))},r.prototype._cCp=function(t,i){var f=i.Response,r=i.Args.Dim,u=i.Args.OpArgs||{},e=n.getProperty(f,"GetDimMetadataResult");r&&r.isLive()&&(r.setMetadata(e,u.selId),this.DimGetMetadataComplete.fire(this,{Dim:r,OpArgs:u},0),r.setIsDataLoading(!1))},r.prototype._bfd=function(n,t){this.Executed.fire(this,t)},r.prototype._cCq=function(n,t){var i=t.Args.Dim;i&&i.isLive()&&(i.clearDimItems(),i.setOdId({}),this.DimClosed.fire(this,{Dim:i},0))},r.prototype._aFs=function(t,i){var e=i.Response,f=n.getProperty(e,"GetDimElementsResult.els.e")||[],c=n.getProperty(e,"GetDimElementsResult.selectionInfo"),l=n.getProperty(e,"GetDimElementsResult.totalCount"),u=i.Args.OpArgs,o=n.getProperty(u,"filter"),s=n.getProperty(u,"selId"),r=i.Args.Dim,b=r.getLoadAttributeValuesPartial(),p,h,w;if(r&&r.isLive()){if(b!==!1){var a=r.getAttributes(),v=r.getUseExtendedAttributeValues(),y=this._kY(r);f.forEach(function(t){var i=n.getProperty(t,v?"ea.it":"a.it");n.isDefined(i)&&(v?t.ea.it=a.map(function(n){var t=y.indexOf(n.id);return t!==-1?i[t]:{"@v":"","@dv":""}}):t.a.it=a.map(function(n){var t=y.indexOf(n.id);return t!==-1?i[t]:""}))})}if(c&&(p={firstSelected:"",lastSelected:"",selectedCount:0,calendarPeriod:"",text:"",elementsGroup:"",schema:"",group:""},r.setSelectionInfo(n.extend(p,c,!0),s)),n.isDefined(l)&&r.setTotalCount(l,o),i.Args.IsPathLoad){!u.getPathOnly&&f.length?this._cCr(f,i.Args):(h=n.getProperty(i,"Args.UserCallback"),r.setIsDataLoading(!1),h&&n.Delegate.fire(h,t,{Dim:r,OpArgs:u,IsNoPathData:!0}));return}i.Args.IsAllElements?r.setAllElements(f,o,s):i.Args.IsUpdate?r.updateEls(f,s,o):n.isDefined(u.parentKey)&&(w=n.getProperty(e,"GetDimElementsResult.filteredCount"),r.setChildEls(u.parentKey,f,u.range,w,o,s)),r.setIsDataLoading(!1),u.fireEvent!==!1&&this.ChildLoaded.fire(this,i.Args,0)}},r.prototype._cCr=function(t,i){for(var o,b,c,it,y=i.Dim,p=i.OpArgs,u=undefined,f=0,s=[{"null":{loadPoints:[],pEl:undefined}}],h,k,g,d,e,w,r,a,tt,l=0;l<t.length;l++)h=t[l],h.o!=f?(u=h.o>f?t[l-1]:s[f-1][h.p!==undefined?"$"+h.p:"null"].pEl,f=h.o,s[f]||(s[f]={}),s[f][u?"$"+u.k:"null"]?s[f][u?"$"+u.k:"null"].loadPoints.push(h):s[f][u?"$"+u.k:"null"]={loadPoints:[h],pEl:u}):s[f][u?"$"+u.k:"null"].loadPoints.push(h);k=Math.round(y.getChildrenReqCount()/2)||50,this.beginBatch();for(l in s){g=s[l];for(d in g){b=d!=="null"?d.substr(1):null;var nt=g[d].loadPoints||[],v=[],rt=y.getChildrenCount(b,p.filter);for(o=0;o<nt.length;o++)if(e=parseInt(nt[o]["@i"]+"",10),w=!1,!y.getElem(nt[o].k,p.filter)){for(c=0;c<v.length;c++)if(r=v[c],e>r.start&&e<r.start+r.count){w=!0;break}else if(e<r.start&&r.start-e<=10){r.start=e,w=!0;break}else if(e>=r.start+r.count&&e-(r.start+r.count)<10){r.count=e-r.start+1,w=!0;break}if(!w)if(a={start:Math.max(e-Math.round(k/2),0),count:n.isNumber(rt)?Math.min(rt,k):k},tt=y.getChildEls(b,a,p.filter),tt)for(c=0,it=a.count;c<it;c++)if(tt[c])a.start++,a.count--;else{v.push(a);break}else v.push(a)}for(o=0;o<v.length;o++)this.getChildren(y,{selId:p.selId,parentKey:b,range:v[o],filter:p.filter,fireEvent:!1})}}this.endBatch(!0,new n.Delegate(this._bNK,this,i))||this._bNK(this,{Args:i})},r.prototype._bNK=function(t,i){var f=i.Args.OpArgs,r=i.Args.Dim,u=n.getProperty(i,"Args.UserCallback");r&&r.isLive()&&(r.setIsDataLoading(!1),f.fireEvent!==!1&&this.ChildLoaded.fire(this,i.Args,0),u&&(delete i.Args,n.Delegate.fire(u,t,i)))},r.prototype._aUN=function(t,i){var r=i.Response;i.Args.Callback&&n.Delegate.fire(i.Args.Callback,this,{ResponseText:i.ResponseText,Args:{Els:r.GetDimElementsResult.els.e,Dim:i.Args.Dim}})},r.prototype._cS=function(t,i){var r=i.Args.Dim,u=i.Args.OpArgs,f=n.getProperty(u,"selId");r&&r.isLive()&&(r.increaseState(f),r.setIsStateLoading(!1),u.fireEvent!==!1&&this.SelectionChanged.fire(this,{Dim:r,OpArgs:u},0))},r.prototype._ave=function(n,t){t.Args.Dim&&t.Args.Dim.isLive()&&(t.Args.Dim.clearDimItems(),t.Args.Dim.setIsDataLoading(!1,!0),t.Args.Dim.setIsStateLoading(!1,!0))},r.prototype._cCs=function(t,i){var u=i.Response,r=i.Args.Dim,f=i.Args.OpArgs,o=i.Args.Callback,s=i.Args.ErrorCallback,e=n.getProperty(u,"GetDimMetadataResult");r&&r.isLive()&&(r.setMetadata(e,i.selId),r.setIsDataLoading(!1),this._bNL(this,{Dim:r,OpArgs:f,Callback:i.Args.Callback,ErrorCalback:i.Args.ErrorCallback}))},r.prototype._anv=function(t,i,r,u,f,e,o,s,h){var c,l;return i!==null&&(c=n.isPrimitive(i)?{key:i}:i),l={GetDimElements:{tDim:{id:t.id},tArg:{parent:c||undefined,filter:r||undefined,pattern:u||{attributes:"*"},range:f||undefined,selectionInfo:e===!1?undefined:!0,filteredCount:o||undefined,totalCount:s||undefined,orderBy:h||undefined}}}},r.prototype._bfe=function(t){var r=[],i;if(!n.Array.isArray(t))return r;for(i=0;i<t.length;i++)r.push({key:t[i]});return r},r.prototype._bNM=function(n){var t={attributes:this._kY(n).join(";"),getImageIndex:!0,getLevel:!0,getParentKey:!0,getHasChildren:!0,getChildIndex:!0};return t.getHasSelectedChildren=t.getSelectState=n.getAllowSelection(),t.getHasData=n.getAllowHasData(),t.getHasCalc=n.getAllowCalculation(),n.getUseExtendedAttributeValues()?t.extendedAttributeValuesOnly=!0:t.attributeValuesOnly=!0,t},r.prototype._kY=function(n){if(!n.getAttributes())return["*"];var i=n.getAttributes().map(function(n){return n.id}),r=n.getPredefinedAttributes().map(function(n){return n.id}),t=n.getLoadAttributeValuesPartial();return t===!1?["*"]:t===!0?r:r.concat(t).sort(function(n,t){return i.indexOf(n)-i.indexOf(t)})},r.prototype._cCt=function(t,i,r,u){t.setIsDataLoading(!0);var f={GetDimMetadata:{tDim:i&&i.selId||t.getOdId(),tArg:{pattern:i.pattern||{getAttrs:!0}}}};r=new n.Delegate(this._cCs,this,{Dim:t,OpArgs:i,Callback:r,ErrorCallback:u}),this._h(f,r,u)},r.prototype.addCallbackToLastRqt=function(t){var i;return i=this._UseMbQueueRqts?this._Metabase.addCallbackToLastRqt(t):this.addCallbackToLastRqt(t),i||n.Delegate.fire(t,this,{},0),i},r.prototype.setMetabase=function(n){this._Metabase!==n&&(this._Metabase&&this._Metabase.removeAllEvents(this),this._Metabase=n,n&&(this._UseMbQueueRqts&&n.Executed.add(this._bfd,this),this._PPServiceUrl=n.getPPServiceUrl()))},r.prototype.open=function(t,i,r,u,f,e,o,s){u=u||{getDescr:!0,getAttrs:!0,getLevs:!0,getHiers:!0,getGroups:!0,getSchemas:!0,getSelection:!0,getCompound:!0,getIndexes:!0,getCalendarLevs:!0};var c=n.isString(o)?{value:o}:o,l={OpenDim:{tObject:n.isNumber(t)?this.getObjectOdId(t):{id:t+""},tArg:{openArgs:{args:this._oM(e),binding:c},metaArg:{pattern:u,elsArg:{filter:{levels:0,elementsGroup:!0},selectionInfo:!1,totalCount:!0}}}}},h=new n.Mb.DimSource({PPService:this,Key:n.isNumber(t)?t:null});return f=new n.Delegate(this._ae,this,{Dim:h,Callback:f}),this._h(l,f,s),h},r.prototype.openViaMoniker=function(t,i){i=this._s(i,new n.Delegate(this._cCo,this,t)),this.getMetadata(t,null,i)},r.prototype.getMetadata=function(n,t,i,r){t=t||{},n.getIsDataLoading()||n.isMdLoaded()||!n.getLoadAttributeValuesPartial()?this._bNL(this,{Dim:n,OpArgs:t,Callback:i,ErrorCalback:r}):this._cCt(n,t,i,r)},r.prototype._bNL=function(t,i){var u=i.Dim,r=i.OpArgs,f=i.Callback,e=i.ErrorCalback,s=r&&r.pattern||{getDescr:!0,getAttrs:!0,getLevs:!0,getHiers:!0,getSchemas:!0,getGroups:!0,getSelection:!0,getCompound:!0,getErrorInfo:!0,getIndexes:!0,getCalendarLevs:!0},o;if(!u||r&&r.selId&&!u.isSelectionExist(r.selId))throw new n.ArgumentException(this,"Invalid arguments.");e=this._s(e,new n.Delegate(this._ave,this,{Dim:u,OpArgs:r})),u.setIsDataLoading(!0),o={GetDimMetadata:{tDim:r&&r.selId||u.getOdId(),tArg:{pattern:s,elsArg:{pattern:{attributes:this._kY(u).join(";")},filter:{levels:0,elementsGroup:!0},totalCount:!0,selectionInfo:!0}}}},f=this._s(f,new n.Delegate(this._cCp,this,{Dim:u,OpArgs:r})),this._h(o,f,e)},r.prototype.getSpecialImageListUrl=function(){return this._Metabase?this._Metabase.getPPServiceUrl()+"/GetBin?mon="+this._Metabase.getConnectionId()+"!$Special!DimensionImageList&cache":""},r.prototype.close=function(t,i,r){i=this._s(i,new n.Delegate(this._cCq,this,{Dim:t})),this._h({CloseDim:{tDim:t.getOdId()}},i,r)},r.prototype.copyInstance=function(t,i,r){var u={ChangeDimSelection:{tDim:t.getOdId(),tArg:{copyInstance:!0,selectionInfo:!1,elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Current,pattern:{attributes:this._kY(t).join(";")}}}},f=new n.Delegate(i);this._h(u,f,r)},r.prototype.setSchema=function(t,i,r,u){i=i||{};var f={selId:i.selId,fireEvent:!0,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,setSchema:{k:-1,id:i.schemaId||undefined,applyOnlyOnce:i.applySelectionSchemaOnlyOnce,applyImmediate:i.applyImmediate,applyOnRebuild:i.applySelectionSchemaOnRebuild},pattern:{attributes:this._kY(t).join(";")}},mdPattern:{getSelection:!0,getCompound:!0}};this.execCommand(t,f,r,u)},r.prototype.createElementsGroup=function(t,i,r,u){i=i||{};var f={fireEvent:!1,selId:i.selId,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,createGroupOrSchema:{isGroup:!0,name:i.groupName,CreateOnly:i.createOnly===!0},pattern:{attributes:this._kY(t).join(";")}},mdPattern:{getSelection:!0,getCompound:!0,getGroups:!0}};this.execCommand(t,f,r,u),i.createOnly!==!0&&(t.clearDimItems(),this.DimCleared.fire(this,{Dim:t,IsNewElGroup:!0},0))},r.prototype.createSelectionSchema=function(t,i,r,u){i=i||{};var f={selId:i.selId,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,createGroupOrSchema:{isGroup:!1,name:i.schemaName,CreateOnly:i.createOnly===!0},pattern:{attributes:this._kY(t).join(";")}},mdPattern:{getSelection:!0,getCompound:!0,getSchemas:!0}};this.execCommand(t,f,r,u)},r.prototype.selectByKeys=function(n,t,i,r){t=t||{};var u={selId:t.selId,fireEvent:t.fireEvent,dmSelectionArg:{elSelectOp:t.selCommand,elRelative:t.dmElRelative,elKeys:{it:this._bfe(t.keys)},ignoreMissingKeys:!!t.ignoreMissingKey,pattern:{attributes:this._kY(n).join(";")}}};this.execCommand(n,u,i,r)},r.prototype.selectByTextFilter=function(t,i,r,u){var f,e;i=i||{},f=i.textFilter?JSON.parse(JSON.stringify(i.textFilter)):{},f.onlySelected=!!i.onlySelected,f.includeParents=!!i.includeParents,f.includeChildren=!!i.includeChildren,e={selId:i.selId,fireEvent:i.fireEvent,dmSelectionArg:{elSelectOp:i.selCommand,elRelative:n.Mb.DmElRelative.Unknown,selectFilter:f,pattern:{attributes:this._kY(t).join(";")}}},this.execCommand(t,e,r,u)},r.prototype.selectLevel=function(t,i,r,u){i=i||{};var f={selId:i.selId,fireEvent:i.fireEvent,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,setLevel:{k:i.levelId,selectOp:i.selCommand},pattern:{attributes:this._kY(t).join(";")}}};this.execCommand(t,f,r,u)},r.prototype.selectGroup=function(t,i,r,u){i=i||{};var f={selId:i.selId,fireEvent:i.fireEvent,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,setGroup:{id:i.groupId,limitToGroup:i.limitToGroup},pattern:{attributes:this._kY(t).join(";")}}};this.execCommand(t,f,r,u)},r.prototype.assignSelection=function(t,i,r,u){i=i||{};var f={selId:i.selId,fireEvent:i.fireEvent,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,assign:{source:i.assignOdId,append:i.append,keepGroup:i.keepGroup,keepSchema:i.keepSchema,keepHierarchy:i.keepHierarchy,transform:n.isDefined(i.applyTransform)?{apply:i.applyTransform}:undefined},pattern:{attributes:this._kY(t).join(";")}}};this.execCommand(t,f,r,u)},r.prototype.execCommand=function(t,i,r,u){if(i=i||{},!t||!i.dmSelectionArg||i.selId&&!t.isSelectionExist(i.selId))throw new n.ArgumentException(this,"Invalid arguments.");u=this._s(u,new n.Delegate(this._ave,this,{Dim:t,OpArgs:i})),t.setIsStateLoading(!0),t.getAllowSchemaApply()||(i.dmSelectionArg.schemaNoApply=!0);var f={ChangeDimSelection:{tDim:i.selId||t.getOdId(),tArg:i.dmSelectionArg}};this.beginBatch(),this._h(f,new n.Delegate(this._cS,this,{Dim:t,OpArgs:i}),u),this.getMetadata(t,{pattern:i.mdPattern||{getSelection:!0,getCompound:!0},selId:i.selId},r,u),this.endBatch()},r.prototype.setCalendarPeriod=function(t,i,r,u){i=i||{};var f={selId:i.selId,fireEvent:i.fireEvent,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,setCalendarPeriod:{active:n.isDefined(i.active)?!!i.active:!0,start:n.isDate(i.start)?i.start:undefined,end:n.isDate(i.end)?i.end:undefined,levels:n.Array.isArray(i.levels)?{it:i.levels}:undefined,append:n.isDefined(i.append)?!!i.append:!1,findOutActive:i.findOutActive},pattern:{attributes:this._kY(t).join(";")}}};this.execCommand(t,f,r,u)},r.prototype.setElementsGroup=function(t,i,r,u){i=i||{groupId:""};var f={fireEvent:!!i.limitToGroup,dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,pattern:{attributes:this._kY(t).join(";")},setHierarchy:{id:""},setElementsGroup:{id:i.groupId},setGroup:!i.limitToGroup?undefined:{id:i.groupId,limitToGroup:!0}},mdPattern:{getSelection:!0,getCompound:!0,getLevs:!0}};this.execCommand(t,f,r,u),t.clearDimItems(),this.DimCleared.fire(this,{Dim:t,IsNewElGroup:!0},0)},r.prototype.setHierarchy=function(t,i,r,u){i=i||{hierId:""};var f={dmSelectionArg:{elSelectOp:n.Mb.SelCommands.Unknown,elRelative:n.Mb.DmElRelative.Unknown,pattern:{attributes:this._kY(t).join(";")},setHierarchy:{id:i.hierId},setElementsGroup:{id:""}},mdPattern:{getSelection:!0,getCompound:!0,getLevs:!0}};this.execCommand(t,f,r,u),t.clearDimItems(),this.DimCleared.fire(this,{Dim:t,IsNewHier:!0},0)},r.prototype.getChildren=function(t,i,r,u){var s,c,l,a;if(i=i||{},!t)throw new n.ArgumentException(this,"Invalid arguments.");var e=i.parentKey,o=i.range,f=i.filter,h=t.getChildrenCount(e,f);u=this._s(u,new n.Delegate(this._ave,this,{Dim:t})),t.setIsDataLoading(!0),s=f instanceof n.Mb.ElsFilter?f:t.getDefaultFilter(),c=this._bNM(t),o||(o={start:t.getChildEls(e,null,f)?t.getChildEls(e,null,f).length:0,count:t.getChildrenReqCount()}),l=this._anv(i.selId||t.getOdId(),e,s.getFilterJSON(1),c,o,!0,h===!0||h===undefined,!n.isNumber(t.getTotalCount()),s.getOrderByJSON()),a={Dim:t,OpArgs:i},r=this._s(r,new n.Delegate(this._aFs,this,a)),this.beginBatch(),t.isMdLoaded()||this.getMetadata(t),this._h(l,r,u),this.endBatch(!0)},r.prototype.getPathToKey=function(t,i,r,u){var o,f,c,e;if(!t||i.selId&&!t.isSelectionExist(i.selId))throw new n.ArgumentException(this,"Invalid arguments.");o=i.filter,f=i.keysToLoad,u=this._s(u,new n.Delegate(this._ave,this,{Dim:t})),f=n.toArray(f),t.setIsDataLoading(!0);var l=this._bfe(f),h=o instanceof n.Mb.ElsFilter?o:t.getDefaultFilter(),s=h.getFilterJSON(-1,!1);s.keys={it:l},s.includeParents=!0,c=this._anv(i.selId||t.getOdId(),null,s,{attributes:this._kY(t).join(";"),getChildIndex:!0,getParentKey:!0},null,!1,!1,!n.isNumber(t.getTotalCount()),h.getOrderByJSON()),e={Dim:t,OpArgs:i,IsPathLoad:!0,UserCallback:r},i.getPathOnly?(r=this._s(r,new n.Delegate(this._aFs,this,e)),delete e.UserCallback):r=new n.Delegate(this._aFs,this,e),this.beginBatch(),t.isMdLoaded()||this.getMetadata(t),this._h(c,r,u),this.endBatch(!0)},r.prototype.getAllElements=function(t,i,r,u){var f,o,e,s,h;if(!t||i.selId&&!t.isSelectionExist(i.selId))throw new n.ArgumentException(this,"Invalid arguments.");f=i.filter,u=this._s(u,new n.Delegate(this._ave,this,{Dim:t})),e=f instanceof n.Mb.ElsFilter?f:t.getDefaultFilter(),s=this._bNM(t),t.setIsDataLoading(!0),o=this._anv(i.selId||t.getOdId(),null,e.getFilterJSON(),s,null,!0,!1,!0,e.getOrderByJSON()),h={Dim:t,IsAllElements:!0,OpArgs:i},r=this._s(r,new n.Delegate(this._aFs,this,h)),this.beginBatch(),t.isMdLoaded()||this.getMetadata(t),this._h(o,r,u),this.endBatch(!0)},r.prototype.updateStateData=function(i,r,u,f){var e,o;if(r=r||{},!i||r.selId&&!i.isSelectionExist(r.selId))throw new n.ArgumentException(this,"Invalid arguments.");if(e=r.keys,f=this._s(f,new n.Delegate(this._ave,this,{Dim:i})),e=n.Array.isArray(e)&&e.length?e:t.Object.keys(i.getElems()||{}),!e.length){u&&n.Delegate.fire(u,this,null,0);return}i.setIsDataLoading(!0),o=this._anv(r.selId||i.getOdId(),null,{includeRoot:!1,levels:-1,keys:{it:this._bfe(e)}},{attributes:this._kY(i).join(";"),getHasCalc:i.getAllowCalculation(),getHasData:i.getAllowHasData(),getHasChildren:!0,getSelectState:i.getAllowSelection(),getHasSelectedChildren:i.getAllowSelection(),getLevel:!0,getParentKey:!0}),u=this._s(u,new n.Delegate(this._aFs,this,{Dim:i,OpArgs:r,IsUpdate:!0})),this._h(o,u,f)},r.prototype.getAllSelectedEls=function(t,i){if(i){var u={GetDimElements:{tDim:t.getOdId(),tArg:{filter:{levels:-1,includeRoot:!1,onlySelected:!0},pattern:{attributes:"*",getSelectState:!0,getParentKey:!0,getHasChildren:!0,getHasSelectedChildren:!0,getLevel:!0},selectionInfo:!0}}};this._h(u,new n.Delegate(this._aUN,this,{Callback:i,Dim:t}))}},r.prototype.getEls=function(t,i,r,u,f,e,o){var s=this._anv(t.getOdId(),i,r,u,f,!1);this._h(s,new n.Delegate(this._aUN,this,{Callback:e,Dim:t}),o)},r.prototype.dispose=function(){delete this._Metabase,i.prototype.dispose.call(this)},r}(t.BiService);t.DimSrv=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype.fillDesc=function(i){var r=n.extend({},i,!0);t.prototype._iO.call(this,r),i.rubId&&(this._RubId=i.rubId.id)},i.prototype.getRubId=function(){return this._RubId},i}(n.Mb.Object);t.Rubricator=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._ae=function(n,t){var i=JSON.parse(t.ResponseText),r=t.Args.Rub;r.setOdId(i.OpenRubResult.id),r.setMetadata(i.OpenRubResult.meta)},i.prototype.open=function(t,i){var r,u;return t instanceof n.Mb.Rubricator?r=t:(n.isNumber(t)&&(t=this._Metabase.getObjectOdId(t).id),r=new n.Mb.Rubricator({PPService:this,RubId:t})),u={OpenRub:{tObject:{id:r.getRubId()},tArg:{args:{openForEdit:!1},metaGet:{obInst:!0,atts:!0,valuesAtts:!0,properties:!0}}}},i=this._s(i,new n.Delegate(this._ae,this,{Rub:r})),this._h(u,i),r},i.prototype.getRevisions=function(n,t){var i={GetRubMd:{tRub:{id:n.getRubId()},tArg:{pattern:{obInst:!1,revisions:!0}}}};this._h(i,t)},i.prototype.closeRub=function(n,t){var i={CloseRub:{tRub:{id:n}}};this._h(i,t)},i.prototype.openRubTree=function(t,i,r,u,f,e){i=i?n.toArray(i):[],f=f?n.toArray(f):[];for(var h={OpenRub:{tObject:{id:t},tArg:{args:{openForEdit:!0},metaGet:{obInst:!1,atts:!1,valuesAtts:!1,properties:!1,objects:{getValidationExecData:!0,parent:{id:t},filter:{includeRoot:u===!0,hideEmptyFolders:!r,hiddenContainers:{it:[{k:n.Mb.MetabaseObjectClass.KE_CLASS_MODELSPACE}]}},arg:{orderBy:{attribute:"Name"},pattern:{effectiveRights:!0}}}}}}},s=[],o=0;o<i.length;o++)i[o]!=null&&s.push({k:i[o]});for(s.length>0&&(h.OpenRub.tArg.metaGet.objects.filter.classes={it:s}),s=[],o=0;o<f.length;o++)f[o]!=null&&s.push({k:f[o]});s.length>0&&(h.OpenRub.tArg.metaGet.objects.filter.containers={it:s}),this._h(h,e)},i.prototype.openDLDimFromRub=function(n,t){var i=n+"!CalLvlDim",r={GetDimElements:{tDim:{id:i},tArg:{filter:{levels:"-1",includeRoot:!1},pattern:{attributes:"*",getSelectState:!0,getParentKey:!0},selectionInfo:!0}}};this._h(r,t)},i.prototype.getBinary=function(n,t){var i={GetBinary:{tBinary:{id:n},tArg:{content:1}}};this._h(i,t)},i.prototype.dispose=function(){delete this._Metabase,t.prototype.dispose.call(this)},i}(t.BiService);t.RubService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._CurrentCulture=n.getCurrentCulture().LCID,this._DefaultCulture=n.getCurrentCulture().LCID,this._anw={}},i.prototype.getCurrentCulture=function(){return this._CurrentCulture},i.prototype.getDefaultCulture=function(){return this._DefaultCulture},i.prototype.setCurrentCulture=function(n){this._CurrentCulture=n},i.prototype.setDefaultCulture=function(n){this._DefaultCulture=n},i.prototype.setMetadata=function(t){var f,u,i,e,r;for(this._CurrentCulture=n.getProperty(t,"locales.cur.k"),this._DefaultCulture=n.getProperty(t,"locales.def.k"),f=n.getProperty(t,"strs.locales.i"),u=n.getProperty(t,"strs.its.it"),i=0;i<u.length;i++)for(e=u[i].id,this._anw[e]={},r=0;r<f.length;r++)this._anw[e][f[r]]=u[i].its.it[r]["@v"]},i.prototype.getTranslations=function(n){return this._anw[n]},i.prototype.setTranslations=function(n,t){this._anw[n]=t},i}(n.Mb.Object);t.Resource=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._cCu=function(t,i){var u=i.Args.Resource,r=i.Args.Callback,f=JSON.parse(i.ResponseText).GetResourceResult.meta;u.setMetadata(f),r&&n.Delegate.fire(r,t,i)},i.prototype.getResource=function(t,i,r){var e={GetResource:{tResource:t.getOdId(),tArg:{pattern:{locales:"Get",strs:"Get"}}}},u=i.strsFilter,f;u&&(f=n.Array.isArray(u)?{strs:{it:u}}:u,f.convertRtfToHtml=!0,e.GetResource.tArg.pattern.strsFilter=f),this._h(e,new n.Delegate(this._cCu,this,{Resource:t,Callback:r}))},i.prototype.setResource=function(t,i,r){var f={SetResource:{tResource:t.getOdId(),tArg:{pattern:{},meta:{}}}},u=i.strsFilter,e;i.meta&&(e=i.pattern||{strs:"Set"},u&&n.Array.isArray(u)&&(e.strsFilter={strs:{it:u}}),f.SetResource.tArg.pattern=e,f.SetResource.tArg.meta=i.meta||{}),(i.metaGet||!i.meta&&u)&&(f.SetResource.tArg.metaGet={strs:"Get",locales:"Get"},u&&n.Array.isArray(u)&&(f.SetResource.tArg.metaGet.strsFilter={strs:{it:u}})),this._h(f,r)},i}(t.BiService);t.ResService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._g6=0,i._Metadata&&i.setMetadata(i._Metadata),i}return __extends(i,t),i.prototype.getItems=function(){return this._Items},i.prototype.getType=function(){return this._Type},i.prototype.setItems=function(n){this._Items=n},i.prototype.setType=function(n){this._Type=n},i.prototype.getIsDataLoading=function(){return!!this._g6},i.prototype.setIsDataLoading=function(n,t){return t?this._g6=0:!n?this._g6=Math.max(--this._g6,0):++this._g6},i.prototype.setMetadata=function(i){i?(this._Items=n.getProperty(i,"items.it")||[],this._Type=n.isDefined(n.getProperty(i,"type"))?n.getProperty(i,"type"):null):this.clear(),t.prototype.setMetadata.call(this,i)},i.prototype.isMdLoaded=function(){return this._Items!==null},i.prototype.clear=function(){this._Metadata=this._Type=this._Items=null},i.prototype.addItems=function(t){t=n.toArray(t),t&&(this._Items=this._Items.concat(t))},i}(n.Mb.Object);t.StyleSheet=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var r=function(t){function r(n){var i=t.call(this,n)||this;return i._aUO(n)}return __extends(r,t),r.convertChartType=function(n){var t={line:"Lines",column:"Columns",pie:"Pie",doughnut:"Pie",area:"Areas",scatter:"Dots",cascade:"Waterfall"};return t[n]||t.column},r.prototype._initFields=function(n){n&&n.ChartType&&(n.ChartType=r.convertChartType(n.ChartType)),t.prototype._initFields.apply(this,arguments)},r.prototype._aUO=function(n){return i.getInstance(n)},r.prototype.setType=function(){},r.prototype.setMetadata=function(i){i?this._Items=n.getProperty(i,"items.it")||[]:this.clear(),t.prototype.setMetadata.call(this,i)},r.prototype.clear=function(){this._Items=null},r}(t.StyleSheet),i,u;t.PredefinedStyleSheet=r,i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.create=function(t){return t.PPType||(t.PPType="PP.Mb.PredefinedStyleSheetFactory"),n.create(t)},i.getInstance=function(n){i._bff||(i._bff=i.create(n));var t=i._bff,r=n.ChartType;return t&&t.isLive()&&t instanceof i&&t.getChartType()==r?t.getPredefinedStyleSheet():(t=i.create(n),i._bff=t,t.getPredefinedStyleSheet())},i.prototype.getChartType=function(){return this._ChartType},i.prototype.getPredefinedStyleSheet=function(){if(this._Instance)return this._Instance;var t=n.String.format("{0}metabase/pstyles/chart/{1}{2}.png",n.ImagePath,this._ChartType,n.getCurrentCulture().CultureName==n.CultureNames.ru?"":"--en");return this._Instance=new u({Items:[{key:1,tag:"tab",preview:"",resourceKey:"MbTabStyle0",id:"0"},{key:2,tag:"tab",previewURL:n.ImagePath+"metabase/pstyles/tab/1.png",resourceKey:"MbTabStyle1",id:"1"},{key:3,tag:"tab",previewURL:n.ImagePath+"metabase/pstyles/tab/2.png",resourceKey:"MbTabStyle2",id:"2"},{key:4,tag:"tab",previewURL:n.ImagePath+"metabase/pstyles/tab/3.png",resourceKey:"MbTabStyle3",id:"3"},{key:5,tag:"tab",previewURL:n.ImagePath+"metabase/pstyles/tab/4.png",resourceKey:"MbTabStyle4",id:"4"},{key:6,tag:"tab",previewURL:n.ImagePath+"metabase/pstyles/tab/5.png",resourceKey:"MbTabStyle5",id:"5"},{key:7,tag:"tab",previewURL:n.ImagePath+"metabase/pstyles/tab/6.png",resourceKey:"MbTabStyle6",id:"6"},{key:8,tag:"chart",rowIndex:0,columnIndex:0,previewURL:t,id:"0"},{key:9,tag:"chart",rowIndex:1,columnIndex:0,previewURL:t,id:"1"},{key:10,tag:"chart",rowIndex:2,columnIndex:0,previewURL:t,id:"2"},{key:11,tag:"chart",rowIndex:3,columnIndex:0,previewURL:t,id:"3"},{key:12,tag:"chart",rowIndex:4,columnIndex:0,previewURL:t,id:"4"},{key:13,tag:"chart",rowIndex:5,columnIndex:0,previewURL:t,id:"5"},{key:14,tag:"map",previewURL:n.ImagePath+"metabase/pstyles/map/0.png",id:"0"},{key:15,tag:"bubblechart",previewURL:n.ImagePath+"metabase/pstyles/bubblechart/0.png",id:"0"},{key:16,tag:"bubbletree",previewURL:n.ImagePath+"metabase/pstyles/bubbletree/0.png",id:"0"},{key:17,tag:"treemap",previewURL:n.ImagePath+"metabase/pstyles/treemap/0.png",id:"0"}],Type:n.Mb.StyleSheetType.Predefined,OdId:{id:"true"}})},i}(n.Object),t.PredefinedStyleSheetFactory=i,u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype._aUO=function(){return this},t}(r)})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(n){function t(t){var i=n.call(this,t)||this;return i._Canceled=!1,i}return __extends(t,n),t.prototype._e=function(){n.prototype._e.call(this),this._TypeUpdateData=[],this._ModelUpdateData=null,this._Callback=null},t.prototype.getTypeUpdateData=function(){return this._TypeUpdateData},t.prototype.getModelUpdateData=function(){return this._ModelUpdateData},t.prototype.getCallback=function(){return this._Callback},t.prototype.setTypeUpdateData=function(n){this._TypeUpdateData=n},t.prototype.setModelUpdateData=function(n){this._ModelUpdateData=n},t.prototype.setCallback=function(n){this._Callback=n},t.prototype.fireCallback=function(n,t){this._Callback&&(this._Callback.fire(n,t),delete this._Callback)},t.prototype.Cancel=function(){this._Canceled=!0},t.prototype.isCanceled=function(){return this._Canceled},t}(n.Ui.PropertyChangedEventArgs);t.PropertyChangedEventArgs=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["RangeLoaded","MeasuresLoaded","SearchCompleted","ValidateCellsComplete"]),this._TabId=null,this._IsAsync=!0,this._ObjectsAsImage=!1,this._om=!1,this._Selection=null,this._ScrollState={leftColumn:0,topRow:0}},i.prototype._bfg=function(){return{structure:!0,selection:!0,metaData:!0,view:!0}},i.prototype._cCv=function(n,t){var i=JSON.parse(t.ResponseText),r;i.SetTabSheetDataResult.ranges.Part&&i.SetTabSheetDataResult.ranges.Part.length>0&&(r=i.SetTabSheetDataResult.ranges.Part[0].sheet.TabSheetData.Cells.Cell),this.ValidateCellsComplete.fire(this,{Cells:r})},i.prototype._cCw=function(n,t){var i=JSON.parse(t.ResponseText),r=[];i.SetTabSheetDataResult.searchResult&&(r=i.SetTabSheetDataResult.searchResult.its.it),this.SearchCompleted.fire(this,{SearchResult:r})},i.prototype._aFt=function(){return{data:!0,DHTML:!0,images:!0,styles:"Get",skipStaticImages:!0,objectsAsImage:this._ObjectsAsImage}},i.prototype._ahm=function(t,i){var r=n.getProperty(i,"Args.ranges"),u=JSON.parse(i.ResponseText);this.loadRangesfromJSON(u.GetTabSheetDataResult,r)},i.prototype._ahn=function(t,i){var r=i.Response,e=!!n.getProperty(i,"Args.IsUpdate"),o=(r.GetTabSheetDataResult||r.SetTabSheetDataResult).sheet.TabSheetData,u=(r.GetTabSheetDataResult||r.SetTabSheetDataResult).metaData.view,f=(r.GetTabSheetDataResult||r.SetTabSheetDataResult).metaData.selection;this.MeasuresLoaded.fire(this,{Data:o,Selection:f,IsUpdate:e}),this._Selection=f,this._ScrollState.leftColumn=u.leftColumn,this._ScrollState.topRow=u.topRow,this._om=!0},i.prototype._bfh=function(t,i){var r=n.getProperty(t,"metaData");i.AutoFillSettings.Selection=n.getProperty(r,"selection"),n.Delegate.fire(i.Callback,this,i.AutoFillSettings)},i.prototype._bfi=function(t){var i,e,u=n.getProperty(t,"ranges.Part"),f={Data:[],Ranges:[]},r;if(u)for(r=0;r<u.length;r++)i=n.getProperty(u[r],"sheet.TabSheetData"),e=n.getProperty(u[r],"range"),i&&f.Data.push(i),e&&f.Ranges.push(e);else i=n.getProperty(t,"sheet.TabSheetData"),i&&f.Data.push(i);return f},i.prototype._bfj=function(t,i){var r=n.getProperty(i,"Args.callback"),u=n.getProperty(i.Response,"SetTabSheetDataResult.filterResult")||{};r&&r.fire(this,{tabFilterResult:u})},i.prototype.getObjectsAsImage=function(){return this._ObjectsAsImage},i.prototype.getIsAsync=function(){return this._IsAsync?n.Ui.TabSheetAsyncMode.On:n.Ui.TabSheetAsyncMode.Off},i.prototype.getTabId=function(){return this._TabId},i.prototype.setObjectsAsImage=function(n){this._ObjectsAsImage=n},i.prototype.setIsAsync=function(n){this._IsAsync=n},i.prototype.isLoaded=function(){return this._om},i.prototype.getSelection=function(){return this._Selection},i.prototype.getScrollState=function(){return this._ScrollState},i.prototype.loadMeasures=function(t){var i={GetTabSheetData:{tTabSheet:this.getTabId(),tArg:{pattern:this._bfg()}}};this._h(i,new n.Delegate(this._ahn,this,{IsUpdate:t}))},i.prototype.getAutoFilterValues=function(t,i){var r={SetTabSheetData:{tTabSheet:this.getTabId(),tArg:{action:{filterItemIndex:t}}}};this._h(r,new n.Delegate(this._bfj,this,{callback:i}))},i.prototype.search=function(t,i,r,u,f,e){var o,s;i=typeof i=="undefined"?!1:i,r=typeof r=="undefined"?!1:r,u=typeof u=="undefined"?"Rows":u,f=typeof f=="undefined"?5:f,o={SetTabSheetData:{tTabSheet:this.getTabId(),tArg:{action:{search:{cells:{text:t,caseSensitive:i,wholeWordsOnly:r,direction:u,target:f},area:"Cells"}}}}},e&&e.getCoordsCount()>1&&(s=e.toJSON(),delete s.type,o.SetTabSheetData.tArg.action.search.cells.range=s),this._h(o,new n.Delegate(this._cCw,this))},i.prototype.validateCells=function(t){var u,i,f,r;if(t&&t.length){for(u=[],i=0,f=t.length;i<f;i++)u.push({left:t[i]["@L"],top:t[i]["@T"],width:1,height:1});r={SetTabSheetData:{tTabSheet:this.getTabId(),tArg:{getArg:{pattern:{data:!0,DHTML:!0},ranges:{Item:u}}}}},n.setProperty(t,r.SetTabSheetData,"tArg.TabSheetData.Cells.Cell"),n.setProperty(!0,r.SetTabSheetData,"tArg.setPattern.data"),this._h(r,new n.Delegate(this._cCv,this))}},i.prototype.loadRanges=function(t,i,r){var e,f,h,u,o,s;for(i=typeof i=="undefined"?this._ahm:i,r=typeof r=="undefined"?!1:r,e=[],f=0;f<t.length;f++)h=t[f],u=h.getCorners(),e.push({left:u.tlCoord.colIndex,top:u.tlCoord.rowIndex,width:u.trCoord.colIndex-u.tlCoord.colIndex+1,height:u.blCoord.rowIndex-u.tlCoord.rowIndex+1});o={GetTabSheetData:{tTabSheet:this.getTabId(),tArg:{pattern:this._aFt(),ranges:{Item:e}}}},s={ranges:t},r?(this._UseMbQueueRqts?this._Metabase.beginSyncXHR():this.beginSyncXHR(),this._h(o,new n.Delegate(i,this,s)),this._UseMbQueueRqts?this._Metabase.endSyncXHR():this.endSyncXHR()):this._h(o,new n.Delegate(this._ahm,this,s))},i.prototype.loadSyncData=function(n){this.loadRanges(n,null,!0)},i.prototype.loadRangesfromJSON=function(n,t){var i=this._bfi(n);i&&this.RangeLoaded.fire(this,{Data:i.Data,Ranges:t||i.Ranges})},i.prototype.setAutoFilter=function(){},i.prototype.dispose=function(){delete this._Metabase,t.prototype.dispose.call(this)},i}(t.BiService);t.TabSheetDataSource=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.getExecuteState=function(){return n.getProperty(this._Metadata,"execute.state")},i.prototype.getErrorMessage=function(){return n.getProperty(this._Metadata,"execute.errorInfo.message")},i}(n.Mb.Object);t.EtlSource=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(){var n=i!==null&&i.apply(this,arguments)||this;return n._aUP=0,n}return __extends(r,i),r.prototype._anx=function(t,i,r){var e=JSON.parse(i.ResponseText),o=n.getProperty(e,r+".id"),s=n.getProperty(e,r+".meta"),f=n.getProperty(i,"Args.Callback"),u=n.getProperty(i,"Args.Etl");return u&&(u.setOdId(o),u.setMetadata(n.extend(u.getMetadata(),s,!0))),f&&(f instanceof n.Delegate?f.fire(this,{Etl:u,Id:o,Metadata:s}):f.apply(t,i)),u},r.prototype._cCx=function(n,t){this._anx(n,t,"GetEtlResult")},r.prototype._bNN=function(n,t){this._anx(n,t,"OpenEtlResult")},r.prototype._cCy=function(n,t){this._anx(n,t,"SetEtlResult")},r.prototype._cCz=function(t,i){var r=this._anx(t,i,"GetEtlResult"),u;r.getExecuteState()==n.Mb.EtlTaskExecuteState.FinishedWithError&&(u=n.getProperty(i.Response,"GetEtlResult.meta.execute.errorInfo"),this._Metabase&&this._UseMbQueueRqts?this._Metabase.Error.fire(this,{ResponseText:r.getErrorMessage(),ErrorInfo:u}):this.Error.fire(this,{ResponseText:r.getErrorMessage(),ErrorInfo:u}))},r.prototype._cCA=function(n,t){this._anx(n,t,"CloseEtlResult")},r.prototype._j7=function(n){return new t.EtlSource({Key:n,PPService:this})},r.prototype.open=function(t,i){var r=this._j7(t),u={OpenEtl:{tOb:this.getObjectOdId(t),tArg:{args:{openForEdit:!1}}}};return this._h(u,new n.Delegate(this._bNN,this,{Callback:i,Etl:r})),r},r.prototype.edit=function(t,i){var r=this._j7(t),u={OpenEtl:{tOb:this.getObjectOdId(t),tArg:{args:{openForEdit:!0},metaGet:{missedFiles:!0}}}};return this._h(u,new n.Delegate(this._bNN,this,{Callback:i,Etl:r})),r},r.prototype.run=function(t,i,r){var u={SetEtl:{tEtl:t.getOdId(),tArg:{pattern:{execute:!0,missedFiles:!!i.length},meta:{execute:{command:n.Mb.EtlTaskExecuteCommand.RunAsync,files:{s:i||[]}}},metaGet:{execute:!0}}}};this._h(u,new n.Delegate(this._cCy,this,{Callback:r,Etl:t}))},r.prototype.check=function(t,i){var r={GetEtl:{tEtl:t.getOdId(),tArg:{pattern:{execute:!0}}}};this._h(r,new n.Delegate(this._cCz,this,{Callback:i,Etl:t}))},r.prototype.close=function(t,i){var r={CloseEtl:{tEtl:t.getOdId()}};this._h(r,new n.Delegate(this._cCA,this,{Callback:i,Etl:t}))},r.prototype.beginRequest=function(){this._aUP++,this._Metabase&&this._UseMbQueueRqts?this._Metabase.EndRequest.suspend():this.EndRequest.suspend()},r.prototype.endRequest=function(){--this._aUP<0&&(this._aUP=0),this._aUP===0&&(this._Metabase&&this._UseMbQueueRqts?this._Metabase.EndRequest.resume():this.EndRequest.resume())},r}(t.BiService);t.EtlService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._cCB=function(t){for(var u=[],r,i=0;i<t.length;i++)r=t[i],t[i]instanceof n.Mb.Param&&(r=t[i].getState()),u.push(r);return u},i.prototype._cCC=function(t,i){var r=n.getProperty(JSON.parse(i.ResponseText),"GetObjectsResult.mds.its.it")||[],u=[],f={};r[0]&&(u=r[0].pars?r[0].pars.it:[],f=n.getProperty(r[0],"obInst.obDesc")||{}),i.Args.Callback&&n.Delegate.fire(i.Args.Callback,this,{Params:u,Descriptor:f})},i.prototype.setObject=function(n,t,i,r,u,f){var e={SetObject:{tObject:this.getObjectOdId(n),tArg:{pattern:t||{},meta:i||{},metaGet:r}}};this._h(e,u,f)},i.prototype.setObjectParams=function(t,i,r,u){var f,e,o;t instanceof n.Mb.Object&&(e=t.getOdId(),e&&e.id&&(o=e.id.split("!Sheets!"),o&&o.length>0&&(f={id:o[0]}))),f||(f=this.getObjectOdId(t)),this.setObject(f,{pars:!0},{pars:{it:this._cCB(i)}},{pars:!0},r,u)},i.prototype.getObjectParams=function(t,i){var u,f,e;t instanceof n.Mb.Object&&(f=t.getOdId(),f&&f.id&&(u={id:f.id+"!ThisObject"})),u||(u=this.getObjectOdId(t)),e={GetObjects:{tParent:u,tFilter:{includeRoot:!1,levels:1,limit:1},tArg:{active:!0,rootOnly:!0,mds:!0,md:{pars:!0}}}},this._h(e,new n.Delegate(this._cCC,this,{Id:u,Callback:i}))},i}(t.BiService);t.ObjectService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){t.ShareType={Twitter:"Twitter",Facebook:"Facebook",LinkedIn:"LinkedIn",LiveJournal:"LiveJournal",GooglePlus:"GooglePlus"};var i=function(i){function r(n){var t=i.call(this,n)||this;return t._bindEvents(),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["Discuss","BeforeDiscuss"]),this._ShowIcons=!0,this._ImagePath=n.ImagePath,this._AutoShare=!0,this._Url=window.location.href,this._Title="",this._ShowGooglePlus=!1},r.prototype._initFields=function(t){t=t||{},t=this._cCD(t),i.prototype._initFields.call(this,t),this._ImageList||(this._ImageList=new n.ImageList({Source:this._ImagePath+"discussMenu16x16.png",IconHeight:16,IconWidth:16}))},r.prototype._cr=function(){var f=this._m2,t,r,u;for(i.prototype._cr.call(this),t=0;t<this._Items.length;t++)r=this._Items[t],u="_"+r.getData()+"Item",n.isDefined(this[u])&&(this[u]=r);f||(this._ShowGooglePlus=this._GooglePlusItem?this._GooglePlusItem.getVisible():!1,this._ShowGooglePlus&&(this._AutoShare&&this.appendGPlusLink(this._Url),this._GooglePlusItem.setContent(this._cCE())))},r.prototype._render=function(){i.prototype._render.call(this,arguments),n.addClass(this._DomNode,"PPDiscussMenu")},r.prototype._aFu=function(i,r){var f={},e=r||{},u;switch(i){case t.ShareType.Twitter:f={ResourceKey:"DiscussTwitter",RowIndex:0,ColumnIndex:4,Data:t.ShareType.Twitter,LeftPartStyle:t.MenuItemLeftPartStyle.Icon};break;case t.ShareType.Facebook:f={ResourceKey:"DiscussFacebook",RowIndex:0,ColumnIndex:0,Data:t.ShareType.Facebook,LeftPartStyle:t.MenuItemLeftPartStyle.Icon};break;case t.ShareType.LinkedIn:f={ResourceKey:"DiscussLinkedIn",RowIndex:0,ColumnIndex:2,Data:t.ShareType.LinkedIn,LeftPartStyle:t.MenuItemLeftPartStyle.Icon};break;case t.ShareType.LiveJournal:f={ResourceKey:"DiscussLiveJournal",RowIndex:0,ColumnIndex:3,Data:t.ShareType.LiveJournal,LeftPartStyle:t.MenuItemLeftPartStyle.Icon};break;case t.ShareType.GooglePlus:f={Id:"DiscussGooglePlusItem",RowIndex:0,ColumnIndex:1,Visible:!1,Data:t.ShareType.GooglePlus,LeftPartStyle:t.MenuItemLeftPartStyle.Icon}}return u=n.extend(f,e,!0,!0),u.Name&&(u.Data=u.Name),delete u.Name,delete u.ShareType,u},r.prototype._cCD=function(i){var f=i.Items||[],r={},s={},u,e,o;for(r[t.ShareType.Twitter]=this._aFu(t.ShareType.Twitter,i.TwitterItem),r[t.ShareType.Facebook]=this._aFu(t.ShareType.Facebook,i.FacebookItem),r[t.ShareType.LinkedIn]=this._aFu(t.ShareType.LinkedIn,i.LinkedInItem),r[t.ShareType.LiveJournal]=this._aFu(t.ShareType.LiveJournal,i.LiveJournalItem),r[t.ShareType.GooglePlus]=this._aFu(t.ShareType.GooglePlus,i.GooglePlusItem),e=0;e<f.length;e++)u=this._cCF(f[e]),r[u]&&(f[e]=n.extend(f[e],r[u],!0,!0),s[u]=!0);o=0;for(u in r)s[u]||f.splice(o,0,r[u]),o++;return i.Items=f,i},r.prototype._cCF=function(n){if(n.ShareType)return n.ShareType;var i=n.getData?n.getData():n.Data;return i===t.ShareType.Twitter||n[t.ShareType.Twitter+"Item"]?t.ShareType.Twitter:i===t.ShareType.Facebook||n[t.ShareType.Facebook+"Item"]?t.ShareType.Facebook:i===t.ShareType.LinkedIn||n[t.ShareType.LinkedIn+"Item"]?t.ShareType.LinkedIn:i===t.ShareType.LiveJournal||n[t.ShareType.LiveJournal+"Item"]?t.ShareType.LiveJournal:i===t.ShareType.GooglePlus||n[t.ShareType.GooglePlus+"Item"]?t.ShareType.GooglePlus:undefined},r.prototype._cCE=function(){var t=n.resourceManager.getString("DiscussGooglePlus","Content");return t&&(this._bNO=!0),n.htmlToDOM("<table><tr><td class='PPMenuItemLeftPart' style='width:24px'><div id='GooglePlusPanel2' class='g-plusone' data-size='small' data-annotation='none'><\/div><\/td><td class='PPMenuItemContentPart'><div id='GooglePlusPanelContent' class='PPGooglePlusMenuItem' style='padding-left: 3px'>"+t+"<\/div><\/td><\/tr><\/table>")},r.prototype._cR=function(n,t){i.prototype._cR.call(this,n,t),t.ShareType=t.MenuItem.getData(),this.BeforeDiscuss.fire(this,t),this._AutoShare&&r.share(t.MenuItem.getData(),this._Url,this._Title),this.Discuss.fire(this,t)},r.prototype._ae=function(t){if(this._ShowGooglePlus&&!this._bNO){var r=n.resourceManager.getString("DiscussGooglePlus","Content"),u=t.getDomNode?t.getDomNode():t,f=n.querySelector(u,"#GooglePlusPanelContent");f.innerHTML=r,r&&(this._bNO=!0)}this._ShowGooglePlus&&this.goPlusone({url:this._Url})},r.prototype.getTwitterItem=function(){return this._TwitterItem},r.prototype.getFacebookItem=function(){return this._FacebookItem},r.prototype.getLinkedInItem=function(){return this._LinkedInItem},r.prototype.getLiveJournalItem=function(){return this._LiveJournalItem},r.prototype.getGooglePlusItem=function(){return this._GooglePlusItem},r.prototype.getAutoShare=function(){return this._AutoShare},r.prototype.getTitle=function(){return this._Title},r.prototype.getUrl=function(){return this._Url},r.prototype.setTitle=function(n){this._Title=n},r.prototype.setUrl=function(n){this._Url=n},r.prototype.setAutoShare=function(n){this._AutoShare=n},r.prototype.appendGPlusLink=function(n){var t=document.getElementById("googlePlusShareLink"),i;return t?t:(t=document.createElement("link"),t.rel="canonical",t.id="googlePlusShareLink",n&&(t.href=n),document.body.appendChild(t),i=document.createElement("script"),i.type="text/javascript",i.async=!0,i.src="https://apis.google.com/js/plusone.js",document.getElementsByTagName("head")[0].appendChild(i),i=null,t)},r.prototype.appendPluseoneContent=function(t){if(!document.getElementById("GooglePlusPanel2")){t||(t=document.body);var i=n.htmlToDOM("<div id='GooglePlusPanel2' class='g-plusone' data-size='small' data-count='true' />");t.appendChild(i)}},r.prototype.goPlusone=function(n){var r,u,t,e,i,f;n||(n={}),r=n.url,r&&(u=document.getElementById("googlePlusShareLink"),u&&u.href!=r&&(u.href=r)),t=window.gapi,typeof t!="undefined"&&t.plusone&&(e=n.container,i=n.pluseone,i?(f=i,f.size=i.size||"small",f.annotation=i.annotation||"none",t.plusone.render(e,f)):t.plusone.go(e))},r.share=function(i,r,u,f){r||(r=window.location.href);var e=encodeURIComponent(r),o=u?u:"";switch(i){case t.ShareType.Twitter:f=f||"http://twitter.com/intent/tweet?source=webclient&text={t} {u}";break;case t.ShareType.Facebook:f=f||"http://www.facebook.com/sharer/sharer.php?u={u}";break;case t.ShareType.LinkedIn:f=f||"http://www.linkedin.com/shareArticle?mini=true&url={u}&title={t}";break;case t.ShareType.LiveJournal:f=f||"http://www.livejournal.com/update.bml?event={u}&subject={t}"}f&&(e&&(f=f.replace("{u}",e)),f=f.replace("{t}",o),window.open(f,n.Blank))},r}(n.Ui.Menu);t.DiscussMenu=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["ExportItemSelected"])},i.prototype._initFields=function(i){i=i||{},this._ImagePath=i.ImagePath||n.ImagePath,this._ImageList||(this._ImageList=new n.ImageList({IconWidth:16,IconHeight:16,Source:this._ImagePath+"exportmenu.png"})),i.ImageList=this._ImageList,i.ItemSelected=new n.Delegate(this._any,this),i.Items=[{MenuItem:{Data:n.Mb.ExportFormat.XLSX,ResourceKey:"fTypeXLSX",Id:"ExportMenuItemXLSX",ColumnIndex:0,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.XLS,ResourceKey:"fTypeXLS",Id:"ExportMenuItemXLS",ColumnIndex:1,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.PDF,ResourceKey:"fTypePDF",Id:"ExportMenuItemPDF",ColumnIndex:2,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.RTF,ResourceKey:"fTypeRTF",Id:"ExportMenuItemRTF",ColumnIndex:3,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.PPTX,ResourceKey:"fTypePPTX",Id:"ExportMenuItemPPTX",ColumnIndex:7,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.HTML,ResourceKey:"fTypeHTML",Id:"ExportMenuItemHTML",ColumnIndex:4,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.MHT,ResourceKey:"fTypeMHT",Id:"ExportMenuItemMHT",ColumnIndex:5,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.EMF,ResourceKey:"fTypeEMF",Id:"ExportMenuItemEMF",ColumnIndex:6,RowIndex:0}},{MenuItem:{Data:n.Mb.ExportFormat.PNG,ResourceKey:"fTypePNG",Id:"ExportMenuItemPNG",ColumnIndex:6,RowIndex:0,IsVisible:!1}},{MenuItem:{Data:n.Mb.ExportFormat.PPCube,ResourceKey:"fTypePPCUBE",Id:"ExportMenuItemPPCube",ColumnIndex:9,RowIndex:0,IsVisible:!1}},{MenuItem:{Data:n.Mb.ExportFormat.PPExpress,ResourceKey:"fTypePPEXPRESS",Id:"ExportMenuItemPPExpress",ColumnIndex:8,RowIndex:0,IsVisible:!1}},{MenuItem:{Data:n.Mb.ExportFormat.PPDashboard,ResourceKey:"fTypePPDashboard",Id:"ExportMenuItemPPDashboard",ImageUrl:this._ImagePath+"dashboard16.png",IsVisible:!1}},{MenuItem:{Data:n.Mb.ExportFormat.PPMobile,ResourceKey:"fTypePPMobile",Id:"ExportMenuItemPPMobile",ColumnIndex:10,RowIndex:0,IsVisible:!1}}],t.prototype._initFields.call(this,i)},i.prototype._any=function(n,t){this.ExportItemSelected.fire(this,{format:t.MenuItem.getData()})},i}(n.Ui.Menu);t.ExportMenu=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i,u,r;(function(n){n[n.Default=0]="Default",n[n.ReadOnly=1]="ReadOnly",n[n.New=2]="New",n[n.Close=3]="Close",n[n.Custom=4]="Custom"})(i=t.MainMenuViewMode||(t.MainMenuViewMode={})),function(n){n[n.New=0]="New",n[n.Save=1]="Save",n[n.Open=2]="Open",n[n.Exit=3]="Exit",n[n.Close=4]="Close",n[n.Print=5]="Print",n[n.SaveAs=6]="SaveAs",n[n.Export=7]="Export",n[n.ImportData=8]="ImportData",n[n.Discuss=9]="Discuss",n[n.SharePoint=10]="SharePoint"}(u=t.MainMenuItemType||(t.MainMenuItemType={})),r=function(t){function r(n){var i=t.call(this,n)||this;return i.addClass("Main"),i._bindEvents(),i}return __extends(r,t),r.prototype._e=function(){t.prototype._e.call(this),this._ViewMode=n.Mb.Ui.MainMenuViewMode.Default,this._ExportMenu=null,this._DiscussMenu=null,this._ImportDataEnabled=!1,this._SharepointEnabled=!1,this._ImagePath=n.ImagePath+"mainmenu.png",this._ImageList=new n.ImageList({IconWidth:32,IconHeight:32,Source:this._ImagePath}),this._defineEvents(["ItemCreating","ItemCreated","DiscussItemSelected","ExportItemSelected"])},r.prototype._initFields=function(i){i&&n.isDefined(i.SharePointEnabled)&&(i.SharepointEnabled=i.SharePointEnabled,delete i.SharePointEnabled),t.prototype._initFields.call(this,i)},r.prototype._bindEvents=function(){this._DiscussMenu&&this._DiscussMenu.Discuss.add(this._kP,this)},r.prototype._cr=function(){var r,h,u,f,e;if(!this._m2||!this._Items||!(this._Items.length>0)){var c=this._ViewMode!==i.Default&&this._ViewMode!==i.ReadOnly,o=[{ResourceKey:"rbMainMenuSave",Id:"SaveMenuItem",ColumnIndex:0,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.Save},{ResourceKey:"rbMainMenuSaveAs",Id:"SaveAsMenuItem",ColumnIndex:1,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.SaveAs},{ResourceKey:"rbMainMenuExport",Id:"ExportMenuItem",ColumnIndex:7,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.Export,Menu:this.getExportMenu()},{ResourceKey:"rbMainMenuImportData",Id:"ImportDataMenuItem",ColumnIndex:11,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.ImportData},{ResourceKey:"rbMainMenuOpen",Id:"OpenMenuItem",ColumnIndex:2,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.Open},{ResourceKey:"rbMainMenuClose",Id:"CloseMenuItem",ColumnIndex:8,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.Close},{PPType:"PP.Ui.Separator",Id:"FileSeparator"},{ResourceKey:"rbMainMenuNew",Id:"NewReportMenuItem",ColumnIndex:3,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.New,IsVisible:c},{PPType:"PP.Ui.Separator",Id:"NewReportSeparator"},{ResourceKey:"rbMainMenuPrint",Id:"PrintMenuItem",ColumnIndex:4,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.Print},{PPType:"PP.Ui.Separator",Id:"PrintSeparator"},{ResourceKey:"rbMainMenuDiscuss",Id:"DiscussMenuItem",ColumnIndex:6,RowIndex:0,Menu:this._DiscussMenu,Data:n.Mb.Ui.MainMenuItemType.Discuss,IsVisible:!!this._DiscussMenu},{ResourceKey:"rbMainMenuSharePoint",Id:"SharepointMenuItem",ColumnIndex:5,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.SharePoint,IsVisible:this._SharepointEnabled},{PPType:"PP.Ui.Separator",Id:"ShareSeparator"},{ResourceKey:"rbMainMenuExit",Id:"ExitMenuItem",ColumnIndex:9,RowIndex:0,Data:n.Mb.Ui.MainMenuItemType.Exit}],s=this._Items;for(this._Items=[],r=0,h=o.length;r<h;r++)u=o[r],f=this._cCG(s,u,r),f>-1&&n.extend(u,s[f],!0,!0),e=this._cCH(u),e&&this._Items.push(e);this.setViewMode(this._ViewMode),t.prototype._cr.call(this)}},r.prototype._cCG=function(t,i,r){for(var u=0,f=t.length;u<f;u++)if(n.isDefined(t[u].Id)&&t[u].Id===i.Id)return u;return t.length>r&&!!t[r]?r:-1},r.prototype._cCH=function(t){var i=t,r={Cancel:!1,Item:i,ItemType:i.Data},u;return(this.ItemCreating.fire(this,r),r.Cancel)?null:(i=r.Item,u={ItemType:i.Data,Item:i.PPType?n.create(i):new n.Ui.MenuItem(i)},this.ItemCreated.fire(this,u),u.Item)},r.prototype._any=function(n,t){this.ExportItemSelected.fire(this,t)},r.prototype._kP=function(n,t){this.DiscussItemSelected.fire(this,t)},r.prototype._aUQ=function(t,i,r){i.setEnabled(!0);switch(i.getData()){case n.Mb.Ui.MainMenuItemType.ImportData:i.setIsVisible(this._ImportDataEnabled);break;case n.Mb.Ui.MainMenuItemType.Discuss:i.setIsVisible(!!(this._DiscussMenu&&this._DiscussMenu.getEnabled()));break;case n.Mb.Ui.MainMenuItemType.SharePoint:i.setIsVisible(this._SharepointEnabled);break;case n.Mb.Ui.MainMenuItemType.Print:i.setIsVisible(!(n.IsiPad||n.IsiPhone));break;default:i.setIsVisible(!0)}r&&r(t,i)},r.prototype._cCI=function(t,i,r){switch(i.getData()){case n.Mb.Ui.MainMenuItemType.Save:case n.Mb.Ui.MainMenuItemType.New:case n.Mb.Ui.MainMenuItemType.ImportData:i.setIsVisible(!1);break;case n.Mb.Ui.MainMenuItemType.Discuss:case n.Mb.Ui.MainMenuItemType.SharePoint:case n.Mb.Ui.MainMenuItemType.Print:this._aUQ(t,i)}r&&r(t,i)},r.prototype._cCJ=function(t,i,r){switch(i.getData()){case n.Mb.Ui.MainMenuItemType.Print:this._aUQ(t,i),i.setEnabled(!1);break;case n.Mb.Ui.MainMenuItemType.Discuss:case n.Mb.Ui.MainMenuItemType.SharePoint:i.setEnabled(!1);break;default:i.setEnabled(!0)}r&&r(t,i)},r.prototype._cCK=function(t,i,r){switch(i.getData()){case n.Mb.Ui.MainMenuItemType.Open:case n.Mb.Ui.MainMenuItemType.ImportData:case n.Mb.Ui.MainMenuItemType.New:case n.Mb.Ui.MainMenuItemType.Exit:i.setEnabled(!0);break;case n.Mb.Ui.MainMenuItemType.Print:this._aUQ(t,i),i.setEnabled(!1);break;default:i.setEnabled(!1)}r&&r(t,i)},r.prototype.getViewMode=function(){return this._ViewMode},r.prototype.getDiscussMenu=function(){return this._DiscussMenu},r.prototype.getSharepointEnabled=function(){return this._SharepointEnabled},r.prototype.getImportDataEnabled=function(){return this._ImportDataEnabled},r.prototype.getExportMenu=function(){return this._ExportMenu||(this._ExportMenu=new n.Mb.Ui.ExportMenu({ExportItemSelected:new n.Delegate(this._any,this)})),this._ExportMenu},r.prototype.getMenuItemByData=function(n){var i,t;for(this._cr(),i=this._Items,t=0;t<i.length;t++)if(i[t].getData()===n)return i[t];return null},r.prototype.setSharePointEnabled=function(n){var t=this.getMenuItemById("SharepointMenuItem");t&&t.setIsVisible(n)},r.prototype.setViewMode=function(t,r){this._ViewMode=t,r&&!n.isFunction(r)&&(r=null);var u;switch(t){case n.Mb.Ui.MainMenuViewMode.Default:u=this._aUQ;break;case n.Mb.Ui.MainMenuViewMode.ReadOnly:u=this._cCI;break;case n.Mb.Ui.MainMenuViewMode.New:u=this._cCJ;break;case n.Mb.Ui.MainMenuViewMode.Close:u=this._cCK;break;case i.Custom:u=r}u&&n.Array.each(this._Items,this,u,r)},r}(n.Ui.Menu),t.MainMenu=r})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.setEnableExpand(!1),i}return __extends(i,t),Object.defineProperty(i.prototype,"_bNP",{get:function(){return this._ExportContent},enumerable:!0,configurable:!0}),i.prototype._render=function(){t.prototype._render.call(this),this._ExportContent=n.htmlToDOM("<div class='PPExportDlgContent'><\/div>"),this._DialogContentDomNode.appendChild(this._ExportContent),this._qR(this._ExportContent),this._CancelButton.addClass("PPRibbonDataEditCancelButton")},i.prototype._aUR=function(n){return isNaN(parseInt(n))?0:parseInt(n)},i.prototype._gr=function(n,i){t.prototype._gr.call(this,n,i),this.CancelButtonClicked.fire(this,i)},i.prototype._aN=function(n,t){t=t||{},t.exportData=this._jo(),this.OkButtonClicked.fire(this,t),this.close()},i.prototype._qR=function(t){t.innerHTML="";var i={ParentNode:t,Checked:!0,Style:"padding:2px"},r={ParentNode:t,Content:"Диаграмма как изображение",Style:"vertical-align:middle"};this.cb=new n.Ui.CheckBox(i),this.lb=new n.Ui.Label(r)},i.prototype._jo=function(){return{format:n.Mb.ExportFormat.HTML}},i.prototype.updateSize=function(){t.prototype.updateSize.call(this);var r=this._ContentDomNode.clientHeight-this._DialogButtonsDomNode.clientHeight,i=this._aUR(n.getStyle(this._ExportContent,"margin-top"));i+=this._aUR(n.getStyle(this._ExportContent,"margin-bottom")),i+=this._aUR(n.getStyle(this._ExportContent,"padding-top")),i+=this._aUR(n.getStyle(this._ExportContent,"padding-bottom")),this._ExportContent.style.height=r-i-32+"px"},i}(t.Dialog);t.ExportDialog=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(n){n.SelCommands={Unknown:"Unknown",Select:"Select",Deselect:"Deselect",Invert:"Invert",Set:"Set"},n.DmElRelative={Unknown:"Unknown",Current:"Current",All:"All",Children:"Children",ChildrenRecursive:"ChildrenRecursive",Siblings:"Siblings",Parent:"Parent",Level:"Level",AllParents:"AllParents"},n.DimCalendarLvl={None:"None",Root:"Root",Year:"Year",HalfYear:"HalfYear",Quarter:"Quarter",Month:"Month",Week:"Week",Day:"Day",NineMonths:"NineMonths"};var t;(function(n){var t,i,r,u,f,e,o;(function(n){n[n.Name=0]="Name",n[n.SelectionInfo=1]="SelectionInfo",n[n.SelectionCount=2]="SelectionCount"})(t=n.DimComboCaption||(n.DimComboCaption={})),function(n){n[n.Reload=0]="Reload",n[n.NewData=1]="NewData",n[n.Content=2]="Content",n[n.State=3]="State"}(i=n.ElsTreeRefreshType||(n.ElsTreeRefreshType={})),function(n){n[n.Contains=0]="Contains",n[n.StartWith=1]="StartWith",n[n.EndWith=2]="EndWith",n[n.Exactly=3]="Exactly"}(r=n.DimFilterType||(n.DimFilterType={})),function(n){n[n.None=0]="None",n[n.Child=1]="Child",n[n.Self=2]="Self",n[n.SelfAndChild=3]="SelfAndChild"}(u=n.DimElementState||(n.DimElementState={})),function(n){n[n.Stack=0]="Stack",n[n.Columns=1]="Columns"}(f=n.MultiAttributesMode||(n.MultiAttributesMode={})),n.DmTreeCMOperation={SelectAll:"SelectAll",DeselectAll:"DeselectAll",SelectChild:"SelectChild",SelectChildRecursive:"SelectChildRecursive",DeselectChild:"DeselectChild",ExtensionSelect:"ExtensionSelect",SelectLevel:"SelectLevel",DeselectLevel:"DeselectLevel",SelectLevelByName:"SelectLevelByName",DeselectLevelByName:"DeselectLevelByName",SetSchema:"SetSchema",CreateSchemaBySelection:"CreateSchemaBySelection",SelectGroup:"SelectGroup",CreateElGroupBySelection:"CreateElGroupBySelection",SelectWithData:"SelectWithData",SetNameAttribute:"SetNameAttribute",UseCustomNaming:"UseCustomNaming",UseAttributesNaming:"UseAttributesNaming",UseDefaultNaming:"UseDefaultNaming",SetElGroup:"SetElGroup",SetElGroupBySelection:"SetElGroupBySelection",SetHierarchy:"SetHierarchy",ShowOnlyWithData:"ShowOnlyWithData",SetOrder:"SetOrder",ExpandAll:"ExpandAll",CollapseAll:"CollapseAll"},function(n){n[n.Elements=0]="Elements",n[n.CalendarPeriod=1]="CalendarPeriod"}(e=n.DmViewerMode||(n.DmViewerMode={})),function(n){n[n.Levels=0]="Levels",n[n.Period=1]="Period",n[n.LevelsAndPeriod=2]="LevelsAndPeriod"}(o=n.DmCalendarPeriodMode||(n.DmCalendarPeriodMode={}))})(t=n.Ui||(n.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(i){var r=function(i){function r(t){var r=i.call(this,t)||this;return r._Control.addClass("PPMbElsTree"),r._acL=r._Control.getDataObject(),r._bfk(),r._acM(),r._oa(),r._y6(),r._j9=n.setTimeout(r.refreshAll,0,undefined,r),r}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["RequestChild","Refreshed"]),this._AutoLoad=!0,this._Service=null,this._Source=null,this._TextFilter=null,this._ImageList=null,this._y7=[],this._vJ=null,this._aUS="PPElsTreeLoading"},r.prototype._initFields=function(n){n.Control=this._acN(n||{}),i.prototype._initFields.call(this,n)},r.prototype._fT=function(){return n.Ui.SimpleTreeList},r.prototype._acN=function(t){var i=n.extend({},t.Control,!0,!1),r={Parent:null,DataMappers:this._anz(),DataObject:{},SortColumn:0,SortDirection:n.Ui.TreeSortDirection.None,FilterString:"",FilterColumn:0,SortMethod:n.Ui.TreeSortMethod.String,RequestTimeout:50,Captions:this._cCL()};return i=n.extend(i,r,!0,!1)},r.prototype._anz=function(){return{Key:"k",Parent:"p",Index:"@i",ImageIndex:"@im",ChildrenCount:new n.Ui.PropertyMapper({Getter:this._aUT.bind(this),Context:null}),Expanded:new n.Ui.PropertyMapper({Getter:this._bNQ.bind(this),Setter:function(n,t){n.userExpandVal=t},Context:null}),Content:new n.Ui.PropertyMapper({Getter:this._avf.bind(this),Setter:function(n,t){n.chngData=t},Context:null})}},r.prototype._cCL=function(){return[{Content:"",Width:"100%"}]},r.prototype._bfk=function(t){this._g7=t?t:new n.Mb.ElsFilter({})},r.prototype._y6=function(){this._avg(),this._aFv=!0,this._g7.setSettings({TextValue:this._TextFilter}),this._aFv=!1},r.prototype._acM=function(){this._dH&&this._dH.removeAllEvents(this),this._bfl&&this._bfl.isLive()&&(this._bfl.dispose(),delete this._bfl),delete this._dH,this._Source&&this._Source.isLive()&&(this._dH=this._Source.getPPService()),this._Service&&this._Service.isLive()&&(this._dH=this._Service)},r.prototype._oa=function(){this._Control.DataRequest.addOne(this._cCM,this),this.RequestChild.insert(0,this._y8),this._g7.SettingsChanged.addOne(this._cCN,this),this._avh()},r.prototype._avh=function(){},r.prototype._avg=function(){if(this._Source&&this._Source.isLive()){if(!this._Source.isMdLoaded()){this._acO||(this._acO=n.setTimeout(this._cCO,0,null,this));return}this._Control.setImageList(null);var t=this._ImageList&&this._ImageList.isLive()?this._ImageList:this._aUU();t&&t.isLive()&&(t.isImageLoaded()?this._Control.setImageList(t):(t.ImageLoaded.addOne(this._fk,this),t.loadImage())),this._acO&&(n.clearTimeout(this._acO),delete this._acO)}},r.prototype._aUU=function(){return null},r.prototype._cCO=function(){n.clearTimeout(this._acO),this._acO=0,this._avg()},r.prototype._fk=function(n){this.isLive()&&this._Control.setImageList(n)},r.prototype._bNR=function(){if(!this.getTextFilter()&&this._y7&&this._y7.length)for(var n=0;n<this._y7.length;n++)this._Control.isNodeExist(this._y7[n])&&this._Control.getNodeExpanded(this._y7[n])&&(this._y7.splice(n,1),n--)},r.prototype._avi=function(t,i,r){var f,u,e;if(i?r?(this._anA=this._acL,this._acL=t,this._Control.setDataObject(t),this._acL=this._Control.getDataObject()):(n.extend(this._acL,t,!0,!1),this._Control.refresh()):this._Control.loadNodes(t),f=this.getTextFilter(),f){if(u=void 0,f.text.match(/^\s+$/)!==null)u=[f.text];else for(u=n.String.trim(f.text).split(/\s+/),e=0;e<u.length;e++)u[e]=="&"&&(u[e]="&amp;");this._Control.highlightText(u,f.caseSensitive)}else this._Control.clearHighlightedText();this._bNR(),i&&this._ahp(this._vJ)},r.prototype._cCP=function(n){return n&&this._avi(n),this._acL},r.prototype._avf=function(n){return[n.n]},r.prototype._aUT=function(t){var i=this._oN(t.k)||{};return n.isDefined(i.childrenCount)?i.childrenCount:!!this.getTextFilter()&&(this._aUV(i.k)||this._bfm(i.k))?i["@hc"]:i.h},r.prototype._bNQ=function(t){if(!this.getTextFilter()||this._aUV(t.k)!==!1||this._bfm(t.k)!==!1){var i=this._aUT(t);if(!n.isDefined(i))return t.userExpandVal=!!t.userExpandVal;if(i){if(n.isDefined(t.userExpandVal))return t.userExpandVal;if(!this.getTextFilter()||this._cCQ(t),this._aFw||this._anA&&this._anA[t.k]&&this._anA[t.k].userExpandVal||this._y7.indexOf(t.k)>-1)return t.userExpandVal=!0}return t.userExpandVal=!1}return n.isDefined(t.userExpandVal)?t.userExpandVal:t.userExpandVal=!0},r.prototype._aFx=function(){return!this._Source||!this._Source.isLive()?null:this._Source.getElems(this._g7)},r.prototype._oN=function(n){return!this._Source||!this._Source.isLive()?null:this._Source.getElem(n,this._g7)},r.prototype._aFy=function(n,t){return!this._Source||!this._Source.isLive()?null:this._Source.getChildEls(n,t,this._g7)},r.prototype._bfn=function(n){var t;return t=n.ToKeys?this._bNS():this._bNS(n.Key),{selId:undefined,keysToLoad:n.ToKeys,parentKey:n.Key,range:n.Range,filter:t}},r.prototype._bNT=function(n,t){var i,r;if(!n)return null;var u={},f=t?t.start:0,e=t?t.start+t.count:n.length;for(i=f;i<e;i++)n[i]&&(r=JSON.parse(JSON.stringify(n[i])),r.Index=i,u[r.k]=r);return u},r.prototype._kZ=function(){return this._dH&&this._dH.isLive()&&this._Source&&this._Source.isLive()&&this._Source.getIsOpened()},r.prototype._anB=function(){return this._bfo},r.prototype._bfp=function(t){if(this._Source&&this._Source.isLive()){var i=this._aFx();i?(this._avi(JSON.parse(JSON.stringify(i)),!0,!0),delete this._bfo,t!==!1&&this._s8({Type:n.Mb.Ui.ElsTreeRefreshType.Reload})):(this._bfo=!0,this._Control.setDataObject({}))}},r.prototype._bfq=function(t,i){var f=this._oN(t),u=this._bNT(this._aFy(t),i);f&&u&&(this._avj||(this._avj={}),this._avj=n.extend(this._avj,u,!0),this._anC||(this._anC=n.setTimeout(this._cCR,0,arguments,this)))},r.prototype._cCR=function(t){this._avi(this._avj,!1),t[2]!==!1&&this._s8({ParentKey:t[0],Range:t[1],Type:n.Mb.Ui.ElsTreeRefreshType.NewData}),delete this._anC,delete this._avj},r.prototype._ahp=function(n){if(n&&n.focusMode!==0){var t=n.nodeKey.toString();this._Control.isNodeExist(t)&&(this._Control.setExpandedForNodeAncestors(t,!0,!1),this._Control.scrollToNode(t),n.focusMode===2&&this._Control.setFocusedNode(t)),this._vJ=null}},r.prototype._bNU=function(){return!!this._vJ},r.prototype._bNS=function(t){var r=!!this.getTextFilter(),u=r&&this._aUV(t)||this._bfm(t),i=this._g7.getSettings(!0,null,["_Id"],!0);return r&&(i.TextValue=u?null:this._TextFilter),i.CustomHash=this._g7.getHash(),n.create(i)},r.prototype._aUV=function(t){var r=null,u=this._oN(t),i,f;return!n.isDefined(t)||t===null||!u||!(r=this.getTextFilter())?null:(i=this._avf(u)[0],f=r.text.toLowerCase(),i&&this._bNV(n.String.unescapeHTML(i.toLowerCase()),f))},r.prototype._bfm=function(t){var o=null,s=this._oN(t),r,u,i,h,f,e;if(!n.isDefined(t)||t===null||!s||!(o=this.getTextFilter()))return null;for(r=[],u=s.p;u!==null;)if(i=this._oN(u),i)r.push(i),u=i.p!==undefined?i.p:null;else break;for(h=o.text.toLowerCase(),f=0;f<r.length;f++)if(e=this._avf(r[f])[0],e&&this._bNV(n.String.unescapeHTML(e.toLowerCase()),h))return!0;return!1},r.prototype._bNV=function(n,t){for(var r=t.split(/\s+/),i=0;i<r.length;i++)if(n.indexOf(r[i])===-1)return!1;return!0},r.prototype._cCQ=function(t){this._avk||(this._avk=[]),this._avk.push(t),this._y9&&(n.clearTimeout(this._y9),delete this._y9),this._y9=n.setTimeout(this._cCS,10,null,this)},r.prototype._cCS=function(){if(this._kZ()){this._aFv=!0,this._g7.setSettings({TextValue:this._TextFilter});for(var r=this._g7.getFilterJSON(1),i=[],t=0;t<this._avk.length;t++)i.indexOf(this._avk[t].p)===-1&&i.push(this._avk[t].p);for(this._dH.setMarker(n.Mb.PPServiceMarker.Background),this._dH.beginBatch(),t=0;t<i.length;t++)this._dH.getEls(this._Source,i[t],r,null,null);this._dH.endBatch(!1,new n.Delegate(this._bNW,this,{Parents:i})),this._dH.setMarker(null),this._aFz=this._aFz?this._aFz+1:1,delete this._avk,delete this._y9}},r.prototype._bNW=function(t,i){for(var e=n.getProperty(i.Response,"BatchExecResult.its.it"),r,f=0;f<e.length;f++){var u=n.getProperty(e[f],"GetDimElementsResult.els.e")||[],o=[],s=[];for(r=0;r<u.length;r++)this._Control.isNodeExist(u[r].k)&&(u[r].h?o.push(u[r].k):s.push(u[r].k));this._Control.setExpandedForNodes(o,!0,!1),this._Control.setExpandedForNodes(s,!1,!1)}this._aFz--},r.prototype._bfr=function(){return{TextFilter:this.getTextFilter()}},r.prototype._s8=function(n){var i=this._bfr(),r={},t;if(this._bfs)for(t in this._bfs)JSON.stringify(this._bfs[t])!==JSON.stringify(i[t])&&(r[t]=i[t]);n.Changes=r,this.Refreshed.fire(this,n),this._bfs=i},r.prototype._x4=function(){this._aho&&(n.clearTimeout(this._aho),delete this._aho),this._aho=n.setTimeout(this._cCT,0,null,this)},r.prototype._cCT=function(){delete this._aho,this._Control&&this._Control.isLive()&&!this._anB()&&this._Control.updateTree()},r.prototype._bNX=function(){if(this._Control&&this._Control.isLive()){if(this._Source&&this._Source.isLive()&&(!!this._dEy||!!this._aFz||!!this._oO||!!this._avj||!!this._anC||this._Source.getIsDataLoading()||!this._Control.areAllVisibleNodesLoaded())){this._aFA=n.setTimeout(this._bNX,200,null,this);return}this._Control.removeClass(this._aUS),delete this._aFA}},r.prototype._bft=function(){this._acO&&n.clearTimeout(this._acO),delete this._acO},r.prototype._bNY=function(){this._za&&n.clearTimeout(this._za),this._y9&&n.clearTimeout(this._y9),this._ahq&&n.clearTimeout(this._ahq),this._anC&&n.clearTimeout(this._anC),delete this._za,delete this._y9,delete this._ahq,delete this._anC},r.prototype._bNZ=function(){this._j9&&n.clearTimeout(this._j9),this._aho&&n.clearTimeout(this._aho),this._aFA&&n.clearTimeout(this._aFA),delete this._j9,delete this._aho,delete this._aFA},r.prototype._bfu=function(){this._bft(),this._bNZ(),this._bNY()},r.prototype._cCM=function(n,t){var e,o,r;if(!this._anC&&!this._j9&&!this._anB()){if(!this._Source||!this._Source.isLive()){this.setSource(null);return}if(!t.Request||!t.Request.length){this._Control.checkExpansion();return}e=this._cCU(t.Request);for(o in e){var i=e[o].Ranges,u=e[o].Parent,f=this._oN(u);if(!f){this._Control.checkExpansion();return}if(i&&i.length>0)for(r=0;r<i.length;r++)f.children&&f.children[i[r].start]?this._bfq(u,i[r]):this.RequestChild.fire(this,{Key:u,Range:i[r]});else f.children&&f.children[0]?this._bfq(u):this.RequestChild.fire(this,{Key:u})}}},r.prototype._cCU=function(t){for(var r={},u,f,e,i=0;i<t.length;i++)u=t[i].Parent!==null?"$"+t[i].Parent:"null",r[u]||(r[u]={Ind:[],Parent:t[i].Parent}),r[u].Ind[t[i].Index]=!0;for(u in r)if(f=null,e=0,this._Control.getNodeChildrenCount(r[u].Parent)!==!0)for(r[u].Ranges=[],i=0;i<r[u].Ind.length;i++)r[u].Ind[i]&&(e++,f=f===null?i:f),n.isNumber(f)&&(!r[u].Ind[i]||i===r[u].Ind.length-1)&&(r[u].Ranges.push({start:f,count:e}),f=null,e=0);return r},r.prototype._y8=function(t,i){if(!this._kZ()||this._Source.getIsDataLoading()){this._ahq&&(n.clearTimeout(this._ahq),delete this._ahq),delete this._oO,(i.IsLoadFirst||i.IsLoadToKeys)&&(this._za&&(n.clearTimeout(this._za),delete this._za),this._za=n.setTimeout(this._cCV,0,i,this));return}if(this._j9&&(n.clearTimeout(this._j9),delete this._j9),this._oO||(this._oO=[]),i.IsLoadToKeys)this._oO=[{OpType:0,Args:i}];else{var r;try{r=JSON.stringify(i)}catch(u){r=null}r&&this._oO[r]||(this._oO.push({OpType:1,Args:i}),r&&(this._oO[r]=!0))}this._ahq||(this._ahq=n.setTimeout(this._cCW,0,null,this))},r.prototype._cCW=function(){var u=this._oO.length,i,r;for(this._dH.beginBatch(),this._dH.setMarker(t.PPServiceMarker.Delay),i=0;i<u;i++)r=this._bfn(this._oO[i].Args),this._oO[i].OpType===0?this._dH.getPathToKey(this._Source,r,new n.Delegate(this._ht,this,this._oO[i].Args)):this._oO[i].OpType===1&&this._dH.getChildren(this._Source,r,new n.Delegate(this._ht,this,this._oO[i].Args));this._dH.endBatch(),this._dH.setMarker(t.PPServiceMarker.Normal),delete this._ahq,delete this._oO},r.prototype._cCV=function(t){this._za&&(n.clearTimeout(this._za),delete this._za),t.IsLoadFirst?this.loadFirst():t.IsLoadToKeys&&this.loadToKeys(t.ToKeys)},r.prototype._cCN=function(){this._aFv||(this._g7.isCustomHash()&&(this._g7.setCustomHash(null),this._g7.setCustomHash(this._g7.getHash())),this.refreshAll(!0)),this._aFv=!1},r.prototype._ht=function(t,i){if(n.isDefined(i.Args.ToKeys)&&i.Args.FocusMode!=0){if(i.Args.IsNoPathData){this.loadFirst();return}this._vJ={nodeKey:i.Args.ToKeys[0],focusMode:i.Args.FocusMode}}else if(n.isDefined(i.Args.Key)&&!this._anB()){this._bfq(i.Args.Key,i.Args.Range),n.getProperty(i,"Args.IsLoadFirst")&&this._ahp(this._vJ);return}this._bfp(),delete this._bfo},r.prototype.refreshAll=function(t,i,r){if(i!==!1){var u=this._Control.getFocusedNode();this._vJ=!this._vJ&&n.isDefined(u)&&u!==null?{nodeKey:u,focusMode:2}:this._vJ}else delete this._anA,this._acL={},this._y7=[],this._vJ=null,delete this._aFw;t=!!t||!!this._za,this._bNZ(),this._bNY(),this._aUS&&(this._Control.addClass(this._aUS),this._aFA=n.setTimeout(this._bNX,300,null,this)),this._Control.setDataObject(this._acL),this._bfp(r),(this._AutoLoad||t)&&this.loadFirst()},r.prototype.refresh=function(t,i,r){if(!n.isDefined(t)){this.refreshAll();return}n.isPrimitive(t)||(t=null),this._j9&&(n.clearTimeout(this._j9),delete this._j9);var f=this._oN(t),u=this._bNT(this._aFy(t),i);f&&u&&(this._avi(u,!0),r!==!1&&this._s8({ParentKey:t,Range:i,Type:n.Mb.Ui.ElsTreeRefreshType.NewData}))},r.prototype.refreshContent=function(t){this._x4(),t!==!1&&this._s8({Type:n.Mb.Ui.ElsTreeRefreshType.Content})},r.prototype.loadFirst=function(){if(this._Source&&this._Source.isLive()){var n=this._aFx();n?this._anB()&&this._bfp():this.RequestChild.fire(this,{Key:null,IsLoadFirst:!0})}},r.prototype.loadToKeys=function(t,i){var u,r;if(t=n.toArray(t),i=n.isDefined(i)&&n.isNumber(i)?i:2,t&&t.length&&!this.getTextFilter()){for(u=!1,r=0;r<t.length&&!u;r++)u=!this._Control.isNodeExist(t[r])||!this._oN(t[r]);u?this.RequestChild.fire(this,{Key:null,ToKeys:t,FocusMode:i,IsLoadToKeys:!0}):(this._vJ={nodeKey:t[0],focusMode:i},this._ahp(this._vJ))}},r.prototype.collapseAll=function(){delete this._aFw,this._Control.setExpandedForAll(!1,!1)},r.prototype.expandAll=function(){this._aFw=!0,this._Control.setExpandedForAll(!0)},r.prototype.setExpandedForNodes=function(t,i,r){t=n.toArray(t),this._Control.setExpandedForNodes(t,i,r),i&&(this._y7=t,this._bNR())},r.prototype.getImageList=function(){return this._Control&&this._Control.isLive()?this._Control.getImageList():null},r.prototype.setImageList=function(n){n!==this._ImageList&&(this._ImageList&&this._ImageList.isLive()&&this._ImageList.removeAllEvents(this),this._ImageList=n,this._avg())},r.prototype.setSource=function(n){n!==this._Source&&(this._Source=n,this._acM(),this._avh(),this._y6(),this.refreshAll(!0,!1))},r.prototype.getService=function(){return this._dH},r.prototype.setService=function(n){this._Service=n,this._acM(),this._avh(),this._avg()},r.prototype.getNameAttributesId=function(){return["Name"]},r.prototype.setTextFilter=function(t,i,r,u){var s=JSON.stringify(this.getTextFilter()),h,f,o,l;if(s==="null"&&(this._bN0=this._acL),this._aFv=!0,this._g7.setSettings({IncludeParents:!!t,TextValue:t,TextAttributes:t?i||this.getNameAttributesId():null,TextCaseSensitive:!!r,TextWholeWordsOnly:!!u}),this._TextFilter=t,h=s!==JSON.stringify(this.getTextFilter()),!this.getTextFilter()||h)h&&(this._g7.setCustomHash(null),this.getTextFilter()?this._g7.setCustomHash(this._g7.getHash()):(this._acL=this._bN0,delete this._bN0),delete this._aFw,this._y9&&(n.clearTimeout(this._y9),delete this._y9),this.refreshAll(!0,s!=="null"));else if(f=this._Control.getVisibleNodes(),f.length){var c=this._Control.getFocusedNode(),a=c?this._Control.getNodePosition(c):-1,e=null;for(o=0;o<f.length&&!e;o++)this._Control.getNodePosition(f[o])>a&&this._aUV(f[o])&&(e=f[o]);e||(l=this._Control.getScrollBarV(),e=f[f.length-1]===c||!l||l.getValue()===100?this._Control.getNodeByPosition(0):f[f.length-1]),e&&(this._Control.scrollToNode(e,0),this._Control.setNodeFocused(e))}},r.prototype.getCurrentFilter=function(){return this._g7},r.prototype.getTextFilter=function(){if(!this._g7)return null;var n=this._TextFilter,t=this._g7.getTextCaseSensitive(),i=this._g7.getTextWholeWordsOnly(),r=this._g7.getTextAttributes();return n?{text:n,attributes:r,caseSensitive:!!t,wholeWordsOnly:!!i}:null},r.prototype.getAutoLoad=function(){return this._AutoLoad},r.prototype.setAutoLoad=function(n){this._AutoLoad=n},r.prototype.getSource=function(){return this._Source},r.prototype.dispose=function(){delete this._Source,delete this._dH,delete this._Service,this._bfu(),i.prototype.dispose.call(this)},r}(n.Ui.ProxyControl);i.ElsTree=r})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(i){var r=function(r){function u(t){var i=r.call(this,t)||this;return i._aUW(n.isDefined(i._NameAttributesId)),i._bN1(),i._vK(),i}return __extends(u,r),u.prototype._e=function(){r.prototype._e.call(this),this._defineEvents(["RequestSelection","BeforeRequestSelection","SelectionChanging","SelectionChanged"]),this._LoadToFirstSelected=!1,this._AllowHasDataHighlight=!1,this._ShowOnlyDataNodes=!1,this._DataNodeClass="",this._NoDataNodeClass="",this._AllowHasCalcHighlight=!1,this._CalcNodeClass="",this._NoCalcNodeClass="",this._AllowBusyNodeHighlight=!0,this._BusyNodeClass="",this._HideGroups=!1,this._NameAttributesId={},this._MultiAttributesMode=i.MultiAttributesMode.Stack,this._MultipleAttributesEnabled=!0,this._MultipleAttributesSeparator=" | ",this._SelectionOdId=null,this._SelectionMode=n.Ui.TreeListSelectionMode.MultiSelect,this._AllowEmptySelection=!0,this._RightButtonSelect=!1,this._UpdateOnScrollTimeout=150,this._CustomNaming=null,this._UseCustomNaming=!1,this._ContextMenuConfig={UseCustomNaming:{Visible:!1},UseAttributesNaming:{Visible:!1}},this._cCX=555,this._cCY=777,this._aFB=new n.Delegate(this._bfv,this),this._anD=new n.Delegate(this._bfw,this),this._cCZ="PPDimNodeNoData",this._cC0="PPDmNodeCalc",this._cC1="PPDmNodeStateLoading"},u.prototype._aUU=function(){var t=this.getService(),i,u,r;return t&&t.isLive()&&(i=t.getSpecialImageListUrl(),u=this._Source.getPredefinedAttributeId("ImageIndex")!==null,i&&u)?(r=new n.ImageList({IconWidth:16,IconHeight:16}),r.setSource(i),r):null},u.prototype._initFields=function(t){var i=!1;n.isDefined(t.ContextMenu)&&(t.ContextMenu instanceof n.Ui.Control||!t.ContextMenu)&&(i=!0),this._aUX=i,r.prototype._initFields.call(this,t)},u.prototype._acN=function(t){var u={EnableSort:!1,EnableSearch:!1,ShowCaptions:t.MultiAttributesMode===n.Mb.Ui.MultiAttributesMode.Stack,EnableAutoColumnSize:!1,AllowEmptySelection:!0},f={SelectionMode:n.isDefined(t.SelectionMode)?t.SelectionMode:this._SelectionMode,RightButtonSelect:n.isDefined(t.RightButtonSelect)?t.RightButtonSelect:this._RightButtonSelect},i=r.prototype._acN.call(this,t);return i=n.extend(u,i,!0,!1),i=n.extend(i,f,!0,!1)},u.prototype._anz=function(){var t=r.prototype._anz.call(this);return t=n.extend(t,{Selected:new n.PropertyMapper({Getter:this._bfx.bind(this),Setter:function(n,t){n.s=t}}),ChildrenSelected:new n.PropertyMapper({Getter:this._cC2.bind(this),Setter:function(n,t){n["@hs"]=t}}),Class:new n.PropertyMapper({Getter:this._cC3.bind(this)})},!0,!1)},u.prototype._bfk=function(){r.prototype._bfk.call(this,new n.Mb.DimensionFilter({}))},u.prototype._y6=function(){r.prototype._y6.call(this),this.getCurrentFilter().setSettings({OnlyWithData:this._ShowOnlyDataNodes}),this._Source&&this._Source.isLive()&&this._aUW()},u.prototype._bN1=function(){this._Source&&this._Source.isLive()&&this._SelectionOdId&&!this._Source.isSelectionExist(this._SelectionOdId)&&(this._SelectionOdId=null)},u.prototype._vK=function(){var t,u,r,i;if(this._s9&&(n.clearTimeout(this._s9),delete this._s9),this._Control.beginUpdate(),t=this._Control.getCaptions(),t.removeAllEvents(this),t.clear(),this._MultiAttributesMode===n.Mb.Ui.MultiAttributesMode.Stack||this._UseCustomNaming)this._Control.setShowCaptions(!1),t.add(new n.Ui.ListCaption({Content:"",Width:"100%"}));else if(this._MultiAttributesMode===n.Mb.Ui.MultiAttributesMode.Columns){if(!this._Source||!this._Source.isLive()){this._Control.endUpdate();return}if(!this._Source.isMdLoaded()){this._s9=n.setTimeout(this._vK,0,[],this),this._Control.endUpdate();return}for(this._Control.setShowCaptions(!0),u=this.getNameAttributesId(),r=this._Source.getAttributes(),i=0;i<r.length;i++)if(r[i].vis){var o=n.getProperty(r[i],"n"),f=n.getProperty(r[i],"id"),e=u.indexOf(f)>-1;t.add(new n.Ui.ListCaption({Content:o||f,Width:e?(100/u.length).toString()+"%":200,IsVisible:e,Data:f}))}}this._Control.endUpdate(),this._x4(),t.Changed.addOne(this._cC4,this)},u.prototype._oa=function(){this._Control.SelectionChanging.addOne(this._aBq,this),this._Control.SelectionChanged.addOne(this._dx,this),this._Control.VisibleNodesChange.addOne(this._cC5,this),this._Control.VisibleNodesChanged.addOne(this._cC6,this),this._Control.KeyDown.addOne(this._bfy,this),this._Control.KeyUp.addOne(this._cC7,this),this.RequestSelection.insert(0,this._cC8),this.SelectionChanging.insert(0,this._ahj),this.ContextMenu.insert(0,this._a7),r.prototype._oa.call(this)},u.prototype._avh=function(){var t=this.getService();t&&t.isLive()&&(t.DimOpened.addOne(new n.Delegate(this._bfz,this)),t.SelectionChanged.addOne(new n.Delegate(this._cC9,this)))},u.prototype._bfy=function(t,i){switch(i.Event.keyCode){case 16:case 17:this._vL&&n.clearTimeout(this._vL),this._vL=n.setTimeout(this._bN2,this._vL?250:500,null,this)}},u.prototype._cC7=function(t,i){if(this._vL){n.clearTimeout(this._vL),delete this._vL;switch(i.Event.keyCode){case 16:case 17:this._bN2()}}},u.prototype._bN2=function(){delete this._vL,this._oP()},u.prototype._cC4=function(t,i){var u,f,r;if(i.Type==="CaptionVisibility"&&this._MultiAttributesMode===n.Mb.Ui.MultiAttributesMode.Columns)for(u=this._Control.getCaptions(),f=u?u.getVisibleCaptions():[],this._NameAttributesId={},r=0;r<f.length;r++)this._NameAttributesId[f[r].getData()]=null},u.prototype._aBq=function(t,i){var r=n.isDefined(this._ahr)?this._ahr:this._Source.getSelectedCount(this._SelectionOdId);if(this._vM||!this._AllowEmptySelection&&i.Value==!1&&r<=1){i.Cancel=!0;return}this.BeforeRequestSelection.fire(this,i),i.Cancel||this._vN()},u.prototype._vN=function(){this._zb&&(n.clearTimeout(this._zb),delete this._zb);var t=this._cCY/(this.getSelectionMode()===n.Ui.TreeListSelectionMode.SingleSelect?3:1);this._zb=n.setTimeout(this._cDa,t,null,this)},u.prototype._cDa=function(){this._oP()},u.prototype._oP=function(){this._zb&&(n.clearTimeout(this._zb),delete this._zb);var t=!!n.getProperty(this._ka,"args.length");!t||this._vL||this._ahs||this._Source.getIsStateLoading()||(this.SelectionChanged.fire(this,this._ka.args),this._ka.sendedCounter==this._ka.receivedCounter+this._ka.errorCounter&&delete this._ka)},u.prototype._dx=function(i,r){var u,f,e;if(r.Changed&&t.Object.keys(r.Changed).length!==0&&!this._bN3){u=!1,this._zc=this._zc||{},this._ahr=n.isDefined(this._ahr)?this._ahr:this._Source.getSelectedCount(this._SelectionOdId),this._zc=n.extend(this._zc,r.Changed,!0,!1),(r.Type==="FromToIndex"||this.getSelectionMode()===n.Ui.TreeListSelectionMode.SingleSelect)&&(u=!0,this.getSelectionMode()===n.Ui.TreeListSelectionMode.SingleSelect&&(this._bN4=!0,this._zc=r.Changed,this._ahr=0));for(f in r.Changed)r.Changed[f]?this._ahr++:this._ahr--;r.Type==="Control"&&this.getSelectionMode()===n.Ui.TreeListSelectionMode.MultiSelect&&(this._zc["-"+r.Node]={Key:[r.Node],Command:r.Value?n.Mb.SelCommands.Select:n.Mb.SelCommands.Deselect,DmElRelative:n.Mb.DmElRelative.ChildrenRecursive}),this._ahs&&n.clearTimeout(this._ahs),e=this._cCX/(u?3:1),this._ahs=n.setTimeout(this._cDb,e,null,this)}},u.prototype._cDb=function(){delete this._ahs;var i=[],r=[],u=[],t;for(t in this._zc)t&&(this._zc[t]===!0?r.push(t):this._zc[t]===!1?u.push(t):i=i.concat(this._zc[t]));this._bN4?i.push({Key:r,Command:n.Mb.SelCommands.Set,DmElRelative:n.Mb.DmElRelative.Current}):(u.length&&i.push({Key:u,DmElRelative:n.Mb.DmElRelative.Current,Command:n.Mb.SelCommands.Deselect}),r.length&&i.push({Key:r,DmElRelative:n.Mb.DmElRelative.Current,Command:n.Mb.SelCommands.Select})),delete this._bN4,delete this._zc,delete this._ahr,this.setSelection(i)},u.prototype._cC6=function(){this._vM&&(n.clearTimeout(this._vM),delete this._vM),this._vM=n.setTimeout(this.refreshState,this._UpdateOnScrollTimeout,!1,this)},u.prototype._cC5=function(n,t){if(this._AllowBusyNodeHighlight)for(var i=0;i<t.Nodes.length;i++)this._Source.getIsElUpdated(t.Nodes[i],this.getCurrentFilter(),this._SelectionOdId)||this._Control.updateNodeStyle(t.Nodes[i])},u.prototype._cC8=function(t,i){var r=i.SelectionArgs,f,u,e;if(this._kZ()&&this._Source.getAllowSelection()&&!i.IsNewHier&&!i.IsNewGroup&&!i.IsNewSchema&&!i.IsLimitToGroup){if(this.isSelectionUpdateMode()){this._zd.commands=this._zd.commands.concat(r);return}for(f=this.getService(),f.setMarker(n.Mb.PPServiceMarker.Background),f.beginBatch(),u=0;u<r.length;u++){if(n.isDefined(r[u].LevelId)){f.selectLevel(this._Source,{selId:this._SelectionOdId,levelId:r[u].LevelId,selCommand:r[u].Command,fireEvent:u===r.length-1});continue}if(n.isDefined(r[u].GroupId)){f.selectGroup(this._Source,{selId:this._SelectionOdId,groupId:r[u].GroupId,fireEvent:u===r.length-1});continue}if(n.isDefined(r[u].TextFilter)){f.selectByTextFilter(this._Source,{selId:this._SelectionOdId,selCommand:r[u].Command,textFilter:r[u].TextFilter,onlySelected:r[u].OnlySelected,includeParents:r[u].IncludeParents,includeChildren:r[u].IncludeChildren,fireEvent:u===r.length-1});continue}f.selectByKeys(this._Source,{selId:this._SelectionOdId,keys:r[u].Key,selCommand:r[u].Command,dmElRelative:r[u].DmElRelative,fireEvent:u===r.length-1,ignoreMissingKey:r[u].IgnoreMissingKey})}r.length&&(e=this._bN5(),this._Source.isElemsExist(e)&&f.updateStateData(this._Source,{selId:this._SelectionOdId,keys:e,filter:this.getCurrentFilter()})),f.endBatch(!0,this._aFB,this._anD),f.setMarker(null),this.SelectionChanging.fire(this,{Dim:this._Source,SelectionArgs:r})}},u.prototype._ahj=function(){this._ka||(this._ka={sendedCounter:0,receivedCounter:0,errorCounter:0,args:[]}),this._ka.sendedCounter++},u.prototype._bfz=function(n,t){t.Dim===this._Source&&(this._y6(),this.refreshAll(!1,!1))},u.prototype._bfA=function(){this._y6(),this.refreshAll(!0,!1),this._aFB.fire(this)},u.prototype._cC9=function(n,t){t.Dim===this._Source&&(this.refreshState(),this._ka&&(this._ka.args.push(t),this._zb||this._oP()))},u.prototype._cDc=function(n,t){t.Args.updateData&&(this._y6(),this.refreshAll(!0,!0)),this.refreshState()},u.prototype._bfv=function(){this._ka&&this._ka.receivedCounter++},u.prototype._bfw=function(){this._ka&&(this._ka.errorCounter++,this._ka.sendedCounter==this._ka.receivedCounter+this._ka.errorCounter&&delete this._ka)},u.prototype._aFC=function(){if(!this._Source||!this._Source.isLive())return{};var f=this.getControl().getNodes(),i=this._Control.getFocusedNode(),u=this._Source.getActiveHierarchy(),r=this.getOrderBy(),e=r?t.Object.keys(r[0])[0]:null,o=this.getNameAttributesId();return{isMs:this.getSelectionMode()!==n.Ui.TreeListSelectionMode.SingleSelect,allowEmptySel:this.getAllowEmptySelection(),fNode:i,isHasChild:i?this._Control.getNodeChildrenCount(i)||this._Control.getNodeChildrenCount(i)>0:!1,isPlain:this._Source.getIsPlain(this.getCurrentFilter()),srcNode:this._oN(i),isEmpty:f.length==0||f[0]=="notfound",isHlOn:this._Source.getAllowHasData()&&this._AllowHasDataHighlight,isSlOn:this._Source.getAllowSelection(),aHier:u,aSch:this._Source.getActiveSchema(this._SelectionOdId),aGrp:this._Source.getActiveGroup(this._SelectionOdId),sGrp:this._Source.getSelectedGroup(this._SelectionOdId),isGrpChngOn:this._Source.getAllowChangeElementGroup(this._SelectionOdId),isSchCrOn:this._Source.getAllowSchemaCreation()&&!n.getProperty(u,"id"),isElGrpCrOn:this._Source.getAllowElementsGroupCreation()&&!n.getProperty(u,"id"),levels:this._Source.getLevels()||[],schemas:this._Source.getSchemas()||[],groups:this._Source.getGroups()||[],hiers:this._Source.getHierarchies()||[],attrs:this._Source.getAttributes(!0)||[],orderObj:r,curOrdAttrId:e,curOrdType:r?r[0][e]:null,useCN:this.getUseCustomNaming(),nameAttrs:o,instId:this.getId(),selId:this.getSelectionOdId()}},u.prototype._bN6=function(){var i=this.getContextMenuConfig(),r=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.ExtensionSelect+".Visible"),f=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SetSchema+".Visible"),e=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SelectGroup+".Visible"),u=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SetNameAttribute+".Visible"),o=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SetElGroup+".Visible"),t={};return t[n.Mb.Ui.DmTreeCMOperation.SelectAll]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SelectAll+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.DeselectAll]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.DeselectAll+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SelectChild]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SelectChild+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SelectChildRecursive]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SelectChildRecursive+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.DeselectChild]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.DeselectChild+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.ExtensionSelect]=r!==!1,t[n.Mb.Ui.DmTreeCMOperation.SelectLevel]=r!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SelectLevel+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.DeselectLevel]=r!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.DeselectLevel+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SelectLevelByName]=r!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SelectLevelByName+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.DeselectLevelByName]=r!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.DeselectLevelByName+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SetSchema]=r!==!1&&f!==!1,t[n.Mb.Ui.DmTreeCMOperation.CreateSchemaBySelection]=r!==!1&&f!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.CreateSchemaBySelection+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SelectGroup]=r!==!1&&e!==!1,t[n.Mb.Ui.DmTreeCMOperation.CreateElGroupBySelection]=r!==!1&&e!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.CreateElGroupBySelection+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SelectWithData]=r!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SelectWithData+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SetNameAttribute]=u!==!1,t[n.Mb.Ui.DmTreeCMOperation.UseCustomNaming]=u!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.UseCustomNaming+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.UseAttributesNaming]=u!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.UseAttributesNaming+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.UseDefaultNaming]=u!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.UseDefaultNaming+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SetElGroup]=o!==!1,t[n.Mb.Ui.DmTreeCMOperation.SetElGroupBySelection]=o!==!1&&n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SetElGroupBySelection+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SetHierarchy]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SetHierarchy+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.ShowOnlyWithData]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.ShowOnlyWithData+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.SetOrder]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.SetOrder+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.ExpandAll]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.ExpandAll+".Visible")!==!1,t[n.Mb.Ui.DmTreeCMOperation.CollapseAll]=n.getProperty(i,n.Mb.Ui.DmTreeCMOperation.CollapseAll+".Visible")!==!1,t},u.prototype._a7=function(t,i){n.isPrimitive(i.Node)||this._Control.removeFocus();var r=this.getContextMenu();i.DefaultMenu=r,this.setContextMenu(r)},u.prototype._bfB=function(){var r,v,y,p,g,w,b,nt,a,ft,k;if(this._DefaultCM?this._DefaultCM.clearItems(!0):this._DefaultCM=new n.Ui.Menu({}),r=this._DefaultCM,!this._Source||!this._Source.isLive()){this._DefaultCM.dispose(),delete this._DefaultCM;return}var t=this._aFC(),i=this._bN6(),d=new n.ImageList({Source:n.ImagePath+"dimMenu.png",IconWidth:16,IconHeight:16});r.setImageList(d),(t.isMs||t.isSchCrOn&&t.schemas.length>0||t.schemas.length)&&r.addItem(new n.Ui.MenuHeader({Id:t.instId+"DimMenuSelectionHeader",ResourceKey:"DimMenuSelectionHeader"})),t.isMs&&(i[n.Mb.Ui.DmTreeCMOperation.SelectAll]&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"SelectAll",ResourceKey:"DimMenuSelectAll",Enabled:!t.isEmpty,Click:new n.Delegate(this._cDd,this),ColumnIndex:0,RowIndex:0})),i[n.Mb.Ui.DmTreeCMOperation.DeselectAll]&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"DeSelectAll",ResourceKey:"DimMenuDeselectAll",Enabled:t.allowEmptySel&&!t.isEmpty,Click:new n.Delegate(this._cDe,this),ColumnIndex:1,RowIndex:0})),(i[n.Mb.Ui.DmTreeCMOperation.SelectAll]||i[n.Mb.Ui.DmTreeCMOperation.DeselectAll])&&r.addItem(new n.Ui.ShortSeparator({Id:t.instId+"SelectAllSep"})),i[n.Mb.Ui.DmTreeCMOperation.SelectChild]&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"SelectChild",ResourceKey:"DimMenuSelectChild",Enabled:!t.isEmpty&&t.isHasChild,Click:new n.Delegate(this._bN7,this)})),i[n.Mb.Ui.DmTreeCMOperation.SelectChildRecursive]&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"SelectAllChild",ResourceKey:"DimMenuSelectAllChild",Enabled:!t.isEmpty&&t.isHasChild,Click:new n.Delegate(this._bN7,this,{IsRecursive:!0})})),i[n.Mb.Ui.DmTreeCMOperation.DeselectChild]&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"DeselectChild",ResourceKey:"DimMenuDeselectChild",Enabled:!t.isEmpty&&t.isHasChild,Click:new n.Delegate(this._cDf,this)})));var u=null,f=null,o=[],l={};i[n.Mb.Ui.DmTreeCMOperation.SetSchema]&&t.isSlOn&&(l={},t.aSch&&(l[n.getProperty(t.aSch,"id")]={Checked:!0}),u=t.schemas.length?new n.Ui.Menu({Items:n.Mb.Ui.getMenuItemsByItMd(t.schemas,{GroupName:"SelSchema"},l)}):null),i[n.Mb.Ui.DmTreeCMOperation.SelectGroup]&&t.isSlOn&&t.isMs&&(l={},t.sGrp&&(l[n.getProperty(t.sGrp,"id")]={Checked:!0}),f=t.groups.length?new n.Ui.Menu({Items:n.Mb.Ui.getMenuItemsByItMd(t.groups,{GroupName:"SelGroup"},l)}):null),!t.isEmpty&&t.isSlOn&&t.isMs&&(v=new n.Delegate(this._cDg,this),y=t.levels.length>1,t.fNode&&t.srcNode&&(p=y?t.levels[t.srcNode["@l"]].n:"",i[n.Mb.Ui.DmTreeCMOperation.SelectLevelByName]&&o.push(new n.Ui.MenuItem({Id:t.instId+"SelectLevelName",Content:n.escapeHTML(n.String.format(n.resourceManager.getString("DimMenuSelectLvlName","Content"),p)),Click:new n.Delegate(this._aUY,this)})),i[n.Mb.Ui.DmTreeCMOperation.DeselectLevelByName]&&o.push(new n.Ui.MenuItem({Id:t.instId+"DeSelectLevelName",Content:n.escapeHTML(n.String.format(n.resourceManager.getString("DimMenuDeselectLvlName","Content"),p)),Click:new n.Delegate(this._aUZ,this)}))),y&&(i[n.Mb.Ui.DmTreeCMOperation.SelectLevel]&&o.push(new n.Ui.MenuItem({Id:t.instId+"SelectLevel",Enabled:!t.isEmpty,ResourceKey:"DimMenuSelectLvl",Menu:new n.Ui.Menu({Tag:!0,ItemSelected:v,Items:n.Mb.Ui.getMenuItemsByItMd(t.levels)})})),i[n.Mb.Ui.DmTreeCMOperation.DeselectLevel]&&o.push(new n.Ui.MenuItem({Id:t.instId+"DeselectLevel",Enabled:!t.isEmpty,ResourceKey:"DimMenuDeselectLvl",Menu:new n.Ui.Menu({Tag:!1,ItemSelected:v,Items:n.Mb.Ui.getMenuItemsByItMd(t.levels)})})))),o.length&&(f||u||i[n.Mb.Ui.DmTreeCMOperation.CreateSchemaBySelection]&&t.isSchCrOn||t.isElGrpCrOn&&i[n.Mb.Ui.DmTreeCMOperation.CreateElGroupBySelection])&&o.push(new n.Ui.ShortSeparator({Id:t.instId+"SelectLevelSep"})),i[n.Mb.Ui.DmTreeCMOperation.SetSchema]&&(u||i[n.Mb.Ui.DmTreeCMOperation.CreateSchemaBySelection]&&t.isSchCrOn&&(t.isMs||!t.isMs&&t.schemas.length>0))&&(u&&u.isLive()||(u=new n.Ui.Menu({})),g=u.getItems(),w=t.aSch&&t.aSch.id,u.ItemSelected.addOne(this._cDh,this),g.length&&(w||i[n.Mb.Ui.DmTreeCMOperation.CreateSchemaBySelection]&&t.isSchCrOn)&&u.insertItem(new n.Ui.Separator({Id:t.instId+"SchemaResetSep"}),0),w&&u.insertItem(new n.Ui.MenuItem({Id:t.instId+"SchemaReset",ResourceKey:"DimMenuSchemaReset"}),0),i[n.Mb.Ui.DmTreeCMOperation.CreateSchemaBySelection]&&t.isSchCrOn&&u.insertItem(new n.Ui.MenuItem({Id:t.instId+"CreateSchemaBySelection",ResourceKey:"DimMenuCreateSchemaBySelection"}),0),u.insertItem(new n.Ui.Separator({Id:t.instId+"SchemaApplyOnceSep"}),0),u.insertItem(new n.Ui.MenuItem({Id:t.instId+"ApplySelectionSchemaOnlyOnce",ResourceKey:"DimMenuApplySelectionSchemaOnlyOnce",Checked:t.aSch&&t.aSch.applyOnlyOnce||this.getApplySelectionSchemaOnlyOnce()||!1}),0),u.insertItem(new n.Ui.MenuItem({Id:t.instId+"ApplySelectionSchemaOnRebuild",ResourceKey:"DimMenuApplySelectionSchemaOnRebuild",Checked:t.aSch&&t.aSch.applyOnRebuild||this.getApplySelectionSchemaOnRebuild()||!1}),1),o.push(new n.Ui.MenuItem({Id:t.instId+"SetSchemas",ResourceKey:"DimMenuSetSchemas",Menu:u}))),i[n.Mb.Ui.DmTreeCMOperation.SelectGroup]&&t.isMs&&(f||t.isElGrpCrOn&&i[n.Mb.Ui.DmTreeCMOperation.CreateElGroupBySelection])&&(f&&f.isLive()||(f=new n.Ui.Menu({})),f.ItemSelected.addOne(this._cDi,this),i[n.Mb.Ui.DmTreeCMOperation.CreateElGroupBySelection]&&t.isElGrpCrOn&&(b=f.getItems(),b&&b.length&&f.insertItem(new n.Ui.Separator({Id:t.instId+"CreateElGroupBySelectionSep"}),0),f.insertItem(new n.Ui.MenuItem({Id:t.instId+"CreateElGroupBySelection",ResourceKey:"DimMenuCreateElGroupBySelection"}),0)),n.getProperty(t,"sGrp.id")&&(f.insertItem(new n.Ui.Separator({Id:t.instId+"SelGroupResetSep"}),0),f.insertItem(new n.Ui.MenuItem({Id:t.instId+"SelGroupReset",GroupName:"SelGroup",ResourceKey:"DimMenuGroupReset"}),0)),o.push(new n.Ui.MenuItem({Id:t.instId+"SelectGroup",ResourceKey:"DimMenuSelectGroup",Menu:f}))),i[n.Mb.Ui.DmTreeCMOperation.SelectWithData]&&t.isHlOn&&t.isSlOn&&t.isMs&&(o.push(new n.Ui.ShortSeparator({Id:t.instId+"HighlightSep"})),o.push(new n.Ui.MenuItem({Id:t.instId+"SelectHighlighted",ResourceKey:"DimMenuSelectHighlighted"}))),o.length&&(nt=new n.Ui.Menu({Items:o}),r.addItem(new n.Ui.MenuItem({Id:t.instId+"DimMenuExtensionSelect",ResourceKey:"DimMenuExtensionSelect",Menu:nt})));var st={CloseOnChecked:!1,GroupName:this._MultipleAttributesEnabled?null:"SetNameAttr",Enabled:!t.useCN,Click:new n.Delegate(this._bfC,this)},tt={},it={},rt={},ut={};if(t.attrs)for(a=0;a<t.attrs.length;a++)tt[t.attrs[a].id]={IsVisible:t.attrs[a].vis,Checked:t.nameAttrs.indexOf(t.attrs[a].id)!==-1};t.curOrdAttrId&&(it[t.curOrdAttrId]={Checked:!0}),t.aGrp&&(rt[n.getProperty(t.aGrp,"id")]={Checked:!0}),t.aHier&&(ut[n.getProperty(t.aHier,"id")]={Checked:!0});var h=new n.Ui.Menu({Items:n.Mb.Ui.getMenuItemsByItMd(t.attrs,st,tt)}),s=new n.Ui.Menu({Items:n.Mb.Ui.getMenuItemsByItMd(t.attrs,{GroupName:"OrderByGrp"},it)}),e=t.groups.length?new n.Ui.Menu({Items:n.Mb.Ui.getMenuItemsByItMd(t.groups,{GroupName:"SetGroup"},rt)}):null,c=t.hiers.length?new n.Ui.Menu({Items:n.Mb.Ui.getMenuItemsByItMd(t.hiers,{GroupName:"SetHier"},ut)}):null;if(r.addItem(new n.Ui.MenuHeader({Id:t.instId+"DimMenuViewHeader",ResourceKey:"DimMenuViewHeader"})),i[n.Mb.Ui.DmTreeCMOperation.SetNameAttribute]&&h&&(ft=t.attrs.length,(i[n.Mb.Ui.DmTreeCMOperation.UseDefaultNaming]||i[n.Mb.Ui.DmTreeCMOperation.UseAttributesNaming]||i[n.Mb.Ui.DmTreeCMOperation.UseCustomNaming])&&h.insertItem(new n.Ui.Separator({Id:t.instId+"NameAttrDefaultSep"}),0),i[n.Mb.Ui.DmTreeCMOperation.UseDefaultNaming]&&h.insertItem(new n.Ui.MenuItem({Id:t.instId+"NameAttrDefault",ResourceKey:"DimMenuNameAttrDefault",Checked:t.nameAttrs.length===1&&t.nameAttrs[0]===this._Source.getPredefinedAttributeId(),CloseOnChecked:!1,Click:new n.Delegate(this._cDj,this)}),0),i[n.Mb.Ui.DmTreeCMOperation.UseCustomNaming]&&h.insertItem(new n.Ui.MenuItem({Id:t.instId+"DimMenuNameUserNaming",ResourceKey:"DimMenuNameUserNaming",GroupName:"DimMenuName",CloseOnChecked:!0,Click:new n.Delegate(this._aFD,this),Checked:t.useCN}),0),i[n.Mb.Ui.DmTreeCMOperation.UseAttributesNaming]&&h.insertItem(new n.Ui.MenuItem({Id:t.instId+"DimMenuNameAttrDimension",ResourceKey:"DimMenuNameAttrDimension",GroupName:"DimMenuName",CloseOnChecked:!0,Click:new n.Delegate(this._aFD,this),Checked:!t.useCN}),0),r.addItem(new n.Ui.MenuItem({Id:t.instId+"SetNameAttribute",ResourceKey:"DimMenuSetNameAttribute",Checked:ft>0,Menu:h}))),i[n.Mb.Ui.DmTreeCMOperation.SetElGroup]&&!t.selId&&t.isGrpChngOn&&(e||t.isElGrpCrOn&&i[n.Mb.Ui.DmTreeCMOperation.SetElGroupBySelection])&&(e&&e.isLive()||(e=new n.Ui.Menu({})),e.ItemSelected.addOne(this._avl,this),i[n.Mb.Ui.DmTreeCMOperation.SetElGroupBySelection]&&t.isElGrpCrOn&&(k=e.getItems(),k&&k.length&&e.insertItem(new n.Ui.Separator({Id:t.instId+"CreateElGroupBySelectionSep2"}),0),e.insertItem(new n.Ui.MenuItem({Id:t.instId+"CreateElGroupBySelection2",ResourceKey:"DimMenuCreateElGroupBySelection"}),0)),n.getProperty(t,"aGrp.id")&&(e.insertItem(new n.Ui.Separator({Id:t.instId+"GroupResetSep"}),0),e.insertItem(new n.Ui.MenuItem({Id:t.instId+"GroupReset",GroupName:"DimMenuShowGroup",ResourceKey:"DimMenuGroupReset"}),0)),r.addItem(new n.Ui.MenuItem({Id:t.instId+"ShowGroup",ResourceKey:"DimMenuShowGroup",Enabled:!0,Menu:e,Checked:!!n.getProperty(t,"aGrp.id"),ColumnIndex:2,RowIndex:0}))),i[n.Mb.Ui.DmTreeCMOperation.SetHierarchy]&&c&&(c.ItemSelected.addOne(this._avm,this),t.aHier&&(c.insertItem(new n.Ui.Separator({Id:t.instId+"HieResetSep"}),0),c.insertItem(new n.Ui.MenuItem({Id:t.instId+"HieReset",ResourceKey:"DimMenuHieReset"}),0)),r.addItem(new n.Ui.MenuItem({Id:t.instId+"SetHierarchy",ResourceKey:"DimMenuSetHierarchy",Enabled:!0,Menu:c,Checked:!!t.aHier,ColumnIndex:3,RowIndex:0}))),(i[n.Mb.Ui.DmTreeCMOperation.ShowOnlyWithData]||i[n.Mb.Ui.DmTreeCMOperation.SetNameAttribute]||i[n.Mb.Ui.DmTreeCMOperation.SetElGroup]||i[n.Mb.Ui.DmTreeCMOperation.SetHierarchy])&&(h||e||c)&&t.isHlOn&&r.addItem(new n.Ui.ShortSeparator({Id:t.instId+"NameAttributeSep"})),i[n.Mb.Ui.DmTreeCMOperation.ShowOnlyWithData]&&t.isHlOn&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"ShowOnlyData",ResourceKey:"DimMenuHideShaded",Checked:this._ShowOnlyDataNodes,CheckedChanged:new n.Delegate(this._cDk,this)})),i[n.Mb.Ui.DmTreeCMOperation.SetOrder]&&s){r.addItem(new n.Ui.ShortSeparator({Id:t.instId+"OrderBySep"})),s.ItemSelected.addOne(this._bfD,this);var et=new n.Ui.MenuItem({Id:t.instId+"OrderAsc",ResourceKey:"DimMenuSortAsc",GroupName:"OrdType",ColumnIndex:5,RowIndex:0}),ot=new n.Ui.MenuItem({Id:t.instId+"OrderDesc",ResourceKey:"DimMenuSortDesc",GroupName:"OrdType",ColumnIndex:4,RowIndex:0}),ht=new n.Ui.MenuItem({Id:t.instId+"OrderSellAttr",ResourceKey:"DimMenuSortByAttributes",Menu:s});s=new n.Ui.Menu({ImageList:d,ItemSelected:new n.Delegate(this._aFE,this)}),s.addItem(et),s.addItem(ot),s.addItem(new n.Ui.Separator({Id:t.instId+"OrderTypeSep"})),s.addItem(ht),t.orderObj&&(s.insertItem(new n.Ui.Separator({Id:t.instId+"ResetOrderSep"}),0),s.insertItem(new n.Ui.MenuItem({ResourceKey:"DimMenuHieReset",Id:t.instId+"ResetOrder"}),0),t.curOrdType===n.Mb.OrderBy.Asc?et.setChecked(!0):ot.setChecked(!0)),r.addItem(new n.Ui.MenuItem({Id:t.instId+"OrderBy",ResourceKey:"DimMenuSort",Menu:s,Checked:!!t.orderObj,ColumnIndex:4,RowIndex:0}))}return(i[n.Mb.Ui.DmTreeCMOperation.SetNameAttribute]||i[n.Mb.Ui.DmTreeCMOperation.SetElGroup]||i[n.Mb.Ui.DmTreeCMOperation.SetHierarchy]||i[n.Mb.Ui.DmTreeCMOperation.SetOrder])&&(h||e||c||s)&&r.addItem(new n.Ui.ShortSeparator({Id:t.instId+"ExpandAllSep"})),i[n.Mb.Ui.DmTreeCMOperation.ExpandAll]&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"ExpandAll",ResourceKey:"DimMenuExpandAll",Enabled:!t.isPlain&&!t.isEmpty,Click:new n.Delegate(this._bfE,this),ColumnIndex:6,RowIndex:0})),i[n.Mb.Ui.DmTreeCMOperation.CollapseAll]&&r.addItem(new n.Ui.MenuItem({Id:t.instId+"CollapseAll",ResourceKey:"DimMenuCollapseAll",Enabled:!t.isPlain&&!t.isEmpty,Click:new n.Delegate(this._bfF,this),ColumnIndex:7,RowIndex:0})),t},u.prototype._aFD=function(t){var u=this.getId(),r;t.getId()===u+"DimMenuNameUserNaming"&&t.getChecked()?(r=this._oN(null),this._aFF=new n.Mb.Ui.CustomDimNamingDialog({Source:this._Source,ExampleData:r&&r.children&&r.children.length>0?r.children[0]:null,Expression:this._CustomNaming,CheckedAttributes:this.getNameAttributesId(),OkButtonClicked:new n.Delegate(this._bfG,this),CancelButtonClicked:new n.Delegate(this._cDl,this)}),this._aFF.show()):this.setUseCustomNaming(!1)},u.prototype._bfG=function(n){this.setCustomNaming(n.getExpression()),this.setUseCustomNaming(!0),this._aFF.dispose()},u.prototype._cDl=function(){this._aFF.dispose()},u.prototype._bfD=function(i,r){var u=this.getOrderBy(),o=u?t.Object.keys(u[0])[0]:null,f=u?u[0][o]:null,e={},s=n.getProperty(r.MenuItem.getData(),"id");e[s]=f?f:n.Mb.OrderBy.Asc,this.setOrderBy([e])},u.prototype._aFE=function(i,r){var e=this.getOrderBy(),f=e?t.Object.keys(e[0])[0]:null,u={},o=this._aFC(),s=r.MenuItem.getId().replace(o.instId,"");switch(s){case"ResetOrder":u=null;break;case"OrderAsc":u[f?f:this.getNameAttributeId()]=n.Mb.OrderBy.Asc;break;case"OrderDesc":u[f?f:this.getNameAttributeId()]=n.Mb.OrderBy.Desc;break;default:return}this.setOrderBy(u?[u]:null)},u.prototype._cDd=function(){this.selectAll()},u.prototype._cDe=function(){this.deselectAll()},u.prototype._bN7=function(t,i){var r=this._Control.getFocusedNode();r&&this.setSelection([{Key:[r],Command:n.Mb.SelCommands.Select,DmElRelative:!n.getProperty(i,"Args.IsRecursive")?n.Mb.DmElRelative.Children:n.Mb.DmElRelative.ChildrenRecursive}])},u.prototype._cDf=function(){var r=this._Control.getFocusedNode();r&&this.setSelection([{Key:[r],Command:n.Mb.SelCommands.Deselect,DmElRelative:n.Mb.DmElRelative.ChildrenRecursive}])},u.prototype._bfE=function(){this.expandAll()},u.prototype._bfF=function(){this.collapseAll()},u.prototype._aUY=function(){var r=this._Control.getFocusedNode();r&&this.setSelection([{Command:n.Mb.SelCommands.Select,DmElRelative:n.Mb.DmElRelative.Level,Key:[r]}])},u.prototype._aUZ=function(){var r=this._Control.getFocusedNode();r&&this.setSelection([{Command:n.Mb.SelCommands.Deselect,DmElRelative:n.Mb.DmElRelative.Level,Key:[r]}])},u.prototype._cDg=function(t,i){var r=i.MenuItem.getData(),u=t.getTag()?n.Mb.SelCommands.Select:n.Mb.SelCommands.Deselect;this.setSelection([{Command:u,LevelId:r.k}])},u.prototype._cDh=function(n,t){var h=t.MenuItem.getId(),i=this.getId(),r=this._Source.getActiveSchema(),u,s;switch(h){case i+"SchemaReset":u={applySelectionSchemaOnlyOnce:r?r.applyOnlyOnce:!1},this.setActiveSchemaId("",u);break;case i+"ApplySelectionSchemaOnlyOnce":case i+"ApplySelectionSchemaOnRebuild":var f=t.Item.getParent(),e=f.getMenuItemById(i+"ApplySelectionSchemaOnlyOnce").getChecked(),o=f.getMenuItemById(i+"ApplySelectionSchemaOnRebuild").getChecked();this.setApplySelectionSchemaOnlyOnce(e),this.setApplySelectionSchemaOnRebuild(o),u={applySelectionSchemaOnlyOnce:e,applySelectionSchemaOnRebuild:o},this.setActiveSchemaId(r?r.id:"",u);break;case i+"CreateSchemaBySelection":this.createSelectionSchema();break;default:s=t.MenuItem.getData(),u={applySelectionSchemaOnlyOnce:r?r.applyOnlyOnce:!1},this.setActiveSchemaId(s.id,u)}},u.prototype._cDi=function(t,i){var r=this.getId(),f=i.MenuItem.getId(),u;switch(f){case r+"SelGroupReset":this.deselectAll();break;case r+"CreateElGroupBySelection":this.createElementsGroup(null,!0);break;default:u=i.MenuItem.getData(),this.setSelection([{GroupId:u.id,Command:n.Mb.SelCommands.Set}])}},u.prototype._bfC=function(t){var f=n.getProperty(t.getData(),"id"),r=this.getNameAttributesId(),u;if(r.length===1&&!t.getChecked()){this._ab(t,!t.getChecked());return}n.isDefined(f)&&(this.setNameAttributeId(f,null,t.getChecked()),u=t.getParent().getMenuItemById(this.getId()+"NameAttrDefault",!0),u&&(r=this.getNameAttributesId(),this._ab(u,r.length===1&&r[0]===this.getPredefinedAttributeId())))},u.prototype._cDj=function(t){var u,e,r,f;if(!t.getChecked()){this._ab(t,!0);return}for(this._NameAttributesId={},this.setNameAttributeId(null,!0,null),u=t.getParent().getItems(),e=this.getPredefinedAttributeId(),r=0;r<u.length;r++)f=n.getProperty(u[r].getData(),"id"),f===e?this._ab(u[r],!0):n.isDefined(f)&&this._ab(u[r],!1)},u.prototype._avl=function(t,i){var r=this.getId(),u=i.MenuItem.getId();switch(u){case r+"GroupReset":this.setActiveGroupId("");break;case r+"CreateElGroupBySelection2":this.createElementsGroup();break;default:this.setActiveGroupId(n.getProperty(i.MenuItem.getData(),"id"))}},u.prototype._avm=function(t,i){var r=this.getId();this.setAltHierarchy(i.MenuItem.getId()===r+"HieReset"?"":n.getProperty(i.MenuItem.getData(),"id"))},u.prototype._cDk=function(n){this.setShowOnlyDataNodes(n.getChecked())},u.prototype._cDm=function(t){var r=[],u,f=-2,i;for(i in this._NameAttributesId)n.Array.isArray(this._NameAttributesId[i])&&(this._NameAttributesId[i].indexOf(t)!==-1&&r.push(i),u||(u=this._NameAttributesId[i].indexOf(f)!==-1?i:null));return r.length>0?r:[u]},u.prototype._bN5=function(){var i=this._Control.getVisibleNodes(),u=i.length;if(u){for(var r,f=[],e=[],o=this._Control.getNodePosition(i[0])-1,s=this._Control.getNodePosition(i[u-1])+1,t=o;t>=0&&t>=o-u;t--)r=this._Control.getNodeByPosition(t),n.isDefined(r)&&f.splice(0,0,r);for(t=s;t<s+u;t++)r=this._Control.getNodeByPosition(t),n.isDefined(r)&&e.push(r);i=f.concat(i).concat(e)}return i},u.prototype._cC3=function(n){var i=this.getAllowHasDataHighlight()&&this._Source.getAllowHasData(),r=this.getAllowHasCalcHighlight()&&this._Source.getAllowCalculation(),o=this.getAllowBusyNodeHighlight();if(i||r||o){var u=i?!n["@hasData"]?this._NoDataNodeClass||this._cCZ:this._DataNodeClass||"":"",f=r?!n["@hasCalc"]?this._NoCalcNodeClass||"":this._CalcNodeClass||this._cC0:"",e=this._Source.getIsElUpdated(n.k,this.getCurrentFilter(),this._SelectionOdId)?"":this._BusyNodeClass||this._cC1,t=[];return e&&t.push(e),u&&t.push(u),f&&t.push(f),t.join(" ")}},u.prototype._bfx=function(t){if(!this._Source||!this._Source.isLive()||!this._Source.getAllowSelection()||this._anB()||this._Source.getSelectedCount(this.getSelectionOdId())<=1||this._SelectionMode!==n.Ui.TreeListSelectionMode.SingleSelect)return t.s;var i=n.getProperty(this._Source.getSelectionInfo(this.getSelectionOdId()),"firstSelected.k");return n.isDefined(i)?t.k===i?!0:!1:t.s},u.prototype._cC2=function(t){var r,u,i;if(!this._Source||!this._Source.isLive()||!this._Source.getAllowSelection()||!n.isDefined(t["@hs"]))return t["@hs"];if(this._anB()||this._Source.getSelectedCount(this.getSelectionOdId())<=1||this._SelectionMode!==n.Ui.TreeListSelectionMode.SingleSelect)return n.isDefined(t.k)&&t.k!=null?t["@hs"]:this._Source.getSelectedCount(this.getSelectionOdId());for(r=this._Control.getNodeChildren(t.p),u=r.indexOf(t.k),i=0;i<u;i++)if(this._cCP()[r[i]]["@hs"])return!1;return!0},u.prototype._avf=function(t){var r,h,c;if(t.chngData)return t.chngData;if(!this._Source||!this._Source.isLive()||!this._Source.isMdLoaded())return[];var u=null,v=this._MultiAttributesMode===n.Mb.Ui.MultiAttributesMode.Stack,l=this._UseCustomNaming;if(l)u=this._CustomNaming;else if(v)u=this._cDn();else return this._cDo(t);for(var e=/%([^%]+)%/g,f=n.getProperty(t,"ea.it")||n.getProperty(t,"a.it"),o,i,a=this.getSource(),y=a.getLevels()[0].k,s=[];i=e.exec(u);){if(i.length>1&&a.getAttributeIndex(i[1])!=null){if(r=a.getAttributeIndex(i[1]),h=this._NameAttributesId?this._NameAttributesId[i[1]]:null,r===null)continue;c=n.String.escapeHTML(n.isDefined(f[r]["@dv"])?f[r]["@dv"]:n.isDefined(f[r]["@v"])?f[r]["@v"]:f[r]),h&&h.indexOf(n.getProperty(t,"@l")+y)===-1&&!l?o||(o=h.indexOf(-2)>-1?c:null):(s.push(c),u=n.String.replaceAll(u,i[0],c)),e.lastIndex=e.lastIndex-(i[0].length-s.length-2)}e.lastIndex-=1}return l?[u]:v&&s.length>0?[s.join(this.getMultipleAttributesSeparator())]:o?[o]:[t.n.trim()]},u.prototype._cDn=function(){var n=this.getNameAttributesId();return n=n.map(function(n){return"%"+n+"%"}),n.join(this._MultipleAttributesSeparator)},u.prototype._cDo=function(t){for(var u=this._Source.getAttributes(),f=[],r,i=0;i<u.length;i++)if(u[i].vis){if(r=n.getProperty(t,"ea.it")||n.getProperty(t,"a.it"),!n.Array.isArray(r))return[];f.push(n.String.escapeHTML(n.isDefined(r[i]["@dv"])?r[i]["@dv"]:n.isDefined(r[i]["@v"])?r[i]["@v"]:r[i]))}return f},u.prototype._aFx=function(){return!this._Source||!this._Source.isLive()?null:this._Source.getElems(this.getCurrentFilter(),this._SelectionOdId)},u.prototype._oN=function(n){return!this._Source||!this._Source.isLive()?null:this._Source.getElem(n,this.getCurrentFilter(),this._SelectionOdId)},u.prototype._aFy=function(n,t){return!this._Source||!this._Source.isLive()?null:this._Source.getChildEls(n,t,this.getCurrentFilter(),this._SelectionOdId)},u.prototype._bfn=function(n){var t=r.prototype._bfn.call(this,n);return t.selId=this._SelectionOdId,t},u.prototype._aUW=function(n){var o=this.getSource(),i,e;if(o){var r=t.Object.keys(this._NameAttributesId),f=this._Source.getPredefinedAttributeId(),c=-2;if(n){var u=o.getAttributes(),s={},h=!1;if(r.length!==0)for(i=0;i<u.length;i++)r.indexOf(u[i].k.toString())!==-1&&(s[u[i].id]=this._NameAttributesId[u[i].k],h=!0);h&&(this._NameAttributesId=s)}else r.length>1&&!this._MultipleAttributesEnabled&&(e=this.getNameAttributesId(c),this._NameAttributesId={},this._NameAttributesId[e?e[0]:f]=null);r.length===0&&f&&(this._NameAttributesId[f]=null)}},u.prototype._bfr=function(){var n=r.prototype._bfr.call(this),t=this._Source&&this._Source.isLive()?this._Source:null;return n.OrderBy=this.getOrderBy(),n.ActiveGroup=t?t.getActiveGroup(this._SelectionOdId):null,n.ActiveHierarchy=t?t.getActiveHierarchy():null,n.ActiveSchema=t?t.getActiveSchema(this._SelectionOdId):null,n.MultipleAttributesEnabled=this.getMultipleAttributesEnabled(),n.MultiAttributesMode=this.getMultiAttributesMode(),n.MultipleAttributesSeparator=this.getMultipleAttributesSeparator(),n.NameAttributesId=this.getNameAttributesId(),n.UseCustomNaming=this.getUseCustomNaming(),n.CustomNaming=this.getCustomNaming(),n.ShowOnlyDataNodes=this.getShowOnlyDataNodes(),n},u.prototype._ahp=function(t){var u=this._Source.getSelectionInfo(this._SelectionOdId),i=n.getProperty(u,"firstSelected.k");!this._LoadToFirstSelected||!i||this._Control.isNodeExist(i)||this.getTextFilter()||this._bNU()?!this._bNU()&&n.isDefined(i)&&i!==null?r.prototype._ahp.call(this,{nodeKey:i,focusMode:1}):r.prototype._ahp.call(this,t):this.loadToKeys(i,1)},u.prototype._cDp=function(){for(var e=t.Object.keys(this._NameAttributesId),r=this._Source.getAttributes(),u={},i,n=0,f=r.length;n<f;n++)i=r[n].id.toUpperCase(),e.indexOf(i)>-1&&(u[i]=this._NameAttributesId[i]);this.setNameAttributesId(u)},u.prototype._bft=function(){this._s9&&n.clearTimeout(this._s9),delete this._s9,r.prototype._bft.call(this)},u.prototype._cDq=function(){this._ahs&&n.clearTimeout(this._ahs),this._zb&&n.clearTimeout(this._zb),this._vM&&n.clearTimeout(this._vM),this._vL&&n.clearTimeout(this._vL),delete this._ahs,delete this._zb,delete this._vM,delete this._vL},u.prototype._bfu=function(){this._cDq(),r.prototype._bfu.call(this)},u.prototype._ab=function(n,t){n.CheckedChanged.suspend(),n.setChecked(t),n.CheckedChanged.resume()},u.prototype._bN8=function(t){var i={Command:t};return this.getTextFilter()?(i.IncludeParents=!0,i.IncludeChildren=!0,i.TextFilter=n.getProperty(this.getCurrentFilter().getFilterJSON(),"text"),t==n.Mb.SelCommands.Deselect&&(i.OnlySelected=!0)):(i.Key=[],i.DmElRelative=n.Mb.DmElRelative.All),i},u.prototype._bfH=function(t){var u=this._Source,f=u.getPredefinedAttributes().map(function(n){return n.id}),i=u.getLoadAttributeValuesPartial(),r;if(typeof i=="boolean"&&(i=[]),n.isString(t))i.indexOf(t)<0&&f.indexOf(t)<0&&i.push(t);else for(r=0;r<t.length;r++)i.indexOf(t[r])<0&&f.indexOf(t[r])<0&&i.push(t[r]);u.setLoadAttributeValuesPartial(i)},u.prototype.getService=function(){return r.prototype.getService.call(this)},u.prototype.getSource=function(){return this._Source},u.prototype.getAllowEmptySelection=function(){return this._AllowEmptySelection},u.prototype.getRightButtonSelect=function(){return this._RightButtonSelect},u.prototype.getLoadToFirstSelected=function(){return this._LoadToFirstSelected},u.prototype.getShowOnlyDataNodes=function(){return this._ShowOnlyDataNodes},u.prototype.getAllowHasDataHighlight=function(){return this._AllowHasDataHighlight},u.prototype.getAllowHasCalcHighlight=function(){return this._AllowHasCalcHighlight},u.prototype.getUpdateOnScrollTimeout=function(){return this._UpdateOnScrollTimeout},u.prototype.getSelectionOdId=function(){return this._SelectionOdId},u.prototype.getSelectionMode=function(){return this._SelectionMode},u.prototype.getMultiAttributesMode=function(){return this._MultiAttributesMode},u.prototype.getMultipleAttributesSeparator=function(){return this._MultipleAttributesSeparator},u.prototype.getMultipleAttributesSpaced=function(){return this._MultipleAttributesSpaced},u.prototype.getMultipleAttributesEnabled=function(){return this._MultipleAttributesEnabled},u.prototype.getCustomNaming=function(){return this._CustomNaming},u.prototype.getUseCustomNaming=function(){return this._UseCustomNaming},u.prototype.getContextMenuConfig=function(){return this._ContextMenuConfig},u.prototype.getAllowBusyNodeHighlight=function(){return this._AllowBusyNodeHighlight},u.prototype.getBusyNodeClass=function(){return this._BusyNodeClass},u.prototype.getApplySelectionSchemaOnRebuild=function(){return this._ApplySelectionSchemaOnRebuild},u.prototype.getApplySelectionSchemaOnlyOnce=function(){return this._ApplySelectionSchemaOnlyOnce},u.prototype.setAllowBusyNodeHighlight=function(n){this._AllowBusyNodeHighlight=n},u.prototype.setUpdateOnScrollTimeout=function(n){this._UpdateOnScrollTimeout=n},u.prototype.setMultipleAttributesSpaced=function(n){this._MultipleAttributesSpaced=n},u.prototype.setContextMenuConfig=function(n){this._ContextMenuConfig=n},u.prototype.setBusyNodeClass=function(n){this._BusyNodeClass=n},u.prototype.setApplySelectionSchemaOnRebuild=function(n){this._ApplySelectionSchemaOnRebuild=n},u.prototype.setApplySelectionSchemaOnlyOnce=function(n){this._ApplySelectionSchemaOnlyOnce=n},u.prototype.refreshSelection=function(n){this.refreshState(n)},u.prototype.refreshState=function(i){var f,e,w;if(this._vM&&(n.clearTimeout(this._vM),delete this._vM),this._Source&&this._Source.isLive()&&!this._Source.getIsStateLoading()&&!this._ahs&&!this._anB()){for(var u=this._bN5(),s=[],h=this._Control.getDataObject(),o=[],l=this._Source.getAllowSelection(),a=this._Source.getAllowHasData(),v=this._Source.getAllowCalculation(),r=0;r<u.length;r++){if(f=this._oN(u[r]),!f){this._Source.getIsDataLoading()||this.refreshAll(!0,!0);return}this._Source.getIsElUpdated(f.k,this.getCurrentFilter(),this._SelectionOdId)?(l&&(h[u[r]].s=f.s,h[u[r]]["@hs"]=f["@hs"]?Infinity:0),a&&(h[u[r]]["@hasData"]=f["@hasData"]),v&&(h[u[r]]["@hasCalc"]=f["@hasCalc"]),(l||a||v)&&o.push(u[r])):s.push(u[r])}for(r=0;r<o.length;r++)this._Control.updateNodeStyle(o[r]);var y=l&&!this._Source.getIsSelInfoUpdated(this._SelectionOdId),p=!!s.length,c=!this._Source.isNameAttributesLoaded()&&this._Source.getElems();if(c&&(s=t.Object.keys(this._Source.getElems())),this._kZ()&&(y||p||c)){this._Source.getIsDataLoading()?this._vM=n.setTimeout(this.refreshState,0,null,this):(e=this.getService(),e.setMarker(n.Mb.PPServiceMarker.Background),e.beginBatch(),y&&(w={getSelection:!0,getCompound:!0,getAttrs:!0,attributes:this._Source.getLoadedAttributes().join(";")},e.getMetadata(this._Source,{selId:this._SelectionOdId,pattern:w})),(p||c)&&e.updateStateData(this._Source,{selId:this._SelectionOdId,keys:s,filter:this.getCurrentFilter()}),e.endBatch(!0,new n.Delegate(this._cDc,this,{updateData:c})),e.setMarker(null));return}i===!1||!o.length||this._s8({Updated:o,Type:n.Mb.Ui.ElsTreeRefreshType.State})}},u.prototype.getContextMenu=function(n){var t=this._aFC(),i=this._bN6();return(this._aUX||this._DefaultCM&&this._DefaultCM.isLive()&&this._DefaultCM.getData()===JSON.stringify(t)+JSON.stringify(i))&&!n||(t=this._bfB(),this._DefaultCM.setData(JSON.stringify(t)+JSON.stringify(i))),this._aUX?this._Control.getContextMenu():this._DefaultCM},u.prototype.setContextMenu=function(t,i){this._aUX=n.isDefined(i)?!!i:t!==this._DefaultCM,this._Control.setContextMenu(this._aUX?t:this._DefaultCM)},u.prototype.setActiveGroupId=function(t,i){this._kZ()&&(i!==!1&&this.RequestSelection.fire(this,{Dim:this._Source,IsLimitToGroup:!0,GroupId:t}),this.getService().setElementsGroup(this._Source,{groupId:t,limitToGroup:i!==!1},new n.Delegate(this._bfA,this),this._anD),i!==!1&&this.SelectionChanging.fire(this,{Dim:this._Source,IsLimitToGroup:!0,GroupId:t}))},u.prototype.setShowOnlyDataNodes=function(n){this._ShowOnlyDataNodes=!!n,this.getCurrentFilter().setSettings({OnlyWithData:this._ShowOnlyDataNodes})},u.prototype.setOrderBy=function(t){n.Array.isArray(t)?this.getCurrentFilter().setSettings({OrderBy:t}):this.getCurrentFilter().setSettings({OrderBy:[]})},u.prototype.getOrderBy=function(){var n=this.getCurrentFilter().getOrderBy();return n&&n.length?n:null},u.prototype.setAltHierarchy=function(t){this._kZ()&&(this.RequestSelection.fire(this,{Dim:this._Source,IsNewHier:!0}),this.getService().setHierarchy(this._Source,{hierId:t},new n.Delegate(this._bfA,this),this._anD),this.SelectionChanging.fire(this,{Dim:this._Source,IsNewHier:!0}))},u.prototype.selectAll=function(){var t=this._bN8(n.Mb.SelCommands.Select);this.setSelection([t])},u.prototype.deselectAll=function(){var t=this._bN8(n.Mb.SelCommands.Deselect);this.setSelection([t])},u.prototype.setSelection=function(t){(t=n.toArray(t),t&&t.length)&&this.RequestSelection.fire(this,{Dim:this._Source,SelectionArgs:t})},u.prototype.setSelectedElems=function(t,i){if(i=n.toArray(i),i&&i.length){var r=[{Key:i,Command:t?this.getSelectionMode()===n.Ui.TreeListSelectionMode.SingleSelect?n.Mb.SelCommands.Set:n.Mb.SelCommands.Select:n.Mb.SelCommands.Deselect,DmElRelative:n.Mb.DmElRelative.Current}];this.setSelection(r)}},u.prototype.selectGroupItems=function(t,i){this.setSelection([{Command:i||n.Mb.SelCommands.Set,GroupId:t,DmElRelative:n.Mb.DmElRelative.Unknown}])},u.prototype.getSelectedNodes=function(){return this._Control.getAllSelectedNodes()},u.prototype.setActiveSchemaId=function(t,i){if(this._kZ()){var r={Dim:this._Source,IsNewSchema:!0,SchemaId:t,ApplyOnlyOnce:i&&i.applySelectionSchemaOnlyOnce};this.RequestSelection.fire(this,r),this.getService().setSchema(this._Source,n.extend({schemaId:t},i),this._aFB,this._anD),this.SelectionChanging.fire(this,r)}},u.prototype.createElementsGroup=function(t,i){this._kZ()&&this._Source.getAllowElementsGroupCreation()&&this.getService().createElementsGroup(this._Source,{groupName:!n.isDefined(t)||t===null||t===""?undefined:t.toString(),selId:this.getSelectionOdId(),createOnly:i},new n.Delegate(this._bfA,this),this._anD)},u.prototype.createSelectionSchema=function(t,i){this._kZ()&&this._Source.getAllowSchemaCreation()&&this.getService().createSelectionSchema(this._Source,{schemaName:!n.isDefined(t)||t===null||t===""?undefined:t.toString(),selId:this.getSelectionOdId(),createOnly:i})},u.prototype.setSource=function(n){n!==this._Source&&(this._Source=n,this._NameAttributesId={},this._acM(),this._avh(),this._bN1(),this._y6(),this.refreshAll(!0,!1))},u.prototype.getPredefinedAttributeId=function(n){return!this._Source||!this._Source.isMdLoaded()?null:this._Source.getPredefinedAttributeId(n)},u.prototype.getNameAttributesId=function(n){return(this._aUW(),n!=null)?this._cDm(n):t.Object.keys(this._NameAttributesId)},u.prototype.setNameAttributesId=function(i,r){var u,f;if(r=r!==!1,i){if(n.Array.isArray(i)){for(f=this.getNameAttributesId(),u=0;u<i.length;u++)f.indexOf(i[u])<0&&this.setNameAttributeId(i[u],!1,!0);for(u=0;u<f.length;u++)i.indexOf(f[u])<0&&this.setNameAttributeId(f[u],!1,!1)}n.isObject(i)&&t.Object.keys(i).length>0&&(this._NameAttributesId=i,this._bfH(t.Object.keys(i)),this.refreshState(!0))}r&&this._s8({Value:this.getNameAttributesId(),Type:n.Mb.Ui.ElsTreeRefreshType.Content})},u.prototype.getNameAttributeId=function(){return this.getNameAttributesId()[0]},u.prototype.setNameAttributeId=function(i,r,u){var o,f,e;return!this._Source||!this._Source.isLive()?!1:(o=this._Source.getPredefinedAttributeId(),f=!1,r=r!==!1,i=n.isDefined(i)&&i!==null?i.toString():null,this._MultipleAttributesEnabled||(this._NameAttributesId={}),n.isString(i)&&(f=!0,u?(this._NameAttributesId[i]=this._NameAttributesId.hasOwnProperty(i)?this._NameAttributesId[i]:null,this._bfH(i)):delete this._NameAttributesId[i]),t.Object.keys(this._NameAttributesId).length==0?(f=!0,this._NameAttributesId[o]=null):this._cDp(),f&&(this._vK(),r!==!1&&this._s8({Value:i,Type:n.Mb.Ui.ElsTreeRefreshType.Content}),e=this.getTextFilter(),!e||this.setTextFilter(e.text),this.refreshState(!0)),f)},u.prototype.setMultiAttributesMode=function(t){this._MultiAttributesMode!==t&&(this._MultiAttributesMode=t,this._vK(),this._s8({Type:n.Mb.Ui.ElsTreeRefreshType.Content}))},u.prototype.setMultipleAttributesSeparator=function(t){this._MultipleAttributesSeparator=t,!this._UseCustomNaming&&this._MultipleAttributesEnabled&&this._MultiAttributesMode===n.Mb.Ui.MultiAttributesMode.Stack&&(this._x4(),this._s8({Type:n.Mb.Ui.ElsTreeRefreshType.Content}))},u.prototype.setCustomNaming=function(t){this._CustomNaming=t;for(var r=/%([^%]+)%/g,i;i=r.exec(t);)i.length>1&&this._bfH(i[1]);this._UseCustomNaming&&(this._x4(),this._s8({Type:n.Mb.Ui.ElsTreeRefreshType.Content}))},u.prototype.setUseCustomNaming=function(t){this._UseCustomNaming!==!!t&&(this.refreshState(!0),this._UseCustomNaming=!!t,this._vK(),this._s8({Type:n.Mb.Ui.ElsTreeRefreshType.Content}))},u.prototype.setMultipleAttributesEnabled=function(t){this._MultipleAttributesEnabled!==!!t&&(this._MultipleAttributesEnabled=!!t,this._aUW(),this._vK(),this._s8({Type:n.Mb.Ui.ElsTreeRefreshType.Content}))},u.prototype.beginSelectionUpdate=function(){this._zd||(this._zd={counter:0,commands:[]}),++this._zd.counter},u.prototype.endSelectionUpdate=function(n){if(this._zd&&(--this._zd.counter,this._zd.counter<=0||n)){var t=this._zd.commands;delete this._zd,this.setSelection(t)}},u.prototype.isSelectionUpdateMode=function(){return!!this._zd},u.prototype.setSelectionOdId=function(n){(n===null||this._Source&&this._Source.isSelectionExist(n))&&(this._SelectionOdId=n,this.refreshState())},u.prototype.setSelectionMode=function(t,i){if(this._SelectionMode!==t&&(this._bN3=!0,this._Control.setSelectionMode(t,!1),this._SelectionMode=this._Control.getSelectionMode(),delete this._bN3,i!==!1&&this._SelectionMode===n.Ui.TreeListSelectionMode.SingleSelect&&this._Source.getSelectedCount(this._SelectionOdId)>1)){var r=this._Source.getSelectionInfo(this._SelectionOdId);this.setSelection([{Key:[n.getProperty(r,"firstSelected.k")],Command:n.Mb.SelCommands.Set,DmElRelative:n.Mb.DmElRelative.Current}])}},u.prototype.setRightButtonSelect=function(n){this._RightButtonSelect=!!n,this._Control.setRightButtonSelect(n),this._RightButtonSelect=this._Control.getRightButtonSelect()},u.prototype.setAllowEmptySelection=function(n){this._AllowEmptySelection=!!n},u.prototype.setAllowHasDataHighlight=function(n){this._AllowHasDataHighlight!==!!n&&(this._AllowHasDataHighlight=!!n,this._x4())},u.prototype.setAllowHasCalcHighlight=function(n){this._AllowHasCalcHighlight!==!!n&&(this._AllowHasCalcHighlight=!!n,this._x4())},u.prototype.getCurrentFilter=function(){return r.prototype.getCurrentFilter.call(this)},u}(i.ElsTree);i.DimTree=r})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(i){function r(n){var t=i.call(this,n)||this;return t.SizeChanged.addOne(t._qd,t),t._render(),t._acM(),t._qS(),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["BeforeRequestSelection","RequestSelection","SelectionChanging","SelectionChanged","Refreshed"]),this._Source=null,this._SelectionOdId=null,this._Mode=t.DmCalendarPeriodMode.LevelsAndPeriod,this._LevelsListSettings=null,this._DateEditorSettings=null,this._ne=null,this._acP=null,this._jc={},this._cDr=333,this._aFB=new n.Delegate(this._bfv,this),this._anD=new n.Delegate(this._bfw,this)},r.prototype._acM=function(){this._dH&&this._dH.removeAllEvents(this),delete this._dH,this._Source&&this._Source.isLive()&&(this._dH=this._Source.getPPService()),this._cDs()},r.prototype._cDs=function(){this._dH&&this._dH.isLive()&&(this._dH.DimOpened.addOne(this._bfz,this),this._dH.SelectionChanged.addOne(this._cDt,this))},r.prototype._render=function(){this._initFromHTML("<div class='PPDmCalendarPeriod'><\/div>"),i.prototype._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},r.prototype._qS=function(){this._k0&&n.clearTimeout(this._k0),this._k0=n.setTimeout(this._aFG,0,null,this)},r.prototype._aFG=function(){if(this._bfI(),this._k0&&n.clearTimeout(this._k0),this._kZ()){if(!this._Source.isMdLoaded()){this._Source.getIsDataLoading()?this._k0=n.setTimeout(this._aFG,0,null,this):this._dH.getMetadata(this._Source,null,new n.Delegate(this._qS,this));return}if(this._aU0()){var t=this.getLevelsList();t.addToNode(this._DomNode),this._cDu()}this._aU1()&&(this._cDv(),this._cDw()),this.updateSize()}},r.prototype._cDu=function(){this._ne.ItemSelected.addOne(this._bN9,this),this._ne.ItemDeselected.addOne(this._bN9,this)},r.prototype._cDw=function(){this._oQ.DateTimeChanged.addOne(this._cDx,this),this._oR.DateTimeChanged.addOne(this._cDy,this);var n=this._oQ.getDropPanel(),t=this._oR.getDropPanel();n.Opened.addOne(this._bOa,this),t.Opened.addOne(this._bOa,this),n.Closed.addOne(this._aFH,this),t.Closed.addOne(this._aFH,this)},r.prototype._bfJ=function(){var r={CalendarSettings:this._jc},t=n.extend(r,this._DateEditorSettings,!1,!1),i=n.extend(r,this._DateEditorSettings,!1,!1),u,f;t.PPType||(t.PPType="PP.Ui.DateTimePicker"),i.PPType||(i.PPType="PP.Ui.DateTimePicker"),this._oQ=n.create(t),this._oR=n.create(i),this._aU2=new n.Ui.LineLabel({ResourceKey:"DmCalenarPeriodPanelLabel",Class:"PPDmPeriodPanelLabel"}),this._acP=new n.Ui.LayoutBox({Class:"PPDmPeriodPanel",Content:[this._oQ,this._oR],Orientation:n.Orientation.Vertical}),u=this._oQ.getDomNode().parentNode,f=this._oR.getDomNode().parentNode,this._cDz=new n.Ui.Label({ResourceKey:"DmCalendarPeriodStartLabel"}),this._cDA=new n.Ui.Label({ResourceKey:"DmCalendarPeriodEndLabel"}),this._cDz.addToNode(u,this._oQ.getDomNode()),this._cDA.addToNode(f,this._oR.getDomNode()),this._bOb()},r.prototype._cDB=function(){var t={Class:"PPDmCalendarLevelsListBox",PPType:"PP.Ui.ListBox",MultiSelect:!0,EmptySelection:!0,ContextMenuSelectable:!1},i=n.extend(t,this._LevelsListSettings,!0,!1);this._ne=n.create(i),this._bOc()},r.prototype._bfz=function(n,t){(t.Dim=this._Source)&&this.refresh()},r.prototype._cDt=function(n,t){t.Dim===this._Source&&this.refreshState()},r.prototype._bfv=function(n,t){this.refreshState(),this.SelectionChanged.fire(this,t)},r.prototype._bfw=function(){this.refresh()},r.prototype._cDx=function(n,t){this._anE||(this._anE=!0,this._oR.setMinDate(t.NewDate),this._aU3(),delete this._anE)},r.prototype._cDy=function(n,t){this._anE||(this._anE=!0,this._oQ.setMaxDate(t.NewDate),this._aU3(),delete this._anE)},r.prototype._bOa=function(){this._vO&&n.clearTimeout(this._vO)},r.prototype._aFH=function(){this._vO&&this._aU3()},r.prototype._bN9=function(){this._aU3()},r.prototype._qd=function(){this.updateSize()},r.prototype._aU3=function(){if(this._vO)n.clearTimeout(this._vO);else{var t={Cancel:!1};if(this.BeforeRequestSelection.fire(this,t),t.Cancel){this.refreshState();return}}this._vO=n.setTimeout(this._cDC,this._cDr,null,this)},r.prototype._cDC=function(){var r=this._aU1(),u=this._aU0(),f=r&&this._oQ?this._oQ.getValue():new window.Date(1e3,0,1,0,0,0,0),e=r&&this._oR?this._oR.getValue():new window.Date(9999,11,31,23,59,0,0),t=[],i,n;if(u&&this._ne)for(i=this._ne.getSelectedItems()||[],n=0;n<i.length;n++)t.push(i[n].getData());else t=this._Source.getCalendarLevels();this.setPeriod(f,e,t)},r.prototype._cDD=function(t){switch(t){case n.Mb.DimCalendarLvl.Year:return n.Ui.MonthCalendarMode.Years;case n.Mb.DimCalendarLvl.HalfYear:return n.Ui.MonthCalendarMode.HalfYears;case n.Mb.DimCalendarLvl.Quarter:return n.Ui.MonthCalendarMode.Quarters;case n.Mb.DimCalendarLvl.Month:return n.Ui.MonthCalendarMode.Months;case n.Mb.DimCalendarLvl.Week:return n.Ui.MonthCalendarMode.Weeks;case n.Mb.DimCalendarLvl.Day:return n.Ui.MonthCalendarMode.Days}},r.prototype._bOd=function(t){switch(t){case n.Ui.MonthCalendarMode.Years:return n.Mb.DimCalendarLvl.Year;case n.Ui.MonthCalendarMode.HalfYears:return n.Mb.DimCalendarLvl.HalfYear;case n.Ui.MonthCalendarMode.Quarters:return n.Mb.DimCalendarLvl.Quarter;case n.Ui.MonthCalendarMode.Months:return n.Mb.DimCalendarLvl.Month;case n.Ui.MonthCalendarMode.Weeks:return n.Mb.DimCalendarLvl.Week;case n.Ui.MonthCalendarMode.Days:return n.Mb.DimCalendarLvl.Day}},r.prototype._aU0=function(){return this._Source&&this._Source.isLive()&&this._Source.isCalendar()&&[t.DmCalendarPeriodMode.LevelsAndPeriod,t.DmCalendarPeriodMode.Levels].indexOf(this._Mode)!==-1},r.prototype._aU1=function(){return this._Source&&this._Source.isLive()&&this._Source.isCalendar()&&[t.DmCalendarPeriodMode.LevelsAndPeriod,t.DmCalendarPeriodMode.Period].indexOf(this._Mode)!==-1},r.prototype._bOb=function(){var e,o;if(this._aU1()&&this._acP){var r=this._Source.getSelectionInfo(this._SelectionOdId),u=n.getProperty(r,"calendarPeriod.start"),f=n.getProperty(r,"calendarPeriod.end"),t=n.getProperty(r,"calendarPeriod.levels.it")||[],i=this._cDD(t[0]);this._anE=!0,u&&(this._oQ.setValue(new window.Date(u)),this._oR.setMinDate(new window.Date(u))),f&&(this._oR.setValue(new window.Date(f)),this._oQ.setMaxDate(new window.Date(f))),delete this._anE,this._jc.ShowDaysButton=!t.length||t.indexOf(n.Mb.DimCalendarLvl.Day)!==-1,this._jc.ShowWeeksButton=!t.length||t.indexOf(n.Mb.DimCalendarLvl.Week)!==-1,this._jc.ShowMonthsButton=!t.length||t.indexOf(n.Mb.DimCalendarLvl.Month)!==-1,this._jc.ShowQuartersButton=!t.length||t.indexOf(n.Mb.DimCalendarLvl.Quarter)!==-1,this._jc.ShowHalfYearsButton=!t.length||t.indexOf(n.Mb.DimCalendarLvl.HalfYear)!==-1,this._jc.ShowYearsButton=!t.length||t.indexOf(n.Mb.DimCalendarLvl.Year)!==-1,e=this._oQ.getMode(),o=this._oR.getMode(),i&&t.indexOf(this._bOd(e))===-1&&this._oQ.setMode(i),i&&t.indexOf(this._bOd(o))===-1&&this._oR.setMode(i)}},r.prototype._bOc=function(){var i=-1,t;if(this._ne&&(i=this._ne.getFocusedIndex(),this._ne.clear()),this._aU0()&&this._ne){var u=this._Source.getSelectionInfo(this._SelectionOdId),f=n.getProperty(u,"calendarPeriod.levels.it")||[],e=!!n.getProperty(u,"calendarPeriod.active"),r=this._Source.getCalendarLevels()||[],o={Year:"mcYears",HalfYear:"mcHalfYears",Quarter:"mcQuarters",Month:"mcMonths",Day:"mcDays",Week:"mcWeeks"};for(t=0;t<r.length;t++)this._ne.addItem({ResourceKey:o[r[t]],Data:r[t],IsSelected:(e||i==-1)&&f.indexOf(r[t])!==-1});i!==-1&&this._ne.setFocusedIndex(i)}},r.prototype._bfI=function(){this._ne&&this._ne.removeFromDOM(),this._acP&&(this._aU2.removeFromDOM(),this._acP.removeFromDOM())},r.prototype._cDv=function(){this._acP||this._bfJ(),this._aU2.addToNode(this._DomNode),this._acP.addToNode(this._DomNode)},r.prototype._kZ=function(){return this._dH&&this._dH.isLive()&&this._Source&&this._Source.isLive()&&this._Source.getIsOpened()},r.prototype.updateSize=function(){var t,i;this._aU0()&&(t=this.getLevelsList(),this._DomNode.querySelector(".PPDmCalendarLevelsListBox")!=null&&(i=this._aU1()&&this._acP?this._acP.getHeight()+n.Ui.getMarginsHeight(this._acP.getDomNode())+this._aU2.getHeight()+n.Ui.getMarginsHeight(this._aU2.getDomNode()):0,t.setHeight(this.getHeight()-i),t.setWidth(this.getWidth())))},r.prototype.getMode=function(){return this._Mode},r.prototype.getSelectionOdId=function(){return this._SelectionOdId},r.prototype.getSource=function(){return this._Source},r.prototype.setSource=function(n){this._Source!==n&&(this._Source=n,this._acM(),this._qS(),this.refreshState())},r.prototype.setSelectionOdId=function(n){(n===null||this._Source&&this._Source.isSelectionExist(n))&&(this._SelectionOdId=n,this.refreshState())},r.prototype.setPeriod=function(t,i,r,u){var f={selId:this._SelectionOdId,active:!0,start:t,end:i,levels:r,append:u};(this._vO&&(n.clearTimeout(this._vO),delete this._vO),this.RequestSelection.fire(this,f),this._kZ()&&this._Source.getAllowSelection())&&(this._dH.setMarker(n.Mb.PPServiceMarker.Background),this._dH.setCalendarPeriod(this._Source,f,this._aFB,this._anD),this._dH.setMarker(null),this.SelectionChanging.fire(this,f))},r.prototype.setMode=function(n){this._Mode!==n&&(this._Mode=n,this._qS())},r.prototype.getLevelsList=function(){return this._ne||this._cDB(),this._ne},r.prototype.getStartDateEditor=function(){return this._oQ||this._bfJ(),this._oQ},r.prototype.getEndDateEditor=function(){return this._oR||this._bfJ(),this._oR},r.prototype.refreshSelection=function(){this.refreshState()},r.prototype.refreshState=function(){if(this._Source&&this._Source.isLive()&&!this._Source.getIsStateLoading()&&this._Source.getAllowSelection()&&!this._vO){if(this._kZ()&&!this._Source.getIsSelInfoUpdated(this._SelectionOdId)&&!this._Source.getIsDataLoading()){this._dH.getMetadata(this._Source,{selId:this._SelectionOdId,pattern:this._Source.isMdLoaded()?{getSelection:!0,getCompound:!0}:undefined},new n.Delegate(this.refreshState,this));return}this._bOc(),this._bOb(),this.Refreshed.fire(this)}},r.prototype.refresh=function(){this._qS(),this.refreshState()},r.prototype.dispose=function(){delete this._Source,delete this._dH,this._k0&&n.clearTimeout(this._k0),this._vO&&n.clearTimeout(this._vO),i.prototype.dispose.call(this)},r}(n.Ui.Control);t.DmCalendarPeriod=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(i){function r(n){var t=i.call(this,n)||this;return t._render(),t._qS(),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["BeforeRequestSelection","RequestSelection","SelectionChanging","SelectionChanged","Refreshed","ModeChanged"]),this._Width=200,this._Height=400,this._Source=null,this._SelectionOdId=null,this._AllowElements=!0,this._AllowCalendarPeriod=!0,this._ShowToolbar=!0,this._DimensionTreeSettings=null,this._DimensionPeriodSettings=null,this._Mode=t.DmViewerMode.Elements,this._nf=null,this._oS=null,this._oT=null,this._anF=null},r.prototype._render=function(){this._initFromHTML("<div class='PPDimensionViewer'><\/div>"),i.prototype._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},r.prototype._cDE=function(){if(this._Source&&this._Source.isLive()){var t=this._AllowCalendarPeriod&&this._Source.isCalendar();if(!this._AllowElements&&!t){this._Mode=null;return}if(!this._AllowElements){this._Mode=n.Mb.Ui.DmViewerMode.CalendarPeriod;return}if(!t||this._Mode==null){this._Mode=n.Mb.Ui.DmViewerMode.Elements;return}}},r.prototype._qS=function(){this._k0&&(n.clearTimeout(this._k0),delete this._k0),this._cDE(),this._k0=n.setTimeout(this._aFG,0,null,this)},r.prototype._aFG=function(){var u,t,i,r,f;if(this._k0&&(n.clearTimeout(this._k0),delete this._k0),this._bfI(),this._Source&&this._Source.isLive()){if(!this._Source.isMdLoaded()){this._k0=n.setTimeout(this._aFG,0,null,this);return}u=this._AllowCalendarPeriod&&this._Source.isCalendar(),t=null,this._ShowToolbar&&this._AllowElements&&u&&(t=this._cDF(),t.addToNode(this._DomNode));switch(this._Mode){case n.Mb.Ui.DmViewerMode.Elements:i=this.getDimensionTree(),this._bOe(i),i.addToNode(this._DomNode),t&&t.getItem(0).setIsChecked(!0,!1);break;case n.Mb.Ui.DmViewerMode.CalendarPeriod:r=this.getDimensionPeriodSetter(),this._bOe(r),r.addToNode(this._DomNode),t&&t.getItem(1).setIsChecked(!0,!1)}f={OldValue:this._anF,NewValue:this._Mode,OldMode:this._anF,NewMode:this._anF},this._anF!==this._Mode&&this.ModeChanged.fire(this,f),this.updateSize(),this._anF=this._Mode}},r.prototype._bOe=function(n){n.BeforeRequestSelection.addOne(this._cDG,this),n.RequestSelection.addOne(this._cDH,this),n.SelectionChanging.addOne(this._cDI,this),n.SelectionChanged.addOne(this._cDJ,this),n.Refreshed.addOne(this._cDK,this)},r.prototype._cDL=function(){var i={GroupName:"DmViewerMode",ResourceKey:"DmViewerElementsMode",Data:t.DmViewerMode.Elements},r={GroupName:"DmViewerMode",ResourceKey:"DmViewerLevelsMode",Data:t.DmViewerMode.CalendarPeriod};this._nf=new n.Ui.GroupButtons({Items:[i,r],AutoFit:!0,StateChanged:new n.Delegate(this._cDM,this)})},r.prototype._cDN=function(){var t=this._DimensionTreeSettings||{};t.Source=this._Source,t.SelectionOdId=this._SelectionOdId,t.PPType||(t.PPType="PP.Mb.Ui.DimTree"),this._oS=n.create(t)},r.prototype._cDO=function(){var t=this._DimensionPeriodSettings||{};t.Source=this._Source,t.SelectionOdId=this._SelectionOdId,t.PPType||(t.PPType="PP.Mb.Ui.DmCalendarPeriod"),this._oT=n.create(t)},r.prototype._cDG=function(n,t){this.BeforeRequestSelection.fire(n,t)},r.prototype._cDH=function(n,t){this.RequestSelection.fire(n,t)},r.prototype._cDI=function(n,t){this.SelectionChanging.fire(n,t)},r.prototype._cDJ=function(n,t){this.SelectionChanged.fire(n,t)},r.prototype._cDK=function(n,t){this.Refreshed.fire(n,t)},r.prototype._cDM=function(n,t){this.setMode(t.Item.getData())},r.prototype._cDP=function(){var t,i;switch(this._Mode){case n.Mb.Ui.DmViewerMode.Elements:t=this.getDimensionTree(),t.setSize(this._bOf(t),this._bOg(t));break;case n.Mb.Ui.DmViewerMode.CalendarPeriod:i=this.getDimensionPeriodSetter(),i.setSize(this._bOf(i),this._bOg(i))}this._nf&&this._nf.isLive()&&this._nf.setWidth(this.getWidth())},r.prototype._cDF=function(){return this._nf||this._cDL(),this._nf},r.prototype._bfI=function(){this._nf&&this._nf.removeFromDOM(),this._oS&&this._oS.removeFromDOM(),this._oT&&this._oT.removeFromDOM(),this._anF=null},r.prototype._cDQ=function(){this._nf&&(this._nf.dispose(),this._nf=null),this._oS&&(this._oS.dispose(),this._oS=null),this._oT&&(this._oT.dispose(),this._oT=null),this._anF=null},r.prototype._bOg=function(t){var i=this.getHeight();if(t&&(i-=n.Ui.getMarginsHeight(t.getDomNode())),!this._Source||!this._Source.isLive())return i;var f=this._AllowCalendarPeriod&&this._Source.isCalendar(),r=this._nf&&this._nf.isLive()&&this._ShowToolbar&&this._AllowElements&&f,u=r?this._nf.getDomNode():null,e=r?this._nf.getHeight()+n.Ui.getPixelSize(u,"margin-top")+n.Ui.getPixelSize(u,"margin-bottom"):0;return i-e},r.prototype._bOf=function(t){var i=this.getWidth();return t&&(i-=n.Ui.getMarginsWidth(t.getDomNode())),i},r.prototype.getMode=function(){return this._Mode},r.prototype.getAllowElements=function(){return this._AllowElements},r.prototype.getAllowCalendarPeriod=function(){return this._AllowCalendarPeriod},r.prototype.getShowToolBar=function(){return this._ShowToolbar},r.prototype.getSelectionOdId=function(){return this._SelectionOdId},r.prototype.getSource=function(){return this._Source},r.prototype.setSource=function(n){this._Source!==n&&(this._Source=n,this._cDQ(),this._qS())},r.prototype.setSelectionOdId=function(n){(n===null||this._Source&&this._Source.isSelectionExist(n))&&(this._SelectionOdId=n,this._oS&&this._oS.isLive()&&this._oS.setSelectionOdId(n),this._oT&&this._oT.isLive()&&this._oT.setSelectionOdId(n))},r.prototype.setMode=function(n){n!==this._Mode&&(this._Mode=n,this._qS())},r.prototype.getDimensionTree=function(){return this._oS||this._cDN(),this._oS},r.prototype.getDimensionPeriodSetter=function(){return this._oT||this._cDO(),this._oT},r.prototype.setAllowElements=function(n){this._AllowElements!==!!n&&(this._AllowElements=!!n,this._qS())},r.prototype.setAllowCalendarPeriod=function(n){this._AllowCalendarPeriod!==!!n&&(this._AllowCalendarPeriod=!!n,this._qS())},r.prototype.setShowToolbar=function(n){!this._ShowToolBar!=!!n&&(this._ShowToolBar=!!n,this._qS())},r.prototype.setWidth=function(n,t){i.prototype.setWidth.call(this,n,t),this.updateSize()},r.prototype.setHeight=function(n,t){i.prototype.setHeight.call(this,n,t),this.updateSize()},r.prototype.updateSize=function(){this._ab6&&n.clearTimeout(this._ab6),this._ab6=n.setTimeout(this._cDP,0,null,this)},r.prototype.refresh=function(){this._qS()},r.prototype.refreshSelection=function(){this.refreshState()},r.prototype.refreshState=function(){this._oS&&this._oS.isLive()&&this._oS.refreshState(),this._oT&&this._oT.isLive()&&this._oT.refreshState()},r.prototype.dispose=function(){delete this._Source,this._k0&&n.clearTimeout(this._k0),this._ab6&&n.clearTimeout(this._ab6),i.prototype.dispose.call(this)},r}(n.Ui.Control);t.DimensionViewer=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(i){function r(t){var r=i.call(this,t)||this;return n.addClass(r._DomNode,"PPTreeDropDown"),r._n9=new n.Ui.ToolTip({ParentNode:document.body}),r._a6p(),r._cDR(),r._oa(),r._aBo(),r._i8(),r}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["ComboClosed","ComboOpened","SelectionChanged"]),this._DimensionViewer=null,this._FindDelay=n.Ui.DEFAULT_TIMEOUT,this._ResourceKey="TreeDropDownSelectedCount",this._CaptionStringNothing="",this._ImagePath=n.ImagePath,this._ey={IsCroped:!1,Text:undefined,Original:undefined},this._k1=null,this._TypeCaption=t.DimComboCaption.SelectionCount},r.prototype._initFields=function(n){n&&n.TreeView&&(this._avn=n.TreeView,n.TreeView=undefined),i.prototype._initFields.call(this,n)},r.prototype._a6p=function(){var n=this.getTextBox();n.setAfterChangeDelay(this._FindDelay),n.setEllipsis(!0)},r.prototype._cDR=function(){this._DimensionViewer=this._avo(),this.setShowFindButton(this._DimensionViewer.getMode()===t.DmViewerMode.Elements);var i=n.extend({Content:this._DimensionViewer},this._DropPanel,!1);this._DropPanel=n.extend(i,{MaxDropDownWidth:window.Number.MAX_VALUE,MinDropDownWidth:135,MaxDropDownHeight:window.Number.MAX_VALUE,MinDropDownHeight:130,Height:230,Class:"PPTreeDropDownDrop"},!1)},r.prototype._avo=function(){if(this._DimensionViewer instanceof t.DimensionViewer&&this._DimensionViewer.isLive())return this._DimensionViewer;var i=n.extend({},this._DimensionViewer);return i.DimensionTreeSettings=i.DimensionTreeSettings?n.extend(i.DimensionTreeSettings,this._avn,!0):n.extend({AutoLoad:!1},this._avn),!i.Source&&this._avn&&this._avn.Source&&(i.Source=this._avn.Source),this._avn=undefined,i.PPType||(i.PPType="PP.Mb.Ui.DimensionViewer"),n.create(i)},r.prototype._oa=function(){var r=this.getTextBox(),t,i;r.MouseOver.add(this._p2,this),r.MouseOut.add(this._p3,this),this._aby&&(this._addEvent(this._aby,"mouseover",this._p2),this._addEvent(this._aby,"mouseout",this._p3)),t=this.getDropPanel(),t.Opened.addOne(this._iG,this),t.SizeChanging.addOne(this._a6q,this),t.SizeChanged.addOne(this._aBp,this),t.KeyDown.addOne(this._a6r,this),(n.IsiPad||n.IsiPhone)&&t.Closing.add(this._aD8,this),i=this.getFindButton(),i.MouseDown.add(this._agj,this),i.MouseUp.add(this._aD4,this),i.MouseOver.add(this._aD5,this),i.MouseOut.add(this._aD6,this),r.AfterChange.addOne(this._amt,this),r.KeyDown.add(this._amu,this),this._DimensionViewer.ModeChanged.addOne(this._bfK,this),this._DimensionViewer.BeforeRequestSelection.addOne(this._cDS,this),this._DimensionViewer.SelectionChanged.addOne(this._cDT,this),this._DimensionViewer.Refreshed.addOne(this._cDU,this)},r.prototype._aBo=function(){this._CaptionDelegate=this._CaptionDelegate?new n.Delegate(this._CaptionDelegate,this):new n.Delegate(this._a6s,this)},r.prototype._p4=function(){return this._aby=i.prototype._p4.call(this)},r.prototype._p2=function(n,t){this._xL||this._xM(t.Event)},r.prototype._p3=function(){this._n9.hide()},r.prototype._aD8=function(n,t){if(this._k1)for(var i=t.Event&&t.Event.target,r=this.getTextBox().getDomNode();i!=null;){if(i==r){t.Cancel=!0;return}i=i.parentNode}},r.prototype._a6r=function(t,i){switch(i.Event.keyCode){case n.Key.Enter:this._lY(""),this.stopSearch(),this.getDropPanel().hide()}},r.prototype._iG=function(i,r){if(this._aBp(i,r),this._DimensionViewer.getMode()===t.DmViewerMode.Elements&&!n.IsiPad&&!n.IsiPhone){var u=this._DimensionViewer.getDimensionTree().getControl();u.setFocus()}this._i9=!0,this._bOh(),this.ComboOpened.fire(this,r)},r.prototype._d3=function(n,r){if(i.prototype._d3.call(this,n,r),delete this._i9,this._DimensionViewer.getMode()===t.DmViewerMode.Elements){this._k1&&this.stopSearch();var u=this._DimensionViewer.getDimensionTree().getControl();u.hideToolTip(),u.removeHover()}this._asz&&(this.SelectionChanged.fire(this,{Dim:this._DimensionViewer.getSource()}),delete this._asz),this.ComboClosed.fire(this,r)},r.prototype._a6q=function(){var i=this.getDropPanel();i.getDroppedDown()&&this._DimensionViewer.setSize(i.getWidth()-6,i.getHeight()-6)},r.prototype._aBp=function(){var i=this.getDropPanel();i.getDroppedDown()&&this._DimensionViewer.setSize(i.getWidth()-6,i.getHeight()-6)},r.prototype._cDS=function(){this._asz=!1},r.prototype._cDT=function(){if(this._k1||this._i8(),this._i9?this._asz=!0:this.SelectionChanged.fire(this,{Dim:this._DimensionViewer.getSource()}),this._DimensionViewer.getMode()===t.DmViewerMode.Elements){var u=this._DimensionViewer.getDimensionTree(),f=u.getControl().getContextMenu();!this._CloseOnSelect||f&&f.getIsVisible()||u.getSelectionMode()!==n.Ui.TreeListSelectionMode.SingleSelect||this.getDropPanel().hide()}},r.prototype._cDU=function(n,i){!this._k1&&(!i.Type||[t.ElsTreeRefreshType.Reload,t.ElsTreeRefreshType.Content,t.ElsTreeRefreshType.State].indexOf(i.Type)>-1)&&this._i8()},r.prototype._bfK=function(){this._bOh(),this._DimensionViewer.getMode()===t.DmViewerMode.Elements?this.setShowFindButton(!0):this._DimensionViewer.getMode()===t.DmViewerMode.CalendarPeriod&&(this._k1&&this.stopSearch(),this.setShowFindButton(!1)),this._i8()},r.prototype._aD5=function(){this._xL=!0,this._n9.hide()},r.prototype._aD6=function(t,i){this._xL=!1;var r=this.getTextBox().getDomNode();n.reallyOut(r,i.Event)||this._xM(i.Event)},r.prototype._agj=function(t,r){return this._Enabled&&n.setCapture(t.getDomNode(),["pointerup"]),i.prototype._agj.call(this,t,r)},r.prototype._aD4=function(t,i){if(n.releaseCapture(t.getDomNode()),this._Enabled){if(this._k1!=="cross"&&(n.IsiPad||n.IsiPhone)){this.setEnableEdit(!0);var r=this.getTextBox();r.setFocus()}this._aU4&&n.clearTimeout(this._aU4),this._aU4=n.setTimeout(this._aD7,0,{Event:i.Event},this)}},r.prototype._aD7=function(t){var i,r;!this._k1&&t.Event.which===n.MouseButton.Left&&this._ShowFindButton&&(this._k1||this.showSearch()),i=this.getTextBox(),this._k1==="cross"&&(r=this._DimensionViewer.getDimensionTree(),r.setTextFilter(""),i.setValue(""),this._aFI("find")),i.setFocus()},r.prototype._amt=function(){if(!this._k1||this._vm){delete this._vm;return}var i=this.getTextBox().getValue();i&&this._k1!=="cross"&&this._aFI("cross"),i||this._k1==="find"||this._aFI("find"),this._lY(i)},r.prototype._amu=function(t,i){delete this._vm;switch(i.Event.keyCode){case n.Key.Enter:this._lY(this.getTextBox().getValue()),this._vm=!0,i.Event.stopPropagation();break;case n.Key.Esc:this._lY(""),this.stopSearch(),i.Event.stopPropagation()}},r.prototype._vc=function(n,t){i.prototype._vc.call(this,n,t),this._k1&&this.getDropPanel().notifyContentMouseDown(t.Event)},r.prototype._lY=function(n){if(this._DimensionViewer.getMode()===t.DmViewerMode.Elements){var i=this._DimensionViewer.getDimensionTree();i.setTextFilter(n)}},r.prototype._aFI=function(t){this._k1=t;var u,r,i=this.getFindButton();t==="cross"?(i.removeClass("PPFindText"),i.addClass("PPClearText"),r=n.resourceManager.getString("searchButton","CrossContent")):(i.removeClass("PPClearText"),i.addClass("PPFindText"),r=n.resourceManager.getString("searchButton","Content")),i.getToolTip()?i.getToolTip().setContent(r):i.setToolTip(new n.Ui.ToolTip({Content:r}))},r.prototype._xM=function(t){if(this._ey.IsCroped){this._n9.setContent(this._ey.Original);var i=n.calculateOffset(this.getTextBox().getDomNode());i.X=Math.max(t.pageX-30,1),i.Y=i.Y<25?i.Y+25:i.Y-25,this._n9.show(i.X,i.Y)}},r.prototype._bOh=function(){var i,r,u;this._i9&&(this._DimensionViewer.getMode()===t.DmViewerMode.Elements?(i=this._DimensionViewer.getDimensionTree(),i.loadFirst(),i.refreshState(),r=i.getControl(),r.updateSize(),n.IsiPad||n.IsiPhone||r.setFocus()):this._DimensionViewer.getMode()===t.DmViewerMode.CalendarPeriod&&(u=this._DimensionViewer.getDimensionPeriodSetter(),u.refreshState()))},r.prototype._i8=function(){this._k1||(this._abz&&n.clearTimeout(this._abz),this._abz=n.setTimeout(this._a6t,0,null,this))},r.prototype._a6t=function(){var n=this._CaptionDelegate.fire(this),t;n||(n=""),t=this.getTextBox(),this._ey.Original=n,this.setContent(n),this._ey.IsCroped=t.getIsCropped()},r.prototype._a6s=function(){var i=this._DimensionViewer.getSource(),f=this._DimensionViewer.getSelectionOdId(),s,v;if(!i||!i.isLive()||this._k1)return this.getCaptionStringNothing();var l=i.getPPService(),o=i.getAllowSelection(),r=this._DimensionViewer.getMode()===t.DmViewerMode.Elements?this._DimensionViewer.getDimensionTree():null,h=r?r.getControl():null,c=[];if(o||this._DimensionViewer.getMode()!==t.DmViewerMode.Elements||(c=h.getSelectedNodes()),o&&!i.getIsSelInfoUpdated(f))return l&&!i.getIsDataLoading()&&l.getMetadata(i,{selId:f,pattern:i.isMdLoaded()?{getSelection:!0,getCompound:!0}:undefined},new n.Delegate(this._i8,this)),this.getCaptionStringNothing();if(this._TypeCaption===t.DimComboCaption.SelectionCount){var e=o?i.getSelectedCount(f):c.length,a=i.getTotalCount()||"",u="";return e===0?u=this.getCaptionStringNothing():e===1||r&&r.getSelectionMode()===n.Ui.TreeListSelectionMode.SingleSelect?(s=i.getSelectionInfo(f),s&&s.firstSelected&&(v=r?r.getNameAttributesId(s.firstSelected["@l"]):null),u=o?n.String.escapeHTML(i.getFirstSelectedText(r?v:null,r?r.getMultipleAttributesSeparator():null,f)):h?h.getNodeContent(c[0])[0]:null):u=e>1&&e!=a?n.String.format(n.resourceManager.getString("DimComboCaptionString","Content"),e,a):n.String.format(n.resourceManager.getString("DimComboAllEls"),i.getName()),!u?this.getCaptionStringNothing():u}},r.prototype._h3=function(){},r.prototype.getFindDelay=function(){return this._FindDelay},r.prototype.getCloseOnSelect=function(){return this._CloseOnSelect},r.prototype.getCaptionStringNothing=function(){return this._CaptionStringNothing},r.prototype.setCloseOnSelect=function(n){this._CloseOnSelect=n},r.prototype.setCaptionStringNothing=function(n){this._CaptionStringNothing=n},r.prototype.setFindDelay=function(n){this.getTextBox().setAfterChangeDelay(n)},r.prototype.getTreeView=function(){return this._DimensionViewer.getDimensionTree()},r.prototype.showSearch=function(){if(this._DimensionViewer.getMode()===t.DmViewerMode.Elements){this._aSK=this.getContent()||" ",this.setContent(""),this.setEnableEdit(!0);var i=this.getTextBox();i.setValue(""),i.setFocus(),this.getDropPanel().getDroppedDown()&&this.getDropPanel().setPosition(n.calculateOffset(this._DomNode).X,null),this._aFI("find"),this.getDropPanel().getDroppedDown()||this.showDropPanel()}},r.prototype.stopSearch=function(){if(this._k1){this.setEnableEdit(!1),this._aFI(null);var n=this._DimensionViewer.getDimensionTree();n.setTextFilter(""),this._i8()}},r.prototype.setCaptionDelegate=function(n){this._CaptionDelegate=n,this._aBo(),this._i8()},r.prototype.refresh=function(){this.updateSize(),this._i8()},r.prototype.setWidth=function(n,t){i.prototype.setWidth.call(this,n,t),this._i8()},r.prototype.getSource=function(){return this._DimensionViewer.getSource()},r.prototype.setSource=function(n){this._DimensionViewer.setSource(n),this._i8()},r.prototype.dispose=function(){this._aU4&&n.clearTimeout(this._aU4),this._abz&&n.clearTimeout(this._abz),i.prototype.dispose.call(this)},r}(n.Ui.Combo);t.DimCombo=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._Source&&!i._Service&&(i._Service=i._Source.getPPService()),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._ImagePath=n.ImagePath,this._ScriptPath=n.ScriptPath,this._CSSPath=n.CSSPath,this._defineEvents(["MetadataChanged","PropertyChanged"])},i.prototype._oi=function(t,i){var r=i.Args.Callback;r&&(r instanceof n.Delegate?r.fire(this):i.Args.A&&r.apply?r.apply(this,i.Args.A):r.call&&r.call(this))},i.prototype._aS=function(n,t){this.MetadataChanged.fire(this,t)},i.prototype.setSource=function(n){this._Source=n},i.prototype.getSource=function(){return this._Source},i.prototype.getService=function(){return this._Source?this._Source.getPPService()||this._Service:this._Service},i.prototype.getSrv=function(){return this.getService()},i.prototype.loadFiles=function(t,i){var e=!1,o=!1,u,f,r;if(this._FileStyles){if(u=this._FileStyles.split(";"),this._CSSPath)for(r=0;r<u.length;r++)u[r]=this._CSSPath+u[r];e=n.ScriptManager.loadStyles(u)}if(this._FileScripts){if(f=this._FileScripts.split(";"),this._ScriptPath)for(r=0;r<f.length;r++)f[r]=this._ScriptPath+f[r];o=n.ScriptManager.loadScripts(f,new n.Delegate(this._oi,this,{Callback:t,A:i}))}return e||o},i.prototype.loadFile=function(t,i,r){return t&&n.ScriptManager.loadScript(t,new n.Delegate(this._oi,this,{Callback:i,A:r}))},i.prototype.dispose=function(){delete this._Source,delete this._Service,t.prototype.dispose.call(this)},i.getVerticalAlignmentFromHCString=function(t){switch(t){case"top":return n.VerticalAlignment.Top;case"middle":return n.VerticalAlignment.Center;case"bottom":default:return n.VerticalAlignment.Bottom}},i.getHorizontalAlignmentFromHCString=function(t){switch(t){case"left":return n.HorizontalAlignment.Left;case"right":return n.HorizontalAlignment.Right;case"center":default:return n.HorizontalAlignment.Center}},i.getHCStringFromVerticalAlignment=function(t){switch(t){case n.VerticalAlignment.Top:return"top";case n.VerticalAlignment.Center:return"middle";default:return"bottom"}},i.getHCStringFromHorizontalAlignment=function(t){switch(t){case n.HorizontalAlignment.Left:return"left";case n.HorizontalAlignment.Right:return"right";default:return"center"}},i}(n.Ui.Control);t.SourceView=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(i){var r=t.call(this,i)||this;return r._cDV={FloatSlider:n.Ui.TabSheetCellValueType.Float,DecimalSlider:n.Ui.TabSheetCellValueType.Decimal,IntegerSlider:n.Ui.TabSheetCellValueType.FourByteInteger,FloatEdit:n.Ui.TabSheetCellValueType.Float,TimePicker:n.Ui.TabSheetCellValueType.Date,DatePicker:n.Ui.TabSheetCellValueType.Date,DateTimePicker:n.Ui.TabSheetCellValueType.Date,DecimalEdit:n.Ui.TabSheetCellValueType.Decimal,IndentEdit:n.Ui.TabSheetCellValueType.String,BooleanCombo:n.Ui.TabSheetCellValueType.Boolean,IntagerEdit:n.Ui.TabSheetCellValueType.FourByteInteger,CheckBox:n.Ui.TabSheetCellValueType.Boolean,EditBox:-1,MaskEdit:-1,DimCombo:-1,ComboBox:-1,TreeCombo:-1},r}return __extends(i,t),i.prototype.formatCell=function(t){var s=t.getCoord(),a=t.getModel(),v=a.getStyleByIndex(t.getStyleIndex()),h=v.Binding.match(/UI\W+"\W*(\w*)\W*"/),e=h&&h[1],i=t.CellData.Value||"",r=t.CellData.ValueType,c=!1,u,l,o,f;return e&&this._cDV[e]===r?i&&(i=r+":"+i):(u=n.getCurrentCulture(),t.getIsDateTimeValueType()?(l=n.Date.parse(i,"m/d/Y H:i:s")||n.Date.parse(i,"m/d/Y"),o=u.DateOrder.split("").join(u.DateSeparator),o+=" "+"His".split("").join(u.TimeSeparator),i=n.Date.format(l,o)):t.getIsNumberValueType()&&(i=i.replace(".",u.DecimalSeparator)),e==="DimCombo"&&(r!==n.Ui.TabSheetCellValueType.FourByteInteger&&r!==8204&&r!==n.Ui.TabSheetCellValueType.Unknown?c=!0:i=r+":"+i)),f={"@L":s.colIndex,"@T":s.rowIndex,CD:{"@V":i}},c&&delete f.CD,i||(f.CD["@V"]="0:",f.CD["@FT"]=""),f},i}(n.Object);t.TabSheetFormatter=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),u=n.Mb.Ui.DimEditorHelper=function(n){this._EditorOdId=null,this._CacheKey="",this._Source=null,this._defineEvents(["SelectionChanging","SelectionChanged"]),u.base.constructor.call(this,n)},n.initClass(u,n.Object,"PP.Mb.Ui.DimEditorHelper"),n.Object.defineProps(u,["Source"],!0),t=u.prototype,t._cDW=function(t){var i=t.MULTISELECT,r=t.SELECTIONMODE,u=t.ALLOWEMPTY;return{SelectionMode:i!=null&&(i===!0||n.String.isTrue(i))||!i&&!r||r=="MultiSelect"?n.Ui.TreeListSelectionMode.MultiSelect:r=="MultiSelectStandard"?n.Ui.TreeListSelectionMode.ControlShiftMultiSelect:n.Ui.TreeListSelectionMode.SingleSelect,AllowEmpty:u==null&&r!=="SingleSelect"||n.String.isTrue(u)||u===!0}},t._aht=function(t,i){var u,f,e,r;if(!t||!t.ID||(u=this._EditorOdId,f=parseInt(t.ID.replace("@","")),isNaN(f)&&!u))return null;if(!this._cA){if(e=this.getSource(),!e.getMetabase())return null;this._cA=new n.Mb.DimSrv({Metabase:e.getMetabase()})}return u?(r=new n.Mb.DimSource({PPService:this._cA,Id:t.ID,Metabase:this._Metabase,LoadAttributeValuesPartial:!0}),r.setOdId(u),this._cA.openViaMoniker(r,n.Delegate(this._vP,this,{Meta:t,Value:i,DimComboEditor:this._vQ}))):r=this._cA.open(f,undefined,undefined,undefined,n.Delegate(this._vP,this,{Meta:t,Value:i,DimComboEditor:this._vQ})),r},t._vP=function(n,t){var f=t.Args.Meta,r=t.Args.Value,u=t.Args.DimComboEditor,i;this.applyBinding(t.Args.DimComboEditor,t.Args.Meta),i={selId:undefined,keysToLoad:r,parentKey:null,range:undefined,filter:undefined},this._cA.getChildren(u.getSource(),i)},t._cDX=function(t,i,r){var f=this.getSource()?this.getSource().getMetabase():null,u;return!f||!t||!t.ID||!r?null:(u=t.ID+r.toString(),this._aU5||(this._aU5={}),this._aU5[u])?this._aU5[u]:(f.findObjects("Root",{Levels:-1,IncludeRoot:!1,HideEmptyFolders:!0,HideAllFolders:!0,Limit:-1,Classes:{it:[{k:n.Mb.MetabaseObjectClass.KE_CLASS_CLNDIM},{k:n.Mb.MetabaseObjectClass.KE_CLASS_COMPOUNDCLNDIM},{k:n.Mb.MetabaseObjectClass.KE_CLASS_CUSTOMDIM},{k:n.Mb.MetabaseObjectClass.KE_CLASS_STDDIM},{k:n.Mb.MetabaseObjectClass.KE_CLASS_USERDIM},{k:n.Mb.MetabaseObjectClass.KE_CLASS_RDS_DICTIONARY},{k:n.Mb.MetabaseObjectClass.KE_CLASS_METADICTIONARYRDS},{k:n.Mb.MetabaseObjectClass.KE_CLASS_RDS_COMPDICTIONARY},{k:n.Mb.MetabaseObjectClass.KE_CLASS_COMPOUNDSIDEDIM}]},FindInfo:{Active:!0,Attribute:n.Mb.FindInfoAttribute.Ident,Text:t.ID,CaseSensitive:!0,WholeWordsOnly:!0,ScanNestedNamespaces:!0,ScanHiddenFolders:!0}},new n.Delegate(this._cDY,this,{Id:t.ID,Meta:t,Value:i,Coord:r,OdId:this._EditorOdId,DimComboEditor:this._vQ})),null)},t._cDY=function(t,i){var o=JSON.parse(i.ResponseText),u=n.getProperty(o,"GetObjectsResult.objects.its.d")||[],f=u.length>0?parseInt(u[0].k):NaN,e;if(!isNaN(f)){this._CacheKey=i.Args.Coord,this._EditorOdId=i.Args.OdId,this._vQ=i.Args.DimComboEditor;var r=i.Args.Meta,s=i.Args.Value,h=r.ID+this._CacheKey;this._aU5[h]=r,r.ID="@"+f,e=this._aht(r,s),this._vQ.setSource(e),this._bOi()}},t._bOi=function(){dimTree=this._vQ.getTreeView(),dimTree.BeforeRequestSelection.addOne(this._cDZ,this),this._vQ.SelectionChanged.addOne(this._qT,this)},t.setCacheKey=function(n){this._CacheKey=n},t.setEditorOdId=function(n){this._EditorOdId=n},t.setDimComboEditor=function(n){this._vQ=n},t.getDimEditor=function(t,i,r){var u,f;return r=r==undefined?!0:r,u=t,n.isString(i)&&i[0]==="["&&(i=""),f=this._cDW(u),this._vQ=new n.Mb.Ui.DimCombo({CloseOnSelect:!0,DropPanel:{MinWidth:200},TreeView:{Source:null,LoadToFirstSelected:!0,AllowEmptySelection:f.AllowEmpty,SelectionMode:f.SelectionMode,UseCustomNaming:!1}}),r&&this.applySource(u,i),this._vQ},t.applySource=function(n,t){var i=this._aht(n,t),r;return i||(r=this._cDX(n,t,this._CacheKey),r&&(i=this._aht(r,t))),i&&(this._vQ.setSource(i),this._bOi()),this._vQ},t.applyBinding=function(t,i){var u=t.getTreeView(),r,f,e,o;i.GROUP&&(r=u._Source.getActiveGroup(this._SelectionOdId),f=!0,r&&(e=i.GROUP.indexOf("@")==0,f=e?i.GROUP.indexOf(r.k)<0:i.GROUP!==r.id),f&&u.setActiveGroupId(i.GROUP)),i.LEVELATTR&&(o=n.Mb.Ui.parseLevelAttributes(i.LEVELATTR,t.getSource().getAttributes()),u.setNameAttributesId(o))},t._cDZ=function(n,t){this.SelectionChanging.fire(n,t)},t._qT=function(n,t){this.SelectionChanged.fire(n,t)},function(n){var t;(function(t){var i;(function(i){var r=function(r){function u(n){var t=r.call(this,n)||this;return t._render(),t}return __extends(u,r),u.prototype._e=function(){r.prototype._e.call(this),this._FileScripts="PP.TabSheet.js",this._TabSheetDataSource=null,this._TabSheet=null,this._SearchDialog=null,this._EditMode=1,this._SyncLoadClipboardData=!1,this._ReturnSelectionAfterFocus=!1,this._NeedUpdateSelection=!1,this._Width=800,this._Height=600,this._IsAsync=!0,this._avp=[],this._bfL="None",this._bfM=!1,this._avq=new i.TabSheetFormatter,this._defineEvents(["SelectionChanged","SelectionChanging","Rendered","Edited","HyperlinkClick","StructureChanged","PictureMouseDown","HyperlinkMouseDown","ExpanderAction"])},u.prototype._initFields=function(t){t=t||{},t.TabSheet&&(this._aFJ=t.TabSheet,n.isDefined(this._aFJ.EnableNativeContextMenu)||(this._aFJ.EnableNativeContextMenu=n.Ui.getConfig().getValue("TabSheet.EnableNativeContextMenu")),n.isDefined(this._aFJ.EnableSelection)||(this._aFJ.EnableSelection=n.Ui.getConfig().getValue("TabSheet.EnableSelection")),delete t.TabSheet),r.prototype._initFields.call(this,t)},u.prototype._render=function(){this._initFromHTML("<div><\/div>"),this._TabSheetContainer=n.htmlToDOM("<div class='PPTSWrapper'><\/div>"),this._TabSheetContainer.id=this.getId()+"_TabSheetContainer",this._TabSheetContainer=this._TabSheetContainer,this._DomNode.appendChild(this._TabSheetContainer),this._ParentNode&&this.addToNode(this._ParentNode)},u.prototype._aFK=function(){var t=this.getWidth();return this._TabSheetContainer instanceof Element&&(t-=n.Ui.getBordersWidth(this._TabSheetContainer)||0),t},u.prototype._aFL=function(){var t=this.getHeight();return this._TabSheetContainer instanceof Element&&(t-=n.Ui.getBordersHeight(this._TabSheetContainer)||0),t},u.prototype._gz=function(t){if(t&&t.setIsAsync(this._IsAsync),!this._TabSheet){if(!n.getTypeByName("PP.Ui.TabSheet")){this.loadFiles(this._gz,arguments);return}var i={PPType:"PP.Ui.TabSheet",IsEditable:this._EditMode,ParentNode:this._TabSheetContainer,IsRTL:this._IsRTL,PTFontSize:!0,Enabled:this._Enabled,AdditionalExpanderOffset:7,SyncLoadClipboardData:this._SyncLoadClipboardData,ReturnSelectionAfterFocus:this._ReturnSelectionAfterFocus,Width:this._aFK(),Height:this._aFL(),FixedLineColor:"transparent",FixedBehaviour:3,OnContextMenu:new n.Delegate(this._aFM,this)};n.extend(i,this._aFJ,!0,!0),this._TabSheet=n.create(i),this._TabSheet.KeyDown.insert(0,this._aFN,this),this._TabSheet.KeyUp.add(this._aU6,this),this._TabSheet.Rendered.add(this._anG,this),this._TabSheet.RangesLoaded.add(this._aU7,this),this._TabSheet.PictureMouseDown.add(this._bfN,this),this._TabSheet.HyperlinkMouseDown.add(this._bfO,this),this._TabSheet.SelectionChanged.add(this._avr,this),this._TabSheet.SelectionChanging.add(this._anH,this),this._TabSheet.Edited.add(this._ze,this),this._TabSheet.Editing.add(this._bOj,this),this._TabSheet.RowColumnSizeChanged.add(this._cD0,this),this._TabSheet.ExpanderAction.add(this._avs,this),this._TabSheet.RenderDimComboEditor.add(this._bfP,this),this._TabSheet.RemoveRanges.add(this._aU8,this),this._TabSheet.ScrollChanged.add(this._aFO,this),this._TabSheet.setDataSource(t),this.setContextMenu(this._ContextMenu)}},u.prototype._aFO=function(){this._ab1()},u.prototype._aU8=function(){},u.prototype._bfQ=function(t){var i=t,u,r;if(i&&n.Array.isArray(i)){for(u={type:"Normal",range:{left:0,top:0,height:0,width:0,parts:{it:[]},type:"MultiPart"}},r=0;r<i.length;r++)u.range.parts.it.push(i[r].toJSON());return u}return t&&t.toJSON()},u.prototype._aW=function(){this._TabSheet&&this._TabSheet.update()},u.prototype._anH=function(n){this.SelectionChanging.fire(this,{Selection:this._bfQ(n.getSelection())})},u.prototype._avr=function(n){this._GridSelection=n.getSelection(),this.SelectionChanged.fire(this,{Selection:this._bfQ(this._GridSelection),FocusedCell:n.getCoordUnderMouse()})},u.prototype._anG=function(t,i){var r=this.getTabSheetDataSource().getScrollState(),u=this.getTabSheet();r&&(r.topRow!==u.getFirstVisibleRow()||r.leftColumn!==u.getFirstVisibleColumn())&&u.scrollToPos(r.topRow,r.leftColumn,!1),u.setIsVisible(n.Ui.Visibility.Visible),this._TabSheet.updateSize(),this._Source&&this.setSelection(this.getTabSheetDataSource().getSelection()),this.Rendered.fire(this,i)},u.prototype._aU7=function(){},u.prototype._bfN=function(n,t){var r=t.Cell.getCoord(),u=t.Event,i,f;if(u.shiftKey)for(i=0,f=this._avp.length;i<f;i++)if(this._avp[i].row==r.rowIndex&&this._avp[i].column==r.colIndex)return;this._avp.push(r),u.shiftKey?(this._bfL="Shift",this._bfM=!0):this._bOk()},u.prototype._bOk=function(){var n={picture:{it:this._avp},keyModifiers:this._bfL};this.PictureMouseDown.fire(this,n),this._avp=[],this._bfM=!1,this._bfL="None"},u.prototype._bfO=function(n,t){var r=t.Event,i=t.Cell.getCoord(),u=t.Hyperlink,f={Event:r,Hyperlink:u,ColIndex:i.colIndex,RowIndex:i.rowIndex};this.HyperlinkMouseDown.fire(this,f)},u.prototype._bOl=function(t){var r=t.Action.split(","),i;t.Key=parseInt(r[0].replace("@","")),i=t.Class||parseInt(r[1]),n.isNumber(i)&&(i>>16>0&&(t.IsCustomClass=!0,t.CustomClass=this._cD1(i)),t.Class=i)},u.prototype._bOj=function(){},u.prototype._ze=function(n,t){this.Edited.fire(n,t)},u.prototype._bOm=function(){this.StructureChanged.fire(this,{ChangedStruct:this._TabSheet.getMeasures().toJSON()})},u.prototype._cD0=function(n,t){var r={NewData:{},OldData:{}},u,f,i;if(t.ColIndexes&&t.ColIndexes.length){u=[],r.NewData.Columns={Column:u};for(i in t.ColIndexes)u.push({"@I":t.ColIndexes[i],"@W":t.NewValue})}if(t.RowIndexes&&t.RowIndexes.length){f=[],r.NewData.Rows={Row:f};for(i in t.RowIndexes)f.push({"@I":t.RowIndexes[i],"@H":t.NewValue})}this._bOm(n,r)},u.prototype._aFM=function(n,t){this._bfR=t},u.prototype._aU6=function(n,t){this.KeyUp.fire(this,t),this._bfM&&this._bOk()},u.prototype._aFN=function(n,t){var r=t.Event,i;r.ctrlKey&&r.keyCode==70&&(i=this.getSearchDialog(),i&&(i.showDialog(),t.Event.preventDefault()))},u.prototype._avs=function(n,t){var i={IsCollapse:t.IsCollapse,Coord:t.Coord,Expanders:this._TabSheet.getSettings().Structure.Expanders};i.coord=i.Coord,this.ExpanderAction.fire(this,i)},u.prototype._qT=function(){},u.prototype._bfS=function(){},u.prototype._bfP=function(n,t){var h=t.Cell,o=t.MetaData,s=h.CellData.Value,r=h.getCoord().clone(),u=t.Control,c=this.getSource(),e=this._bOn(),f,i;e+="!"+n.getColumnHeaderText(r.colIndex)+r.rowIndex+"!Selection",f=this.getDimEditorHelper(),u?u.ComboOpened.contains(this._aU9,this)&&(u.ComboOpened.remove(this._aU9,this),u.ComboOpened.insert(0,this._aU9,this,{metadata:o,value:s,createSource:!0,editor:u,odId:e})):(f.setSource(c),f.setCacheKey(r.toString()),f.setEditorOdId(e),i=f.getDimEditor(o,s,!1),i.getSource()&&i.getSource().isMdLoaded()||i.ComboOpened.insert(0,this._aU9,this,{metadata:o,value:s,createSource:!0,editor:i,odId:e}),i.setCaptionDelegate(function(){var i=n.getModel(),t=i.getCell(r.rowIndex,r.colIndex,!0);return t?t.CellData.FormattedText:""}),t.Control=i)},u.prototype._aU9=function(n,t){var i=t.Args.editor,u=t.Args.metadata,f=t.Args.value,e=this.getSource(),r=this.getDimEditorHelper();r.setSource(e),r.setCacheKey(i.getData().toString()),r.setEditorOdId(t.Args.odId),r.setDimComboEditor(i),i.getSource()&&i.getSource().isMdLoaded()?r.applyBinding(i,u):i=this.getDimEditorHelper().applySource(u,f)},u.prototype._bOn=function(){var n=this.getSource();return n.getOdId().id+"!Sheets!"+n.getActiveSheetKey()},u.prototype._cD2=function(n,t){var i=this._TabSheet;if(i){var f=i.getMeasures(),r=t.Object.column,u=t.Object.row,o=i.getCell(u,r),e=i.getSelection();i.rerenderDisable(),f.isColInsideVisibleRange(r)||i.scrollToColumn(r),f.isRowInsideVisibleRange(u)||i.scrollToRow(u),i.rerenderEnable(),i.rerender(),e&&e.select([o])}},u.prototype._ahu=function(i,r){var e=this,f=this._TabSheet,o=f.getMeasures(),u=[],h=this.getSource(),b=h.getMetadata();i=i||f.getRange(0,0,o.getLastRowIndex(),o.getLastColIndex());var s=this._bfT(),c=this._bfU(i),l=this._aVa(n.Mb.DrillMethodNumber.Up),a=this._aVa(n.Mb.DrillMethodNumber.Down),v=s.columnsDrill,y=s.rowsDrill,p=!r||r&&r.indexOf(t.DrillMethodNumber.Up)>-1,w=!r||r&&r.indexOf(t.DrillMethodNumber.Down)>-1;return i.eachCoord(function(t){var i=n.Mb.DrillMethodNumber.Restrict,o,s,k,h;if(c.some(function(n){return n.isCoordBelong(t)})){var d=y[t.rowIndex],g=v[t.colIndex],b=e._cD3(d,g),nt=e._ta(b);(!r||r&&n.Array.intersect(r,nt).length)&&(i+=b)}else p&&l.some(function(n){return n.isCoordBelong(t)})&&(i+=n.Mb.DrillMethodNumber.Up),w&&a.some(function(n){return n.isCoordBelong(t)})&&(i+=n.Mb.DrillMethodNumber.Down);return i!==n.Mb.DrillMethodNumber.Restrict&&(o=u[u.length-1],s=!1,o&&(k=o.range.getCorners(),h=k.trCoord,h.colIndex+1===t.colIndex&&h.rowIndex===t.rowIndex&&o.method===i&&(o.range.rightExpand(1),s=!0)),s||u.push({range:f.getCell(t.rowIndex,t.colIndex),method:i})),!0}),u},u.prototype._cD3=function(t,i){if(t===i)return t;if(t===n.Mb.DrillMethodNumber.Restrict||i===n.Mb.DrillMethodNumber.Restrict)return n.Mb.DrillMethodNumber.Restrict;var r=this._ta(t),u=this._ta(i),f=n.Array.uniq(r.concat(u));return f.reduce(function(n,t){return n+t},0)},u.prototype._bfV=function(t){var r,u,f,e,i=this._ta(t);return i.length?(i.indexOf(n.Mb.DrillMethodNumber.DownThrough)>-1&&(r=n.Mb.DrillMethod.DownThrough),i.indexOf(n.Mb.DrillMethodNumber.UpThrough)>-1&&(u=n.Mb.DrillMethod.UpThrough),i.indexOf(n.Mb.DrillMethodNumber.Down)>-1&&(r=n.Mb.DrillMethod.Down),i.indexOf(n.Mb.DrillMethodNumber.Up)>-1&&(u=n.Mb.DrillMethod.Up),i.indexOf(n.Mb.DrillMethodNumber.IntoFixed)>-1&&(f=n.Mb.DrillMethod.IntoFixed),i.indexOf(n.Mb.DrillMethodNumber.OutOfFixed)>-1&&(e=n.Mb.DrillMethod.OutOfFixed),{DownMethod:r,UpMethod:u,IntoFixedMethod:f,OutOfFixedMethod:e}):{DownMethod:"",UpMethod:"",IntoFixedMethod:"",OutOfFixedMethod:""}},u.prototype._ta=function(t){var r,u,i,f,e;for(t=t||0,r=window.Object.keys(n.Mb.DrillMethodNumber).slice(1,7).reverse(),u=[],i=0;i<r.length;i++)if((f=parseInt(r[i]),e=t-f,!(e<0))&&(u.push(f),t=e,t===0))break;return u},u.prototype._bOo=function(n){return n?[t.DrillMethodNumber.Up,t.DrillMethodNumber.OutOfFixed,t.DrillMethodNumber.UpThrough]:[t.DrillMethodNumber.Down,t.DrillMethodNumber.IntoFixed,t.DrillMethodNumber.DownThrough]},u.prototype._bfU=function(){return[]},u.prototype._aVa=function(){return[]},u.prototype._bfT=function(){return{columnsDrill:{},rowsDrill:{}}},u.prototype._cD4=function(n,t){if(!n&&!n)return!0;if(!n&&t||n&&!t)return!1;var i=n.getSelectedRanges(),r=t.getSelectedRanges();return this._bOp(i,r)},u.prototype._bOp=function(n,t){var i,r,f,u,e;if(n.length!==t.length)return!1;for(i=n.length,r=0;i--;)for(f=n[i],u=t.length;u--;)e=t[u],f.equals(e)&&r++;return r===n.length},u.prototype._bOq=function(t){var u,i,r,f,e;t&&(t=n.unescapeHTML(t),u=/javascript:<([^>]*)>$/,i=t.match(u),i)&&(r=i[1].trim(),f=r.match(/[^(;]*/)[0],n.getProperty(window,f.trim()))&&(e=new Function(undefined,"return "+r),e())},u.prototype._bOr=function(i){if(!this._au9&&i instanceof t.Metabase){var r=new n.Delegate(this._aFP,this);i.getCustomClasses("Root",undefined,r)}},u.prototype._aFP=function(t,i){var r="OpenCustomObResult.meta.classes.its.it";this._au9=n.getProperty(i.Response,r)||[]},u.prototype._cD1=function(n){var i=this._au9||[],t;return i.some(function(i){if(i.c===n)return t=i,!0}),t},u.prototype._a7=function(n,t){this._bfR&&this._bfR.ShowMenu&&r.prototype._a7.call(this,n,t),this._bfR=undefined},u.prototype.getIsAsync=function(){return this.getTabSheetDataSource()?this.getTabSheetDataSource().getIsAsync():this._IsAsync},u.prototype.setIsRTL=function(n){r.prototype.setIsRTL.call(this,n),this._TabSheet&&this._TabSheet.setIsRTL(n)},u.prototype.setEnabled=function(n){r.prototype.setEnabled.call(this,n),this._TabSheet&&this._TabSheet.setEnabled(n)},u.prototype.setIsAsync=function(n){this._IsAsync=n,this.getTabSheetDataSource()&&this.getTabSheetDataSource().setIsAsync(n),this._TabSheet&&this._TabSheet.loadVisibleRanges()},u.prototype.getEditMode=function(){return this._EditMode},u.prototype.setEditMode=function(n){this._EditMode!==n&&(this._EditMode=n,this._TabSheet&&(this._TabSheet.setIsEditable(n?1:0),this._TabSheet.setVisibleFillHandle(n>0)))},u.prototype.setReturnSelectionAfterFocus=function(n){this._ReturnSelectionAfterFocus=n,this._TabSheet&&this._TabSheet.setReturnSelectionAfterFocus(n)},u.prototype.getTabSheetViewState=function(){if(this._TabSheet){var n=this._TabSheet.getFirstVisibleColumn(),t=this._TabSheet.getFirstVisibleRow();return{size:{width:this._TabSheet.getVisibleWidth(),height:this._TabSheet.getVisibleHeight(),units:"DLU96"},leftColumn:n<0?0:n,topRow:t<0?0:t}}return null},u.prototype.isTabSheetViewStateEqual=function(n){var t=this.getTabSheetViewState();if(t===n)return!0;t=t||{},n=n||{};var u={width:0,height:0,units:"DLU96"},i=t.size||u,r=n.size||u,f=!1;return f=i.width===r.width&&i.height===r.height&&i.units===r.units,t.leftColumn===n.leftColumn&&t.topRow===n.topRow&&f===!0},u.prototype.setSize=function(n,t,i){var u=this._TabSheet;u&&u.beginUpdate(),r.prototype.setSize.call(this,n,t,i),this.updateSize(),u&&u.endUpdate()},u.prototype.updateSize=function(){var n,t,i;this._BeginUpdate||(this._TabSheetContainer.style.width=this.getWidth()+"px",this._TabSheetContainer.style.height=this.getHeight()+"px",n=this._TabSheet,n&&(t=this._aFK(),i=this._aFL(),n.setSize(t,i)))},u.prototype.beginUpdate=function(){this._BeginUpdate?this._BeginUpdate++:this._BeginUpdate=1},u.prototype.endUpdate=function(){!this._BeginUpdate||this._BeginUpdate<=1?(this._BeginUpdate=0,this.updateSize()):this._BeginUpdate--},u.prototype.setWidth=function(){r.prototype.setWidth.apply(this,arguments),this.updateSize()},u.prototype.setHeight=function(){r.prototype.setHeight.apply(this,arguments),this.updateSize()},u.prototype.clearSelection=function(){if(this._TabSheet){var n=this._TabSheet.getSelection();n&&n.clear()}},u.prototype.setScroll=function(n,t){switch(n){case"HorizontalScroll":this._TabSheet.getHScrollBar().setIsVisible(t);break;case"VerticalScroll":this._TabSheet.getVScrollBar().setIsVisible(t)}},u.prototype.getFocusedCell=function(){var n=this._TabSheet.getSelection();return n?n.getFocusedCoord():null},u.prototype.setTabSheetDataSource=function(n){n&&n.setIsAsync(this._IsAsync),this._TabSheet?this._TabSheet.setDataSource(n):this._TabSheetDataSource=n},u.prototype.getTabSheetDataSource=function(){return this._TabSheet?this._TabSheet.getDataSource():this._TabSheetDataSource},u.prototype.getTableSource=function(){return this.getTabSheetDataSource()},u.prototype.setNeedUpdateSelection=function(n){this._NeedUpdateSelection=n},u.prototype.getNeedUpdateSelection=function(){return this._NeedUpdateSelection},u.prototype.getSelection=function(){var n=this._TabSheet&&this._TabSheet.getSelection();return n&&n.toJSON()},u.prototype.setSelection=function(n){var l=arguments.length>1?arguments[1]:!0,s,h,e,i,c,r;if(n){var u=this._TabSheet,f=[],o,t=n.range.parts&&n.range.parts.it;for(t||(t=[n.range]),i=0,c=t.length;i<c;i++)s=t[i].top+t[i].height-1,h=t[i].left+t[i].width-1,e=u.getRange(t[i].left,t[i].top,h,s),e.isValid()&&f.push(e);n.focusedCell&&(o=u.getCoord(n.focusedCell.row,n.focusedCell.column)),r=u.getSelection(),r&&!this._bOp(r.getSelectedRanges(),f)&&(this.clearSelection(),r.select(f,undefined,o,this._NeedUpdateSelection))}},u.prototype.getSelectionType=function(){var n=this._TabSheet?this._TabSheet.getSelection():null;return n?n.getSelectionType():null},u.prototype.getRowsCount=function(){return this._TabSheet.getViewRange().Bottom+1},u.prototype.getChangedData=function(){return this._TabSheet.getChangedCells(this._avq)},u.prototype.getTabSheet=function(){return this._TabSheet},u.prototype.getFocused=function(){return this._TabSheet?this._DomNode===document.activeElement||this._TabSheet.getFocused():r.prototype.getFocused.call(this)},u.prototype.getDimEditorHelper=function(){return this._ahv||(this._ahv=new i.DimEditorHelper,this._ahv.SelectionChanging.add(this._bfS,this),this._ahv.SelectionChanged.add(this._qT,this)),this._ahv},u.prototype.getSearchDialog=function(){return this._TabSheet&&(this._SearchDialog?this._SearchDialog.setTabSheet(this._TabSheet):this._SearchDialog=new n.Ui.TabSearchDialog({TabSheet:this._TabSheet,IsRTL:this.getIsRTL(),Find:new n.Delegate(this._cD2,this)})),this._SearchDialog},u.prototype.getSyncLoadClipboardData=function(){return this._TabSheet?this._TabSheet.getSyncLoadClipboardData():this._SyncLoadClipboardData},u.prototype.setSyncLoadClipboardData=function(n){this._TabSheet||(this._SyncLoadClipboardData=n),this._TabSheet.setSyncLoadClipboardData(n)},u.prototype.undo=function(){this._TabSheet&&this._TabSheet.undoAll()},u.prototype.refreshAll=function(){this._Source?this._gz():this._TabSheet&&this._TabSheet.update()},u.prototype.isLoaded=function(){return!!this._TabSheet},u.prototype.getInstance=function(){return this._TabSheet},u.prototype.getDVSynchronizable=function(){return null},u}(i.SourceView);i.GridView=r})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this,n)||this;return t.getService(),t._bindEvents(),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._TypeService||(this._TypeService=n.Mb.PPService),this._Metabase=null},r.prototype._bindEvents=function(){},r.prototype._unBindEvents=function(){},r.prototype.getMetabase=function(){var i=this.getSource(),n=i&&i.getPPService();return n&&n instanceof t.BiService&&n.getMetabase()?n.getMetabase():this._Metabase},r.prototype.getService=function(){var n,t;return this._Service&&this._Service.isLive()||(n=this.getSource(),n&&(this._Service=n.getPPService()),this._Service&&this._Service.isLive()||(t=this.getMetabase(),t&&(this._Service=new this._TypeService({Metabase:t})))),this._Service},r.prototype.setService=function(n){this._Service!==n&&(this._Service&&this._Service.removeAllEvents(this),this._Service=n)},r.prototype.refresh=function(){throw new n.NotImplementedException(this);},r.prototype.getView=function(){return this._View},r.prototype.setView=function(n){this._View!==n&&(this._unBindEvents(),this._View=n,this._bindEvents())},r.prototype.getSource=function(){return this._View?this._View.getSource():this._Source},r.prototype.setSource=function(n){this._Source!==n&&(n&&(this._Service&&n.getMetabase()===this._Service.getMetabase()||(this._Service=new this._TypeService({Metabase:n.getMetabase()}))),this._Source=n)},r.prototype.dispose=function(){this._unBindEvents(),this._Service&&this._Service.removeAllEvents(this),delete this._Source,delete this._View,delete this._Service,delete this._TypeService,delete this._Metabase,i.prototype.dispose.call(this)},r}(n.Object);t.BaseCtrl=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._ChildEls={},this._Dims={},this._SelectedBreadcrumbAttributes=null,this._FilterFacts=[],this._AttrsFilterStates={}},i.prototype.getFilterFacts=function(){return this._FilterFacts},i.prototype.getChildEls=function(n){return this._ChildEls[n]},i.prototype.getDefaultOrderAttrs=function(){return this._DefaultOrderAttrs},i.prototype.setDefaultOrderAttrs=function(n){this._DefaultOrderAttrs=n},i.prototype.setChildEls=function(t,i){if(typeof t=="undefined"||t==null||!i)throw new n.ArgumentNullException(this);this._ChildEls[t]=i},i.prototype.clearEls=function(){this._ChildEls={}},i.prototype.setAttrProperty=function(n,t,i){var e,u,f,r;for(this.getAttributeById(n)[t]=i,e=this.getLevels(),u=0;u<e.length;u++)for(f=e[u].atts.its.it,r=0;r<f.length;r++)if(f[r].id==n){f[r][t]=i;break}},i.prototype.setAttrIncludeSelectedOnly=function(n,t){this.setAttrProperty(n,"includeSelectedOnly",t==!0)},i.prototype.getDimOdId=function(n){return{id:this.getOdId().id+"!"+n}},i.prototype.getDim=function(n){return this._Dims?this._Dims[n]:undefined},i.prototype.setDim=function(n,t){this._Dims[t]=n},i.prototype.getAttributes=function(){return n.getProperty(this._Metadata,"atts.its.it")},i.prototype.getAttributeById=function(n){var i=this.getAttributes(),t;if(i)for(t=0;t<i.length;t++)if(i[t].id===n)return i[t];return null},i.prototype.getOtherAttributes=function(n){for(var r=this.getAttributes(),f=[],u,i,t=0;t<r.length;t++){for(u=!0,i=0;i<n.length;i++)if(r[t].id==n[i]){u=!1;break}u&&f.push(r[t])}return f},i.prototype.clearDims=function(){for(var n in this._Dims)this._Dims[n].dispose();this._Dims={}},i.prototype.getLevels=function(){return n.getProperty(this._Metadata,"levs.its.it")},i.prototype.setLevels=function(t){n.setProperty(t,this._Metadata,"levs.its.it")},i.prototype.getFilterMode=function(){return n.getProperty(this._Metadata,"props.filterMode")},i.prototype.setFilterMode=function(n){this._Metadata.props||(this._Metadata.props={}),this._Metadata.props.filterMode=n},i.prototype.getWhereIsEmpty=function(){return n.getProperty(this._Metadata,"props.whereIsEmpty")},i.prototype.getLeafLoadExtent=function(){return n.getProperty(this._Metadata,"props.leafLoadExtent")},i.prototype.setLeafLoadExtent=function(n){this._Metadata.props||(this._Metadata.props={}),this._Metadata.props.leafLoadExtent=n},i.prototype.setSort=function(t,i,r,u){var h,o,e;if(!t)throw new n.ArgumentException(this,"metaAttrId is empty");for(var c=this.getAttributes(),l=this.getLevels(),s=[],f=0;f<c.length;f++)if(c[f].id===t){s.push(c[f]);break}for(f=0;f<l.length;f++)for(h=l[f].atts.its.it,o=0;o<h.length;o++)if(h[o].id==t){s.push(h[o]);break}for(f=0;f<s.length;f++)e=s[f],e.orderBy||(e.orderBy={}),e.orderBy.isActive=i,e.orderBy.descending=r,e.orderBy.attribute=u==null?undefined:{k:n.Mb.UINT32MAXVALUE,id:u}},i.prototype.getSelectedBreadcrumbAttributes=function(){return this._SelectedBreadcrumbAttributes},i.prototype.setSelectedBreadcrumbAttributes=function(n){this._SelectedBreadcrumbAttributes=n},i.prototype.getIsAttributeFilter=function(n){var t=!0;return n&&this._AttrsFilterStates&&(t=this._AttrsFilterStates[n],t==null&&(t=!0)),t},i.prototype.setIsAttributeFilter=function(n,t){n&&(this._AttrsFilterStates[n]=t)},i.prototype.setLevelsByAttributesIds=function(n){for(var r=[],u=[],e=[],t,i,o,s,h,f=0;f<n.length;f++)o=this.getAttributeById(n[f]),o&&r.push(JSON.parse(JSON.stringify(o)));for(u=JSON.parse(JSON.stringify(this.getOtherAttributes(n))),t=0;t<r.length;t++)i=t+1,r[t].levKey=i,s={k:i,vis:!0,atts:{its:{it:[r[t]]}}},e.push(s);if(u.length>0){for(i=r.length+1,t=0;t<u.length;t++)u[t].levKey=i;h={k:i,vis:!0,atts:{its:{it:u}}},e.push(h)}this.setLevels(e)},i}(n.Mb.Object);i.MAXLEAFLOADEXTENT=65536,t.MetaHierarchy=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["MetadataChanged"]),this._Source=null,this._DataView=null},i.prototype._auW=function(){var t=this._DataView,i;if(t)for(i=t.length-1;i>=0;i--)t[i].isLive()||n.Array.removeItem(t,t[i])},i.prototype._aS=function(n,t){var i,r,u;if(this.MetadataChanged.fire(this,t),i=this._DataView,i){for(this._auW(),this._DVLockNextUpdate=i.length,r=0,u=i.length;r<u;r++)i[r].refreshView(t)||this._DVLockNextUpdate==undefined||this._DVLockNextUpdate--;this._DVLockNextUpdate<=0&&delete this._DVLockNextUpdate,this._auX=t.getId()}},i.prototype._vz=function(n,t){this._DVLockNextUpdate!=undefined?--this._DVLockNextUpdate<=0&&delete this._DVLockNextUpdate:t.getId?this._auX!=t.getId()&&(this.refresh(t),this._auX=t.getId()):this.refresh(t)},i.prototype._oi=function(t,i){var r=i.Args.Callback;r&&(r instanceof n.Delegate?r.fire(this):i.Args.A&&r.apply?r.apply(this,i.Args.A):r.call&&r.call(this))},i.prototype._cD5=function(t,i,r){return t&&n.ScriptManager.loadScript(t,new n.Delegate(this._oi,this,{Callback:i,A:r}))},i.prototype.getSource=function(){return this._Source},i.prototype.setSource=function(n){this._Source=n},i.prototype.setDataView=function(t,i){var r,u,f;if(i=i!==!1,(!t||i)&&(n.callEach(this._DataView,"removeAllEvents",this),this._DataView=[]),t){for(t=n.toArray(t),this._auW(),r=n.toArray(this._DataView)||[],u=0;u<t.length;u++)f=t[u],r.indexOf(f)==-1&&(r.push(f),f.Refreshed.add(this._vz,this));this._DataView=r}},i.prototype.getDataView=function(){return this._DataView},i.prototype.getOptions=function(){return this._Source&&this._Source.getMetadata()},i.prototype.dispose=function(){delete this._DataView,t.prototype.dispose.call(this)},i}(n.Ui.ProxyControl);t.BaseMasterView=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._CurrentUnit=n.Mb.TimeUnits.Minutes,this._PeriodValue=5,this._ResourceKey="arMenuDialog",this._Width=349,this._Height=115,this._defineEvents(["PeriodUnitChanged","PeriodValueChanged"])},i.prototype._render=function(){t.prototype._render.call(this);var i=[{Value:n.Mb.TimeUnits.Seconds,ResourceKey:"arUnitsSecondsMore",IsSelected:this._CurrentUnit===n.Mb.TimeUnits.Seconds},{Value:n.Mb.TimeUnits.Minutes,ResourceKey:"arUnitsMinutesMore",IsSelected:this._CurrentUnit===n.Mb.TimeUnits.Minutes},{Value:n.Mb.TimeUnits.Hours,ResourceKey:"arUnitsHoursMore",IsSelected:this._CurrentUnit===n.Mb.TimeUnits.Hours}],r=[new n.Ui.Label({ResourceKey:"arMenuDialogFormLabel",IsRTL:this.getIsRTL()}),this._PeriodEdit=new n.Ui.NumberEdit({Value:this._PeriodValue,MinValue:1,MaxValue:99,FractionCount:0,Width:80,IsRTL:this.getIsRTL(),ValueChanged:new n.Delegate(this._fS,this),Validate:new n.Delegate(this._cD6,this)}),this._PeriodUnits=new n.Ui.ComboBox({Width:130,IsRTL:this.getIsRTL(),ListBox:{Items:i,ItemSelected:new n.Delegate(this._cD7,this)}})];this._bM=new n.Ui.Panel({IsAbsolutePositioning:!1,ParentNode:this._DialogContentDomNode,Class:"PPPeriodDialogElemsPanel",Items:r})},i.prototype._cD7=function(n,t){this._CurrentUnit=t.ListItem.getValue(),this.PeriodUnitChanged.fire(this,{})},i.prototype._fS=function(n,t){this._PeriodValue=t.NewValue,this.PeriodValueChanged.fire(this,t)},i.prototype._cD6=function(){this._cD8=n.setTimeout(this._cD9,0,null,this)},i.prototype._cD9=function(){this.getOkButton().setEnabled(this._PeriodEdit.getValidState()),n.clearTimeout(this._cD8)},i.prototype.getPeriodValue=function(){return this._PeriodValue},i.prototype.getCurrentUnit=function(){return this._CurrentUnit},i.prototype.getPeriodEdit=function(){return this._PeriodEdit},i.prototype.getPeriodUnits=function(){return this._PeriodUnits},i.prototype.getDialogResult=function(){return{Value:this.getPeriodValue(),Unit:this.getCurrentUnit()}},i.prototype.setCurrentUnit=function(n){for(var i=this._PeriodUnits.getListBox().getItems(),t=i.length-1;t--&&i[t].getValue()!==n;);t>=0&&this._PeriodUnits.setSelectedIndex(t),this._CurrentUnit=n},i.prototype.setPeriodValue=function(n){var t=n<0?5:n;this._PeriodEdit.setValue(t),this._PeriodValue=t},i}(t.Dialog);t.PeriodDialog=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Width=200,this._PeriodValue=-1,this._PeriodUnit=n.Mb.TimeUnits.Minutes,this._defineEvents(["RefreshStateChanged","RefreshTimer"])},i.prototype._initFields=function(i){i=i||{},i.MarkChangedItem=i.MarkChangedItem||{},n.isDefined(i.HideMarkChangedItem)&&(i.MarkChangedItem.IsVisible=!i.HideMarkChangedItem),n.isDefined(i.MarkChangedResourceKey)&&(i.MarkChangedItem.ResourceKey=i.MarkChangedResourceKey),delete i.HideMarkChangedItem,delete i.MarkChangedResourceKey,t.prototype._initFields.call(this,i)},i.prototype.setRefresh=function(n,t){this.setMarkChangedRefresh(n),this.setPeriodicalRefresh(t)},i.prototype.setMarkChangedRefresh=function(n){var t=this.getViewerUpdateSettings();t.autoUpdateByData=n,this.setViewerUpdateSettings(t)},i.prototype.setPeriodicalRefresh=function(n){var t=this.getViewerUpdateSettings();t.updateByIntervalEnabled=n,n?t.updateByIntervalEnabled=this._PeriodicalRefreshState:this._PeriodicalRefreshState=this.getPeriodicalIntervalItem().getChecked(),this.setViewerUpdateSettings(t)},i.prototype.setPeriod=function(t,i){i||(i=n.Mb.TimeUnits.Minutes),n.isString(i)&&(i=n.Mb.TimeUnits[i]),this._PeriodValue=t,this._PeriodUnit=i},i.prototype.getPeriod=function(){return{Value:this._PeriodValue,Unit:this._PeriodUnit}},i.prototype.addPeriodicalItem=function(){},i.prototype.clearPeriodicalItems=function(){},i.prototype.getViewerUpdateSettings=function(){var t=this.getPeriod();return{updateByIntervalEnabled:this.getPeriodicalIntervalItem().getChecked(),autoUpdateByData:this.getMarkChangedItem().getChecked(),AutoUpdateInterval:t.Value,autoUpdateIntervalUnits:n.Mb.TimeUnits[t.Unit]}},i.prototype.setViewerUpdateSettings=function(t){this._aVb=!0,this.getPeriodicalDisableItem().setChecked(!t.updateByIntervalEnabled),t.AutoUpdateInterval>0?(this.getPeriodicalIntervalItem().setChecked(t.updateByIntervalEnabled),this.getPeriodicalIntervalItem().getIsVisible()||this.getPeriodicalIntervalItem().setIsVisible(t.updateByIntervalEnabled)):this.getPeriodicalIntervalItem().setIsVisible(!1),this.getMarkChangedItem().setChecked(t.autoUpdateByData),this.setPeriod(t.AutoUpdateInterval,n.Mb.TimeUnits[t.autoUpdateIntervalUnits]),this._aVb=!1},i.prototype.startPeriodicalTimer=function(){var i=this.getPeriod(),t=this._cEa(i);this.stopPeriodicalTimer(),this._bfW=n.setTimeout(this._cEb,t,{Interval:t},this)},i.prototype.stopPeriodicalTimer=function(){n.clearTimeout(this._bfW),delete this._bfW},i.prototype.getPeriodDialog=function(){var t=this.getPeriod();return this._PeriodDialog||(this._PeriodDialog=new n.Ui.PeriodDialog({HelpKey:this._HelpKey,OkButtonClicked:new n.Delegate(this._cEc,this),Opened:new n.Delegate(this._cEd,this),Closed:new n.Delegate(this._bfX,this)})),this._PeriodDialog.setCurrentUnit(t.Unit),this._PeriodDialog.setPeriodValue(t.Value),this._PeriodDialog},i.prototype.getMarkChangedItem=function(){return this._m2||this._cr(),this._MarkChangedItem},i.prototype.getPeriodicalDisableItem=function(){return this._m2||this._cr(),this._PeriodicalDisableItem},i.prototype.getPeriodicalIntervalItem=function(){return this._m2||this._cr(),this._PeriodicalIntervalItem},i.prototype._cr=function(){var i,r,u,f,e;this._m2||(i=this._Items||[],r={ResourceKey:"arMenuMarkChanged",ItemSelected:new n.Delegate(this._cR,this),CheckedChanged:new n.Delegate(this._cEe,this),Checked:!1,Data:"MarkChanged"},n.extend(r,this._MarkChangedItem,!0,!0),this._MarkChangedItem=new n.Ui.MenuItem(r),i.push(this._MarkChangedItem),i.push(new n.Ui.MenuHeader({ResourceKey:"arMenuPeriodicalHeader"})),u={LeftPartStyle:n.Ui.MenuItemLeftPartStyle.Radio,ResourceKey:"arMenuPeriodicalDisable",Data:"PeriodicalDisable",ItemSelected:new n.Delegate(this._cR,this),CheckedChanged:new n.Delegate(this._cEf,this),GroupName:"AutorefreshIntervals"},n.extend(u,this._PeriodicalDisableItem,!0,!0),this._PeriodicalDisableItem=new n.Ui.MenuItem(u),i.push(this._PeriodicalDisableItem),f={LeftPartStyle:n.Ui.MenuItemLeftPartStyle.Radio,Content:this._bfY(this.getPeriod()),ItemSelected:new n.Delegate(this._cR,this),CheckedChanged:new n.Delegate(this._cEg,this),Data:"Periodical",Visible:!1,Checked:!1,GroupName:"AutorefreshIntervals"},n.extend(f,this._PeriodicalIntervalItem,!0,!0),this._PeriodicalIntervalItem=new n.Ui.MenuItem(f),i.push(this._PeriodicalIntervalItem),e={ResourceKey:"arMenuPeriodicalCreateInterval",Data:"CreatePeriod",LeftPartStyle:n.Ui.MenuItemLeftPartStyle.Holder,ItemSelected:new n.Delegate(this._cR,this)},n.extend(e,this._CreatePeriodicalIntervalItem,!0,!0),this._CreatePeriodicalIntervalItem=new n.Ui.MenuItem(e),i.push(this._CreatePeriodicalIntervalItem),this._Items=i,t.prototype._cr.call(this))},i.prototype._cR=function(n,i){t.prototype._cR.call(this,n,i),i.MenuItem.getData()==="CreatePeriod"&&this.getPeriodDialog().show()},i.prototype._cEe=function(n){this._bfZ(n.getValue())},i.prototype._cEg=function(n){n.getChecked()&&!this._bfW&&(this.startPeriodicalTimer(),this._bfZ(n.getValue()))},i.prototype._cEf=function(n){n.getChecked()&&(this.stopPeriodicalTimer(),this._PeriodicalIntervalItem.setChecked(!1)),this._bfZ(n.getValue())},i.prototype._bfZ=function(t){if(!this._aVb){var i=this.getPeriod();this.RefreshStateChanged.fire(this,{MarkChangedRefreshState:this._MarkChangedItem.getChecked(),PeriodicalRefreshState:this._PeriodicalIntervalItem.getChecked(),PeriodData:{period:{value:i.Value,units:n.Mb.TimeUnits[i.Unit]}},ChangedState:t})}},i.prototype._ae=function(n,i){t.prototype._ae.apply(this,i),this._PeriodicalIntervalItem.setContent(this._bfY(this.getPeriod()))},i.prototype._cEb=function(n){n=n||{},n.Cancel=!1,this.RefreshTimer.fire(this,n),n.Cancel?this.stopPeriodicalTimer():this.startPeriodicalTimer()},i.prototype._cEd=function(){this._bOs=this.getViewerUpdateSettings(),this._aVb=!0,this.getPeriodicalIntervalItem().setChecked(!1),this._aVb=!1},i.prototype._bfX=function(){this._bOt||this.setViewerUpdateSettings(this._bOs),delete this._bOt,delete this._bOs},i.prototype._cEc=function(n,t){this.stopPeriodicalTimer(),this.setPeriod(t.DialogResult.Value,t.DialogResult.Unit),this._PeriodicalIntervalItem.setContent(this._bfY(this.getPeriod())),this._PeriodicalIntervalItem.setIsVisible(!0),this._PeriodicalIntervalItem.setChecked(!0),this._bOt=!0},i.prototype._cEa=function(t){var i=t.Value,r=t.Unit;switch(r){case n.Mb.TimeUnits.Hours:return i*36e5;case n.Mb.TimeUnits.Minutes:return i*6e4;case n.Mb.TimeUnits.Seconds:return i*1e3}return i},i.prototype._cEh=function(t){var u=t.Value,f=t.Unit,i="arUnitsMinutes",r;switch(f){case n.Mb.TimeUnits.Hours:i="arUnitsHours";break;case n.Mb.TimeUnits.Seconds:i="arUnitsSeconds";break;case n.Mb.TimeUnits.Minutes:default:i="arUnitsMinutes"}return r=u%10,i+=u%100>=10&&u%100<=19?"More":1===r?"One":2<=r&&4>=r?"Few":"More"},i.prototype._bfY=function(t){var r=t.Value,i=this._cEh(t),u=n.resourceManager.getString("arMenuPeriodicalItem","Content")||"";return i=n.resourceManager.getString(i,"Content")||"",u.replace("%VALUE%",r).replace("%UNITS%",i)},i}(t.Menu);t.AutoRefreshMenu=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["HieOpened","ElementsLoaded","MetadataChanged"]),this._LoadCountOnce=1e3,this._cEi=";"},r.prototype._avt=function(){return{atts:!0,levs:!0,props:!0,dimArg:{elsArg:{selectionInfo:!0,filter:{levels:0}},pattern:{getDescr:!0,getAttrs:!0,getLevs:!0,getHiers:!0,getGroups:!0,getSelection:!0}}}},r.prototype._bOu=function(t){for(var f=[],u=n.getProperty(t,"atts.its.it"),i,r=0;u&&r<u.length;r++)i=u[r],i.orderInDefaultHie!==-1&&(f[i.orderInDefaultHie]={Id:i.id,Key:i.k,Name:i.n});return f},r.prototype._ae=function(i,r){var e=r.Args.Hie,o=r.Response,s,f,u,h;if(e.setMetadata(o.OpenHieResult.meta),e.setOdId(o.OpenHieResult.id),s=this._bOu(o.OpenHieResult.meta),e.setDefaultOrderAttrs(s),o.OpenHieResult.meta)for(e.setLeafLoadExtent(t.MetaHierarchy.MAXLEAFLOADEXTENT),f=o.OpenHieResult.meta.atts.its.it,u=0;u<f.length;u++)h=new n.Mb.DimSource({Key:f[u].dim.k,Id:f[u].dim.id,Name:f[u].dim.n,OdId:e.getDimOdId(f[u].dim.k),PPService:new n.Mb.DimSrv({Metabase:this._Metabase}),Metadata:f[u].dimMeta}),e.setDim(h,f[u].k);this.HieOpened.fire(this,{Hierarchy:e})},r.prototype._cEj=function(t,i){for(var e=i.Args.Hier,f=i.Response.GetHieMembersResult,o=!f.notEof,r=null,r=typeof f.hms.m=="undefined"?[]:n.Array.isArray(f.hms.m)?f.hms.m:[f.hms.m],u=0;u<r.length;u++)r[u].key=r[u]["@isLeaf"]?r[u].f.k:f.parent.p!==""?f.parent.p+this._cEi+r[u].p:r[u].p?r[u].p:"rootNode";e.setChildEls(i.Args.ParentKey,r),this.ElementsLoaded.fire(this,{Hierarchy:e,ParentKey:i.Args.ParentKey,Nodes:r,Eof:o})},r.prototype._cEk=function(t,i){var h=i.Response,f=i.Args.Hier,e=h.GetHieMdResult.meta,o,u,r,s;if(f.getMetadata()||(o=this._bOu(e),f.setDefaultOrderAttrs(o)),f.setMetadata(e),e)for(f.setLeafLoadExtent(f.MAXLEAFLOADEXTENT),u=e.atts.its.it,r=0;r<u.length;r++)f.getDim(u[r].k)||(s=new n.Mb.DimSource({Key:u[r].dim.k,Id:u[r].dim.id,Name:u[r].dim.n,OdId:f.getDimOdId(u[r].dim.k),PPService:new n.Mb.DimSrv({Metabase:this._Metabase}),Metadata:u[r].dimMeta}),f.setDim(s,u[r].k))},r.prototype._cEl=function(n,t){var r=t.Args.Hier,i=t.Response;i=i.SetHieMdResult,i.meta&&r.setMetadata(i.meta),this.MetadataChanged.fire(this,i)},r.prototype.getRubPeriods=function(n,t){var i=this.getObjectOdId(n),r={OpenRub:{tObject:i,tArg:{args:{},metaGet:{period:!0}}}};this._h(r,t)},r.prototype.openFromRubOdId=function(t,i){var u={OpenHie:{tRub:{id:t},tArg:{args:{},metaGet:this._avt()}}},r=new n.Mb.MetaHierarchy({PPService:this});return i&&(i=new n.Delegate(i,{Hie:r})),i=this._s(i,new n.Delegate(this._ae,this,{Hie:r})),this._h(u,i),r},r.prototype.openFromRubKey=function(t,i){var u={OpenHie:{tArg:{args:{rubObj:this.getObjectOdId(t)},metaGet:this._avt()}}},r=new n.Mb.MetaHierarchy({PPService:this});return i&&(i=new n.Delegate(i,{Hie:r})),i=this._s(i,new n.Delegate(this._ae,this,{Hie:r})),this._h(u,i),r},r.prototype.getChildEls=function(t,i,r,u,f,e,o,s,h){var v=0,w=this._LoadCountOnce,a=undefined,c=!0,l=!0,y,p;if(!t)throw new n.ArgumentNullException(this);if((i==undefined||i==null)&&(i=""),v==null&&(v=0),(a==undefined||a==null)&&(a=""),c==null&&(c=undefined),c!=undefined&&(c=c===!0),l==null&&(l=undefined),l!=undefined&&(l=l===!0),r=!!r,u=!!u,h=!!h,!s){if(y=t.getChildEls(i),y){n.Delegate.fire(f,this,{ParentKey:i,Nodes:y});return}f=this._s(f,new n.Delegate(this._cEj,this,{Hier:t,ParentKey:i}))}p={GetHieMembers:{tHie:t.getOdId(),tArg:{parent:{p:i=="rootNode"?"":i.toString()},filter:{range:{start:v,count:w}},pattern:{attributes:a,getFacts:c,getAllFactAtts:!!e,getAttsTextValues:!!o,getHasChildrenState:l,getIsEmptyState:!0,includeRoot:r,getLeafOnly:h,getCountTotal:u}}}},this._h(p,f)},r.prototype.getMetadata=function(t,i){i=this._s(i,new n.Delegate(this._cEk,this,{Hier:t}));var r={GetHieMd:{tHie:t.getOdId(),tArg:{pattern:{atts:!0,levs:!0,props:!0}}}};this._h(r,i)},r.prototype.setMetadata=function(t,i){var u={SetHieMd:{tHie:t.getOdId(),tArg:{meta:{atts:{its:{it:t.getAttributes()}},levs:{its:{it:t.getLevels()}},props:{leafLoadExtent:t.getLeafLoadExtent(),whereIsEmpty:t.getWhereIsEmpty(),filterMode:t.getFilterMode()}},pattern:{atts:!0,levs:!0,props:!0},metaGet:{atts:!0,levs:!0,props:!0}}}},r,f,s,o,e;for(t.getFilterFacts().length>0&&(u.SetHieMd.tArg.meta.filterFacts={i:t.getFilterFacts()},u.SetHieMd.tArg.pattern.filterFacts=!0,u.SetHieMd.tArg.metaGet.filterFacts=!0),r=u.SetHieMd.tArg.meta.atts.its.it,f=0;f<r.length;f++)delete r[f].dimMeta,delete r[f].dim;for(s=u.SetHieMd.tArg.meta.levs.its.it,o=0;o<s.length;o++)for(r=s[o].atts.its.it,e=0;e<r.length;e++)delete r[e].dimMeta,delete r[e].dim;i=this._s(i,new n.Delegate(this._cEl,this,{Hier:t})),this._h(u,i)},r.prototype.setLevelsByAttributesIds=function(n,t,i){for(var u=[],s=[],e=[],o,r,h,c,f=0;f<n.length;f++)o=t.getAttributeById(n[f]),o&&u.push(o);for(s=t.getOtherAttributes(n),r=0;r<u.length;r++)h={k:r+1,vis:!0,atts:{its:{it:[u[r]]}}},e.push(h);c={k:u.length,vis:!0,atts:{its:{it:s}}},e.push(c),t.setLevels(e),this.setMetadata(t,i)},r.prototype.close=function(n,t){var i={CloseHie:{tHie:n.getOdId()}};this._h(i,t)},r}(t.BiService);t.HieService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.refreshAll(),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._ViewType=n.Ui.TreeList,this._defineEvents(["RequestChild","RequestChangeMetadata","NodeDblClick","RequestMetadata","PropertyChanged","SelectionChanged"]),this._Source=null,this._IncludeRoot=!1,this._ShowTotal=!1,this._IsGetAllFactAtts=!1,this._IsGetAttsTextValues=!1,this._ImagePath=n.ImagePath,this._IsBusy=!1,this._bf0=this._Enabled,this._ExpNodes={},this._FilterModeMenu=new n.Ui.Menu({ShowIcons:!0,Items:[{MenuItem:{Id:this._Id+"_NoFilterStr",GroupName:"PP.Mb.HieFilterMode",ResourceKey:"MbMetaAttributeTreeMenuHideNoFilter",Data:"None",Checked:!1}},{MenuItem:{Id:this._Id+"_EmptySeriesStr",GroupName:"PP.Mb.HieFilterMode",ResourceKey:"MbMetaAttributeTreeMenuHideEmptySeries",Data:"LightWeight",Checked:!1}},{MenuItem:{Id:this._Id+"_EmptySeriesAndFoldersStr",GroupName:"PP.Mb.HieFilterMode",ResourceKey:"MbMetaAttributeTreeMenuHideEmptySeriesAndFolders",Data:"All",Checked:!1}}]}),this._Menu=new n.Ui.Menu({ShowIcons:!0,Items:[{MenuItem:{ResourceKey:"MbMetaAttributeTreeMenuShowToolTip",Checked:!1}},{MenuItem:{ResourceKey:"MbMetaAttributeTreeMenuFilter",Menu:this._FilterModeMenu}}]})},i.prototype._initFields=function(i){i=i||{},typeof i.CheckBoxes=="undefined"&&(i.CheckBoxes=!1),typeof i.ShowLines=="undefined"&&(i.ShowLines=!0),typeof i.ShowToolTips=="undefined"&&(i.ShowToolTips=!1),i.CaptionVisible=!1,i.EmptySelection=!1,i.Draggable=!0,typeof i.IsCSMultiSelect=="undefined"&&(i.IsCSMultiSelect=!0,i.MultiSelect=!1),i.ImagePath&&(this._ImagePath=i.ImagePath),i.ImageList||(i.ImageList=new n.ImageList({Source:this._ImagePath+"hietreeicons.png",IconHeight:20,IconWidth:18})),t.prototype._initFields.call(this,i),this._Tree=this.getControl(),this._acQ()},i.prototype._acQ=function(){var n=this.getControl(),t;n.SelectionChanged.add(this._cS,this),n.BeforeExpand.add(this._cEm,this),n.DragStart.add(this._anI,this),n.DragEnd.add(this._anJ,this),n.ContextMenu.add(this._asZ,this),n.NodeDblClick.add(this._cEn,this),this._FilterModeMenu.ItemSelected.add(this._bf1,this),this._Menu.ItemSelected.add(this._e4,this),this._Menu.getItems().length>0&&(t=this._Menu.getItems()[0],t.setChecked(n.getShowToolTips()),t.Click.add(this._cEo,this))},i.prototype._cEn=function(n,t){if(!t.Node.getHasChild()){var i=[t.Node.getData()];this.NodeDblClick.fire(this,{SeriesData:i})}},i.prototype._cS=function(n,t){if(!t.Node.getHasChild()){var i=[t.Node.getData()];this.SelectionChanged.fire(this,{SeriesData:i})}},i.prototype._cEm=function(n,t){this._IsBusy||t.Node.getNodes().getCount()==0&&t.Node.getHasChild()&&(this._ExpNodes[t.Node.getKey()]=t.Node,this.RequestChild.fire(this,{ParentKey:t.Node.getKey()}))},i.prototype._avu=function(t,i){var r=t.n===""?t.p:t.n,u,f;return this._ShowTotal&&t.t&&(r+=" ("+t.t+")"),u=this._cEp(t,i),f=t.key==n.Mb.UINT32MAXVALUE?u:t.key,{Key:f,Columns:[n.String.escapeHTML(t.n)],HasChild:t.h==!0,ImageIndex:t["@isLeaf"]!=!0?0:t["@isEmpty"]==!0?3:2,Class:t["@isEmpty"]==!0?"PPHieEmptySerie":null,Expanded:!1,Text:n.String.escapeHTML(r),ToolTip:n.String.escapeHTML(r),Draggable:!1,Data:{Fact:t.h==!0?null:t.f,Path:u,IsFolder:t.h==!0}}},i.prototype._cEp=function(n,t){return!n.treeNode&&!t?n.p:t?t+";"+n.p:n.treeNode.Data.Path+";"+n.p},i.prototype._anI=function(t){var o=t.getControl(),u=o.getSelectedNodes(),f,r,e;if(u.length>0){for(f=[],r=0;r<u.length;r++)e=u[r].getData(),f.push(e);n.Ui.DragDrop.setData(f),typeof this._acR!="undefined"&&this._acR||(this._acR=document.body.style.cursor,document.body.style.cursor="not-allowed")}},i.prototype._anJ=function(){document.body.style.cursor=this._acR},i.prototype._aVc=function(n,t){for(var o=[],f={},i,r,u,s,e=0;e<n.length;e++)i=n[e],i.h&&(f[i.key]=i),t!==""?f[t]?(u=f[t].treeNode,u.Nodes||(u.Nodes=[]),i.treeNode=u,r=this._avu(i),i.treeNode=r,u.Nodes.push(r)):(r=this._avu(i,t),i.treeNode=r,o.push(r)):(s=this._avu(i),i.treeNode=s,o.push(s));return f=null,o},i.prototype._asZ=function(t,i){if(i.ShowMenu){var r=n.calculateMouseX(i.Event),u=n.calculateMouseY(i.Event);this._Menu.show(r,u)}},i.prototype._bf1=function(n,t){this._Source&&(this._Source.setFilterMode(t.MenuItem.getData()),this.RequestChangeMetadata.fire(this,{}))},i.prototype._e4=function(n,t){t.SelectedIndex==0&&this._Tree.setShowToolTips(!this._Tree.getShowToolTips())},i.prototype._cEo=function(n){this._Tree.setShowToolTips(n.getChecked())},i.prototype._tc=function(){var t,n,i;if(this._FilterModeMenu&&this._Source)for(t=this._FilterModeMenu.getItems(),n=0;n<t.length;n++)i=t[n].getData()==this._Source.getFilterMode(),t[n].setChecked(i)},i.prototype._bz=function(){this.refreshAll()},i.prototype.setChildNodes=function(n){var i,u,r,t,f;if(this._Source){if(i=this._Source.getChildEls(n),!i)throw new Error("nodes is undefined");if(u=i.length==0,r=this._aVc(i,n),n==="")this._ExpNodes=[],this._Tree.getNodes().loadFrom(r);else if(this._ExpNodes[n]){if(u){if(this._ExpNodes[n]._HasChild=!1,t=this._ExpNodes[n]._KnotDomNode,t&&t.className.length>0){f=t.className.charAt(t.className.length-1);switch(f){case"T":t.setAttribute("class","emptyT");break;case"L":t.setAttribute("class","emptyL");break;default:t.setAttribute("class","empty")}}}else this._ExpNodes[n].getNodes().loadFrom(r);delete this._ExpNodes[n]}}},i.prototype.refresh=function(t){t&&t instanceof n.Mb.Ui.PropertyChangedEventArgs&&this._bz(t)},i.prototype.refreshAll=function(){if(this._Source){var t=this._Tree.getColumns();t&&t.getCount()!==0||t.add(new n.Ui.TreeColumn({Caption:"",Visible:!0})),this._tc(),this.reload()}else this._Tree.getNodes().clear()},i.prototype.getSelectedNodes=function(){return this._Tree.getSelectedNodes()},i.prototype.getSelectedKey=function(){var n=this._Tree.getSelectedNodes();if(n&&n[0])return n[0].getKey()},i.prototype.reload=function(){this._Source&&(this._Source.clearEls(),this.RequestChild.fire(this,{ParentKey:"",IncludeRoot:this._IncludeRoot}))},i.prototype.getSource=function(){return this._Source},i.prototype.setSource=function(n){this._Source!==n&&(this._Source=n,this.refreshAll())},i.prototype.getIsBusy=function(){return this._IsBusy},i.prototype.setIsBusy=function(n){n=n==!0,n?this._IsBusy||(this._IsBusy=!0,this._bf0=this._Tree.getEnabled(),this._Tree.setEnabled(!1)):(this._Tree.setEnabled(this._bf0),this._IsBusy=!1)},i.prototype.setIsRTL=function(n){t.prototype.setIsRTL.call(this,n),this._Menu&&this._Menu.setIsRTL(n)},i.prototype.dispose=function(){delete this._Source,t.prototype.dispose.call(this)},i}(n.Ui.ProxyControl);t.HieTreeView=i,n.Object.defineProps(n.Mb.Ui.HieTreeView,["IncludeRoot","ShowTotal","IsGetAllFactAtts","IsGetAttsTextValues"],!0)})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(i){var r=function(r){function u(n){var t=r.call(this,n)||this;return t._render(),t}return __extends(u,r),u.prototype._e=function(){this._DropPanel=null,this._BreadcrumbItem=null,this._Hierarchy=null,this._DropClass="PPTreeComboDrop",this._IsRTL=!1,this._MultiSelect=!0,this._SyncDataSrv=!0,this._CaptionType=t.BreadcrumbItemCaptionType.SelectedCount,this._defineEvents(["PropertyChanged","ContentChanged","DimRootLoaded"])},u.prototype._render=function(){this._DropPanel||(this._DropPanel=new n.Ui.DropPanel),this._DropPanel.addClass(this._DropClass),this._DropPanelDiv=n.createElement(),this._DropPanel.setContent(this._DropPanelDiv);var r=new n.Mb.DimSrv({Metabase:this._Hierarchy.getMetabase()}),t=this._Hierarchy.getDim(this.getAttribute().k);this._Tree=new i.DimTree({Source:t,Id:t.getId()+"_Tree",Service:r,AutoLoad:!1,SelectionMode:this._MultiSelect===!0?n.Ui.TreeListSelectionMode.MultiSelect:n.Ui.TreeListSelectionMode.SingleSelect,MultipleAttributesEnabled:!0}),this._Tree.addToNode(this._DropPanelDiv),this._bindEvents(),this._DropPanel.setWidth(200),this.setIsRTL(this.getIsRTL())},u.prototype._bindEvents=function(){this._BreadcrumbItem.FilterClick.add(this._bOv,this),this._BreadcrumbItem.FilterClick.add(this._bOv,this),this._Tree.RequestSelection.add(this._bf2,this),this._Tree.SelectionChanged.add(this._qT,this),this._Tree.Refreshed.add(this._qU,this),this._DropPanel.Opened.add(this._cEq,this),this._DropPanel.Closed.add(this._cEr,this),this._DropPanel.SizeChanging.add(this._cF,this),this._DropPanel.SizeChanged.add(this._lK,this)},u.prototype._cEq=function(){this._Tree.updateSize(),this._Tree.loadFirst(),this._bf3=n.setTimeout(this._bf4,0,undefined,this)},u.prototype._bf4=function(){this._Tree.setFocus(),n.clearTimeout(this._bf3)},u.prototype._cEr=function(){if(this._IsDimChanged){var r=new i.PropertyChangedEventArgs({PropertyName:i.HieBreadcrumbPropertyType.DimSelectionChanged,Metadata:{Item:this}});this.PropertyChanged.fire(this,r),this._IsDimChanged=!1}this._Tree.getTextFilter()!==null&&this._Tree.setTextFilter(null)},u.prototype._bf2=function(){this._IsDimChanged=!1,this._BreadcrumbItem.getIsFilterOn()&&!this._BreadcrumbItem.getIsChecked()&&this._BreadcrumbItem.setIsChecked(!0),this._MultiSelect||this._DropPanel.hide()},u.prototype._dEz=function(){},u.prototype._dEA=function(){},u.prototype._qT=function(){if(this._DropPanel.getDroppedDown())this._IsDimChanged=!0,this.updateContent();else{var r=new i.PropertyChangedEventArgs({PropertyName:i.HieBreadcrumbPropertyType.DimSelectionChanged,Metadata:{Item:this}});this.PropertyChanged.fire(this,r)}},u.prototype._bOv=function(n,t){this._Hierarchy.setIsAttributeFilter(this.getAttribute().id,t.IsFilterOn)},u.prototype._aVd=function(n,t){this.DimRootLoaded.fire(this,{}),this._lK(n,t)},u.prototype._lK=function(){this._Tree.setSize(this._DropPanel.getWidth()-7,this._DropPanel.getHeight()-13)},u.prototype._cF=function(){var i=this._DropPanel.getHeight()-13,r=this._DropPanel.getWidth()-7;this._DropPanelDiv.style.width=r+"px",this._DropPanelDiv.style.height=i+"px",this._Tree.setSize(r,i)},u.prototype._qU=function(n,t){if(this._Tree){var r;switch(t.Type){case i.ElsTreeRefreshType.Content:r=new i.PropertyChangedEventArgs({PropertyName:i.HieBreadcrumbPropertyType.DimContentRefreshed,Metadata:{Item:this,NameAttrsId:this._Tree.getNameAttributesId()}}),this.PropertyChanged.fire(this,r);break;case i.ElsTreeRefreshType.Reload:case i.ElsTreeRefreshType.NewData:t.Changes&&(t.Changes.ActiveHierarchy!==undefined||t.Changes.ActiveGroup!==undefined||t.Changes.OrderBy!==undefined)&&(r=new i.PropertyChangedEventArgs({PropertyName:i.HieBreadcrumbPropertyType.DimReloaded,Metadata:{Item:this,Changes:t.Changes}}),this.PropertyChanged.fire(this,r))}}},u.prototype._dEB=function(t){var e=t.getItems(),r=this.getTree().getOrderBy(),u=null,f,i;for(r&&r.length>0&&(u=r[0][n.getFirstMember(r[0])]),f=0;f<e.length;f++){i=e[f];switch(i.getData().OrderType){case n.SortDirection.None:this._ab(i,!u);break;case n.SortDirection.Asc:this._ab(i,u===n.Mb.OrderBy.Asc);break;case n.SortDirection.Desc:this._ab(i,u===n.Mb.OrderBy.Desc)}}},u.prototype._ab=function(n,t){n.CheckedChanged.suspend(),n.setChecked(t),n.CheckedChanged.resume()},u.prototype.getMultiSelect=function(){return this._MultiSelect},u.prototype.getSyncDataSrv=function(){return this._SyncDataSrv},u.prototype.setSort=function(t){var i=n.SortDirection.None;switch(t){case n.SortDirection.Asc:i=n.SortDirection.Asc;break;case n.SortDirection.Desc:i=n.SortDirection.Desc;break;case n.SortDirection.None:i=n.SortDirection.None;break;default:throw new n.ArgumentException(this,"method has not correct value");}this._BreadcrumbItem.setOrderType(i)},u.prototype.setSelection=function(t){t=n.toArray(t),t.length>0?(this.getTree().deselectAll(),this.getTree().setSelectedElems(!0,t)):this.getTree().deselectAll(),this.updateContent(t.length)},u.prototype.getSelection=function(){return this.getTree().getSelectedNodes()},u.prototype.refreshSelection=function(){this.getTree().refreshSelection(),this.updateContent()},u.prototype.updateContent=function(t){var u=this._Tree.getSource(),i,f,r,o,e;u&&(i=t?t:this._SyncDataSrv?u.getSelectedCount():this._Tree.getSource().getSelectedCount(),f="",i>0&&(f=u.getFirstSelectedText()),r="",i==1&&this._SyncDataSrv&&(r=" = "+f),(i>1||i>0&&!this._SyncDataSrv)&&(this._SyncDataSrv&&this._CaptionType===n.Mb.BreadcrumbItemCaptionType.SelectedNames?(o=u.getLastSelectedText(),r=" ("+n.Ui.getComboCaption(f,o,undefined,i)+")"):(e=n.resourceManager.getString("TSMetaAttributeBCItemSelectedText"),r=!e||e.indexOf("{%COUNT%}")<0?" (Selected: "+i.toString()+")":e.replace(/{%COUNT%}/g,i.toString()))),this._BreadcrumbItem.setContent(n.String.escapeHTML(this.getAttribute().n+r)),r&&this.ContentChanged.fire(this,{}))},u.prototype.removeFromSelected=function(){this._Tree.deselectAll(),this._SyncDataSrv||this.updateContent()},u.prototype.getTree=function(){return this._Tree},u.prototype.getAttribute=function(){var n=this._BreadcrumbItem.getId();return this._Hierarchy.getAttributeById(n)},u.prototype.getAttributeId=function(){return this._BreadcrumbItem.getId()},u.prototype.getDropPanel=function(){return this._DropPanel},u.prototype.getIsRTL=function(){return this._IsRTL},u.prototype.setIsRTL=function(n){this._IsRTL=n,this._Tree.setIsRTL(n),this._DropPanel.setIsRTL(n)},u.prototype.dispose=function(){delete this._Hierarchy,r.prototype.dispose.call(this)},u}(n.Object);i.HieAttribute=r})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._dS(),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Hierarchy=null,this._Options=null,this._StorageKey="",this._ImagePath=n.ImagePath,this._MultiSelect=!0,this._SyncDataSrv=!0,this._ItemsCaptionType=n.Mb.BreadcrumbItemCaptionType.SelectedCount,this._MetaAttributes=new n.List,this._defineEvents(["RequestSelectedItemsChanged","DimRootLoaded","RequestMetadata","PropertyChanged","UsedRubricatorSelected","AttributePropertyChanged",]),this._SourceDiv=null,this._SourceDivBtn=null,this._SourceDropPanel=null,this._SourceListBox=null,this._UsedRubs=[],this._aVe={}},i.prototype._initFields=function(n){n=n||{},n.ImagePath&&(this._ImagePath=n.ImagePath,n.Control?n.Control.ImagePath||(n.Control.ImagePath=this._ImagePath):n.Control={ImagePath:this._ImagePath}),delete n.Items,delete n.DropPanels,delete n.CustomTopMenuItems,t.prototype._initFields.call(this,n)},i.prototype._fT=function(){return n.Ui.Breadcrumb},i.prototype._dS=function(){n.hide(this._Control.getDeleteButtonContainer());var t=n.querySelector(this._Control.getContentDomNode(),"li.PPBreadcrumb_Item");this._SourceDiv=n.createElement(t,"PPMbBreadcrumbSourceDiv"),this._SourceDivBtn=new n.Ui.ToolBarButton({ParentNode:this._SourceDiv,IsFlat:!0,IsRTL:this.getIsRTL(),Click:new n.Delegate(this._cEs,this)}),this._SourceDropPanel=new n.Ui.DropPanel({MaxWidth:n.Number.MAX_VALUE,MinWidth:50,MaxHeight:n.Number.MAX_VALUE,MinHeight:50,Width:200,Height:240,Class:"PPComboDropPanel",IsRTL:this.getIsRTL(),Opened:new n.Delegate(this._cEt,this),SizeChanging:new n.Delegate(this._cEu,this),SizeChanged:new n.Delegate(this._bOw,this),Closed:new n.Delegate(this._cEv,this)}),this._SourceDropPanelDiv=n.createElement(),this._SourceDropPanel.setContent(this._SourceDropPanelDiv),this._SourceListBox=new n.Ui.ListBox({ParentNode:this._SourceDropPanelDiv,IsRTL:this.getIsRTL(),ItemSelected:new n.Delegate(this._cEw,this)}),this._Control.getItems().Changed.add(this._aTc,this),this._Control.ItemClick.add(this._g0,this),this._Control.ItemFilterClick.add(this._cEx,this),this._Control.SelectedItemsChanged.add(this._avv,this),this._Control.ItemSortClick.add(this._cEy,this),this._Control.addClass("PPMbHieBreadcrumb"),this._Control.setCustomTopMenuItems([{PPType:n.Ui.MenuItem,ResourceKey:"MbMetaAttrBrCrMenuDefaultOrder",Click:new n.Delegate(this._cEz,this)}])},i.prototype._bz=function(){this.refreshAll()},i.prototype._bOx=function(){if(this._SourceListBox.clear(),this._SourceListBox.beginUpdate(),n.Array.isArray(this._UsedRubs)){for(var t=0;t<this._UsedRubs.length;t++)this._SourceListBox.addItem({Value:this._UsedRubs[t].Key,Content:n.escapeHTML(this._UsedRubs[t].Name),Data:JSON.parse(JSON.stringify(this._UsedRubs[t]))});this._SourceListBox.setSelectedIndex(0,!1)}this._SourceListBox.endUpdate()},i.prototype._aTc=function(t,i){var r,u,f;switch(i.Operation){case n.ListOperation.Add:r=this._Control.getItems().getCount()-1,i.Index===r&&(u=this._MetaAttributes.getItem(r).getDropPanel(),u.Closed.add(this._d3,this),f=this._Control.getItems().getItem(r),f.setData(u),u.setData(f))}},i.prototype._cEx=function(t,i){var u=i.Item,r=this.getMetaAttributeById(u.getId()),o;if(r){var f=r.getTree().getSource().getMetadata(),s=f?f.data.selection.selectedCount:0,e=s>0&&u.getIsFilterOn(),h=r.getAttribute().id;this._Hierarchy.setAttrIncludeSelectedOnly(h,e),o=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.DimReloaded,Metadata:{IsFilter:e}}),this.AttributePropertyChanged.fire(this,o)}},i.prototype._g0=function(n,t){var r=t.Item.getData(),i=t.Item;i.setIsChecked(!0,!1),this._bOy(r,i)},i.prototype._cEs=function(){this._SourceDivBtn.setIsChecked(!0,!1),this._bOy(this._SourceDropPanel,this._SourceDivBtn)},i.prototype._bOy=function(t,i){var s=i.getDomNode(),o,c,f;if(t.getDroppedDown())return t.hide(),!1;t.getEnableResizeTop()&&t.setEnableResizeTop(!1),this.getIsRTL()?(t.setEnableResizeRight(!1),t.setEnableResizeLeft(!0)):(t.setEnableResizeLeft(!1),t.setEnableResizeRight(!0));var r=t.isVisibleArea(0,0),h=n.calculateOffset(s),e=h.Y+s.offsetHeight+1,u=0;u=this.getIsRTL()?h.X+s.offsetWidth-r.Width+1:h.X-1,r=t.isVisibleArea(e,u),o=null,r.VisibleByHeight||(c=h.Y-r.Height,c>-1?(o=t.isVisibleArea(c,u),o.VisibleByHeight&&(e=c)):e=document.documentElement.clientHeight-r.Height>-1?document.documentElement.clientHeight-r.Height:0),r.VisibleByWidth||(this.getIsRTL()?(f=u+r.Width-s.offsetWidth-2,f>-1&&(o=t.isVisibleArea(e,f),o.VisibleByWidth&&(u=f))):(f=u+s.offsetWidth-r.Width+2,f>-1&&(o=t.isVisibleArea(e,f),o.VisibleByWidth&&(u=f)))),t.show(u,e)},i.prototype._d3=function(n){var i=n.getData();i.setIsChecked(!1,!1)},i.prototype._cEt=function(n,t){this._bOw(n,t)},i.prototype._cEu=function(){if(this._SourceDropPanel){var i=this._SourceDropPanel.getHeight()-9,r=this._SourceDropPanel.getWidth()-7;this._SourceDropPanelDiv.style.width=r+"px",this._SourceDropPanelDiv.style.height=i+"px"}},i.prototype._bOw=function(){this._SourceListBox&&this._SourceListBox.setSize(this._SourceDropPanel.getWidth()-7,this._SourceDropPanel.getHeight()-9)},i.prototype._cEv=function(){this._SourceDivBtn.setIsChecked(!1,!1)},i.prototype._cEw=function(n,t){var i=t.ListItem,r={RubKey:i.getValue(),RubName:i.getContent(),RubId:i.getData().RubId};this.UsedRubricatorSelected.fire(this,r),this._SourceDropPanel.hide()},i.prototype._avv=function(n,t){for(var r=this._Control.getSelectedItems(),u=[],i=0;i<r.getCount();i++)u.push(r.getItem(i).getId());t.Ids=u,this._bOz(),this._cEA(t)},i.prototype._cEy=function(t,i){var o=i.Item.getId(),e=i.Item.getOrderType(),r=!1,f=undefined,u=null;switch(e){case n.SortDirection.Asc:r=!0,f=!1,u=n.Mb.OrderBy.Asc;break;case n.SortDirection.Desc:r=!0,f=!0,u=n.Mb.OrderBy.Desc;break;case n.SortDirection.None:r=!1,u=n.Mb.OrderBy.Default;break;default:throw new n.ArgumentException(this,"args.OrderType has not correct value");}this._cEB(o,u,f,e,r)},i.prototype._cEB=function(t,i,r,u,f){var c=this._Hierarchy,e=this.getMetaAttributeById(t).getTree(),o=e.getNameAttributeId(),s,h;o==null&&(o=e.getPredefinedAttributeId()),s={},s[o]=i,e.setOrderBy([s]),c.setSort(t,f,r,o),h=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.DimReloaded,Metadata:{Sort:e.getOrderBy()}}),this.AttributePropertyChanged.fire(this,h)},i.prototype._cEC=function(t,i){var f,p=this._Hierarchy,r=t,u=r.getAttributeId(),e=i.getPropertyName(),w=i.getMetadata(),h,y;switch(e){case n.Mb.Ui.HieBreadcrumbPropertyType.DimSelectionChanged:h=r.getTree().getSource().getSelectedCount(),f=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:e,Metadata:{MetaAttr:r,Dimension:r.getTree().getSource(),SelectedCount:h,MetaAttrId:u,IsFiltered:this._aVe[u].getIsFilterOn()}});break;case n.Mb.Ui.HieBreadcrumbPropertyType.DimReloaded:var b=r.getTree(),o=b.getOrderBy(),c,l=null;o&&o.length>0?(l=n.getFirstMember(o[0]),c=o[0][l]):c=n.Mb.OrderBy.Default;var s=!1,a=undefined,v=n.SortDirection.None;switch(c){case n.Mb.OrderBy.Asc:s=!0,a=!1,v=n.SortDirection.Asc;break;case n.Mb.OrderBy.Desc:s=!0,a=!0,v=n.SortDirection.Desc;break;case null:case n.Mb.OrderBy.Default:s=!1,v=n.SortDirection.None;break;default:throw new n.ArgumentException(this,"method has not correct value");}p.setSort(u,s,a,l),f=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:e,Metadata:{MetaAttr:r,Changes:w.Changes,Dimension:r.getTree().getSource(),SelectedCount:h,MetaAttrId:u,IsFiltered:this._aVe[u].getIsFilterOn()}});break;case n.Mb.Ui.HieBreadcrumbPropertyType.DimContentRefreshed:y=i.getMetadata().NameAttrsId,p.setAttrProperty(t.getAttributeId(),"namingFormat",y),f=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:e,Metadata:{MetaAttr:r,NameAttrsId:y}})}this.AttributePropertyChanged.fire(this,f)},i.prototype._cED=function(){this.updateSize()},i.prototype._bf5=function(n){this.DimRootLoaded.fire(this,{MetaAttribute:n})},i.prototype._ij=function(t){var u=[],f,i,e,o,r,h,s;if(this._Options)for(e=this._Options.getItems(),i=0;i<t.length;i++){for(o=!1,r=0;r<e.length;r++)if(e[r].DATA==t[i].Key){u.push(e[r]),o=!0;break}o||(f={NAME:t[i].Name,DATA:t[i].Key},u.push(f))}else for(this._Options=new n.Mb.HieBrCrOptionParser,i=0;i<t.length;i++)f={NAME:t[i].Name,DATA:t[i].Key},u.push(f);this._Options.setItems(u),h=this._Options.getXML(),s=window.sessionStorage,s&&this.getStorageKey()&&s.setItem(this.getStorageKey(),h)},i.prototype._cEA=function(n){var r,u,t,i,f;if(!this._aFQ){for(r=this._Control.getSelectedItems(),u=[],t=0;t<r.getCount();t++)i=r.getItem(t),f=this._Hierarchy.getAttributeById(i.getId()).k,u[t]={Id:i.getId(),Name:i.getContent(),Key:f};this._ij(u),n.OptionsXMLStr=this._Options.getXML(),this.RequestSelectedItemsChanged.fire(this,n)}},i.prototype._cEz=function(){var i=this._Hierarchy,r;i&&(r=i.getDefaultOrderAttrs(),this.setSelectedAttributes(r))},i.prototype._bOz=function(){for(var u=this._Control.getSelectedItems(),n,r,i,t=0;t<this._MetaAttributes.getCount();t++){for(n=this._MetaAttributes.getItem(t),r=!1,i=0;i<u.getCount();i++)if(u.getItem(i).getId()==n.getAttributeId()){r=!0;break}r||n.getTree().getSource().getSelectedCount()>0&&(this._Hierarchy.setAttrIncludeSelectedOnly(n.getAttributeId(),!1),n.removeFromSelected())}},i.prototype.setSelectedSource=function(n){this._SourceListBox.setValue(n,!1)},i.prototype.refresh=function(t){var e,h,w,i,c,o,s,nt,tt,f,b,u,l,a,v,y,r,it,p,k,rt,d;if(t&&t instanceof n.Mb.Ui.PropertyChangedEventArgs)return this._bz(t);if(this._Hierarchy){for(this._Control.SelectedItemsChanged.suspend(),e=this._Hierarchy.getAttributes(),h=this._Control.getItems(),h.clear(!0),w={},i=0;i<this._MetaAttributes.getCount();i++)if(c=this._MetaAttributes.getItem(i),c.getAttribute()){var ut=c.getAttribute().id,g=c.getTree(),ft={OrderBy:g.getOrderBy(),NameAttrsId:g.getNameAttributesId()};w[ut]=ft}if(this._MetaAttributes.clear(),e){for(i=0;i<e.length;i++)o=e[i].id,s=new n.Ui.BreadcrumbItem({ImagePath:this._ImagePath,Id:o,Content:n.String.escapeHTML(e[i].n),ToolTip:""}),this._aVe[o]=s,nt=this._Hierarchy.getIsAttributeFilter(o),s.setIsFilterOn(nt),tt=new n.Ui.DropPanel({MaxWidth:n.Number.MAX_VALUE,MinWidth:50,MaxHeight:n.Number.MAX_VALUE,MinHeight:50,Width:200,Height:240}),f=new n.Mb.Ui.HieAttribute({BreadcrumbItem:s,DropPanel:tt,Hierarchy:this._Hierarchy,IsRTL:this.getIsRTL(),SyncDataSrv:this._SyncDataSrv,CaptionType:this._ItemsCaptionType,MultiSelect:this._MultiSelect}),f.PropertyChanged.add(this._cEC,this),f.ContentChanged.add(this._cED,this),f.DimRootLoaded.add(this._bf5,this),b=f.getTree(),u=w[o],u&&(u.OrderBy!=null||u.NameAttrsId!=null)&&(u.OrderBy!=null&&b.setOrderBy(u.OrderBy),u.NameAttrsId!=null&&b.setNameAttributesId(u.NameAttrsId,!1)),this._MetaAttributes.add(f),h.add(s);if(l=this._Control.getSelectedItems(),l.clear(!1),a=window.sessionStorage,a&&this.getStorageKey()&&(this._Options?a.setItem(this.getStorageKey(),this._Options.getXML()):(v=a.getItem(this.getStorageKey()),(v||v==="")&&(this._Options=new n.Mb.HieBrCrOptionParser({XML:v})))),y={Ids:[]},this._Options)for(i=0;i<this._Options.getItems().length;i++){for(it=this._Options.getItems()[i],r=null,p=0;p<this._MetaAttributes.getCount();p++)if(k=this._MetaAttributes.getItem(p),rt=k.getAttribute().k+"",rt==it.DATA){r=this._aVe[k.getAttributeId()];break}r&&(l.add(r),this.getMetaAttributeById(r.getId()).updateContent(),y.Ids.push(r.getId()))}else for(d=this._Hierarchy.getDefaultOrderAttrs(),i=0;i<d.length;i++)r=h.findById(d[i].Id),l.add(r),y.Ids.push(r.getId());this._bOx(),this._bOz(),this._Control.SelectedItemsChanged.resume(),this._aFQ||this.RequestSelectedItemsChanged.fire(this,y),delete this._aFQ}}},i.prototype.refreshAll=function(){this.refresh()},i.prototype.refreshSelectedAttributes=function(){for(var i=[],r=this._Hierarchy,u=r.getLevels(),f=r.getSelectedBreadcrumbAttributes(),t,n=0;n<u.length;n++){if(f!=null&&n>=f.length)break;t=u[n].atts.its.it,t.length>0&&i.push({Id:t[0].id,Key:t[0].k,Name:t[0].n})}this._aFQ=!0,this.setSelectedAttributes(i)},i.prototype.refreshSelections=function(){for(var n=0;n<this._MetaAttributes.getCount();n++)this._MetaAttributes.getItem(n).refreshSelection()},i.prototype.setSelectedAttributes=function(n){this._ij(n),this.refresh()},i.prototype.getMetaAttributeById=function(n){for(var i,t=0;t<this._MetaAttributes.getCount();t++)if(i=this._MetaAttributes.getItem(t),i.getAttributeId()===n)return i;return null},i.prototype.updateItemContent=function(n){var t=this.getMetaAttributeById(n);t.updateContent()},i.prototype.setSourcesCaption=function(t){this._SourceDiv.style.width="",this._SourceDivBtn.setWidth(""),this._SourceDivBtn.setContent(n.escapeHTML(t)),this._Control.updateSize()},i.prototype.updateSourcesCaptionSize=function(){this._SourceDiv.offsetWidth>140?(this._SourceDivBtn.setWidth(124),this._SourceDiv.style.width="124px"):(this._SourceDiv.style.width="",this._SourceDivBtn.setWidth(""))},i.prototype.getHierarchy=function(){return this.getSource()},i.prototype.setHierarchy=function(n){this.setSource(n)},i.prototype.getSource=function(){return this._Hierarchy},i.prototype.setSource=function(n){this._Hierarchy!==n&&(this._MetaAttributes.clear(!0),this._Control&&(this._aFQ=!0,this._Control.getSelectedItems().clear(!0),delete this._aFQ),this._Hierarchy=n,this.refreshAll())},i.prototype.setIsRTL=function(n){t.prototype.setIsRTL.call(this,n);for(var i=0;i<this._MetaAttributes.getCount();i++)this._MetaAttributes.getItem(i).setIsRTL(this.getIsRTL());this._SourceDivBtn.setIsRTL(n),this._SourceDropPanel.setIsRTL(n),this._SourceListBox.setIsRTL(n)},i.prototype.getOptions=function(){return this._Options},i.prototype.setOptions=function(n){this._Options=n},i.prototype.getStorageKey=function(){return this._StorageKey},i.prototype.setStorageKey=function(n){this._StorageKey=n},i.prototype.getMetaAttributes=function(){return this._MetaAttributes},i.prototype.getUsedRubs=function(){return this._UsedRubs.slice(0)},i.prototype.setUsedRubs=function(n){this._UsedRubs=n.slice(0),this._bOx()},i.prototype.dispose=function(){delete this._Hierarchy,this._Control.getItems().Changed.remove(this._aTc,this),this._Control.ItemClick.remove(this._g0,this),this._Control.SelectedItemsChanged.remove(this._avv,this),t.prototype.dispose.call(this)},i}(n.Ui.ProxyControl);t.HieBreadcrumbView=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.getSource()&&(i.getSource().getMetadata()?i._View.refreshAll():i._Service.HieOpened.add(i._anK,i)),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._TypeService=n.Mb.HieService,this._defineEvents(["RequestSetBreadcrumbOptions","SelectedItemsChangedComplete"])},i.prototype._bindEvents=function(){this._View&&(this._View.RequestSelectedItemsChanged.add(this._cEE,this),this._View.AttributePropertyChanged.add(this._cEF,this))},i.prototype._cEF=function(t,i){var f=i.getPropertyName(),r=i.getMetadata(),u;switch(f){case n.Mb.Ui.HieBreadcrumbPropertyType.DimSelectionChanged:if(u=r.SelectedCount>0,this.getSource().setAttrIncludeSelectedOnly(r.MetaAttrId,u),this._View.updateItemContent(r.MetaAttrId),this._View.getSource().getSelectedBreadcrumbAttributes().length==0&&r.MetaAttr)return}this._Service.setMetadata(this.getSource())},i.prototype._anK=function(n,t){t.Hierarchy===this.getSource()&&this._Service.HieOpened.remove(this._anK,this)},i.prototype._cEE=function(t,i){var r=this.getSource(),u=r.getMetadata();r.setSelectedBreadcrumbAttributes(i.Ids.slice()),this._Service.setLevelsByAttributesIds(i.Ids,r,new n.Delegate(this._aFR,this)),u.obInst&&(i.RubKey=u.obInst.obDesc.k),this.RequestSetBreadcrumbOptions.fire(this,i)},i.prototype._aFR=function(){this.SelectedItemsChangedComplete.fire(this,{})},i.prototype.getSource=function(){return t.prototype.getSource.call(this)},i}(t.BaseCtrl);t.HieBreadcrumbCtrl=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(i){var r=t.call(this,i)||this;return r._Ctrl=new n.Mb.HieBreadcrumbCtrl({View:r,Source:r._Hierarchy,Service:r._Service}),r}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Service=null},i.prototype.setSource=function(n){this._Ctrl.setSource(n),t.prototype.setSource.call(this,n)},i}(t.HieBreadcrumbView);t.HieBreadcrumb=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._DescriptionResourceKey="",this._LabelResourceKey="",this._Type="",this._InitValue=null,this._MinValueEdit=-999999999999999934463,this._MaxValueEdit=999999999999999934463,this._FractionCount=0},i.prototype._render=function(){t.prototype._render.call(this),new n.Ui.Label({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogDescriptionLable",ResourceKey:this._DescriptionResourceKey}),this._Type!="combined"?(this._bf6(),new n.Ui.Label({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogLable",ResourceKey:this._LabelResourceKey}),this._avw=new n.Ui.NumberEdit({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogNumberEdit",Width:"80px",Height:"20px",MinValue:this._MinValueEdit,MaxValue:this._MaxValueEdit}),this._avw.setFractionCount(this._FractionCount),this._avw.setValue(this._InitValue),this._avw.Validate.add(this._cEG,this),this._avw.Blur.add(this._bbB,this)):(this._InitValue==null&&(this._cEH=[{Value:10,Type:n.Exp.Ui.PvtParetoKind.Count,Background:"#20B8F2"},{Value:10,Type:n.Exp.Ui.PvtParetoKind.Count,Background:"#FF8F45"}]),this._anL=[],this._bM=new n.Ui.GridPanel({ParentNode:this._DialogContentDomNode}),this._anL[0]=this._bOA(0),this._anL[1]=this._bOA(1))},i.prototype._bOA=function(t){var i=this._cEH[t],u,f,o,e,r;return this._bf6(i.Type),u=new n.Ui.NumberEdit({Width:"60px",MinValue:this._MinValueEdit,MaxValue:this._MaxValueEdit}),u.setValue(i.Value),u.setFractionCount(this._FractionCount),f=new n.Ui.ComboBox({Width:"140px",Class:"PPRibbonDialogComboBox",ListBox:{Items:[{PPType:"ListItem",ResourceKey:"EaxTableParetoDialogPercent",Value:n.Exp.Ui.PvtParetoKind.Percent},{PPType:"ListItem",ResourceKey:"EaxTableParetoDialogNumber",Value:n.Exp.Ui.PvtParetoKind.Count},{PPType:"ListItem",ResourceKey:"EaxTableParetoDialogSumm",Value:n.Exp.Ui.PvtParetoKind.Sum}]}}),f.setValue(i.Type),f.ValueChanged.add(this._cEI,this,{rowId:t}),o=new n.Ui.CheckBox({Checked:!!i.Background}),o.CheckedChanged.add(this._as9,this,{rowId:t}),e=new n.Ui.ColorCombo({Class:"PPRibbonDialogColorCombo",Enabled:!1}),i.Background&&(e.setColor(i.Background),e.setEnabled(!0)),r={numEdit:u,comboBox:f,checkBox:o,colorCombo:e},this._bM.add(new n.Ui.Label({ParentNode:this._DialogContentDomNode,Class:"PPRibbonDialogLable",ResourceKey:this._LabelResourceKey[t]}),0,t),this._bM.add(r.numEdit,1,t),this._bM.add(r.comboBox,2,t),this._bM.add(r.checkBox,3,t),this._bM.add(new n.Ui.Label({ParentNode:this._DialogContentDomNode,ResourceKey:this._LabelResourceKey[2]}),4,t),this._bM.add(r.colorCombo,5,t),r},i.prototype._cEI=function(n,t){var i=t.Args.rowId;this._bf6(n.getValue()),this._anL[i].numEdit.setMinValue(this._MinValueEdit),this._anL[i].numEdit.setMaxValue(this._MaxValueEdit),this._anL[i].numEdit.setFractionCount(this._FractionCount)},i.prototype._as9=function(n,t){var i=t.Args.rowId;this._anL[i].colorCombo.setEnabled(t.CheckedState)},i.prototype._bf6=function(t){t||(t=this._Type);switch(t){case n.Exp.Ui.PvtParetoKind.Count:this._MinValueEdit=1,this._MaxValueEdit=999999999999999934463,this._FractionCount=0;break;case n.Exp.Ui.PvtParetoKind.Sum:this._MinValueEdit=-999999999999999934463,this._MaxValueEdit=999999999999999934463,this._FractionCount=2;break;case n.Exp.Ui.PvtParetoKind.Percent:this._MinValueEdit=0,this._MaxValueEdit=100,this._FractionCount=2}},i.prototype._cEG=function(n,t){t.IsValid?this._bOC(t.TextValue)?this._OkButton.setEnabled(!0):this._OkButton.setEnabled(!1):this._OkButton.setEnabled(!1)},i.prototype._bbB=function(){this._bOC(this._avw.getValue().toString())?this._OkButton.setEnabled(!0):this._OkButton.setEnabled(!1)},i.prototype._bOC=function(t){var i=t;switch(this._Type){case n.Exp.Ui.PvtParetoKind.Count:if(this._ng(i)=="int"&&parseInt(i)>0)return!0;break;case n.Exp.Ui.PvtParetoKind.Sum:if((this._ng(i)=="float"||this._ng(i)=="int")&&this._bOD(i)<=2)return!0;break;case n.Exp.Ui.PvtParetoKind.Percent:if((this._ng(i)=="float"||this._ng(i)=="int")&&parseFloat(i)>=0&&parseFloat(i)<=100&&this._bOD(i)<=2)return!0}return!1},i.prototype._bOD=function(n){for(var t=0;t<n.length;t++)if(n[t]==",")break;return n.length-t-1},i.prototype._ng=function(n){if(n=n.replace(/ /g,""),n=n.replace(/,/g,"."),!isNaN(parseFloat(n))){var t=n.toString();return/\./.test(t)?"float":"int"}return null},i.prototype._aN=function(){var r={Id:undefined,Type:undefined,FirstLastValue:undefined,EditBoxValue:undefined,IsCancelClose:!1},u,i;if(r.Id=this._Data,r.Id=="FirstLast")for(u=this._anL,r.FirstLastValue=[],r.Type="combined",i=0;i<u.length;i++)r.FirstLastValue[i]={Value:u[i].numEdit.getValue(),Type:u[i].comboBox.getValue(),Background:u[i].checkBox.getValue()?u[i].colorCombo.getValue().toString():null};else r.EditBoxValue=this._avw.getValue();this.OkButtonClicked.fire(this,r),this.close()},i.prototype._db=function(i,r){if(this._EnableEscapeClose&&r.Event.keyCode==n.Key.Esc){this.hide(),r.Event.preventDefault(),r.Event.stopPropagation(),this.CancelButtonClicked.fire(this,{IsCancelClose:!1});return}t.prototype._db.call(this,i,r)},i.prototype._gr=function(n,i){t.prototype._gr.call(this,n,i),this.CancelButtonClicked.fire(this,{IsCancelClose:!1})},i}(n.Ui.Dialog);t.ParetoDialog=i})(i=t.Ui||(t.Ui={}))})(t=n.Exp||(n.Exp={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(i){var r=function(i){function r(n){var t=i.call(this,n)||this;return t._bf8=[],t._bOE(),t._acM(),t._oa(),t._cEJ(),t.refresh(),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["PropertyChanged","MetadataChanged"]),this._ViewType=n.Ui.ListBox,this._Source=null,this._StyleSheetIds=[],this._StyleSheetType=null,this._StyleTags=null,this._AllowStyleCreate=!0,this._AllowStyleExport=!0,this._ActiveStyleArguments=[],this._IconItemHeight=50,this._IconItemWidth=104,this._ChartType="column"},r.prototype._initFields=function(n){n=n||{},n.Control=this._acN(n||{}),i.prototype._initFields.call(this,n)},r.prototype._acN=function(t){var i=n.extend({},t.Control,!0,!1),r={Orientation:n.Orientation.Horizontal,EmptySelection:!0};return i=n.extend(i,r,!0,!1)},r.prototype._bOE=function(){var t,i;if(this._vR=[],this._Source&&this._Source.isLive())for(this._StyleSheetType==null?(t=this._aFS([n.Mb.StyleSheetType.Predefined],this._StyleSheetIds,this._StyleTags),t=t.concat(this._aFS([n.Mb.StyleSheetType.InternalObject],this._StyleSheetIds,this._StyleTags)),t=t.concat(this._aFS([n.Mb.StyleSheetType.MetabaseObject],this._StyleSheetIds,this._StyleTags))):t=this._aFS([this._StyleSheetType],this._StyleSheetIds,this._StyleTags),i=0;i<t.length;i++)this._vR.push(this._bOF(t[i]))},r.prototype._bOF=function(t){var i=t.StyleMeta.resourceKey?t.StyleMeta.resourceKey:"",r=t.StyleMeta.name?t.StyleMeta.name:"",u=t.StyleMeta.preview?"data:image/png;base64,"+t.StyleMeta.preview:t.StyleMeta.previewURL,f=t.StyleMeta.tag.toUpperCase()==="CHART",e=t.StyleMeta.tag.toUpperCase()==="TAB",o=t.StyleMeta.preview&&e?" Internal":"";return new n.Ui.IconListItem({ImageUrl:f?"":u,ImageList:new n.ImageList({Source:u,IconHeight:this._IconItemHeight-2,IconWidth:this._IconItemWidth-2,IsRetinaAvailable:f}),Data:t,Width:this._IconItemWidth,ColumnIndex:t.StyleMeta.columnIndex||0,RowIndex:t.StyleMeta.rowIndex||0,Height:this._IconItemHeight,ResourceKey:i,Content:e?"":r,Style:"margin: 1px 0;",Class:this._cEK(i,r)+o})},r.prototype._cEK=function(n,t){var i="PPStyleSheetListBoxItem";return n&&(i+=" "+n),t&&(i+=" NamedStyle"),i+=" "+this._bOG()},r.prototype._bOG=function(){var n=this.getActiveStyleArguments()[0];return n.charAt(0).toUpperCase()+n.slice(1)},r.prototype._aFS=function(t,i,r,u){for(var p=!!i.length,w=!!t.length,l=!!r.length,e=this._Source.getStyleSheets(this._ChartType),a=[],v,h,s,c,o,y,f=0;f<e.length;f++)if(v=n.getProperty(e[f].getOdId(),"id"),h=e[f].getType(),(!w||t.indexOf(h)!==-1)&&(!p||i.indexOf(v)!==-1)&&(!u||h!==n.Mb.StyleSheetType.Predefined))for(s=e[f].getItems(),c=[],l&&(c=r.map(function(n){return n.toString().toUpperCase()})),o=0;o<s.length;o++)l&&c.indexOf(s[o].tag.toString().toUpperCase())===-1||(y=n.extend({},s[o]),t&&a.push({StyleSheet:e[f],StyleMeta:y}));return a},r.prototype._cEJ=function(){this._bf9=new n.Ui.MenuItem({ResourceKey:"MbCreateStyle",Click:new n.Delegate(this._cEL,this)}),this._bOH=new n.Ui.Separator,this._bga=new n.Ui.MenuItem({ResourceKey:"MbExportStyle",Click:new n.Delegate(this._cEM,this)})},r.prototype._acM=function(){this._aVf&&this._aVf.isLive()&&this._aVf.removeAllEvents(this),delete this._aVf,this._Source&&this._Source.isLive()&&(this._aVf=this._Source.getPPService())},r.prototype._oa=function(){this.getControl().ItemSelected.addOne(this._cEN,this)},r.prototype._bgb=function(){this._aFT&&(n.clearTimeout(this._aFT),delete this._aFT),this._aFT=n.setTimeout(this._cEO,0,null,this)},r.prototype._aEo=function(t){var r=t.getItems();r[0]instanceof n.Ui.ContentMenuItem&&t.removeItem(r[0],!1)},r.prototype._cEO=function(){var t,i,u,h,o,f,r,s,e,c;if(this._Source&&(t=this.getControl().getMenu(),(!t||!t.isLive())&&(this._AllowStyleExport||this._AllowStyleCreate)&&(t=new n.Ui.Menu({Class:"StyleSheetListBoxMenu "+this._bOG()})),t&&t.isLive())){if(t.Opening.addOne(new n.Delegate(this._aEo,this)),t.removeItem(this._bf9,!1),t.removeItem(this._bOH,!1),t.removeItem(this._bga,!1),t.clearItems(!0),this._bf8=[],this._AllowStyleExport){for(u=!1,r=0;!u&&this._vR&&r<this._vR.length;r++)h=this._vR[r].getData().StyleSheet,h.getType()!==n.Mb.StyleSheetType.Predefined&&(u=!0);this._bga.setEnabled(u),t.insertItem(this._bga,0)}for(this._AllowStyleCreate&&(t.insertItem(this._bf9,0),this._AllowStyleExport&&t.insertItemAfter(this._bOH,this._bf9)),this._bgc(n.Mb.StyleSheetType.MetabaseObject,t),this._bgc(n.Mb.StyleSheetType.InternalObject,t),this._bgc(n.Mb.StyleSheetType.Predefined,t),this._SelectedItemData=this._cEP(),o=this.getControl().getItems(),r=0;r<o.length;r++)i=o[r],i.Selected.suspend(),i.Deselected.suspend(),i.setSelected(this._bOI(i.getData())),i.Selected.resume(),i.Deselected.resume();for(f=t.getItems(),r=0;r<f.length;r++)if(f[r]instanceof n.Ui.ContentMenuItem)for(s=f[r].getContent().getItems(),e=0;e<s.length;e++)i=s[e],i.Selected.suspend(),i.Deselected.suspend(),i.setSelected(this._bOI(i.getData())),i.Selected.resume(),i.Deselected.resume();c=t.Closed.getCount(),this.getControl().setMenu(t),t.Closed.removeAt(c)}},r.prototype._bOI=function(t){var i=this._SelectedItemData.SheetType==n.Mb.StyleSheetType.Predefined;return(i&&parseInt(t.StyleMeta.id)===this._SelectedItemData.Key||!i&&t.StyleMeta.key===this._SelectedItemData.Key)&&t.StyleSheet.getType()===this._SelectedItemData.SheetType},r.prototype._bgc=function(t,i){for(var o=[],s="",h,f,r,c,l,e,u=0;u<this._vR.length;u++)f=this._vR[u].getData(),f.StyleSheet.getType()==t&&(h=this._bOF(f),o.push(h),this._bf8.push(h),t==n.Mb.StyleSheetType.MetabaseObject&&s==""&&(s=f.StyleSheet.getMetadata().name));o.length>0&&(r=this.getControl().getSettings(),delete r.Menu,delete r.Height,delete r.ImageList,delete r["@PPType"],delete r.Id,r.ImageList=this.getControl().getImageList(),r.Width=this.getControl().getWidth()-4,c=new n.Ui.ListBox(r),c.setItems(o),l=new n.Ui.ContentMenuItem({Content:c}),i.insertItem(l,0),e=n.resourceManager.getString("Content","StyleMenuHeader"+t),t==n.Mb.StyleSheetType.MetabaseObject&&(e=n.String.format(e,s)),i.insertItem(new n.Ui.MenuHeader({Content:e}),0))},r.prototype._cEN=function(t,i){var r,u=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.StyleOperation.Set,Metadata:i.ListItem.getData(),Callback:new n.Delegate(this._bgd,this)});r=i.ListItem.getData().StyleSheet.getType()==n.Mb.StyleSheetType.Predefined?i.ListItem.getData().StyleMeta.id:i.ListItem.getData().StyleMeta.key,this._SelectedItemData={Key:parseInt(r),SheetType:i.ListItem.getData().StyleSheet.getType()},this.PropertyChanged.fire(this,u)},r.prototype._cEL=function(){var r=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.StyleOperation.Create,Callback:new n.Delegate(this._bgd,this)});this.PropertyChanged.fire(this,r)},r.prototype._cEM=function(){var f={StyleTypes:[this._StyleSheetType],StyleTags:this._StyleTags},r=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.StyleOperation.Export,Metadata:f,Callback:new n.Delegate(this._bgd,this)}),u;this.PropertyChanged.fire(this,r),r.isCanceled()||(u=r.getMetadata(),this.exportStyles(u.StyleTypes,u.StyleTags,undefined,undefined))},r.prototype._bgd=function(t,i){var u=this._Source.getMetadata(),r=n.getProperty(u,"styleSheets.it[0].meta.items.it"),f=n.getProperty(u,"styleSheets.it[0].meta.type");r&&f&&this._SelectedItemData.Key==-1&&(this._SelectedItemData={Key:r[r.length-1].key,SheetType:f}),this.refresh(),this.MetadataChanged.fire(this,i)},r.prototype._td=function(){if(!this._Source)return null;var n=this._Source.getPPService();return n&&n instanceof t.BiService?n.getMetabase():null},r.prototype._cEQ=function(){var t,i;for(delete this._j9,t=this.getControl().getItems(),i=0;i<this._vR.length;i++)n.Array.removeItem(t,this._vR[i]),this._vR[i].dispose();this._bOE(),t=t.concat(this._vR),this.getControl().setItems(t),this._aVg(),this._bgb()},r.prototype._cEP=function(){var t={Key:-1,SheetType:-1},i;if(this.getActiveStyleArguments()&&this.getActiveStyleArguments()[0]){i=this._Source.getMetadata();switch(this.getActiveStyleArguments()[0]){case"grid":return(t.Key=this._cER(),n.isDefined(t.Key))?(t.SheetType=n.Mb.StyleSheetType.Predefined,t):(t.Key=n.getProperty(i,"grid.style.fixedCorner.ContainerInfo.@key")||n.getProperty(i,"grid.style.defaultStyle.ContainerInfo.@key"),t.SheetType=n.getProperty(i,"grid.style.fixedCorner.ContainerInfo.@sheetType")||n.getProperty(i,"grid.style.defaultStyle.ContainerInfo.@sheetType"),n.isDefined(t.Key)&&n.isDefined(t.SheetType),t);case"chart":t.Key=n.getProperty(i,"getChart.meta.hiChart.StyleContainer.@SCK"),t.SheetType=n.getProperty(i,"getChart.meta.hiChart.StyleContainer.@SCT");break;case"bubbleChart":t.Key=n.getProperty(i,"getBubbleChart.meta.md.BubbleChart.StyleContainer.@SCK"),t.SheetType=n.getProperty(i,"getBubbleChart.meta.md.BubbleChart.StyleContainer.@SCT");break;case"bubbleTree":t.Key=n.getProperty(i,"getBubbleTree.meta.md.BubbleTree.StyleContainer.@SCK"),t.SheetType=n.getProperty(i,"getBubbleTree.meta.md.BubbleTree.StyleContainer.@SCT");break;case"map":t.Key=n.getProperty(i,"getMapChart.meta.md.MapChart.StyleContainer.@SCK"),t.SheetType=n.getProperty(i,"getMapChart.meta.md.MapChart.StyleContainer.@SCT");break;case"treeMap":t.Key=n.getProperty(i,"getTreeMap.meta.md.TreeMap.StyleContainer.@SCK"),t.SheetType=n.getProperty(i,"getTreeMap.meta.md.TreeMap.StyleContainer.@SCT")}return n.isDefined(t.Key)&&n.isDefined(t.SheetType)?t:this._SelectedItemData||t}return this._SelectedItemData||t},r.prototype._cER=function(){var t,i=this._Source.getSelectedPart()||{};switch(i.part){case"Data":t="grid.style.internals.@PSI";break;case"Corner":t="grid.style.fixedCorner.@PSI";break;case"TopHeader":t="grid.style.topHeader.@PSI";break;case"LeftHeader":t="grid.style.leftHeader.@PSI";break;case"Table":default:t="grid.style.defaultStyle.@PSI"}return n.getProperty(this._Source.getMetadata(),t)},r.prototype._aVg=function(){var t,u,i,r,n,f,e;if(!this._j9&&this._Source&&this._Source.isLive())for(t=this._Source.getActiveStyle.apply(this._Source,this._ActiveStyleArguments||[]),u=[this._vR||[],this._bf8],i=0;i<u.length;i++)for(r=u[i],n=0;t&&n<r.length;n++)f=r[n].getData(),e=f.StyleSheet.getType()===t["@sheetType"]&&f.StyleMeta.key==t["@key"],r[n].setSelected(e,!1)},r.prototype.refresh=function(){this._j9&&(n.clearTimeout(this._j9),delete this._j9),this._j9=n.setTimeout(this._cEQ,0,null,this)},r.prototype.getSource=function(){return this._Source},r.prototype.getStyleSheetIds=function(){return this._StyleSheetIds},r.prototype.getStyleSheetType=function(){return this._StyleSheetType},r.prototype.getStyleTags=function(){return this._StyleTags},r.prototype.getAllowStyleCreate=function(){return this._AllowStyleCreate},r.prototype.getAllowStyleExport=function(){return this._AllowStyleExport},r.prototype.getActiveStyleArguments=function(){return this._ActiveStyleArguments},r.prototype.getChartType=function(){return this._ChartType},r.prototype.getControl=function(){return this._Control},r.prototype.setChartType=function(n){this._ChartType=n},r.prototype.setSource=function(n){this._Source!==n&&(this._Source=n,this.refresh())},r.prototype.setAllowStyleCreate=function(n){this._AllowStyleCreate!==!!n&&(this._AllowStyleCreate=!!n,this._bgb())},r.prototype.setAllowStyleExport=function(n){this._AllowStyleExport!==!!n&&(this._AllowStyleExport=!!n,this._bgb())},r.prototype.setStyleSheetType=function(n){this._StyleSheetType!==n&&(this._StyleSheetType=n,this.refresh())},r.prototype.setStyleSheetIds=function(t){t instanceof n.Array||(t=n.toArray(t)),this._StyleSheetIds!==t&&(this._StyleSheetIds=t,this.refresh())},r.prototype.setStyleTags=function(t){t instanceof n.Array||(t=n.toArray(t)),this._StyleTags!==t&&(this._StyleTags=t,this.refresh())},r.prototype.setActiveStyleArguments=function(n){this._ActiveStyleArguments!==n&&(this._ActiveStyleArguments=n,this._aVg())},r.prototype.exportStyles=function(t,i,r,u){var f=this._aFS(t,[],i,!0);f.length&&(r instanceof n.Mb.StyleSheet?this._bge(r,f,u,!1):this._bOJ(null,{Args:{ItemsDesc:f,Resolution:u}}))},r.prototype._bOJ=function(t,i){if(!n.Navigator){n.resourceManager.addToResourceList(["Navigator"],!0),n.scriptManager.loadScript(n.ScriptPath+"PP.Navigator.js",new n.Delegate(this._bOJ,this,i.Args)),n.scriptManager.loadStyle(n.ScriptPath+"PP.Navigator.css");return}var r=this._cES(i.Args);r.showDialog()},r.prototype._cES=function(t){var i=this._Source.getParentKey()||0;return new n.Navigator.MetabaseSaveDialog({OpenToKey:i,Metabase:this._td(),ShowEmptyFolder:!0,FiltersSet:[{Filters:[n.Mb.MetabaseObjectClass.KE_CLASS_STYLESHEET]}],Data:t,DefaultName:n.resourceManager.getString("mbStylesheetDefaultName","Content"),SaveAsObject:new n.Delegate(this._cET,this),Closed:new n.Delegate(this._cEU,this)})},r.prototype._cEU=function(n){n.dispose()},r.prototype._cET=function(t,i){var f=i.Name,e=i.Id,u=t.getData(),r=i.Object;r&&r.getClass()===n.Mb.MetabaseObjectClass.KE_CLASS_STYLESHEET?this._bOK(r,u):this._cEV(f,e,r||i.ParentMbObject,u)},r.prototype._cEV=function(t,i,r,u){var f=this._td();f.createObject(r?r.getKey():0,t||n.resourceManager.getString("Content","mbStylesheetDefaultName"),i||"",n.Mb.MetabaseObjectClass.KE_CLASS_STYLESHEET,!0,new n.Delegate(this._cEW,this,{ExportArgs:u}))},r.prototype._cEW=function(t,i){var u=i.Args.ExportArgs,f=n.getProperty(i.Response,"CreateObjectResult.object"),r=new n.Mb.Descriptor;r.fillDesc(f),this._bOK(r,u)},r.prototype._bOK=function(t,i){var r=new n.Mb.StyleSheetService({Metabase:this._td()}),u=r.openStyleSheet(t,{metaGet:{preview:!1}});this._bge(u,i.ItemsDesc,i.Resolution,!0)},r.prototype._bge=function(t,i,r,u){var f;if(t.getIsOpened()||t.getIsDataLoading())if(t.getIsDataLoading())n.setTimeout(this._bge.bind(this,t,i,r,u),0);else{var o={},s=[],e=void 0;for(f=0;f<i.length;f++)e=i[f].StyleSheet.getOdId().id,o[e]||(o[e]={StyleSheet:i[f].StyleSheet,CopyItems:[],StyleSheetItems:[],Status:n.Mb.StyleSheetExportStatus.NotStarted},s.push(o[e])),o[e].StyleSheetItems.push(i[f].StyleMeta),o[e].CopyItems.push({id:i[f].StyleMeta.id,resolution:r||null});this._bOL(t,s,u)}},r.prototype._bOL=function(t,i,r){for(var f=i.length,e,u=0;u<f;u++)if(e=u==f-1,i[u].Status===n.Mb.StyleSheetExportStatus.NotStarted&&this._bOM(t,i[u],r&&e),i[u].Status!==n.Mb.StyleSheetExportStatus.Finished){i[u].Status===n.Mb.StyleSheetExportStatus.InProgress&&n.setTimeout(this._bOL.bind(this,t,i,r),0);return}this._cEX(t,i,r)},r.prototype._cEX=function(t,i,r){r&&(t.getPPService().dispose(),t.dispose()),this.MetadataChanged.fire(this,new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.StyleOperation.Export,Metadata:i}))},r.prototype._bOM=function(t,i,r,u){var h=t.getItems(),e=i.CopyItems,o=t.getPPService(),c=this._td(),f,s;for(i.Status=n.Mb.StyleSheetExportStatus.InProgress,u=u||0,f=u;f<e.length;f++)if(e[f].resolution===null){for(s=0;s<h.length;s++)if(h[s].id==e[f].id){this._cEY(n.String.escapeHTML(i.StyleSheetItems[f].name),n.String.escapeHTML(h[s].name),{Resolution:null,Item:e[f],ApplyForAll:!1,StyleSheet:t,ExportObj:i,CloseAfter:r,Start:f+1});return}e[f].resolution=n.Mb.StyleSheetConflictResolutionType.Add}o=o||new n.Mb.StyleSheetService({Metabase:c}),o.beginBatch(),o.copyStyleSheet(i.StyleSheet,t,{items:e}),r?(c.saveObject(t),c.closeObject(t)):o.getStyleSheetMd(t,{pattern:{preview:!1}}),o.endBatch(!0,new n.Delegate(this._bgf,this,{ExportObj:i}))},r.prototype._cEY=function(t,i,r){var u=new n.Mb.Ui.StyleSheetDialog({Closed:new n.Delegate(this._cEZ,this),Data:r,SourceName:t,TargetName:i});u.show()},r.prototype._cEZ=function(i){var u=i.getData(),o,s,f,e;if(i.dispose(),u.Resolution==null)o=this._Source.getPPService(),o&&o instanceof t.BiService&&(s=o.getMetabase(),s.closeObject(u.StyleSheet)),u.ExportObj.Status=n.Mb.StyleSheetExportStatus.Canceled;else{if(u.ApplyForAll){for(f=u.ExportObj.CopyItems,e=0;e<f.length;e++)f[e].resolution=f[e].resolution||u.Resolution;u.Start=f.length}else u.Item.resolution=u.Resolution;this._bOM(u.StyleSheet,u.ExportObj,u.CloseAfter,u.Start)}},r.prototype._bgf=function(t,i){i.Args.ExportObj.Status=n.Mb.StyleSheetExportStatus.Finished},r.prototype.getItems=function(){return this.getControl().getItems()},r.prototype.dispose=function(){delete this._Source,this._aFT&&n.clearTimeout(this._aFT),this._j9&&n.clearTimeout(this._j9),i.prototype.dispose.call(this)},r}(n.Ui.ProxyControl);i.StyleSheetListBox=r})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),i=n.Mb.PPSrvMixin={},i.send=i._h=function(n,t,i,r,u){if(this._UseMbQueueRqts)return this._Metabase._h(n,t,i,r,u);if(this._BatchMode){this._BatchRequests||(this._BatchRequests=[]);var f={Body:n,Callback:t,ErrorCallback:i,ContentType:r};this._BatchRequests.push(f)}else this._s5(n,t,i,r,u)},i.beginBatch=function(t){this._beH=t,this._UseMbQueueRqts?this._Metabase.beginBatch(t):this._BatchMode?this._BatchMode++:(this._BatchMode=1,this._acK=new n.Delegate(null,this),this._anp=new n.Delegate(null,this))},i.endBatch=function(t,i,r){var o,e,u,c,l;if(t=t==undefined?!0:t,this._UseMbQueueRqts)return this._Metabase.endBatch(t,i,r);if(i&&this._acK.addOne(i),r&&this._anp.addOne(r),this._BatchMode=Math.max(this._BatchMode-1,0),!!this._BatchMode)return!1;if(o=!1,this._BatchRequests&&this._BatchRequests.length>0){var s={BatchExec:{tArg:{bIgnoreError:this._beH,its:{it:[]}}}},h=s.BatchExec.tArg.its.it,f=null;for(e=0;e<this._BatchRequests.length;e++){if(u=this._BatchRequests[e],u.ContentType&&f&&f!=u.ContentType)throw n.Exception("Batch elements has different content-type");h.push(u.Body),u.ContentType&&(f=u.ContentType)}t&&this._acK.insert(0,this._beG,this,{Elems:this._BatchRequests}),c=this._acK,l=this._anp,(o=h.length>0)&&this._s5(s,c,l,f)}return this._beF(),o},i._beF=function(){this._BatchMode=0,this._BatchRequests=[],delete this._acK,delete this._anp},i._beG=function(t,i){for(var e=n.getProperty(i.Response,"BatchExecResult.its.it")||[],s=i.Args.Elems,u,r=0;r<e.length;r++){if(u=s[r],!u)break;var f=e[r],o=JSON.stringify(e[r]),h=!!f.Error||!!n.getProperty(f,"detail.Error")||!!f.Fault;h?(u.ErrorCallback&&u.ErrorCallback.fire(t,{BatchElementIndex:r,Response:f,ResponseText:o}),this.Error.fire(this,{Response:f,ResponseText:o,bElementError:!0,BatchElementIndex:r},0)):u.Callback&&u.Callback.fire(t,{BatchElementIndex:r,Response:f,ResponseText:o})}},i.getIsBatchMode=function(){return this._UseMbQueueRqts?this._Metabase.getIsBatchMode():!!this._BatchMode},i=null,f=n.Mb.Ui.MetabaseTreeCombo=function(t){t&&t.MetabaseTreeList&&t.MetabaseTreeList instanceof n.Mb.Ui.MetabaseTreeList&&(t.TreeList=t.MetabaseTreeList.getControl()),this._MetabaseTreeList=null,f.base.constructor.call(this,t)},n.initClass(f,n.Ui.TreeCombo,"PP.Mb.Ui.MetabaseTreeCombo"),n.Object.defineProps(f,["MetabaseTreeList"]),t=f.prototype,t._dZ=function(n){this._MetabaseTreeList.findAndExpand(n)},t=null,function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Notes=[],this._OnlyOneColumn=!1,this._BackgroundColor=n.Color.white,this._BackgroundImage=null,this._Opacity=1,this._Font=new n.Font,this._UniqueNumber=!1,this._Height=100,this._Width=400,this._MaxCountTry=1e3,this._ahw=[]},i.prototype._initFields=function(i){i=i||{},i.BackgroundColor&&n.isString(i.BackgroundColor)&&(this._BackgroundColor=n.Color.getColor(i.BackgroundColor)),delete i.BackgroundColor,t.prototype._initFields.call(this,i)},i.prototype.getNotes=function(){return this._Notes},i.prototype.getOnlyOneColumn=function(){return this._OnlyOneColumn},i.prototype.getBackgroundColor=function(){return this._BackgroundColor},i.prototype.getFont=function(){return this._Font},i.prototype.getBackgroundImage=function(){return this._BackgroundImage},i.prototype.getUniqueNumber=function(){return this._UniqueNumber},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("PPFootNotes"),this._aG=new n.Ui.ScrollBox({Width:this._Width,Height:this._Height}),this.setContent(this._aG),this._bM=new n.Ui.GridPanel({Class:"PPFootNotesGridP"}),this._aG.setContent(this._bM),n.removeClass(this._bM.getDomNode(),"PPC"),this.beginUpdate(),this._cE0(),this.endUpdate()},i.prototype._cE0=function(){this.setFont(this._Font),this.setBackgroundColor(this._BackgroundColor),this._BackgroundImage&&this.setBackgroundImage()},i.prototype._avx=function(t){var r,i,e,u,f;if(this._bM&&!(this._BeginUpdate>0)){for((!this._ahx||t)&&(this._ahx=this._cE1()),r={r:this._ahx.length,c:1},this._OnlyOneColumn||(r=this._cE2()),i=0,e=this._ahx.length,this._bM.clear(!1),u=0;u<r.c;u++)for(f=0;f<r.r&&i<e;f++)this._bM.add(this._ahx[i],u,f),n.removeClass(this._ahx[i].getDomNode(),"PPC"),i++;this._aG.updateSize()}},i.prototype._cE2=function(){var t,c,v;if(this._ahw.length==0)return{r:0,c:0};var o=this.getWidth()-16,l=this.getHeight()-16,i=0,a=0,r=0,u=0,s=0,h=0,n=0,f=this._ahw,e=f.length;if(o>0&&l>0)while(s<o){while(h<l)if(h+=f[n].h,r<f[n].w&&(r=f[n].w),n++,i++,n>=e)break;if(u<i&&(u=i),h=0,i=0,a++,s+=r,r=0,n>=e)break}if(n<e||s>o){for(t={result:!1,r:u,c:0},c=0;!t.result;)if(v=t.r+1,t=this._cE3(v),c++,c>this._MaxCountTry)break;return t.result?{r:t.r,c:t.c}:{r:e,c:1}}return{r:u,c:a}},i.prototype._cE3=function(n){for(var o=this.getWidth()-16,r=0,s=0,i=0,u=0,t=0,f=this._ahw,e=f.length;u<o;){while(r<n)if(i<f[t].w&&(i=f[t].w),t++,r++,t>=e)break;if(r=0,u+=i,i=0,s++,t>=e)break}return{result:t>=e&&u<o,r:n,c:s}},i.prototype._cE1=function(){var i=null,t,s;this._ahx=[],this._ahw=[];var f={},r=-1,e=this._aG.getContentNode(),o=n.createElement(e,"PPTempFootNotes","div"),u="";for(t=0,s=this._Notes.length;t<s;t++)(r=this._Notes[t]["@N"],this._UniqueNumber&&f[r])||(u=this._Notes[t]["@CF"]?"style='font-family:"+this._Notes[t]["@CF"]+"'":"",i=new n.Ui.Label({Class:"PPNote",Content:"<sup "+u+">"+(this._Notes[t]["@CM"]||this._Notes[t]["@NT"])+"<\/sup>"+this._Notes[t]["@T"]}),this._ahx.push(i),r!=-1&&(f[r]=1),i.addToNode(o),n.removeClass(i.getDomNode(),"PPC"),this._ahw.push({w:i.getWidth(),h:i.getHeight()}));return e.removeChild(o),this._ahx},i.prototype.beginUpdate=function(){this._BeginUpdate?this._BeginUpdate++:this._BeginUpdate=1},i.prototype.endUpdate=function(){!this._BeginUpdate||this._BeginUpdate<=1?(this._BeginUpdate=0,this._avx(!0)):this._BeginUpdate--},i.prototype.setOpacity=function(n){this._Opacity!==n&&(t.prototype.setOpacity.call(this,n),this.setBackgroundColor(this._BackgroundColor))},i.prototype.setBackgroundColor=function(t){this._BackgroundColor=t instanceof n.Color?t:n.Color.getColor(t),this._BackgroundColor=this._BackgroundColor.brighter(this._Opacity*255),this.getDomNode().style.background=this._BackgroundColor.toString()},i.prototype.setBackgroundImage=function(n){var t,i,r;n&&(t=null,n["@CT"]&&n.$&&(t="url('data:image/"+n["@CT"]+";base64,"+n.$+"')"),t&&(this.getDomNode().style.background=t,i=null,r=null,n["@W"]&&(r=n["@W"]+"px"),n["@H"]&&(i=n["@H"]+"px"),i!=""&&r!=""&&(this.getDomNode().style.backgroundSize=i+" "+r)))},i.prototype.setFont=function(t){t instanceof n.Font&&(this._Font=t,this._aG&&this._Font&&(this._Font.applyToNode(this._aG.getContentNode()),this._avx(!0)))},i.prototype.setNotes=function(n){this._Notes=n,this._avx(!0)},i.prototype.setOnlyOneColumn=function(n){this._OnlyOneColumn!=n&&(this._OnlyOneColumn=n,this._avx())},i.prototype.setUniqueNumber=function(n){this._UniqueNumber!=n&&(this._UniqueNumber=n,this._avx(!0))},i.prototype.setIsRTL=function(n){t.prototype.setIsRTL.call(this,n),this._aG.setIsRTL(n),this._bM.setIsRTL(n)},i.prototype.getMinHeight=function(){return this._ahw&&this._ahw.length>0?this._ahw[0].h+2:0},i.prototype.setWidth=function(n){t.prototype.setWidth.apply(this,arguments),this._aG.setWidth(n)},i.prototype.setHeight=function(n){t.prototype.setHeight.apply(this,arguments),this._aG.setHeight(n)},i.prototype.updateSize=function(){t.prototype.updateSize.apply(this,arguments),this._avx()},i}(n.Ui.Control);t.FootNotes=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._ResourceKey="CustomDimNamingDialog",this._Source=null,this._ExampleData=null,this._CheckedAttributes=[],this._Expression="",this._MultipleAttributesSeparator=" | ",this._Width=500,this._Height=175,this._MinWidth=500,this._MinHeight=175,this._EnableResizeBottom=!0,this._EnableResizeLeft=!0,this._EnableResizeRight=!0,this._EnableResizeTop=!0},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("CustomDimNamingDialog"),this._PanelParent=new n.Ui.GridPanel({ParentNode:this._DialogContentDomNode,Class:"PanelParent",Items:[new n.Ui.Label({Class:"FullWidth PanelItem",Top:0,Left:0,ResourceKey:"CustomDimNamingLabelTemplate"}),new n.Ui.GridPanel({Top:1,Left:0,Class:"FullWidth PanelItem TemplatePanel",Items:[this._TemplateBox=new n.Ui.TextBox({Top:0,Left:0}),this._DimsButton=new n.Ui.Button({Top:0,Left:1,Class:"PanelItemRight DimsButton",ResourceKey:"CustomDimNamingInsertAttr",MenuArrowPosition:n.AnchorStyles.Right})]}),this._ExamplePanel=new n.Ui.GridPanel({Top:2,Left:0,Class:"FullWidth PanelItem",Items:[new n.Ui.Label({Top:0,Left:0,ResourceKey:"CustomDimNamingLabelExample"}),this._Example=new n.Ui.Label({Top:0,Left:1,Class:"PanelItemRight",Style:{Release:{Font:{IsItalic:!0}}}})]}),new n.Ui.LineLabel({Class:"PanelItem",Top:3,Left:0})]});var i=this._Source.getElem();!this._ExampleData&&i&&i.children&&i.children.length>0&&(this._ExampleData=i.children[0]),this._ExamplePanel.setIsVisible(!!this._ExampleData),this._TemplateBox.ValueChanged=new n.Delegate(this._cE4,this),this._cE5(),this._cE6(),this._cE7()},i.prototype._cE5=function(){var i,t,r;if(this._Source&&!this._Menu){for(this._Menu=new n.Ui.Menu({ImageList:new n.ImageList({Source:n.ImagePath+"/olap/olap_dims_datatypes.png",IconHeight:16,IconWidth:16}),CloseOnDocumentMouseDown:!0}),i=this._Source.getAttributes(),t=0;t<i.length;t++)i[t].vis&&(r={Content:n.String.format("{0} (%{1}%)",i[t].n,i[t].id),Data:i[t],RowIndex:0,ColumnIndex:i[t].dt-1},this._Menu.addItem(new n.Ui.MenuItem(r)));this._Menu.ItemSelected.addOne(this._e4,this),this._DimsButton.setMenu(this._Menu)}},i.prototype._cE6=function(){var t,n;if(this._Source&&this._Source.isLive())if(this._Expression)this._TemplateBox.setValue(this._Expression);else{for(t=[],n=0;n<this._CheckedAttributes.length;n++)t.push("%"+this._CheckedAttributes[n]+"%");this._TemplateBox.setValue(t.join(this._MultipleAttributesSeparator))}},i.prototype._cE8=function(){var t,i,r=[],u=this._Expression,f;if(this._ExampleData){for(i=/%([^%]+)%/g;t=i.exec(u);)t.length>1&&this._Source.getAttributeIndex(t[1])!=null&&(f=n.String.escapeHTML(this._ExampleData.a.it[this._Source.getAttributeIndex(t[1])]),r.push(f),u=n.String.replaceAll(u,t[0],"{"+(r.length-1)+"}"),i.lastIndex=i.lastIndex-(t[0].length-r.length-2)),i.lastIndex-=1;r.unshift(u),this._Example.setValue(n.String.format.apply(null,r))}this._bgg()},i.prototype._bgg=function(){var t=this.getWidth()-n.Ui.getMarginsWidth(this._PanelParent.getDomNode()),i;0>=t||(i=this._ExamplePanel.getItems()[0].getWidth(),this._Example.setWidth(t-i-10))},i.prototype._cE7=function(){this._DimsButton.setEnabled(!!this._Source&&this._Source.isLive())},i.prototype._lK=function(n,i){t.prototype._lK.call(this,n,i),this._bgg()},i.prototype._cE4=function(t,i){this._IsChanged=!0,this._Expression=n.String.escapeHTML(i.NewValue),!this._ExampleData||this._cE8()},i.prototype._e4=function(t,i){var u=this._MultipleAttributesSpaced?" "+this._MultipleAttributesSeparator+" ":this._MultipleAttributesSeparator,r=this._TemplateBox.getValue();r=r?r+u+n.String.format("%{0}%",i.MenuItem.getData().id):n.String.format("%{0}%",i.MenuItem.getData().id),this._TemplateBox.setValue(r)},i.prototype.getExpression=function(){return this._Expression},i.prototype.getSource=function(){return this._Source},i.prototype.getCheckedAttributes=function(){return this._CheckedAttributes},i.prototype.setSource=function(n){this._Source=n},i.prototype.setCheckedAttributes=function(n){this._CheckedAttributes=n},i.prototype.show=function(n,i,r,u){t.prototype.show.call(this,n,i,r,u),this._bgg()},i.prototype.dispose=function(){delete this._Source,t.prototype.dispose.call(this)},i}(n.Ui.Dialog);t.CustomDimNamingDialog=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(i){var r=t.call(this,i)||this;return r._render(),n.isTouch?r.Click.addOne(r._avy,r):r.DblClick.addOne(r._avy,r),r}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._CancelBlurNodes=[],this._IsMultiLanguage=!1,this._EnableEdit=!0,this._AllowLostFocus=!1,this._ShowControls=n.Mb.TriState.Undefined,this._DefaultMinHeight=20,this._defineEvents(["TextSelectionChanged","EditModeChanged","HyperlinkClick"]),this._OptFields=["HtmlText","HtmlTitle","Size","Visible","IsControl","AutoHeight","CustomFormat","TextAlignment","VerticalTextAlignment"],this._EditMode=!1,this._TitleNode=null,this._FormattedTitle=null,this._IsCancelBlurControlsMouseDown=!1,this._DropPanel=null,this._Text="",this._Title="",this._Font=null,this._TextColor="",this._BackgroundColor="",this._TextAlignment="",this._VerticalTextAlignment="",this._Visible=!0,this._IsControl=!1,this._AutoHeight=!0,this._CorrectHeight=!0,this._CustomFormat="",this._s4=this._DefaultMinHeight},i.prototype._render=function(){this._initFromHTML("<div class='PPGxTitle'><\/div>"),t.prototype._render.call(this),this._ParentNode&&this.addToNode(this._ParentNode)},i.prototype._h3=function(t,i){if(!this._EditMode){this._k(document.documentElement,"mousedown",this._h3);return}this._bgh=this._IsCancelBlurControlsMouseDown?n.Mb.TriState.OnOption:n.Mb.TriState.OffOption,this._IsCancelBlurControlsMouseDown=!1,this._TextEditor.getFocused()||t==this||this._bON(t,i),n.IsIE&&i.Event.srcElement.tagName==="CANVAS"&&i.Event.sourceElement.focus()},i.prototype._bgi=function(){this._IsCancelBlurControlsMouseDown=!0},i.prototype._avy=function(){if(this._EnableEdit){this._addEvent(document.documentElement,"mousedown",this._h3);for(var i=0;i<this._CancelBlurNodes.length;i++)this.bindCancelNode(this._CancelBlurNodes[i],!0);this.beginEdit()}},i.prototype._bON=function(){n.setTimeout(this._bgj,20,{},this)},i.prototype._bgj=function(){var u={Dirty:!1},r;if(this._bgh!=n.Mb.TriState.OnOption){if(this._bOO(),this._bgh==n.Mb.TriState.OffOption)for(u.Dirty=this.endEdit(),this._k(document.documentElement,"mousedown",this._h3),r=0;r<this._CancelBlurNodes.length;r++)this.unbindCancelNode(this._CancelBlurNodes[r])}else this._AllowLostFocus||this.setFocusToTextEditor();return u},i.prototype._bOO=function(){var n=this._TextEditor.getFormattedText();n=this._bOP(n),n=n.replace(/(&amp;\[\S*)(<\/span><span style="">)(\S*])/,"$1$3"),this._TitleNode=this._aVh(n),(n==""||this._TextEditor.getValue()=="")&&this._FormattedTitle&&(this._TitleNode.style.cssText=this._FormattedTitle.style.cssText)},i.prototype._bOQ=function(){this._bgh=n.Mb.TriState.Undefined,this._TranslateDialog=this.getTranslateDialog(),this._TranslateDialog.show()},i.prototype._bOR=function(t,i){var e={i:i.DialogResult.DisplayLanguages},o={it:new window.Array(e.i.length)},h=i.DialogResult.Translations,r,u,f,s;for(r in h)for(this._LocaleResourcesHtml[r]||(this._LocaleResourcesHtml[r]=this._bgk(this._TitleNode.outerHTML)),f=n.htmlToDOM("<span><\/span>"),s=n.htmlToDOM(this._LocaleResourcesHtml[r]),s.innerText=h[r],f.appendChild(s),r==n.getCurrentCulture().LCID&&this._TextEditor.setText(f.innerHTML),f.innerHTML=f.innerHTML.replace(/&nbsp;/g,""),u=0;u<e.i.length;u++)o.it[u]||(o.it[u]=""),e.i[u]==r&&(o.it[u]={"@v":f.innerHTML})},i.prototype._cE9=function(){this._TextEditor.getIsVisible()&&this._TextEditor.focus()},i.prototype._cFa=function(n){n.Self._TranslateDialog&&n.Self._TranslateDialog.getIsVisible()||n.Self._TextEditor.getDomNode().contains(document.activeElement)||n.Self._AllowLostFocus||n.Self._TextEditor.getTextArea().setFocus()},i.prototype._cFb=function(n,t){var r=t.FontSize+"",i=t;i.FontSize=r.indexOf("px")>-1?Math.round(parseInt(r)/96*72):parseInt(r),i.FontFamily=t.FontFamily.split(",")[0],i.VerticalAlignment=this._aFU(this._bOS()),this.TextSelectionChanged.fire(this,i)},i.prototype._aFV=function(t,i){var e,f;if(i.Element.className.match(/(?:\s+|^)Inactive(?:\s+|$)/)===null){this._DropPanel=this.getDropPanel(),this._bOT&&this._DropPanel.setWidth(this._bOT),this._bOU&&this._DropPanel.setHeight(this._bOU);var r=n.calculateOffset(i.Element),o=i.Element.offsetHeight,s=document.documentElement.offsetHeight,c=document.documentElement.offsetWidth;if(document.elementFromPoint(r.X+5,r.Y+5)!==i.Element&&(r.X=n.calculateMouseX(i.Event)),e=r.X+this._DropPanel.getWidth()-c,f=r.Y+this._DropPanel.getHeight()-s,e>0||f>0||f+o>0){this._bOT=this._DropPanel.getWidth(),this._bOU=this._DropPanel.getHeight();var l=e+this._DropPanel.getWidth()-c,u=f+this._DropPanel.getHeight()-s,h=s-(r.Y+o);e=e>0?r.X-e-1:r.X,f=f>0?r.Y-f-1:r.Y,l>0&&this._DropPanel.setWidth(c),u>0&&(u=s),h>this._DropPanel.getHeight()?(f=r.Y+o,u=this._DropPanel.getHeight()):r.Y>=this._DropPanel.getHeight()?(u=this._DropPanel.getHeight(),f=r.Y-u):h>r.Y&&h>this._DropPanel.getMinDropDownHeight()?(f=r.Y+o,u=s-(r.Y+o)):h<r.Y&&r.Y>this._DropPanel.getMinDropDownHeight()?(u=this._DropPanel.getHeight(),f=r.Y-u>0?r.Y-u:0,u=r.Y<u?u-(u-r.Y):u):f=u>0?0:f,this._DropPanel.setHeight(u),e=l>0?0:e,r.X=e,r.Y=f}else r.Y+=o;this._IsRTL&&(r.X=r.X+i.Element.offsetWidth-this._DropPanel.getWidth()),this._DropPanel.show(r.X,r.Y),this._vS(this._DropPanel,{}),this.HyperlinkClick.fire(this,i)}},i.prototype._vS=function(){var r=this._DropPanel?this._DropPanel.getContent():null;r&&r instanceof n.Ui.Control&&r.setSize(this._DropPanel.getContentWidth(),this._DropPanel.getContentHeight())},i.prototype._iG=function(){},i.prototype._d3=function(){},i.prototype._aFW=function(n){n.dir="ltr"},i.prototype._aFX=function(t){if(this._bgl)return this._bgl;var r=t||this.getOptions(),i=document.createElement("span");return i.style.fontFamily=r.font.family,i.style.fontSize=r.font.size.height+"pt",i.style.color=r.textColor,i.style.textAlign=this._aVi(this.getTextAlignment()),i.style.verticalAlign=this._aFU(this.getVerticalTextAlignment()),i.style.fontWeight=(n.getProperty(r,"font.style.it")||[]).indexOf("Bold")>-1?"bold":"normal",i.style.whiteSpace="normal",this._bgl=i.style},i.prototype._cFc=function(){if(!this._FormattedTitle)return n.Mb.GxStringAlignment.Near;var t=n.getStyle(this._FormattedTitle,"text-align");switch(t){case"-webkit-auto":case"start":case"auto":return n.Mb.GxStringAlignment.Near;case"left":return this._IsRTL?n.Mb.GxStringAlignment.Far:n.Mb.GxStringAlignment.Near;case"center":return n.Mb.GxStringAlignment.Center;case"right":return this._IsRTL?n.Mb.GxStringAlignment.Near:n.Mb.GxStringAlignment.Far}},i.prototype._aVi=function(t){switch(t){case n.Mb.GxStringAlignment.Near:return this._IsRTL?"right":"left";case n.Mb.GxStringAlignment.Far:return this._IsRTL?"left":"right";case n.Mb.GxStringAlignment.Center:return"center"}return t},i.prototype._bOS=function(){if(!this._FormattedTitle)return n.Mb.GxStringVerticalAlignment.Top;var t=n.getStyle(this._FormattedTitle,"vertical-align");switch(t){case"bottom":return n.Mb.GxStringVerticalAlignment.Bottom;case"top":return n.Mb.GxStringVerticalAlignment.Top;case"middle":return n.Mb.GxStringVerticalAlignment.Center}},i.prototype._aFU=function(t){switch(t){case n.Mb.GxStringVerticalAlignment.Bottom:return"bottom";case n.Mb.GxStringVerticalAlignment.Top:return"top";case n.Mb.GxStringVerticalAlignment.Center:return"middle"}return t},i.prototype._cFd=function(t){if(t instanceof n.Font){var i=[];return t.getIsBold()&&i.push("Bold"),t.getIsItalic()&&i.push("Italic"),t.getIsUnderline()&&i.push("Underline"),t.getIsStriken()&&i.push("Strikeout"),{family:t.getFontFamily(),style:{it:i},size:{height:this._g(t.getSize()),width:-1,units:n.SizeUnits.Pt}}}return t},i.prototype._bOV=function(t){if(this._Size)return this._Size;var r=t||{},i=r.units||n.SizeUnits.DLU96;return{height:n.convertSizeUnits(this.getHeight(),n.SizeUnits.Px,i),width:-1,units:i}},i.prototype._cFe=function(t){var i=n.createElement(null,null,"span");return i.innerHTML=t,this._bOW(i),t=i.innerHTML},i.prototype._cFf=function(n){switch(n){case"x-small":return 1;case"small":return 2;case"medium":return 3;case"large":return 4;case"x-large":return 5;case"xx-large":return 6;case"-webkit-xxx-large":return 7}return parseInt(n)},i.prototype._bOW=function(t){var i,r,u,f;if(t.style){if(i=n.getStyle(t,"fontSize"),i){r=void 0,r=n.isString(i)?this._cFf(i):parseInt(i);switch(r){case 1:i="8pt";break;case 2:i="10pt";break;case 3:i="12pt";break;case 4:i="14pt";break;case 5:i="18pt";break;case 6:i="24pt";break;case 7:i="36pt";break;default:i.indexOf("pt")===-1&&(i=n.convertSizeUnits(parseInt(i),n.SizeUnits.Px,n.SizeUnits.Pt)+"pt")}t.style.fontSize=i}for(u=0;u<t.childNodes.length;u++)f=t.childNodes[u],f.tagName!="BR"&&this._bOW(f);return t}},i.prototype._cFg=function(n,t){switch(n){case"Font":return this._cFd(t);case"TextAlignment":return this._cFc();case"VerticalTextAlignment":return this._bOS();case"Size":return this._bOV(t);case"HtmlText":return this._cFe(t)}return t},i.prototype._zf=function(n,t){(this._FormattedTitle&&(this._FormattedTitle.style[n]=t,this._aFY(this._FormattedTitle,n,t)),this._TitleNode)&&(this._TitleNode.style[n]=t,this._aFY(this._TitleNode,n,t))},i.prototype._aFY=function(n,t,i){for(var f=n.childNodes,r,u=0,e=f.length;u<e;u++)r=f[u],r.childNodes&&this._aFY(r,t,i),r.style&&r.tagName!="BR"&&(r.style[t]=i)},i.prototype._bOP=function(n){return n=n.replace(/<\/div>/g,""),n=n.replace(/<div>/g,"<br>"),n=n.replace(/<\/p>/g,""),n=n.replace(/<p>/g,"<br>"),n=n.replace(/&nbsp;/g," ")},i.prototype._aSX=function(){return this._DomNode.offsetWidth-n.Ui.getMarginsWidth(this._DomNode)},i.prototype._cFh=function(){var f,u;if(!this._FormattedTitle)return null;var r=this._FormattedTitle,t="fontWeight",e=t,i;if(!n.IsIE&&document.defaultView&&document.defaultView.getComputedStyle&&(t.match(/[A-Z]/)&&(t=t.replace(/([A-Z])/g,"-$1").toLowerCase()),i=r.style[t]||r.style[e]),!i&&(f=r.style,f)){while((u=t.indexOf("-"))!=-1)t=t.substr(0,u)+t.substr(u+1,1).toUpperCase()+t.substr(u+2);i=r.style[t]||f[t]}return(n.IsOpera&&i!=undefined&&(i=i.replace(/"(.*)"/,"$1")),i!=undefined)?i:""},i.prototype._aVh=function(t){var i,r,u;return(t="<div>"+t+"<\/div>",i=n.htmlToDOM(t).childNodes,!i[0]||i[0].nodeType===document.TEXT_NODE||i.length>1)?(u=this._aFX(),r=n.htmlToDOM("<span>"+t+"<\/span>"),r.style.cssText=u.cssText,r):i[0]},i.prototype._te=function(t,i){return this._FormattedTitle?n.getStyle(this._FormattedTitle,t):i},i.prototype._bgk=function(n){return n.replace(/"[^"]*[^"]*"/g,function(n){return n.replace(/&quot;/g,"'")})},i.prototype._eD=function(i){var h=this._g(this._Height),r,u,f,e,o,s;(this._Height=i,this._BeginUpdate)||(r=i,u=!1,this.getAutoHeight()?(this._DomNode.style.height="",f=i,this._FormattedTitle&&(this._FormattedTitle.style.position="static",this._EditMode&&n.removeClass(this._FormattedTitle,"PPHide"),f=this._FormattedTitle.offsetHeight,this._FormattedTitle.innerHTML==""&&(this._FormattedTitle.innerHTML="|",f=this._FormattedTitle.offsetHeight,this._FormattedTitle.innerHTML=""),this._EditMode&&n.addClass(this._FormattedTitle,"PPHide")),u=r<f,e=u?r:f,this._DomNode.style.height=e+"px",this.SizeChanged.fire(this,{OldValue:h,NewValue:e,HeightChanged:!0,WidthChanged:!1})):(r!=0&&(this._Height=0),t.prototype.setHeight.call(this,r)),this._FormattedTitle&&(this._FormattedTitle.style.position="absolute",o=this._DomNode.clientHeight,this._FormattedTitle.style.height=this.getAutoHeight()?"100%":o+"px",this._FormattedTitle.style.position="static",s=this._DomNode.clientHeight,u=o<s,this._FormattedTitle.style.width=this._DomNode.clientWidth+"px",this._FormattedTitle.style.position=u?"absolute":"static"),this._TextEditor&&this._TextEditor.setTextAreaHeight(r))},i.prototype._aQh=function(n){var i=n.getValue(),r,u;i!=""&&i.indexOf("<span")!=0&&(this._TitleNode.innerHTML=i,n.setContent(this._TitleNode.outerHTML),r=window.getSelection(),u=r.getRangeAt(0),u.setStart(n.getTextArea().getContentNode().firstChild,1),u.setEnd(n.getTextArea().getContentNode().firstChild,1),r.removeAllRanges(),r.addRange(u)),i!=""&&n.TextChanged.remove(this._aQh,this)},i.prototype.getEditMode=function(){return this._EditMode},i.prototype.getShowControls=function(){return this._ShowControls},i.prototype.getEnableEdit=function(){return this._EnableEdit},i.prototype.getIsMultiLanguage=function(){return this._IsMultiLanguage},i.prototype.getText=function(){return this._Text},i.prototype.getTitle=function(){return this._Title},i.prototype.getSize=function(){return this._Size},i.prototype.getVisible=function(){return this._Visible},i.prototype.getIsControl=function(){return this._IsControl},i.prototype.getAutoHeight=function(){return this._AutoHeight},i.prototype.getCustomFormat=function(){return this._CustomFormat},i.prototype.setAllowLostFocus=function(n){return this._AllowLostFocus=n},i.prototype.setEditMode=function(n){this._EditMode=n},i.prototype.setEnableEdit=function(n){this._EnableEdit=n},i.prototype.setIsMultiLanguage=function(n){this._IsMultiLanguage=n},i.prototype.setVisible=function(n){this._Visible=n},i.prototype.setIsControl=function(n){this._IsControl=n},i.prototype.setFocusToTextEditor=function(){this._AllowLostFocus=!1,this._EditMode&&(this._dEC=n.setTimeout(this._cFa,50,{Self:this}))},i.prototype.getTextEditor=function(){return this._TextEditor||(this._TextEditor=new n.Ui.TextEditor({Blur:new n.Delegate(this._bON,this),SelectionChanged:new n.Delegate(this._cFb,this),IsRTL:this._IsRTL,EnableResize:!1,TextAreaStyle:"overflow: hidden;",Enabled:this.getEnabled()}),this._TextEditor.getFontBox().hide()),this._TextEditor},i.prototype.getDropPanel=function(){return this._DropPanel||(this._DropPanel=new n.Ui.DropPanel({IsRTL:this._IsRTL,Class:"PPTitleDropPanel",MaxHeight:1e4,MaxWidth:1e4,Height:300,Width:400,Opened:new n.Delegate(this._iG,this),Closed:new n.Delegate(this._d3,this),SizeChanged:new n.Delegate(this._vS,this)})),this._DropPanel},i.prototype.bindCancelNode=function(n,t){this._CancelBlurNodes.indexOf(n)<0&&this._CancelBlurNodes.push(n),t&&(this._k(n,"mousedown",this._bgi),this._addEvent(n,"mousedown",this._bgi))},i.prototype.unbindCancelNode=function(n,t){var i=this._CancelBlurNodes.indexOf(n);i!==-1&&(this._k(n,"mousedown",this._bgi),t&&this._CancelBlurNodes.splice(i,1))},i.prototype.getUnformattedText=function(){var t=!1,n;return n=this._EditMode&&this._TextEditor?this._TextEditor.getText():this._TitleNode?this._TitleNode.outerHTML:""},i.prototype.setTextWrapping=function(n){this._zf("whiteSpace",n?"normal":"nowrap"),this._eD(this.getHeight())},i.prototype.getTextWrapping=function(){return this._te("whiteSpace")==="normal"},i.prototype.setIsBold=function(n){this._EditMode?this._TextEditor.setIsBold(n):(this._zf("fontWeight",n?"bold":"normal"),this._eD(this.getHeight())),this._Font&&this._Font.setIsBold(n)},i.prototype.setIsItalic=function(n){this._EditMode?this._TextEditor.setIsItalic(n):(this._zf("fontStyle",n?"italic":"normal"),this._eD(this.getHeight())),this._Font&&this._Font.setIsItalic(n)},i.prototype.setIsUnderline=function(n){this._EditMode?this._TextEditor.setIsUnderline(n):(this._zf("textDecoration",n?"underline":"none"),this._eD(this.getHeight())),this._Font&&this._Font.setIsUnderline(n)},i.prototype.setFontColor=function(t){this._EditMode?this._TextEditor.setFontColor(t):this._zf("color",t.toString()),this._Font&&this._Font.setColor(n.Color.getColor(t))},i.prototype.setFontFamily=function(n){this._EditMode?this._TextEditor.setFontFamily(n):(this._zf("fontFamily",n),this._eD(this.getHeight())),this._Font&&this._Font.setFontFamily(n)},i.prototype.setFontSize=function(n){if(this._EditMode)this._TextEditor.setFontSize(n);else{var t=n+"";t=t.indexOf("pt")<0&&t.indexOf("px")<0&&t.indexOf("em")<0?t+"pt":n+"",this._zf("fontSize",t),this._eD(this.getHeight())}this._Font&&this._Font.setSize(n)},i.prototype.setText=function(n){this._Text=n},i.prototype.setTitle=function(n){this._Title=n},i.prototype.setHtmlText=function(n){this._TitleNode=this._aVh(n)},i.prototype.setHtmlTitle=function(t){this._FormattedTitle&&this._FormattedTitle.parentNode&&this._DomNode.removeChild(this._FormattedTitle),t==""&&this._TitleNode&&(t=this._TitleNode.outerHTML),this._FormattedTitle=this._aVh(t),this._FormattedTitle&&(this._DomNode.appendChild(this._FormattedTitle),this._FormattedTitle.className="PPGxFormattedTitle",this._FormattedTitle.style.wordBreak="break-word",this._bOX=!0,this.updateContent(),this._eD(this.getHeight()),n.IsIE&&(this._DomNode.className=this._DomNode.className))},i.prototype.getHtmlText=function(){return this._TitleNode?this._bgk(this._TitleNode.outerHTML):null},i.prototype.getHtmlTitle=function(){return this._FormattedTitle?this._bgk(this._FormattedTitle.outerHTML):null},i.prototype.setAutoHeight=function(n){if(this._AutoHeight!==n){this._AutoHeight=n;var t=this.getHeight();n||(this._Height=0),this._eD(t)}},i.prototype.setSize=function(t){this._Size!==t&&(this._Size=t,t&&t.units?(t.height>=0&&(this._CorrectHeight?this._eD(Math.round(1.1*n.convertSizeUnits(t.height,t.units,n.SizeUnits.Px))):this._eD(n.convertSizeUnits(t.height,t.units,n.SizeUnits.Px))),t.width>=0&&this.setWidth(n.convertSizeUnits(t.width,t.units,n.SizeUnits.Px))):(this._CorrectHeight?this._eD(Math.round(1.1*t.height)):this._eD(t.height),this.setWidth(t.width),this._Size.units="DLU96"))},i.prototype.setFont=function(t){var i,f={},r,e,u,o;if(t.family){for(i=t,r={FontFamily:i.family},e=n.getProperty(i,"style.it")||[],u=0;u<e.length;u++)switch(e[u]){case"Bold":r.IsBold=!0;break;case"Italic":r.IsItalic=!0;break;case"Underline":r.IsUnderline=!0;break;case"Strikeout":r.IsStriken=!0}r.Size=i.size.height,r.SizeUnits="pt",i=new n.Font(r)}t instanceof n.Font?(i=t,f={FontColor:i.getColor(),FontSize:i.getSize(),FontFamily:i.getFontFamily(),IsBold:i.getIsBold(),IsItalic:i.getIsItalic(),IsUnderline:i.getIsUnderline()}):i=new n.Font(t);for(o in f)this["set"+o](f[o]);this._Font=i,this._eD(this.getHeight())},i.prototype.getFont=function(){var t=this._Font||new n.Font,i;return t.setFontFamily(this._te("fontFamily",t.getFontFamily())),t.setSize(parseInt(this._te("fontSize",t.getSize()+""))),t.setColor(n.Color.getColor(this._te("color",t.getColor().toString()))),i=this._cFh(),i!=""&&t.setIsBold(i=="bold"),t.setIsItalic(this._te("fontStyle")=="italic"),t.setIsUnderline(this._te("textDecoration")=="underline"),t},i.prototype.setTextAlignment=function(n){if(this._TextAlignment=n,this._zf("textAlign",this._aVi(n)),this._EditMode){var t=this._TextEditor.getTextArea().getContentNode();t.style.textAlign=this._aVi(n),this._aFY(t,"textAlign",n)}},i.prototype.getTextAlignment=function(){return this._te("textAlign",this._aVi(this._TextAlignment))},i.prototype.setVerticalTextAlignment=function(n){if(this._VerticalTextAlignment=n,this._zf("verticalAlign",this._aFU(n)),this._EditMode){var t=this._TextEditor.getTextArea().getContentNode();t.style.verticalAlign=this._aFU(n),this._aFY(t,"verticalAlign",n)}},i.prototype.getVerticalTextAlignment=function(){return this._te("verticalAlign",this._aFU(this._VerticalTextAlignment))},i.prototype.setTextColor=function(n){this._TextColor=n,this.setFontColor(n)},i.prototype.getTextColor=function(){var t=this._te("color",this._TextColor);return n.Color.getColor(t).toString()},i.prototype.getBackgroundColor=function(){var t=this._te("backgroundColor",this._BackgroundColor);return n.Color.getColor(t).toString()},i.prototype.setBackgroundColor=function(n){this._BackgroundColor=n,this._zf("backgroundColor",n.toString()),this._EditMode&&this._TextEditor.setBackgroundColor(n)},i.prototype.setCustomFormat=function(t){this._CustomFormat=n.isDefined(t)&&t!==null?t:""},i.prototype.setOptions=function(n){var i=n||{},u=window.Object.keys(i).sort(),t;for(this.setIsControl(!!i.isControl),this.beginUpdate(),t=0;t<u.length;t++){var r=u[t],f=r[0].toUpperCase()+r.substr(1),e="set"+f;this._OptFields.indexOf(f)>=0&&this[e]&&this[e](i[r])}this.endUpdate()},i.prototype.getOptions=function(){for(var r=this._OptFields,u={},n,i,t=0;t<r.length;t++)n=r[t],i="get"+n,this[i]&&(u[n[0].toLowerCase()+n.substr(1,n.length)]=this._cFg(n,this[i]()));return u},i.prototype.setSettings=function(n){this.setOptions(n),t.prototype.setSettings.call(this,n)},i.prototype.setHeight=function(t){if(t!=this._Height){this._Size||(this._Size=this._bOV(this._Size));var r=this._g(t);this._Size.height=n.convertSizeUnits(r,n.SizeUnits.Px,this._Size.units),this._eD(r)}},i.prototype.setWidth=function(n){n!=this._Width&&(t.prototype.setWidth.apply(this,arguments),this.updateContent(),this._eD(this.getHeight()))},i.prototype.updateContent=function(){var i,r,t;if(this._FormattedTitle){for(i=n.querySelectorAll(this._FormattedTitle,"[dimkey]"),r=i.length,t=0;t<r;t++){this._aFW(i[t]);switch(this._ShowControls){case n.Mb.TriState.OffOption:n.addClass(i[t],"Inactive");break;case n.Mb.TriState.OnOption:n.removeClass(i[t],"Inactive");break;case n.Mb.TriState.Undefined:this.getIsControl()||n.addClass(i[t],"Inactive")}!n.hasClass(i[t],"Inactive")&&this._bOX&&this._addEvent(i[t],"click",this._aFV)}delete this._bOX}},i.prototype.setShowControls=function(n){this._ShowControls=n,this.updateContent()},i.prototype.setEnabled=function(n){t.prototype.setEnabled.call(this,n),this._TextEditor&&this._TextEditor.setEnabled(n)},i.prototype.setIsRTL=function(n){t.prototype.setIsRTL.call(this,n),this._TextEditor&&this._TextEditor.setIsRTL(n),this._DropPanel&&this._DropPanel.setIsRTL(n)},i.prototype.getTranslateDialog=function(){if(!this._TranslateDialog){var t;t=n.Ui.getConfig().SupportedLanguages?n.Ui.getConfig().SupportedLanguages:null,this._TranslateDialog=new n.Mb.Ui.TranslateDialog({Mode:n.Mb.TranslateMode.Both,ShowLanguagesButton:!0,DisplayLanguages:t,Enabled:!1,OkButtonClicked:new n.Delegate(this._bOR,this),Closed:new n.Delegate(this._cE9,this)})}return this._TranslateDialog},i.prototype.beginEdit=function(){var t,i,r;this._EnableEdit&&!this._EditMode&&(this._DropPanel&&this._DropPanel.hide(),t=this.getTextEditor(),this._FormattedTitle&&n.hide(this._FormattedTitle),this._EditMode=!0,this.setFont(this.getFont()),t.setHeight(this._DomNode.clientHeight),t.getParentNode()||t.addToNode(this._DomNode),i=t.getTextArea().getContentNode(),r=this._aSX(),t.setIsVisible(n.Ui.Visibility.Visible),i.setAttribute("style",this._TitleNode.getAttribute("style")),this.getIsMultiLanguage()!==!1&&(this._TranslateButton||(this._TranslateButton=new n.Ui.Button({ParentNode:this._DomNode,Content:"...",MouseDown:new n.Delegate(this._bOQ,this)})),this._TranslateButton.show(),r-=this._TranslateButton.getWidth()+1,this.bindCancelNode(this._TranslateButton.getDomNode(),!0)),t.setSize(r,this._DomNode.clientHeight),i.style.height=i.parentElement.clientHeight+"px",i.style.width=i.parentElement.clientWidth+"px",this._TitleNode.innerHTML==""?(t.setContent(""),t.TextChanged.addOne(this._aQh,this)):t.setContent(this._TitleNode.outerHTML),this._bOY=this._TitleNode.outerHTML,this._bOZ=JSON.stringify(this.getOptions()),t.getTextArea().getScrollBox().getVerticalScroll().setIsVisible(!1),t.selectAll(),this.EditModeChanged.fire(this,{Dirty:!1}))},i.prototype.endEdit=function(){if(this._EditMode){var t=this._TextEditor.getFormattedText(),i={Dirty:!1};return t=this._bOP(t),t=t.replace(/(&amp;\[\S*)(<\/span><span style="">)(\S*])/,"$1$3"),i.Dirty=t!=this._bOY||JSON.stringify(this.getOptions())!=this._bOZ,this._TitleNode=this._aVh(t),t==""&&this._FormattedTitle&&(this._TitleNode.style.cssText=this._FormattedTitle.style.cssText),this._TranslateButton&&this._TranslateButton.hide(),this._FormattedTitle&&n.show(this._FormattedTitle),this._TextEditor.setIsVisible(n.Ui.Visibility.Collapsed),this._EditMode=!1,delete this._bOY,delete this._bOZ,this.EditModeChanged.fire(this,i),this._eD(this.getHeight()),i.Dirty}},i.prototype.beginUpdate=function(){this._BeginUpdate?this._BeginUpdate++:this._BeginUpdate=1},i.prototype.endUpdate=function(){!this._BeginUpdate||this._BeginUpdate<=1?(this._BeginUpdate=0,this._eD(this.getHeight())):this._BeginUpdate--},i.prototype.hide=function(){this._TextEditor&&(this._TextEditor.dispose(),this._TextEditor=null,this._FormattedTitle&&n.show(this._FormattedTitle),this._EditMode=!1),t.prototype.hide.call(this)},i}(n.Ui.Control);t.GxTitle=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Width=400,this._Height=230},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("PPCredsDlg"),this.setCaption(n.resourceManager.getString("MbCredsDialog","Caption")),new n.Ui.Label({ResourceKey:"MbCredsMsg",ParentNode:this._DialogContentDomNode,Class:"PPCredsMsg"});var r=new n.Ui.GridPanel({ParentNode:this._DialogContentDomNode,Class:"PPLoginFormControls",Items:[new n.Ui.Label({Left:0,Top:0,ResourceKey:"LoginFormUsernameLabel"}),this._acG=new n.Ui.TextBox({Left:1,Top:0,TabIndex:1,Width:150,IsRTL:this._IsRTL,AfterChangeDelay:10}),new n.Ui.Label({Left:0,Top:1,ResourceKey:"LoginFormPasswordLabel"}),this._acH=new n.Ui.TextBox({Left:1,Top:1,IsPassword:!0,TabIndex:2,Width:150,IsRTL:this._IsRTL}),this._bO0=new n.Ui.CheckBox({Left:1,Top:2,ResourceKey:"MbRememberCheck",IsRTL:this._IsRTL,Enabled:!1,Checked:!0})]}),i=r.getTable();i.rows[0].cells[0].setAttribute("class","PasswordLabel"),i.rows[1].cells[0].setAttribute("class","PasswordLabel")},i.prototype.getDialogResult=function(){return{user:{id:this._acG.getValue()},pass:this._acH.getValue(),needRemember:this._bO0.getChecked()}},i.prototype.show=function(){this._acG.setValue(""),this._acH.setValue(""),this._bO0.setChecked(!1),t.prototype.show.apply(this,arguments)},i}(n.Ui.Dialog);t.CredentialsDialog=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._SourceName="",i._TargetName="",i._ButtonKeepBoth=null,i._ButtonReplace=null,i._ButtonSkip=null,i._ButtonCancel=null,i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Width=460,this._Height=150,this._MinWidth=460,this._MinHeight=150,this._Class="PPStyleExportResolutionDlg",this._ResourceKey="mbStyleExportResolutionDlg"},i.prototype._render=function(){t.prototype._render.call(this);var i=n.createElement(this._DialogContentDomNode);i.style.backgroundImage="url('"+n.ImagePath+"question.png')",i.style.width="32px",i.style.height="32px",i.style.margin="7px",i.style.display="inline-block",new n.Ui.Label({ParentNode:this._DialogContentDomNode,Width:380,Class:"PPStyleExportResDlgLbl",Content:n.String.format(n.resourceManager.getString("mbStyleExportResolutionLabel","Content"),this._SourceName,this._TargetName)}),new n.Ui.CheckBox({ParentNode:this._DialogContentDomNode,ResourceKey:"mbStyleExportResolutionCheck",Class:"PPStyleExportResDlgChk",CheckedChanged:new n.Delegate(this._cFi,this)})},i.prototype._qm=function(){return this._ButtonKeepBoth=new n.Ui.Button({ParentNode:this._DialogButtonsDomNode,ResourceKey:"mbStyleExportResolutionKeepBoth",Class:"PPStyleExportResDlgBtn",Data:{Resolution:n.Mb.StyleSheetConflictResolutionType.Add},Click:new n.Delegate(this._aVj,this)}),this._ButtonReplace=new n.Ui.Button({ParentNode:this._DialogButtonsDomNode,ResourceKey:"mbStyleExportResolutionReplace",Class:"PPStyleExportResDlgBtn",Data:{Resolution:n.Mb.StyleSheetConflictResolutionType.Replace},Click:new n.Delegate(this._aVj,this)}),this._ButtonSkip=new n.Ui.Button({ParentNode:this._DialogButtonsDomNode,ResourceKey:"mbStyleExportResolutionSkip",Class:"PPStyleExportResDlgBtn",Data:{Resolution:n.Mb.StyleSheetConflictResolutionType.Skip},Click:new n.Delegate(this._aVj,this)}),this._ButtonCancel=new n.Ui.Button({ParentNode:this._DialogButtonsDomNode,ResourceKey:"wCancel",Class:"PPStyleExportResDlgBtn",Data:{Resolution:null},Click:new n.Delegate(this._aVj,this)}),[this._ButtonKeepBoth,this._ButtonReplace,this._ButtonSkip,this._ButtonCancel]},i.prototype._aVj=function(n){var i=n.getData();this._Data.Resolution=i.Resolution,this.hide()},i.prototype._cFi=function(n){this._Data.ApplyForAll=n.getChecked()},i.prototype.getData=function(){return this._Data},i.prototype.getButtonCancel=function(){return this._ButtonCancel},i}(n.Ui.Dialog);t.StyleSheetDialog=i,n.Object.defineProps(i,["SourceName","TargetName"],!0),n.Object.defineProps(i,["ButtonKeepBoth","ButtonReplace","ButtonSkip","ButtonCancel"])})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.createByUi=function(t){var i,u=this._aT0(t);return i=u.UI==="DimCombo"?new r(u):n.prototype.createByUi.call(this,u)},t}(n.Ui.BindingManager),r;t.MbBindingManager=i,n.Ui.BindingManager.setManager(new i),r=function(i){function r(){return i!==null&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.getSettings=function(){var i=this._Binding,r={},e;r.PPType="PP.Mb.Ui.DimCombo",r.CloseOnSelect=!0;var u=i.SELECTIONMODE,h=!1,c=!1,o=!0,s=!1,f;switch(u){case"SingleSelect":case"SingleSelectNullable":f=n.Ui.TreeListSelectionMode.SingleSelect;break;case"MultiSelectStandart":f=n.Ui.TreeListSelectionMode.ControlShiftMultiSelect;break;default:f=n.Ui.TreeListSelectionMode.MultiSelect}return r.TreeView={SelectionMode:f,AllowEmptySelection:u!=="SingleSelect",RightButtonSelect:u==="SingleSelect"||u==="MultiSelectStandart",NameAttributesId:i.LEVELATTR?t.parseLevelAttributes(i.LEVELATTR):{}},i.PERIOD&&(h=i.PERIOD.toLowerCase()=="on"),i.MULTILEVELS&&(c=i.MULTILEVELS.toLowerCase()=="on"),i.MODEELEMENTS&&(o=i.MODEELEMENTS.toLowerCase()=="on"),i.MODELEVELS&&(s=i.MODELEVELS.toLowerCase()=="on"),r.DimensionViewer={Mode:o?0:s?1:null,ShowToolbar:!!(o&&s),DimensionPeriodSettings:{Mode:h?2:0,LevelsListSettings:{MultiSelect:c}}},e=n.Mb.getValuesFromXML(this._Value),e||(e=this._Value),r.Value=i.VALUE?i.VALUE:e,r.Data={Binding:i},r},r}(n.Ui.BindingProvider)})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(i){var r=t.call(this)||this;return r._Param=new n.Mb.Param(i),r}return __extends(i,t),i.prototype._e=function(){n.Mb.proxyProperties(this,n.Mb.Param.prototype,["Key","Id","Binding","Value","Type","Name","Visible","TargetOdId","OdIdSuffix","State"],this._cFj),t.prototype._e.call(this)},i.prototype._cFj=function(n){if(this._Param&&this._Param[n.MemberName])return this._Param[n.MemberName]},i.prototype.setOdId=function(n){this._Param.setTargetOdId(n)},i.prototype.getOdId=function(){var n=this._Param.getTargetOdId()&&this._Param.getTargetOdId().id;return n&&this._Param.getOdIdSuffix()?{id:n+"!"+this._Param.getOdIdSuffix()}:this._Param.getTargetOdId()},i.prototype.bindingToJSON=function(){return this._Param.bindingToJSON()},i}(t.Object);t.MbParam=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._ResourceKey="MbParamPropsDialog",this._ImagePath=n.ImagePath,this._Width=300,this._Height=345},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("PPParamPropsDialog"),this._bgm=new n.Ui.Label({ParentNode:this._DialogContentDomNode,ResourceKey:"MbParamName"}),this._cJ=new n.Ui.TextBox({ParentNode:this._DialogContentDomNode}),this._bO1=new n.Ui.Label({ParentNode:this._DialogContentDomNode,ResourceKey:"MbParamId"}),this._iP=new n.Ui.TextBox({ParentNode:this._DialogContentDomNode}),this._anM=new n.Ui.Label({ParentNode:this._DialogContentDomNode,ResourceKey:"MbParamType"}),this._bgn=new n.Ui.ComboBox({ParentNode:this._DialogContentDomNode,ListBox:{Items:[{Value:n.Mb.DbDataType.String,ResourceKey:"MbDataTypeString"},{Value:n.Mb.DbDataType.Integer,ResourceKey:"MbDataTypeInteger"},{Value:n.Mb.DbDataType.Float,ResourceKey:"MbDataTypeFloat"},{Value:n.Mb.DbDataType.DateTime,ResourceKey:"MbDataTypeDate"},{Value:n.Mb.DbDataType.Blob,ResourceKey:"MbDataTypeUser"}]},SelectionChanged:new n.Delegate(this._cFk,this)}),this._dED=new n.Ui.Label({ParentNode:this._DialogContentDomNode,ResourceKey:"MbParamValue"}),this._bgo=new n.Ui.TextBox({ParentNode:this._DialogContentDomNode}),this._dEE=new n.Ui.Label({ParentNode:this._DialogContentDomNode,ResourceKey:"MbParamBinding"}),this._aVk=new n.Ui.TextBox({ParentNode:this._DialogContentDomNode}),this._bgp()},i.prototype._cFk=function(t,i){var r="";switch(i.ListItem.getValue()){case n.Mb.DbDataType.String:r=n.Mb.BindingUIType.EditBox;break;case n.Mb.DbDataType.Integer:r=n.Mb.BindingUIType.IntegerEdit;break;case n.Mb.DbDataType.Float:r=n.Mb.BindingUIType.FloatEdit;break;case n.Mb.DbDataType.DateTime:r=n.Mb.BindingUIType.DateTimePicker}this._aVk.setValue(r?'UI="'+r+'"':"")},i.prototype._bgp=function(){this._Param&&this._Param.isLive()?(this._cJ.setValue(this._Param.getName()),this._iP.setValue(this._Param.getId()),this._bgn.setValue(this._Param.getType()),this._bgo.setValue(this._Param.getValue()),this._aVk.setValue(this._Param.getBinding())):(this._cJ.setValue(""),this._iP.setValue(""),this._bgn.setValue(n.Mb.DbDataType.String),this._bgo.setValue(""),this._aVk.setValue('UI="'+n.Mb.BindingUIType.EditBox+'"'))},i.prototype._cFl=function(){this._Param=this._Param&&this._Param.isLive()?this._Param:new n.Mb.Param,this._Param.setName(this._cJ.getValue()),this._Param.setId(this._iP.getValue()),this._Param.setType(this._bgn.getValue()),this._Param.setValue(this._bgo.getValue()),this._Param.setBinding(this._aVk.getValue())},i.prototype._aN=function(n,i){this._cFl(),t.prototype._aN.call(this,n,i)},i.prototype.getParam=function(){return this._Param},i.prototype.setParam=function(n){this._Param=n,this._bgp()},i.prototype.getDialogResult=function(){return this.getParam()},i.prototype.refresh=function(){this._bgp()},i.prototype.dispose=function(){delete this._Param,t.prototype.dispose.call(this)},i}(n.Ui.Dialog);t.ParamPropsDialog=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._render(),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Name="",this._GroupName="",this._Params=[]},i.prototype._render=function(){this._initFromHTML("<div class='PPParametersOperation'><\/div>"),t.prototype._render.call(this),this._Name||this._ResourceKey||this.setResourceKey("paramsOpLabel"),this._LabelParams=new n.Ui.Label({Class:"PPParametersLabel",ParentNode:this._DomNode,ResourceKey:"paramsOpLabelParams"}),this._ParamsList=new n.Ui.SimpleTreeList({ParentNode:this._DomNode,Content:"TreeList",RowSelect:!0,ShowTreeLines:!1,EnableColumnsMenu:!1,SelectionMode:n.Ui.TreeListSelectionMode.ControlShiftMultiSelect,AllowEmptySelection:!0,Class:"PPParametersOperationTree",Captions:[{ResourceKey:"paramsOpNameColumn"},{ResourceKey:"paramsOpIdColumn"},{ResourceKey:"paramsOpDtColumn"}],DataMappers:{Key:"k",Parent:"p",Content:new n.PropertyMapper({Getter:function(n){return[n.n,n.id,n.dt]}})},SelectionChanged:new n.Delegate(this._cS,this),NodeDblClick:new n.Delegate(this._abB,this)}),this._ButtonsContainer=n.htmlToDOM("<div class='PPParametersOperationButtons'><\/div>"),this._DomNode.appendChild(this._ButtonsContainer),this._AddButton=new n.Ui.Button({ParentNode:this._ButtonsContainer,ResourceKey:"paramsOpAddButton",Click:new n.Delegate(this._oU,this)}),this._EditButton=new n.Ui.Button({ParentNode:this._ButtonsContainer,ResourceKey:"paramsOpEditButton",Click:new n.Delegate(this._vT,this)}),this._RemoveButton=new n.Ui.Button({ParentNode:this._ButtonsContainer,ResourceKey:"paramsOpRemoveButton",Click:new n.Delegate(this._nh,this)}),this._ParentNode&&this.addToNode(this._ParentNode)},i.prototype._aFZ=function(n){for(var t=this._Params.length;t--&&this._Params[t].getKey()!=n;);return t},i.prototype._anN=function(){var r,i,t,u;for(this._ParamsObject||(this._ParamsObject={}),r=this._Params,i=0;i<r.length;i++)t=r[i],t.setId(n.escapeHTML(n.unescapeHTML(t.getId()))),t.setName(n.escapeHTML(n.unescapeHTML(t.getName()))),u=t.getKey(),this._ParamsObject[u]={p:null,k:u.toString(),n:t.getName(),id:t.getId(),dt:this._cFm(t.getType())};this._ParamsList.beginUpdate(),this._ParamsList.clearNodes(),this._ParamsList.loadNodes(this._ParamsObject),this._ParamsList.endUpdate()},i.prototype._cFm=function(t){switch(t){case n.Mb.DbDataType.String:return n.resourceManager.getString("MbDataTypeStringen","Content");case n.Mb.DbDataType.Integer:return n.resourceManager.getString("MbDataTypeInteger","Content");case n.Mb.DbDataType.Float:return n.resourceManager.getString("MbDataTypeFloat","Content");case n.Mb.DbDataType.DateTime:return n.resourceManager.getString("MbDataTypeDate","Content");case n.Mb.DbDataType.Blob:return n.resourceManager.getString("MbDataTypeUser","Content")}return n.resourceManager.getString("MbDataTypeStringen","Content")},i.prototype._aVl=function(t){var r=t.getId(),i=t.clone();i.setId(r),this._PropsDialog||(this._PropsDialog=new n.Mb.Ui.ParamPropsDialog({OkButtonClicked:new n.Delegate(this._cFn,this)})),this._PropsDialog.setParam(i),this._PropsDialog.show()},i.prototype._oU=function(){this._aVl(new n.Mb.Param({Key:this._Params.length+1}))},i.prototype._nh=function(){var i=this._ParamsList.getSelectedNodes()||[];i.length>0&&this._cFo(i)},i.prototype._cFo=function(t){this._ConfirmRemovingDialog||(this._ConfirmRemovingDialog=new n.Ui.ConfirmDialog({ResourceKey:"paramsConfirmRemoving",Caption:"paramsConfirmRemoving",YesButtonClicked:new n.Delegate(this._cFp,this)})),this._ConfirmRemovingDialog.setData(t),this._ConfirmRemovingDialog.show()},i.prototype._cFp=function(){for(var u=this._ConfirmRemovingDialog.getData(),r,i=0;i<u.length;i++)r=this._aFZ(u[i]),r>=0&&this.removeAt(r)},i.prototype._vT=function(){var r=this._ParamsList.getSelectedNodes()||[],i=this._aFZ(parseInt(r[0]));i>=0&&this._aVl(this._Params[i])},i.prototype._cFn=function(n,t){var i=n.getParam(),r=this._aFZ(i.getKey()),u=this._cFq(i);if(u){this._cFr(u),t.IsCancelClose=!0;return}r>=0?(this._Params[r].setMetadata(i.getState()),this._Params[r].setType(i.getType()),this._anN()):this.add(i),this._EditButton.setEnabled(!1),this._RemoveButton.setEnabled(!1)},i.prototype._cFq=function(n){var e=n.getName(),o=n.getId(),i=!1,t,s=this._ParamsList.getSelectedNodes()||[],r=this._aFZ(parseInt(s[0])),u="",f;return r>=0&&(u=this._Params[r].getId()),n.getId().toUpperCase()!==u.toUpperCase()&&(f=n.getId().toUpperCase(),this._Params.forEach(function(n){f===n.getId().toUpperCase()&&(i=!0)})),i?t="MbParamDialogPropsDuplicateId":e?o||(t="MbParamDialogPropsIdEmpty"):t="MbParamDialogPropsNameEmpty",t},i.prototype._cFr=function(t){var i=new n.Ui.Message({ResourceKey:t,Type:n.Ui.MessageType.Error,Class:"PPParamPropsDialogError"});i.show()},i.prototype._cS=function(n){var i=n.getSelectedNodes();this._EditButton.setEnabled(i.length===1),this._RemoveButton.setEnabled(i.length>0)},i.prototype._abB=function(n,t){var i=this._aFZ(t.Node);i>=0&&this._aVl(this._Params[i])},i.prototype.setWidth=function(n,i){this._Width!==n&&(this._ParamsList.setWidth(this._g(n)),t.prototype.setWidth.call(this,n,i))},i.prototype.setHeight=function(i,r){if(this._Height!==i){var u=this._g(i)-this._ButtonsContainer.offsetHeight-this._LabelParams.getHeight()-n.Ui.getMarginsHeight(this._LabelParams.getDomNode())-12;this._ParamsList.setHeight(u),t.prototype.setHeight.call(this,i,r)}},i.prototype.add=function(n){this._Params.push(n),this._anN()},i.prototype.remove=function(n){for(var t=0;t<this._Params.length;t++)if(this._Params[t]===n){this._Params.splice(t,1),this._ParamsList.deleteNode(n.getKey()+"",!0),this._anN();break}this._EditButton.setEnabled(!1),this._RemoveButton.setEnabled(!1)},i.prototype.removeAt=function(n){this.remove(this._Params[n])},i.prototype.getCurrentState=function(){for(var t=[],n=0;n<this._Params.length;n++)t.push(this._Params[n].getState());return t},i.prototype.refresh=function(){var n=this._ParamsList.getSelectedNodes();this._EditButton.setEnabled(n.length===1),this._RemoveButton.setEnabled(n.length>0),this._anN(),this._ParamsList.updateSize()},i.prototype.dispose=function(){delete this._Params,t.prototype.dispose.call(this)},i}(n.Ui.Control);t.ParametersOperationView=i,n.Object.defineProps(n.Mb.Ui.ParametersOperationView,["Name","GroupName","Params"],!0)})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._IsShowGroupName=!0,this._ViewItems=[],this._CurrentViewIndex=0,this._Width=725,this._Height=510,this._LeftPanelWidth=210,this._defineEvents(["ViewChanged"])},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("PPParametersDialog"),this._Caption||this.setResourceKey("ParametersDialog"),this._PanelsContainer=n.htmlToDOM("<table class='PPParametersDialogContent'><tr><td><div class='PPParametersLeftPanel'><\/div><\/td><td><div class='PPParametersRightPanel'><\/div><\/td><\/tr><\/table>"),this._LeftPanelDomNode=n.querySelector(this._PanelsContainer,".PPParametersLeftPanel"),this._RightPanelDomNode=n.querySelector(this._PanelsContainer,".PPParametersRightPanel"),this._LeftPanel=new n.Ui.GridPanel({ParentNode:this._LeftPanelDomNode,Width:this._LeftPanelWidth}),this._Groups={},this._SectionButtons=[],this._ViewItems=n.toArray(this._ViewItems);for(var i=0;i<this._ViewItems.length;i++)this._bO2(this._ViewItems[i]);this.setCurrentView(this._ViewItems[this._CurrentViewIndex]),this._DialogContentDomNode.appendChild(this._PanelsContainer),this.getCurrentView()&&this.getCurrentView().addToNode(this._RightPanelDomNode),this._lG()},i.prototype._lG=function(){this._PanelsContainer&&t.prototype._lG.call(this)},i.prototype._bO2=function(t){this._cFs(t.getGroupName());var i=new n.Ui.Button({Content:t.getName(),Class:"PPParametersViewButton",Width:this._LeftPanelWidth,IsRTL:this.getIsRTL(),IsPressed:this._SectionButtons.length===this._CurrentViewIndex,IsToggleButton:!0,Tag:t,Click:new n.Delegate(this._cFt,this)});t.addToNode(this._RightPanelDomNode),t.setIsVisible(!1),this._Groups[t.getGroupName()].add(i),this._SectionButtons.push(i)},i.prototype._cFs=function(t){return this._Groups[t]||(this._Groups[t]=new n.Ui.Panel({IsAbsolutePositioning:!1}),this._IsShowGroupName&&this._LeftPanel.add(new n.Ui.Label({Content:n.String.escapeHTML(n.String.ellipsis(t,25,!0)),IsRTL:this.getIsRTL(),Class:"PPParametersGroupLabel"})),this._LeftPanel.add(this._Groups[t])),this._Groups[t]},i.prototype._cFu=function(n,t){this._Groups[n]&&(this._Groups[n].remove(t),this._Groups[n].getCount()===0&&(this._LeftPanel.remove(this._Groups[n]),delete this._Groups[n]))},i.prototype._cFv=function(){for(var n=0;n<this._SectionButtons.length;n++)this._SectionButtons[n].setIsPressed(!1)},i.prototype._cFt=function(n){n.getIsPressed()?(this.setCurrentView(n.getTag()),this._cFv(),n.setIsPressed(!0)):n.getTag()===this.getCurrentView()&&n.setIsPressed(!0)},i.prototype.getViewItems=function(){return this._ViewItems},i.prototype.getCurrentView=function(){return this._ViewItems[this._CurrentViewIndex]},i.prototype.getCurrentViewIndex=function(){return this._CurrentViewIndex},i.prototype.setIsRTL=function(n){t.prototype.setIsRTL.call(this,n),this._LeftPanel&&this._LeftPanel.setIsRTL(n),this.getCurrentView()&&this.getCurrentView().setIsRTL(n)},i.prototype.setWidth=function(i,r){var u,f,e;if(this._Width!==i||!this._avz)for(t.prototype.setWidth.call(this,i,r),this._avz=this.getContentWidth()-this._LeftPanelWidth,this._avz-=n.Ui.getMarginsWidth(this._LeftPanelDomNode),this._avz-=n.Ui.getMarginsWidth(this._RightPanelDomNode),this._avz-=n.Ui.getMarginsWidth(this._PanelsContainer),this.getCurrentView()&&this.getIsVisible()&&this.getCurrentView().setWidth(this._avz),u=0;u<this._SectionButtons.length;u++)f=this._SectionButtons[u],e=this._g(this._LeftPanelWidth)-n.Ui.getMarginsWidth(f.getDomNode()),f.setWidth(this._g(e))},i.prototype.setHeight=function(i,r){this._Height===i&&this._avA||(t.prototype.setHeight.call(this,i,r),this._avA=this.getContentHeight(),this._avA-=n.Ui.getMarginsHeight(this._PanelsContainer),this._avA-=n.Ui.getMarginsHeight(this._LeftPanelDomNode),this._LeftPanel.setHeight(this._avA),this.getCurrentView()&&this.getCurrentView().setHeight(this._avA),t.prototype.setHeight.call(this,i,r))},i.prototype.updateSize=function(){this._avz=0,this._avA=0,this.setWidth(this.getWidth()),this.setHeight(this.getHeight())},i.prototype.show=function(n,i,r){t.prototype.show.call(this,n,i,r),this.updateSize(),this.getCurrentView()&&this.getCurrentView().refresh()},i.prototype.setCurrentView=function(n){var t=this.getCurrentView(),i;if(t!==n||!t.getIsVisible()){for(t=n,i=0;i<this._ViewItems.length;i++)this._ViewItems[i]===n&&(this._CurrentViewIndex=i),this._ViewItems[i].hide();t&&(t.setIsRTL(this.getIsRTL()),t.show(),t.refresh()),this.ViewChanged.fire(this),this.updateSize()}},i.prototype.addView=function(n){this._bO2(n),this._ViewItems.push(n)},i.prototype.removeView=function(n){for(var t=this._ViewItems.length,i,r;t--&&this._ViewItems[t]!==n;);return t>=0?(i=null,this._ViewItems.length>1&&(t>=0&&t<this._ViewItems.length-1?i=this._ViewItems[t+1]:t===this._ViewItems.length-1&&(i=this._ViewItems[t-1])),this.setCurrentView(i),r=this._ViewItems[t].getGroupName(),this._ViewItems[t].dispose(),this._cFu(r,this._SectionButtons[t]),this._SectionButtons.splice(t,1),this._ViewItems.splice(t,1),!0):!1},i.prototype.removeViewAt=function(n){return this.removeView(this._ViewItems[n])},i.prototype.getDialogResult=function(){for(var i={},t,n=0;n<this._ViewItems.length;n++)t=this._ViewItems[n],i[t.getId()]=t.getCurrentState();return i},i.prototype.dispose=function(){for(var n=0,i=this._ViewItems?this._ViewItems.length:0;n<i;n++)this._ViewItems[n]&&this._ViewItems[n].dispose(),this._SectionButtons[n]&&this._SectionButtons[n].dispose();t.prototype.dispose.call(this)},i}(n.Ui.Dialog);t.ParametersDialog=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._LoadOnCreate&&i.getSource()&&(i.getSource().getMetadata()?i._View.refreshAll():i._Service.HieOpened.add(i._anK,i)),i._Service.ElementsLoaded.add(i._bgq,i),i._Service.MetadataChanged.add(i._bgr,i),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._TypeService=n.Mb.HieService,this._LoadOnCreate=!0},i.prototype._bindEvents=function(){this._View&&(this._View.RequestChild.add(this._y8,this),this._View.RequestChangeMetadata.add(this._cFw,this))},i.prototype._anK=function(n,t){t.Hierarchy===this.getSource()&&(this._View.refreshAll(),this._Service.HieOpened.remove(this._anK,this))},i.prototype._bgq=function(n,t){t.Hierarchy===this.getSource()&&(this._View.setChildNodes(t.ParentKey),t.ParentKey===""&&this._View.setIsBusy(!1))},i.prototype._dEF=function(){this._View.setIsBusy(!0)},i.prototype._bgr=function(){this._View.refreshAll()},i.prototype._y8=function(n,t){this._Service.getChildEls(this.getSource(),t.ParentKey,t.IncludeRoot,this._View.getShowTotal(),null,this._View.getIsGetAllFactAtts(),this._View.getIsGetAttsTextValues())},i.prototype._cFw=function(){this._View.setIsBusy(!0),this._Service.setMetadata(this.getSource())},i.prototype.setSource=function(n){this._Service&&(this._Service.HieOpened.remove(this._anK,this),this._Service.ElementsLoaded.remove(this._bgq,this),this._Service.MetadataChanged.remove(this._bgr,this)),t.prototype.setSource.call(this,n),this._Service.HieOpened.add(this._anK,this),this._Service.ElementsLoaded.add(this._bgq,this),this._Service.MetadataChanged.add(this._bgr,this)},i.prototype.getSource=function(){return t.prototype.getSource.call(this)},i}(t.BaseCtrl);t.HieTreeCtrl=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(i){var r=t.call(this,i)||this;return r._HieTreeCtrl=new n.Mb.HieTreeCtrl({Service:r.getService(),Source:r.getSource(),View:r}),r}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Service=null},i.prototype.getService=function(){return this._Service},i.prototype.setSource=function(n){this._HieTreeCtrl&&this._HieTreeCtrl.setSource(n),t.prototype.setSource.call(this,n)},i.prototype.dispose=function(){delete this._Service,t.prototype.dispose.call(this)},i}(t.HieTreeView);t.MetaHierarchyTree=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return n&&n.XML&&i.setXML(n.XML),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Items=[],this._ItemsAttrs=null},i.prototype._atj=function(n){for(var r={},i,t=0;t<n.attributes.length;t++)i=n.attributes[t],r[i.name]=i.value;return r},i.prototype.getXML=function(){var u="",t="",i,n,r,f;for(i in this._ItemsAttrs)u+=" "+i+'="'+this._ItemsAttrs[i]+'"';for(n=0;n<this._Items.length;n++){t+="<ITEM";for(r in this._Items[n])t+=" "+r+'="'+this._Items[n][r]+'"';t+=" />"}return f="<Breadcrumb><ITEMS"+u+">"+t+"<\/ITEMS><\/Breadcrumb>"},i.prototype.setXML=function(n){var f,i,t,u,r;if(n&&typeof n=="string"&&(f=(new DOMParser).parseFromString(n,"text/xml"),i=f.getElementsByTagName("Breadcrumb"),i&&i.length>0&&(t=i[0].getElementsByTagName("ITEMS"),t&&t.length>0)))for(this._ItemsAttrs=this._atj(t[0]),u=t[0].childNodes,r=0;r<u.length;r++)this._Items.push(this._atj(u[r]))},i.prototype.getItems=function(){return this._Items.slice(0)},i.prototype.setItems=function(t){n.Array.isArray(t)&&(this._Items=t.slice(0))},i}(n.Object);t.HieBrCrOptionParser=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.SelectedItemsChanged.add(i._avv,i),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Source=null,this._ImagePath=n.ImagePath,this._NeedEditSelectedItems=!0,this._defineEvents(["DimRootLoaded","RequestMetadata","PropertyChanged"])},i.prototype._initFields=function(n){n=n||{},delete n.Items,delete n.SelectedItems,delete n.SettinsMenuItems,t.prototype._initFields.call(this,n)},i.prototype._render=function(){t.prototype._render.call(this),this.addClass("PPMbHieVerticalBreadcrumb"),this.refresh()},i.prototype._avv=function(){for(var u=this._SelectedItems,f=[],e,r=0;r<u.getCount();r++)f.push(u.getItem(r).getId());e=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.SelectedItemsChanged,Metadata:{Ids:f}}),this.PropertyChanged.fire(this,e)},i.prototype._cFx=function(n,t){this.PropertyChanged.fire(this,t)},i.prototype._yV=function(t){var i=new n.Mb.Ui.HieVerticalBreadcrumbItem(t);return i.PropertyChanged.add(this._cFx,this),i},i.prototype._yO=function(n){t.prototype._yO.call(this,n),n.updateSettingsMenu(),n.updateSelectionMenu()},i.prototype.refresh=function(){var t,r=this._Source,i=r?r.getAttributes():null,u=this._Items,h,f,e,o,s;if(u.clear(),i){for(t=0;t<i.length;t++)h=this._yV({ImagePath:this._ImagePath,Id:i[t].id,Content:n.String.escapeHTML(i[t].n),ToolTip:"",Source:r,IsRTL:this.getIsRTL()}),u.add(h);for(f=this._SelectedItems,f.clear(!1),e=r.getLevels(),t=0;t<e.length;t++)o=e[t].atts.its.it,o.length===1&&i[t].id!=="DL"&&(s=u.findById(o[0].id),s&&f.add(s))}},i.prototype.refreshAll=function(){this.refresh()},i.prototype.setSelectedAttributes=function(t){t==null&&(t=[]);var i=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.SelectedItemsChanged,Metadata:{Ids:t.slice(0)}});this.PropertyChanged.fire(this,i)},i.prototype.getSource=function(){return this._Source},i.prototype.setSource=function(n){n!==this._Source&&(this._Source=n,this.refresh())},i}(n.Ui.VerticalBreadcrumb);t.HieVerticalBreadcrumbView=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._TypeService=n.Mb.HieService,this._defineEvents(["MetadataChanged"])},i.prototype._bindEvents=function(){this._View&&this._View.PropertyChanged.add(this._vU,this)},i.prototype._vU=function(t,i){var c,h;if(i&&i instanceof n.Mb.Ui.PropertyChangedEventArgs){var l=i.getPropertyName(),r=i.getMetadata(),u=this.getSource(),f=this.getService();switch(l){case n.Mb.Ui.HieBreadcrumbPropertyType.SelectedItemsChanged:u.setLevelsByAttributesIds(r.Ids),this._View.refresh(),f.setMetadata(u,new n.Delegate(this._iQ,this));break;case n.Mb.Ui.HieBreadcrumbPropertyType.DimSelectionChanged:c=r.Item.getTree().getSource().getSelectedCount()>0,u.setAttrIncludeSelectedOnly(r.Item.getId(),c),f.setMetadata(u,new n.Delegate(this._iQ,this));break;case n.Mb.Ui.HieBreadcrumbPropertyType.TreeNameAttrChanged:case n.Mb.Ui.HieBreadcrumbPropertyType.DimContentRefreshed:u.setAttrProperty(r.Item.getId(),"namingFormat",r.NameAttrsId),f.setMetadata(u,new n.Delegate(this._iQ,this));break;case n.Mb.Ui.HieBreadcrumbPropertyType.DimReloaded:var e=!1,o=undefined,s=null;if(r.Sort){h=r.Sort[0],s=n.getFirstMember(h);switch(h[s]){case n.Mb.OrderBy.Asc:e=!0,o=!1;break;case n.Mb.OrderBy.Desc:e=!0,o=!0;break;case n.Mb.OrderBy.Default:e=!1;break;default:throw new n.ArgumentException(this,"method has not correct value");}}u.setSort(r.Item.getId(),e,o,s),f.setMetadata(u,new n.Delegate(this._iQ,this))}}},i.prototype._iQ=function(n,t){this.MetadataChanged.fire(this,t.Args)},i.prototype.getService=function(){return t.prototype.getService.call(this)},i.prototype.getSource=function(){return t.prototype.getSource.call(this)},i}(t.BaseCtrl);t.HieVerticalBreadcrumbCtrl=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(i){var r=function(i){function r(r){var u=i.call(this,r)||this;return u._Ctrl=new t.HieVerticalBreadcrumbCtrl({Service:u._Service,View:u,MetadataChanged:new n.Delegate(u._cFy,u)}),u}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["MetadataChanged"])},r.prototype._cFy=function(n,t){this.MetadataChanged.fire(this,t)},r.prototype.dispose=function(){delete this._Service,i.prototype.dispose.call(this)},r}(i.HieVerticalBreadcrumbView);i.HieVerticalBreadcrumb=r})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._Source=null,this._Dimension=null,this._Tree=null,this._defineEvents(["PropertyChanged"])},i.prototype._render=function(){var i=this._Source.getAttributeById(this.getId()),f,r,u;this._DimService=new n.Mb.DimSrv({Metabase:this._Source.getMetabase()}),this._Dimension=this._Source.getDim(i.k),this._Tree=new n.Mb.Ui.DimTree({Source:this._Dimension,Id:"HieBrCrDimTree_"+this._Dimension.getId(),Service:this._DimService,AutoLoad:!1,SelectionMode:n.Ui.TreeListSelectionMode.MultiSelect,MultipleAttributesEnabled:!1,RequestSelection:new n.Delegate(this._bf2,this),SelectionChanged:new n.Delegate(this._qT,this),Refreshed:new n.Delegate(this._qU,this)}),i.namingFormat&&this._Tree.setNameAttributeId(i.namingFormat,!1,!0),i.orderBy.isActive&&(f=i.orderBy.descending===!0?n.Mb.OrderBy.Desc:n.Mb.OrderBy.Asc,r=i.orderBy.attribute?i.orderBy.attribute.id:null,r||(r=this._Tree.getPredefinedAttributeId()),u={},u[r]=f,this._Tree.setOrderBy([u])),t.prototype._render.call(this),this._aTL()},i.prototype._bc9=function(){var t=this._SettingsButton.getMenu(),i=!t;i&&t.Opening.addOne(this._cFz,this),this._SettingsMenuSortItem||(t.addItem(new n.Ui.MenuHeader({ResourceKey:"HieVertBreadcrumbMenuViewHeader"})),this._SettingsMenuSortItem=new n.Ui.MenuItem({ResourceKey:"HieVertBreadcrumbMenuSort",Id:"Sort"}),t.addItem(this._SettingsMenuSortItem)),this._SettingsMenuNameItem||(this._SettingsMenuNameItem=new n.Ui.MenuItem({ResourceKey:"HieVertBreadcrumbMenuName",Id:"Name"}),t.addItem(this._SettingsMenuNameItem)),this._Dimension.getMetadata()?this._bO4():this._bO3||(this._bO3=!0,this._DimService.getMetadata(this._Dimension,undefined,new n.Delegate(this._cFA,this)))},i.prototype._aTL=function(){this._anO||(this._anO=new n.Ui.DropPanel({Content:this._Tree,Class:"PPTreeComboDrop",CloseOnDocumentMouseDown:!0,MaxWidth:n.Number.MAX_VALUE,MinWidth:50,MaxHeight:n.Number.MAX_VALUE,MinHeight:50,Width:200,Height:240,Opened:new n.Delegate(this._cFB,this),Closed:new n.Delegate(this._d3,this),SizeChanging:new n.Delegate(this._bgs,this),SizeChanged:new n.Delegate(this._vS,this)}),this._SelectionButton.setMenu(this._anO))},i.prototype._bO4=function(){for(var t=this._Source?this._Source.getAttributeById(this.getId()):null,e=this._Dimension.getAttributes(),r=[],u,f,i=0;i<e.length;i++)e[i].vis&&r.push({Name:e[i].n,Id:e[i].id});if(u=[],u.push({MenuItem:{Id:"SortItemTypeDefault",ResourceKey:"HieVertBreadcrumbMenuSortDefault",Data:n.Mb.OrderBy.Default,GroupName:"SortTypeRadioGroup",Checked:t&&t.orderBy.isActive===!1,Click:new n.Delegate(this._aF0,this)}}),u.push({MenuItem:{Id:"SortItemTypeAsc",ResourceKey:"HieVertBreadcrumbMenuSortAsc",Data:n.Mb.OrderBy.Asc,GroupName:"SortTypeRadioGroup",Checked:t&&t.orderBy.isActive===!0&&!t.orderBy.descending,Click:new n.Delegate(this._aF0,this)}}),u.push({MenuItem:{Id:"SortItemTypeDesc",ResourceKey:"HieVertBreadcrumbMenuSortDesc",Data:n.Mb.OrderBy.Desc,GroupName:"SortTypeRadioGroup",Checked:t&&t.orderBy.isActive===!0&&t.orderBy.descending===!0,Click:new n.Delegate(this._aF0,this)}}),r.length>0){for(u.push({Separator:{}}),u.push({MenuItem:{Id:"SortItemAttrDefault",ResourceKey:"HieVertBreadcrumbMenuSortAttrDef",Data:"",GroupName:"SortAttrRadioGroup",Checked:t&&t.orderBy.isActive===!0&&(!t.orderBy.attribute||t.orderBy.attribute.id==""),Click:new n.Delegate(this._aF0,this)}}),i=0;i<r.length;i++)u.push({MenuItem:{Id:"SortItemAttr"+r[i].Id,Content:r[i].Name,Data:r[i].Id,GroupName:"SortAttrRadioGroup",Checked:t&&t.orderBy.attribute&&t.orderBy.attribute.id===r[i].Id,Click:new n.Delegate(this._aF0,this)}});this._SettingsMenuSortItem.setMenu(new n.Ui.Menu({Items:u}))}if(f=[],r.length>0){for(f.push({MenuItem:{ResourceKey:"HieVertBreadcrumbMenuNameDef",Data:"",GroupName:"NameAttrIdRadioGroup",Checked:t&&t.namingFormat=="",Click:new n.Delegate(this._bO5,this)}}),f.push({Separator:{}}),i=0;i<r.length;i++)f.push({MenuItem:{Content:r[i].Name,Data:r[i].Id,GroupName:"NameAttrIdRadioGroup",Checked:t&&t.namingFormat===r[i].Id,Click:new n.Delegate(this._bO5,this)}});this._SettingsMenuNameItem.setMenu(new n.Ui.Menu({Items:f}))}},i.prototype._cFC=function(){var i,t;if(this._Tree)for(i=this._SettingsMenuNameItem.getMenu().getItems(),t=0;t<i.length;t++)if(!(i[t]instanceof n.Ui.Separator)&&i[t].getData()===this._Tree.getNameAttributeId()){this._ab(i[t],!0);break}},i.prototype._cFD=function(){for(var i=this._SettingsMenuSortItem.getMenu().getItems(),r=this._Tree.getOrderBy()?this._Tree.getOrderBy()[0]:null,u=r?n.getFirstMember(r):null,f=r?r[u]:n.Mb.OrderBy.Default,t=0;t<i.length;t++)i[t]instanceof n.Ui.Separator||(r&&f!==n.Mb.OrderBy.Default?(i[t].getData()===f||i[t].getData()===u)&&this._ab(i[t],!0):this._ab(i[t],i[t].getData()===n.Mb.OrderBy.Default))},i.prototype._aF0=function(t){var o=n.Mb.OrderBy.Default,f="",e=this._SettingsMenuSortItem.getMenu(),u=e.getItems(),r,s,h;for(t.getGroupName()==="SortAttrRadioGroup"&&e.getMenuItemById("SortItemTypeDefault").getChecked()&&this._ab(e.getMenuItemById("SortItemTypeAsc"),!0),r=0;r<u.length;r++)u[r]instanceof n.Ui.Separator||(u[r].getGroupName()==="SortTypeRadioGroup"?u[r].getChecked()&&(o=u[r].getData()):u[r].getGroupName()==="SortAttrRadioGroup"&&(t.getData()===n.Mb.OrderBy.Default?this._ab(u[r],!1):u[r].getChecked()&&(f=u[r].getData())));f==""&&t.getData()!==n.Mb.OrderBy.Default&&this._ab(e.getMenuItemById("SortItemAttrDefault"),!0),s=null,o!==n.Mb.OrderBy.Default&&(f||(f=this._Tree.getPredefinedAttributeId()),h={},h[f]=o,s=[h]),this._Tree.setOrderBy(s)},i.prototype._bO5=function(t){for(var f=t.getData(),u=this._SettingsMenuNameItem.getMenu().getItems(),e,r=0;r<u.length;r++)if(!(u[r]instanceof n.Ui.Separator)&&u[r].getData()===f){this._ab(u[r],!0);break}this._Tree.setNameAttributeId(f,!1,!0),e=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.TreeNameAttrChanged,Metadata:{Item:this,NameAttrsId:[f]}}),this.PropertyChanged.fire(this,e)},i.prototype._cFz=function(){this._cFC(),this._cFD()},i.prototype._ab=function(n,t){n.CheckedChanged.suspend(),n.setChecked(t),n.CheckedChanged.resume()},i.prototype._cFA=function(){this._bO3=!1,this._bO4()},i.prototype._cFB=function(t,i){this._Tree.updateSize(),this._Tree.loadFirst(),this._bf3=n.setTimeout(this._bf4,0,undefined,this),this._vS(t,i)},i.prototype._bf4=function(){this._Tree.setFocus(),n.clearTimeout(this._bf3)},i.prototype._bgt=function(n,t){this._Tree.refreshAll(),this._vS(n,t)},i.prototype._d3=function(){if(this._bgu){var r=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.DimSelectionChanged,Metadata:{Item:this}});this.PropertyChanged.fire(this,r),this._bgu=!1}this._Tree.getTextFilter()!==null&&this._Tree.setTextFilter(null)},i.prototype._bgs=function(){},i.prototype._vS=function(){var r=this._anO.getWidth()-n.Ui.getMarginsWidth(this._anO.getDomNode()),u=this._anO.getHeight()-n.Ui.getMarginsHeight(this._anO.getDomNode());this._Tree.setSize(r,u)},i.prototype._bf2=function(){this._bgu=!1},i.prototype._qT=function(){if(this._anO.getDroppedDown())this._bgu=!0;else{var r=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.DimSelectionChanged,Metadata:{Item:this}});this.PropertyChanged.fire(this,r)}},i.prototype._qU=function(t,i){if(this._Tree){var r;switch(i.Type){case n.Mb.Ui.ElsTreeRefreshType.Content:r=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.DimContentRefreshed,Metadata:{Item:this,NameAttrsId:this._Tree.getNameAttributesId()}}),this.PropertyChanged.fire(this,r);break;case n.Mb.Ui.ElsTreeRefreshType.Reload:case n.Mb.Ui.ElsTreeRefreshType.NewData:i.Changes&&(i.Changes.ActiveHierarchy!==undefined||i.Changes.ActiveGroup!==undefined||i.Changes.OrderBy!==undefined)&&(r=new n.Mb.Ui.PropertyChangedEventArgs({PropertyName:n.Mb.Ui.HieBreadcrumbPropertyType.DimReloaded,Metadata:{Item:this,Changes:i.Changes,Sort:this._Tree.getOrderBy()}}),this.PropertyChanged.fire(this,r))}}},i.prototype.setIsRTL=function(n){t.prototype.setIsRTL.call(this,n),this._Tree&&this._Tree.setIsRTL(n)},i.prototype.getTree=function(){return this._Tree},i.prototype.updateSettingsMenu=function(){this._bc9()},i.prototype.updateSelectionMenu=function(){this._aTL()},i}(n.Ui.VerticalBreadcrumbItem);t.HieVerticalBreadcrumbItem=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(i){function r(t){var r=i.call(this,t)||this;return r.ViewReady.insert(0,new n.Delegate(r._cFE,r)),r._render(),r}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._defineEvents(["ViewReady","LinkedDimOpened","ParamChanged","ErrorCallback"]),this._Source=null,this._Metabase=null,this._ShowParamLabel=!0,this._ParamLabel=null,this._LinkedDim=null,this._Instance=null,this._IsReady=!1},r.prototype._cFE=function(){var r,u,f;if(this._Instance&&this._Instance.isLive()){r=this._Source.bindingToJSON();switch(r.UI){case"EditBox":case"IdentEdit":case"ComboBox":case"BooleanCombo":this._Instance.TextChanged.add(this._qV,this);break;case"ListBox":this._Instance.ItemSelected.add(this._qV,this);break;case"IntegerEdit":case"FloatEdit":this._Instance.AfterTimeout.add(this._qV,this);break;case"IntegerSlider":case"FloatSlider":case"DecimalSlider":this._Instance.setWidth(this.getWidth()),this._Instance.ItemValueChanged.add(this._qV,this);break;case"DateTimePicker":case"TimePicker":case"DatePicker":this._Instance.DateTimeChanged.add(this._qV,this);break;case"CheckBox":this._Instance.CheckedChanged.add(this._qV,this);break;case"TreeCombo":u=this._Instance,f=u.getTreeList(),f.SelectionChanged.add(this._qV,this);break;case"MaskEdit":this._Instance.ValueChanged.add(this._qV,this);break;case"DimCombo":this._Instance.SelectionChanged.add(this._qV,this);break;default:switch(this._Source.getType()){case n.Mb.DbDataType.Integer:case n.Mb.DbDataType.Float:this._Instance.AfterTimeout.add(this._qV,this);break;case n.Mb.DbDataType.DateTime:case n.Mb.DbDataType.Date:this._Instance.DateTimeChanged.add(this._qV,this);break;case n.Mb.DbDataType.Boolean:this._Instance.CheckedChanged.add(this._qV,this);break;default:this._Instance.TextChanged.add(this._qV,this)}}}},r.prototype._qV=function(n,t){this.ParamChanged.fire(this,t)},r.prototype._aF1=function(){for(var i=["getFocused","setFocus"],t=0;t<i.length;t++)n.Mb.proxyMember(this,this._Instance,i[t])},r.prototype._ik=function(){var t,i,u;this._IsReady=!1,t=r.getPPCreateObj(this._Source),this._Instance&&this._Instance.isLive()&&this._Instance.dispose(),this._LinkedDim&&this._LinkedDim.isLive()&&this._LinkedDim.dispose(),t.PPType!="PP.Mb.Ui.DimCombo"?(this._Instance=n.create(t),this._Instance&&(this._Instance.addToNode(this.getDomNode()),this._IsReady=!0,this.ViewReady.fire(this),this._aF1())):(i=t.Data.Binding,u=i?parseInt(i.KEY):NaN,isNaN(u)&&!n.getProperty(this._Source.getTargetOdId(),"id")?this._cFF(t):this._bO6(u,t))},r.prototype._bO6=function(t,i){var u,r;this._aVm||(this._aVm=new n.Mb.DimSrv({Metabase:this._Metabase}));var f=n.getProperty(this._Source.getTargetOdId(),"id"),e=this._Source.getOdIdSuffix(),o=this._Source.getKey();f?i.Data.Binding.ID?(u=[f],e&&u.push(e),u.push(o),this._LinkedDim=new n.Mb.DimSource({OdId:{id:u.join("!")},PPService:this._aVm,AllowHasData:!1,LoadAttributeValuesPartial:!0}),this._aVm.getMetadata(this._LinkedDim,{},new n.Delegate(this._avB,this,{PPCreateObj:i}))):this._avB(null,{Args:{PPCreateObj:i}}):(r=this._Source.getBinding(),r&&n.isString(r)&&(r={value:r}),r&&(r.defValue=this._Source.getValue()?{v:this._Source.getValue()}:undefined),this._LinkedDim=this._aVm.open(t,!1,null,null,new n.Delegate(this._avB,this,{PPCreateObj:i}),null,r,new n.Delegate(this._bgv,this)),this._LinkedDim.setLoadAttributeValuesPartial(!0),this._LinkedDim.setAllowHasData(!1))},r.prototype._bgv=function(n,t){this.ErrorCallback.fire(this,t)},r.prototype._avB=function(t,i){var r=i.Args.PPCreateObj;this.LinkedDimOpened.fire(this,{LinkedDim:this._LinkedDim}),r.TreeView.Source=this._LinkedDim,r.TreeView.LoadToFirstSelected=!0,this._Instance=n.create(r),this._Instance.addToNode(this.getDomNode()),this._IsReady=!0,this.ViewReady.fire(this),this._aF1()},r.prototype._bO7=function(n){return{Levels:-1,IncludeRoot:!1,HideEmptyFolders:!0,HideAllFolders:!0,Limit:-1,FindInfo:{Active:!0,Attribute:"Ident",Text:n,CaseSensitive:!0,WholeWordsOnly:!0,ScanNestedNamespaces:!1,ScanHiddenFolders:!1}}},r.prototype._cFF=function(t){var i=t.Data.Binding,r=n.isDefined(i.NAMESPACE)||n.isDefined(i.RDS)?i.NAMESPACE||i.RDS||null:null,u=this._bO7(r||i.ID);this._Metabase&&this._Metabase.findObjects("Root",u,new n.Delegate(r==null?this._bO8:this._cFG,this,{CreateObj:t}))},r.prototype._cFG=function(t,i){var f=i.Args.CreateObj.Data.Binding,e=this._bO7(f.ID),r=n.getProperty(JSON.parse(i.ResponseText),"GetObjectsResult.objects.its.d")||[],u=null;r.length>0&&(u=r[0].k),this._Metabase&&this._Metabase.findObjects(u,e,new n.Delegate(this._bO8,this,{CreateObj:i.Args.CreateObj}))},r.prototype._bO8=function(t,i){var r=n.getProperty(JSON.parse(i.ResponseText),"GetObjectsResult.objects.its.d")||[],u=i.Args.CreateObj;r.length>0?this._bO6(r[0].k,u):(this._avB(null,{Args:{PPCreateObj:u}}),this._IsReady=!0,this.ViewReady.fire(this))},r.prototype._render=function(){this._initFromHTML("<div class='PPParameter'><\/div>"),i.prototype._render.call(this),this._ik(),this._bO9(),this._ParentNode&&this.addToNode(this._ParentNode)},r.prototype._bO9=function(){if(this._ShowParamLabel&&!this._ParamLabel)this._bPa=!1,this._ParamLabel=new n.Ui.Label({Content:n.String.escapeHTML(this._Source.getName())}),this._ParamLabel.addToNode(this.getDomNode(),this._Instance?this._Instance.getDomNode():undefined);else if(this._ShowParamLabel)if(this._bPa=!0,this._ParamLabel instanceof n.Ui.Label)this._ParamLabel.addToNode(this.getDomNode(),this._Instance?this._Instance.getDomNode():undefined),this._ParamLabel.setIsVisible(!0);else{var t=this._ParamLabel;this._ParamLabel=new n.Ui.Label({Content:n.String.escapeHTML(t.toString())}),this._ParamLabel.addToNode(this.getDomNode(),this._Instance?this._Instance.getDomNode():undefined)}},r.prototype.getShowParamLabel=function(){return this._ShowParamLabel},r.prototype.getSource=function(){return this._Source},r.prototype.getIsReady=function(){return this._IsReady},r.prototype.getInstance=function(){return this._Instance},r.prototype.refreshAll=function(){this._Instance&&this._Instance.isLive()&&this._Instance.dispose(),this.refresh()},r.prototype.refresh=function(){if(this._Source&&this._Source.isLive()){if(!this.getIsReady()||this._Instance&&this._Instance.isLive()||this._ik(),this.setIsVisible(this._Source.getVisible()),this._Instance&&this._Instance.isLive()){var u=this._Instance.getTypeName(),i,t;switch(u){case"PP.Mb.Ui.DimCombo":this._LinkedDim&&this._LinkedDim.increaseState(),this._Instance.refresh();break;case"PP.Ui.Slider":i=r.getPPCreateObj(this._Source),t=i.Items[0].Value,n.isDefined(t)&&this._Instance.getItems()[0].setValue(t);break;default:t=r.getPPCreateObj(this._Source).Value,n.isDefined(t)&&this.setValue(t)}}this._ParamLabel&&!this._bPa&&this._ParamLabel.setContent(n.String.escapeHTML(this._Source.getName()))}else this.setIsVisible(!1),this._Instance&&this._Instance.isLive()&&this._Instance.dispose()},r.prototype.getCurrentParamState=function(){var n=this.getMetadataValue(),t={k:undefined};return this._Source&&n&&(t={id:this._Source.getId(),k:this._Source.getKey(),n:this._Source.getName(),dt:n.dt,value:n.value,vis:this.getIsVisible()}),t},r.prototype.getMetadataValue=function(){var t,r,i,u,f;if(this._LinkedDim&&this._LinkedDim.isLive())return{value:this._LinkedDim.getOdId().id,dt:n.Mb.DbDataType.NoData};if(this._Instance&&this._Instance.isLive()){i=this._Source.bindingToJSON();switch(i.UI){case"EditBox":case"IdentEdit":case"ComboBox":return{value:this._Instance.getContent().toString(),dt:n.Mb.DbDataType.String};case"IntegerEdit":case"FloatEdit":return t=parseInt(this._Instance.getValue()),r=i.UI==="IntegerEdit"?n.Mb.DbDataType.Integer:n.Mb.DbDataType.Float,{value:isNaN(t)?"":t,dt:r};case"IntegerSlider":case"FloatSlider":case"DecimalSlider":return t=this._Instance.getItem(0).getValue(),r=i.UI==="IntegerSlider"?n.Mb.DbDataType.Integer:i.UI==="FloatSlider"?n.Mb.DbDataType.Float:n.Mb.DbDataType.Decimal,{value:isNaN(t)?"":t,dt:r};case"DateTimePicker":case"TimePicker":case"DatePicker":return u=this._Instance.getCurrentDate(),t=i.UI!=="DatePicker"&&u.toJSON?u.toJSON():n.Date.format(u,i.UI==="DatePicker"?n.Date.Pattern.ISO8601Short:n.Date.Pattern.Default),{value:t,dt:n.Mb.DbDataType.DateTime};case"CheckBox":return{value:this._Instance.getChecked()?1:0,dt:n.Mb.DbDataType.Integer};case"TreeCombo":var s=this._Instance,e=s.getTreeList(),o=e.getAllSelectedKeys();for(t=[],f=0;f<o.length;f++)t.push(e.getNodeByKey(o[f]).getValue());return{value:t.join(","),dt:this._Source.getType()};case"BooleanCombo":return{value:this._Instance.getSelectedItem().getData(),dt:n.Mb.DbDataType.Integer};case"MaskEdit":return{value:this._Instance.getValue(),dt:n.Mb.DbDataType.String};default:return{value:this.getValue(),dt:this._Source.getType()}}}},r.prototype.setSource=function(n){this._Source!=n&&(this._Source=n,this.refreshAll())},r.prototype.setValue=function(t,i){var r,u;if(this._Instance&&this._Instance.isLive())if(this._Instance.getTypeName()=="PP.Mb.Ui.DimCombo"){if(r=this._Source?this._Source.getType():0,r!==n.Mb.DbDataType.String&&r!==n.Mb.DbDataType.Integer)return;t&&this._Instance.getTreeView().setSelection([{Key:n.toArray(t),Command:n.Mb.SelCommands.Set,DmElRelative:n.Mb.DmElRelative.Current}])}else this._Instance.getTypeName()=="PP.Ui.DateTimePicker"?t==""||t==null||n.isDate(t)?this._Instance.setValue(t,i):(u=n.Date.parse(t),this._Instance.setValue(u,i)):this._Instance.setValue(t,i)},r.prototype.setWidth=function(t,r){i.prototype.setWidth.call(this,t,r),this._Instance&&this._Instance.isLive()&&(this._Instance instanceof n.Ui.Slider||this._Instance instanceof n.Ui.SpinEdit)&&this._Instance.setWidth(t,r)},r.prototype.getValue=function(){return this._Instance?null:this._Instance.getValue()},r.prototype.setShowParamLabel=function(n){this._ShowParamLabel=n,this._ParamLabel?this._ParamLabel.setIsVisible(n):this._bO9()},r.prototype.dispose=function(){delete this._Source,delete this._Metabase,i.prototype.dispose.call(this)},r.getPPCreateObj=function(i){var r={},f=i.getValue(),s=i.getType(),u,e,o,h;switch(s){case n.Mb.DbDataType.String:r.PPType="PP.Ui.TextBox",r.Content=f+"",r.Value=f+"";break;case n.Mb.DbDataType.Integer:case n.Mb.DbDataType.Float:u={},u.PPType="PP.Ui.NumberEdit",isNaN(u.Value=parseFloat(f))&&(u.Value=undefined),s!==n.Mb.DbDataType.Integer&&(u.FractionCount=2,u.Step=.01),r=u;break;case n.Mb.DbDataType.DateTime:case n.Mb.DbDataType.Date:e={},e.PPType="PP.Ui.DateTimePicker",e.ShowTime=s===n.Mb.DbDataType.DateTime,e.ShowButtons=s===n.Mb.DbDataType.DateTime,e.CurrentDate=r.Value=n.Date.parse(f),r=e;break;case n.Mb.DbDataType.Blob:r.PPType="PP.Ui.TextBox",r.Value=f+"";break;case n.Mb.DbDataType.Boolean:o={},o.PPType="PP.Ui.CheckBox",o.Value=!!+f,o.Checked=r.Value,r=o}return r.IsVisible=i.getVisible(),i.getBinding()&&(h=t.parseControlByBinding({},i.getState()),h.PPType===r.PPType?n.extend(r,h,!0,!0):r=h),r},r}(n.Ui.Control);t.ParamView=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._render(),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["SearchSucceed","SearchFailed","ResultItemClick","MovedScroll"]),this._ResCountOnPage=100},i.prototype._render=function(){var r="<div class='PPFindListBox'><div class='PPFoundNumberContainer'>"+n.resourceManager.getString("Content","BISearchBoxFound")+": <span class='PPFlbNumber'><\/span><\/div><div class='PPResultsContainer'><\/div><\/div>",i;this._initFromHTML(r),i=this.getDomNode(),this._FoundNumberContainerEl=i.querySelector(".PPFoundNumberContainer"),this._FoundNumberEl=i.querySelector(".PPFlbNumber"),this._ResultsBox=new n.Ui.LongListBox({ParentNode:i.querySelector(".PPResultsContainer"),AutoSizeItems:!0,ItemClick:new n.Delegate(this._bgw,this),ItemCreating:new n.Delegate(this._bgx,this),ItemsTemplate:function(n){return["<div class='PPFindListBoxItem'>","<div class='PPFlbiImage PPFlbiItem'><\/div>","<div class='PPFlbiContentContainer PPFlbiItem'>",n.FactorToRender+" <br>","<div class='PPFlbiSource'>"+n.DynamicsToRender+"<\/div>","<div class='PPFlbiSource'>"+n.SourceToRender+"<\/div>","<\/div>"].join("")}}),this._ResultsBox.getScrollBar().MovedScroll.addOne(this._bgy,this),t.prototype._render.call(this)},i.prototype._bgy=function(n,t){t.ScrollBar=n,this.MovedScroll.fire(this,t)},i.prototype._bgw=function(n,t){this.ResultItemClick.fire(this,t)},i.prototype._bgx=function(t,i){var l=i.DataContext,e=l.SourceFreeDimsMeta,r,o,s,a,u,h,f,c;if(l&&n.Array.isArray(e)&&e.length>0){for(r="",o=10,s=0,a=e.length;s<a;s++){if(u=e[s],u.DimName&&(r+=u.DimName+": "),u.Values){for(h=[],f=0,c=u.Values.length;f<c&&f<o;f++)h.push(" "+u.Values[f].ElName);r+=h.join(","),f===o&&c>o&&(r+="...")}r+="<br>"}i.Settings={ToolTip:r}}},i.prototype._aVn=function(t,i){var u=JSON.parse(i.ResponseText),r=n.getProperty(u,"GetSearchResult.GetSourceDataResult.its.it")||[];r=this.formatData(r),delete this._fz,this.SearchSucceed.fire(this,{FoundData:r}),this._fz=r,this._ResultsBox.setGroups([{Id:"MetabaseObjects",HideText:!0,Items:r}]),this._bgz=n.getProperty(u,"GetSearchResult.GetSourceDataResult.resCount"),this._FoundNumberEl.innerHTML=this._bgz+""},i.prototype._cFH=function(t,i){var u=JSON.parse(i.ResponseText),r=n.getProperty(u,"GetSearchResult.GetSourceDataResult.its.it")||[];r=this.formatData(r),this._fz=this._fz.concat(r),this.SearchSucceed.fire(this,{FoundData:this._fz}),this._ResultsBox.setGroups([{Id:"MetabaseObjects",HideText:!0,Items:this._fz}])},i.prototype._aF2=function(n,t){this.SearchFailed.fire(this,t)},i.prototype._bPb=function(n){while(~n.indexOf("<hlt>"))n=(n+"").replace("<hlt>",'<span class="PPBiSBHighlight">').replace("<\/hlt>","<\/span>");return n},i.prototype.getResCountOnPage=function(){return this._ResCountOnPage},i.prototype.getMetabase=function(){return this._Metabase},i.prototype.getCurrentPage=function(){return this._aVo},i.prototype.getItems=function(){return this._ResultsBox.getItems()},i.prototype.setScrollValue=function(n,t){this._ResultsBox.getScrollBar().setValue(n,t)},i.prototype.formatData=function(t){for(var it=[],i,r,u,c,e,b,l,et,o,k,a,ot,d,g,v,st,f,nt,y,ht,tt,s=0,rt=t.length;s<rt;s++){i=t[s],i.meta=i.meta||{};var ut=[],ft=[],p,h="",w;if(p=i.hlName?this._bPb(i.hlName):n.String.escapeHTML(i.n),i.meta.calenInfo){for(r=undefined,u=undefined,c=0;c<i.meta.calenInfo.Item.length;c++)e=i.meta.calenInfo.Item[c],(r===undefined||r>n.Date.parse(e.v.startDate).getFullYear())&&(r=n.Date.parse(e.v.startDate).getFullYear()),(u===undefined||u<n.Date.parse(e.v.endDate).getFullYear())&&(u=n.Date.parse(e.v.endDate).getFullYear());h=n.resourceManager.getString("Dynamics","BISearchBoxItem")+": ",h+=r!=u?r+" - "+u:r}if(w=i.meta.hlSourceName?this._bPb(i.meta.hlSourceName):n.String.escapeHTML(i.meta.sourceName),i.meta.sel)for(b=i.meta.sel.Item,l=0,et=b.length;l<et;l++){if(o=b[l],k=[],o.v)for(a=0,ot=o.v.Item.length;a<ot;a++)d=o.v.Item[a],k.push({DimKey:d.k,ElKey:d.v});ut.push({FactorKey:o.k,Values:k})}if(i.meta.freeDims)for(g=i.meta.freeDims.Item,v=0,st=g.length;v<st;v++){if(f=g[v],nt=[],f.v)for(y=0,ht=f.v.Item.length;y<ht;y++)tt=f.v.Item[y],nt.push({ElKey:tt.k,ElName:tt.v});ft.push({DimName:f.n,DimKey:f.k,Values:nt})}it.push({FactorName:n.String.escapeHTML(i.n),SourceName:n.String.escapeHTML(i.meta.sourceName),FactorNote:i.note,FactorTime:i.time?i.time.s:null,FreeDimsNames:i.freeDimensions?i.freeDimensions.s:null,oSourceKey:i.meta.sourceKey,SourceClass:i.meta.sourceClassId,SourceSelectionMeta:ut,SourceFreeDimsMeta:ft,FactorToRender:p,DynamicsToRender:h,SourceToRender:w,SOMSearchEntity:i})}return it},i.prototype.search=function(t,i){i=i||{start:0,count:this._ResCountOnPage},this._aVo=i.start,this._cFI=t;var r={text:t,range:i};this._Metabase&&this._Metabase.getSearch(null,r,new n.Delegate(this._aVn,this),new n.Delegate(this._aF2,this))},i.prototype.searchNext=function(){if(this._bgz>this._fz.length){this._aVo=this._aVo+1;var t={text:this._cFI,range:{start:this._aVo*this._ResCountOnPage,count:this._ResCountOnPage}};this._Metabase&&this._Metabase.getSearch(null,t,new n.Delegate(this._cFH,this),new n.Delegate(this._aF2,this))}},i.prototype.setWidth=function(n){t.prototype.setWidth.apply(this,arguments),this._ResultsBox.setWidth(n)},i.prototype.setHeight=function(){t.prototype.setHeight.apply(this,arguments),this._ResultsBox.setHeight(this.getHeight()-this._FoundNumberContainerEl.offsetHeight)},i.prototype.dispose=function(){delete this._Metabase,t.prototype.dispose.call(this)},i}(n.Ui.Control);t.BISearchResultBox=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i._render(),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["SearchSucceed","SearchFailed","ResultItemClick","MovedScroll"])},i.prototype._render=function(){this._initFromHTML("<div class='PPFindListBox'><\/div>"),this._ResultsBox||(this._bPc=new n.Ui.Label({Class:"PPFoundNumberContainer",ParentNode:this._DomNode,ResourceKey:"ExpDataPanelFindLabel"}),this._ResultsBox=new n.Ui.LongListBox({Class:"PPResultsContainer",ParentNode:this._DomNode,ItemsHeight:62,AutoSizeItems:!1,ItemClick:new n.Delegate(this._bgw,this),ItemCreating:new n.Delegate(this._bgx,this),ItemsTemplate:function(t){return["<div class='PPFindListBoxItem' style='width:100%'>","<div class='PPFindItemEllipsis'><strong>"+n.resourceManager.getString("MBTreeListNameCol","Caption")+": "+t.Name+"<\/strong><\/div>","<div class='PPFindItemEllipsis'>"+n.resourceManager.getString("MBTreeListIdCol","Caption")+": "+t.Id+" <\/div>",n.resourceManager.getString("MBTreeListTsCol","Caption")+": "+t.TimeStamp+" <br />",n.resourceManager.getString("MBTreeListTypeCol","Caption")+": "+t.Class,"<\/div>"].join("")}})),this._ResultsBox.getScrollBar().MovedScroll.addOne(this._bgy,this),t.prototype._render.call(this)},i.prototype._bgy=function(n,t){t.ScrollBar=n,this.MovedScroll.fire(this,t)},i.prototype._bgw=function(n,t){this.ResultItemClick.fire(this,t)},i.prototype._bgx=function(n,t){t.Settings={Data:t.DataContext.Descriptor},this._SelectedItems.indexOf(t.DataContext.Key)!=-1&&(t.Settings.Class="PPFindListBoxSelItem")},i.prototype._aVn=function(t,i){this._Metabase.FindObjectsLoaded.remove(this._aVn,this);var r=n.getProperty(i.Objects,"GetObjectsResult.objects.its.d")||[];r=this.formatData(r),delete this._cFJ,this._cFJ=r,this._bgz=(r||[]).length,this.SearchSucceed.fire(this,{FoundData:r}),this._bPc.setContent(n.resourceManager.getString("ExpDataPanelFindLabel","Content")+": "+r.length),this._ResultsBox.setGroups([{Id:"MetabaseObjects",HideText:!0,Items:r}])},i.prototype.getMetabase=function(){return this._Metabase},i.prototype.getClasses=function(){return this._Classes},i.prototype.getSelectedItems=function(){return this._SelectedItems},i.prototype.setClasses=function(n){this._Classes=n},i.prototype.setSelectedItems=function(n){this._SelectedItems=n},i.prototype.getCurrentPage=function(){return 0},i.prototype.getItems=function(){return this._ResultsBox.getItems()},i.prototype.setScrollValue=function(n,t){this._ResultsBox.getScrollBar().setValue(n,t)},i.prototype.formatData=function(t){for(var r=[],o=n.getCurrentCulture(),i=0;i<t.length;i++){var u=n.Date.parse(t[i]["@ts"]),f=n.Mb.Ui.getClassNameById(t[i].c),e=new n.Mb.Descriptor({});e.fillDesc(t[i]),r.push({Name:n.String.escapeHTML(t[i].n),Id:t[i].i,TimeStamp:u?o.dateToStr(u):"",Class:f?n.resourceManager.getString("navClassDesc")[f.replace(/_/g,"")]:"UNKNOWN",Key:t[i].k,Descriptor:e})}return r},i.prototype.search=function(t){this._Metabase.findObjects("Root",{IncludeRoot:!1,HideEmptyFolders:!0,HideAllFolders:!0,FindInfo:{Active:!0,Text:t,Attribute:n.Mb.FindInfoAttribute.Name},Classes:this._Classes},null,null),this._Metabase.FindObjectsLoaded.addOne(this._aVn,this)},i.prototype.searchNext=function(){},i.prototype.setWidth=function(n,i){t.prototype.setWidth.apply(this,arguments),this._ResultsBox.setWidth(n,i)},i.prototype.setHeight=function(n,i){t.prototype.setHeight.apply(this,arguments),this._ResultsBox.setHeight(this.getHeight()-this._bPc.getHeight(),i)},i.prototype.dispose=function(){delete this._Metabase,t.prototype.dispose.call(this)},i}(n.Ui.Control);t.MBSearchResultBox=i})(i=t.Ui||(t.Ui={}))})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this,n)||this;return t.setEnableExpand(!1),t}return __extends(r,i),r.prototype._e=function(){i.prototype._e.call(this),this._FocusToDefaultButton=!1,this._Width=330,this._Height=200,this._ShowOldPass=!0,this._ShowError=!0,this._ImagePath=n.ImagePath,this._AutoClose=!0,this._Text=null},r.prototype._render=function(){i.prototype._render.call(this),this.addClass("PPChangePasswordDialog"),this._Caption||this.setResourceKey("ChangePasswordDialog"),this._PanelItems=[],this._PanelItems.push(new n.Ui.Label({Content:this._Text,Class:"PPChangePasswordText",IsVisible:!!this._Text})),this._ShowOldPass&&(this.setHeight(250),this._PanelItems.push(new n.Ui.Label({ResourceKey:"ChangePasswordOldPass"})),this._PanelItems.push(new n.Ui.TextBox({IsPassword:!0,Id:"oldPassTextEdit"}))),this._PanelItems.push(new n.Ui.Label({ResourceKey:"ChangePasswordNewPass"})),this._PanelItems.push(new n.Ui.TextBox({IsPassword:!0,Id:"newPassTextEdit"})),this._PanelItems.push(new n.Ui.Label({ResourceKey:"ChangePasswordConfirmPass"})),this._PanelItems.push(new n.Ui.TextBox({IsPassword:!0}));for(var t=0;t<this._PanelItems.length;t++)this._PanelItems[t].addToNode(this._DialogContentDomNode)},r.prototype._cFK=function(){n.clearTimeout(this._cFL),this._bPd()},r.prototype._bPd=function(){this.getItem(2).setFocus()},r.prototype._aN=function(n,t){this.OkButtonClicked.fire(this,t),this._ShowError&&!this.checkConfirmPass()&&this.showError("ChangePasswordConfirmError"),this._AutoClose&&this.close()},r.prototype._yc=function(n){var i=this.getItem(n);return i instanceof t.TextBox?i.getValue():""},r.prototype.show=function(){i.prototype.show.call(this),this._cFL=n.setTimeout(this._cFK,100,null,this)},r.prototype.setFocus=function(){i.prototype.setFocus.call(this),this._bPd()},r.prototype.showError=function(t){return this._ErrorMessage&&this._ErrorMessage.dispose(),this._ErrorMessage=new n.Ui.Message({Type:n.Ui.MessageType.Error,ResourceKey:t,Caption:n.resourceManager.getString("Caption","ErrorMessage"),ImagePath:this._ImagePath}),this._ErrorMessage.show(),this._ErrorMessage},r.prototype.getOldPass=function(){return this._ShowOldPass?this._yc(2):""},r.prototype.getNewPass=function(){return this._yc(this._ShowOldPass?4:2)},r.prototype.getConfirmPass=function(){return this._yc(this._ShowOldPass?6:4)},r.prototype.checkConfirmPass=function(){return this.getNewPass()===this.getConfirmPass()},r.prototype.getItem=function(n){return this._PanelItems[n]},r.prototype.clear=function(){for(var n=2;n<this._PanelItems.length;n+=2)this._PanelItems[n].setValue("")},r}(t.Dialog);t.ChangePasswordDialog=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._ImagePath=n.ImagePath,this._ObjectName="",this._ObjectId="",this._ObjectNameSuffix="",this._ObjectIdSuffix="",this._Height=238,this._Width=360,this._MinDropDownWidth=300,this._ResourceKey="copyDialog",this._EnableExpand=!1},i.prototype._initFields=function(n){n.Caption&&(n.ResourceKey=n.Caption),t.prototype._initFields.call(this,n)},i.prototype._render=function(){t.prototype._render.call(this);var i={Name:n.createElement(this._DialogContentDomNode,"PPCopyDialogName"),Id:n.createElement(this._DialogContentDomNode,"PPCopyDialogId"),Sep1:n.createElement(this._DialogContentDomNode,"PPCopyDialogSeparator"),NameNew:n.createElement(this._DialogContentDomNode,"PPCopyDialogNameNew"),NameInput:n.createElement(this._DialogContentDomNode,"PPCopyDialogNameInput"),IdNew:n.createElement(this._DialogContentDomNode,"PPCopyDialogIdNew"),IdInput:n.createElement(this._DialogContentDomNode,"PPCopyDialogIdInput")};this._bgm=new n.Ui.Label({ResourceKey:"copyDialogName",ParentNode:i.Name}),this._bPe=new n.Ui.Label({ParentNode:i.Name,Class:"PPCopyDialogNameLbl"}),this.setObjectName(this._ObjectName),this._bO1=new n.Ui.Label({ResourceKey:"copyDialogId",ParentNode:i.Id}),this._aBE=new n.Ui.Label({ParentNode:i.Id}),this.setObjectId(this._ObjectId),new n.Ui.Label({ResourceKey:"copyDialogNameNew",ParentNode:i.NameNew}),this._aVp=new n.Ui.TextBox({ParentNode:i.NameInput,Class:"PPCopyDialogInput",Content:this._ObjectName}),new n.Ui.Label({ResourceKey:"copyDialogIdNew",ParentNode:i.IdNew}),this._aVq=new n.Ui.TextBox({ParentNode:i.IdInput,Class:"PPCopyDialogInput",Content:this._ObjectId}),this._aVq.setRestrictedSymbols("[]{},.;':=+-\\|/*!~?@#$%^&()`><№\" "),this.addClass("PPCopyDialog")},i.prototype._aN=function(){var f=this.getDialogResult(),u;if(f.Name==""){u=new n.Ui.Message({Type:n.Ui.MessageType.Error,ImagePath:this._ImagePath,ResourceKey:"emptyObjectName",Caption:n.resourceManager.getString("Caption","ErrorMessage"),Height:120,Width:400,Closed:new n.Delegate(this._cFM,this),EnableRestoreFocus:!1}),u.show();return}t.prototype._aN.apply(this,arguments)},i.prototype._iJ=function(){t.prototype._iJ.apply(this,arguments),this._bPe.setWidth(this.getWidth()-this._bgm.getWidth()-25)},i.prototype._cFM=function(){this._aVp.setFocus()},i.prototype._bPf=function(n,t){var r=t==="ObjectName"?this._aVp:this._aVq,i;r&&(i=this["get"+t+"New"](),i=i.replace(this["get"+t+"Suffix"](),""),this["set"+t+"New"](i))},i.prototype.getDialogResult=function(){return{Name:this.getObjectNameNew(),Id:this.getObjectIdNew()}},i.prototype.setObjectName=function(t){this._ObjectName=t,this._bPe.setContent(n.String.escapeHTML(t))},i.prototype.setObjectId=function(t){this._ObjectId=t;var i=n.String.escapeHTML(t);this._aBE.setContent(n.String.ellipsis(i,40))},i.prototype.setObjectNameSuffix=function(n){this._bPf(n,"ObjectName"),this._ObjectNameSuffix=n},i.prototype.setObjectIdSuffix=function(n){this._bPf(n,"ObjectId"),this._ObjectIdSuffix=n},i.prototype.setObjectNameNew=function(t){this._aVp.setValue(n.String.escapeHTML(t+this.getObjectNameSuffix()))},i.prototype.setObjectIdNew=function(t){this._aVq.setValue(n.String.escapeHTML(t+this.getObjectIdSuffix()))},i.prototype.getObjectNameSuffix=function(){return this._ObjectNameSuffix},i.prototype.getObjectIdSuffix=function(){return this._ObjectIdSuffix},i.prototype.getObjectName=function(){return this._ObjectName},i.prototype.getObjectId=function(){return this._ObjectId},i.prototype.getObjectNameNew=function(){return this._aVp.getValue()},i.prototype.getObjectIdNew=function(){return this._aVq.getValue()},i}(t.Dialog);t.CopyDialog=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this,n)||this;return i.setEnableExpand(!1),i}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._ResourceKey="WarningExportMessage",this._EnableResizeBottom=!0,this._EnableResizeTop=!0,this._EnableResizeLeft=!0,this._EnableResizeRight=!0,this._MinWidth=430,this._MinHeight=150,this._Width=550,this._Height=200,this._ImagePath=null,this._Warnings=[]},i.prototype._render=function(){t.prototype._render.call(this),n.addClass(this._DomNode,"PPWarningMessage"),this._OkButton.setResourceKey("ExportWarnDlgButton"),this._CancelButton.hide(),this._ListContent=new n.Ui.ListBox({ParentNode:this._DialogContentDomNode,Class:"MessageListContent",ImageList:new n.ImageList({Source:this._ImagePath+"bullet.png",IconHeight:8,IconWidth:8}),IsRTL:this._IsRTL}),this.setWarnings(this._Warnings)},i.prototype.show=function(n,i,r,u){t.prototype.show.call(this,n,i,r,u),this.updateSize()},i.prototype.setIsRTL=function(n){t.prototype.setIsRTL.call(this,n),this._ListContent&&this._ListContent.setIsRTL(n)},i.prototype.setWarnings=function(t){this._Warnings=n.Array.isArray(t)?t:[t],this._ListContent.beginUpdate(),this._ListContent.clear();for(var i=0;i<this._Warnings.length;i++)this._ListContent.addItem(new n.Ui.ListItem({Content:this._Warnings[i],ColumnIndex:0,RowIndex:0}));this._ListContent.endUpdate()},i.prototype.updateSize=function(){this._ListContent&&(this._ListContent.setWidth(this.getContentWidth()),this._ListContent.setHeight(this.getContentHeight()),this._dP())},i.prototype.setWidth=function(n,i){if(this._Width!==n){var u=this._g(this._Width),r=this._g(n);r!=0&&r-u<0&&this._ListContent.setWidth(this._ListContent.getWidth()-(u-r)),t.prototype.setWidth.call(this,n,i),this.updateSize()}},i.prototype.setHeight=function(n,i){if(this._Height!==n){var u=this._g(this._Height),r=this._g(n);r!=0&&r-u<0&&this._ListContent.setHeight(this._ListContent.getHeight()-(u-r)),t.prototype.setHeight.call(this,n,i),this.updateSize()}},i.prototype.getWarnings=function(){return this._Warnings},i}(t.Dialog);t.ExportWarningMessage=i})(t=n.Ui||(n.Ui={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._bgA=[],this._Delay=1e3,this._CloseOnExecute=!0,this._defineEvents(["StateChecked"])},i.prototype._aF3=function(t,i){var r=n.getProperty(i,"Args.Callback");this._Etl=i.Etl,r.fire(this,i)},i.prototype._cFN=function(t,i){var r=n.getProperty(i,"Args.Callback"),u=i.Etl;n.setTimeout(this._bPg,this._Delay,{Etl:u,Callback:r},this)},i.prototype._bPg=function(t){var i=t.Callback,r=t.Etl;this._Service.check(r,new n.Delegate(this._cFO,this,{Callback:i}))},i.prototype._cFO=function(t,i){var u=n.getProperty(i,"Args.Callback"),r=i.Etl;this.StateChecked.fire(this,{Etl:r}),r.getExecuteState()==n.Mb.EtlTaskExecuteState.Running?n.setTimeout(this._bPg,this._Delay,{Etl:r,Callback:u},this):(this._Service.endRequest(),this._CloseOnExecute?this._Service.close(r,new n.Delegate(this._bMU,this,{Callback:u})):u.fire(this,{Etl:r,State:r.getExecuteState()}))},i.prototype._bMU=function(t,i){var u=n.getProperty(i,"Args.Callback"),r=i.Etl;u.fire(this,{Etl:r,State:r.getExecuteState()})},i.prototype.open=function(t,i){return this._Service.open(t,new n.Delegate(this._aF3,this,{Callback:i}))},i.prototype.edit=function(t,i){return this._Service.edit(t,new n.Delegate(this._aF3,this,{Callback:i}))},i.prototype.run=function(t,i){if(this._Etl)return this._Service.beginRequest(),this._Service.run(this._Etl,this._bgA,new n.Delegate(this._cFN,this,{Callback:i}))},i.prototype.addMissedFile=function(n){this._bgA.push(n)},i.prototype.clearMissedFiles=function(){this._bgA=[]},i}(n.Object);t.EtlHelper=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._e=function(){t.prototype._e.call(this),this._defineEvents(["MetadataLoaded"])},i.prototype.openStyleSheet=function(t,i,r,u){var e,f,o;if(i=i||{},e=null,f=null,t instanceof n.Mb.StyleSheet?(e=t.getOdId(),f=t):this._Metabase&&this._Metabase.isLive()&&(e=this._Metabase.getObjectOdId(t),f=new n.Mb.StyleSheet({PPService:this})),!e)throw new n.ArgumentException(this,"Invalid arguments. Can't specify OdId.");return f.setIsDataLoading(!0),o={OpenStyleSheet:{tObject:e,tArg:{metaGet:i.metaGet}}},u=this._s(u,new n.Delegate(this._aVr,this,{StyleSheet:f,OpArgs:i})),r=this._s(r,new n.Delegate(this._cFP,this,{StyleSheet:f,OpArgs:i})),this._h(o,r,u),f},i.prototype.getStyleSheetMd=function(t,i,r,u){if(!t||!t.isLive()||!t.getIsOpened())throw new n.ArgumentException(this,"Invalid arguments. StyleSheet most be instance of PP.Mb.StyleSheet.");t.setIsDataLoading(!0),i=i||{};var f={GetStyleSheet:{tStyleSheet:t.getOdId(),tArg:{pattern:i.pattern||{}}}};u=this._s(u,new n.Delegate(this._aVr,this,{StyleSheet:t,OpArgs:i})),r=this._s(r,new n.Delegate(this._cFQ,this,{StyleSheet:t,OpArgs:i})),this._h(f,r,u)},i.prototype.copyStyleSheet=function(t,i,r,u,f){var e=null,o=null,s;if(t instanceof n.Mb.StyleSheet?e=t.getOdId():this._Metabase&&this._Metabase.isLive()&&(e=this._Metabase.getObjectOdId(t)),i instanceof n.Mb.StyleSheet?o=i.getOdId():this._Metabase&&this._Metabase.isLive()&&(o=this._Metabase.getObjectOdId(i)),!e||!o)throw new n.ArgumentException(this,"Invalid arguments. Can't specify OdId.");r=r||{},s={CopyStyleSheet:{tStyleSheetFrom:e,tStyleSheetTo:o,tArg:{resolution:r.resolution,items:r.items?{it:r.items}:undefined}}},i instanceof n.Mb.StyleSheet&&(i.setIsDataLoading(!0),f=this._s(f,new n.Delegate(this._aVr,this,{StyleSheet:i,OpArgs:r})),u=this._s(u,new n.Delegate(this._aVr,this,{StyleSheet:i,OpArgs:r}))),this._h(s,u,f)},i.prototype._cFQ=function(t,i){var r=i.Response,u=n.getProperty(r,"GetStyleSheetResult.id"),f=n.getProperty(r,"GetStyleSheetResult.meta");this._bPh(i,u,f)},i.prototype._cFP=function(t,i){var r=i.Response,u=n.getProperty(r,"OpenStyleSheetResult.id"),f=n.getProperty(r,"OpenStyleSheetResult.meta");this._bPh(i,u,f)},i.prototype._bPh=function(t,i,r){var u=t.Args.StyleSheet,f=t.Args.OpArgs;u&&u.isLive()&&(n.isDefined(i)&&u.setOdId(i),n.isDefined(r)&&u.setMetadata(r),u.setIsDataLoading(!1),(f&&f.fireEvent)!==!1&&this.MetadataLoaded.fire(this,t.Args))},i.prototype._aVr=function(n,t){var i=t.Args.StyleSheet;i&&i.isLive()&&i.setIsDataLoading(!1)},i}(t.BiService);t.StyleSheetService=i})(t=n.Mb||(n.Mb={}))}(n||(n={})),r=n.Mb.Ui.BaseMView={},r._aS=function(n,t){this.MetadataChanged.fire(this,t)},r.getService=function(){return this._Service},r.setService=function(n){this._Service=n,this._Ctrl.setService(n)},r.setSource=function(t,i){n.getBaseMethod(this.constructor,n.Mb.Ui.BaseMView.setSource,"setSource").apply(this,arguments),i&&this._Ctrl.setService(i)},r.dispose=function(){delete this._Source,delete this._Service,delete this._DataView;var t=n.getBaseMethod(this.constructor,n.Mb.Ui.BaseMView.dispose,"dispose");!t&&this.constructor.base&&(t=this.constructor.base.dispose),t&&t.apply(this,arguments)},r.getInstance=function(){throw n.NotImplementedException(this);},r.getDVSynchronizable=function(){var t=this.getInstance();return t&&n.isInterfaceOf(t,n.Ui.IDVSynchronizable,!1)?t:null},r=null})();
